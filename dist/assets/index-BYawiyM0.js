(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();function FE(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var vm={exports:{}},Jl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zv;function nI(){if(zv)return Jl;zv=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,s,a){var u=null;if(a!==void 0&&(u=""+a),s.key!==void 0&&(u=""+s.key),"key"in s){a={};for(var f in s)f!=="key"&&(a[f]=s[f])}else a=s;return s=a.ref,{$$typeof:i,type:n,key:u,ref:s!==void 0?s:null,props:a}}return Jl.Fragment=e,Jl.jsx=t,Jl.jsxs=t,Jl}var Bv;function iI(){return Bv||(Bv=1,vm.exports=nI()),vm.exports}var N=iI(),Tm={exports:{}},Be={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fv;function rI(){if(Fv)return Be;Fv=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),A=Symbol.iterator;function S(P){return P===null||typeof P!="object"?null:(P=A&&P[A]||P["@@iterator"],typeof P=="function"?P:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V=Object.assign,H={};function Y(P,W,ie){this.props=P,this.context=W,this.refs=H,this.updater=ie||R}Y.prototype.isReactComponent={},Y.prototype.setState=function(P,W){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,W,"setState")},Y.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function ce(){}ce.prototype=Y.prototype;function le(P,W,ie){this.props=P,this.context=W,this.refs=H,this.updater=ie||R}var oe=le.prototype=new ce;oe.constructor=le,V(oe,Y.prototype),oe.isPureReactComponent=!0;var pe=Array.isArray,fe={H:null,A:null,T:null,S:null,V:null},Te=Object.prototype.hasOwnProperty;function O(P,W,ie,Z,Ce,Le){return ie=Le.ref,{$$typeof:i,type:P,key:W,ref:ie!==void 0?ie:null,props:Le}}function b(P,W){return O(P.type,W,void 0,void 0,void 0,P.props)}function x(P){return typeof P=="object"&&P!==null&&P.$$typeof===i}function k(P){var W={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(ie){return W[ie]})}var U=/\/+/g;function z(P,W){return typeof P=="object"&&P!==null&&P.key!=null?k(""+P.key):W.toString(36)}function D(){}function We(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(D,D):(P.status="pending",P.then(function(W){P.status==="pending"&&(P.status="fulfilled",P.value=W)},function(W){P.status==="pending"&&(P.status="rejected",P.reason=W)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function rt(P,W,ie,Z,Ce){var Le=typeof P;(Le==="undefined"||Le==="boolean")&&(P=null);var be=!1;if(P===null)be=!0;else switch(Le){case"bigint":case"string":case"number":be=!0;break;case"object":switch(P.$$typeof){case i:case e:be=!0;break;case v:return be=P._init,rt(be(P._payload),W,ie,Z,Ce)}}if(be)return Ce=Ce(P),be=Z===""?"."+z(P,0):Z,pe(Ce)?(ie="",be!=null&&(ie=be.replace(U,"$&/")+"/"),rt(Ce,W,ie,"",function(yn){return yn})):Ce!=null&&(x(Ce)&&(Ce=b(Ce,ie+(Ce.key==null||P&&P.key===Ce.key?"":(""+Ce.key).replace(U,"$&/")+"/")+be)),W.push(Ce)),1;be=0;var Rt=Z===""?".":Z+":";if(pe(P))for(var ut=0;ut<P.length;ut++)Z=P[ut],Le=Rt+z(Z,ut),be+=rt(Z,W,ie,Le,Ce);else if(ut=S(P),typeof ut=="function")for(P=ut.call(P),ut=0;!(Z=P.next()).done;)Z=Z.value,Le=Rt+z(Z,ut++),be+=rt(Z,W,ie,Le,Ce);else if(Le==="object"){if(typeof P.then=="function")return rt(We(P),W,ie,Z,Ce);throw W=String(P),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return be}function J(P,W,ie){if(P==null)return P;var Z=[],Ce=0;return rt(P,Z,"","",function(Le){return W.call(ie,Le,Ce++)}),Z}function X(P){if(P._status===-1){var W=P._result;W=W(),W.then(function(ie){(P._status===0||P._status===-1)&&(P._status=1,P._result=ie)},function(ie){(P._status===0||P._status===-1)&&(P._status=2,P._result=ie)}),P._status===-1&&(P._status=0,P._result=W)}if(P._status===1)return P._result.default;throw P._result}var de=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)};function Ne(){}return Be.Children={map:J,forEach:function(P,W,ie){J(P,function(){W.apply(this,arguments)},ie)},count:function(P){var W=0;return J(P,function(){W++}),W},toArray:function(P){return J(P,function(W){return W})||[]},only:function(P){if(!x(P))throw Error("React.Children.only expected to receive a single React element child.");return P}},Be.Component=Y,Be.Fragment=t,Be.Profiler=s,Be.PureComponent=le,Be.StrictMode=n,Be.Suspense=y,Be.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=fe,Be.__COMPILER_RUNTIME={__proto__:null,c:function(P){return fe.H.useMemoCache(P)}},Be.cache=function(P){return function(){return P.apply(null,arguments)}},Be.cloneElement=function(P,W,ie){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var Z=V({},P.props),Ce=P.key,Le=void 0;if(W!=null)for(be in W.ref!==void 0&&(Le=void 0),W.key!==void 0&&(Ce=""+W.key),W)!Te.call(W,be)||be==="key"||be==="__self"||be==="__source"||be==="ref"&&W.ref===void 0||(Z[be]=W[be]);var be=arguments.length-2;if(be===1)Z.children=ie;else if(1<be){for(var Rt=Array(be),ut=0;ut<be;ut++)Rt[ut]=arguments[ut+2];Z.children=Rt}return O(P.type,Ce,void 0,void 0,Le,Z)},Be.createContext=function(P){return P={$$typeof:u,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:a,_context:P},P},Be.createElement=function(P,W,ie){var Z,Ce={},Le=null;if(W!=null)for(Z in W.key!==void 0&&(Le=""+W.key),W)Te.call(W,Z)&&Z!=="key"&&Z!=="__self"&&Z!=="__source"&&(Ce[Z]=W[Z]);var be=arguments.length-2;if(be===1)Ce.children=ie;else if(1<be){for(var Rt=Array(be),ut=0;ut<be;ut++)Rt[ut]=arguments[ut+2];Ce.children=Rt}if(P&&P.defaultProps)for(Z in be=P.defaultProps,be)Ce[Z]===void 0&&(Ce[Z]=be[Z]);return O(P,Le,void 0,void 0,null,Ce)},Be.createRef=function(){return{current:null}},Be.forwardRef=function(P){return{$$typeof:f,render:P}},Be.isValidElement=x,Be.lazy=function(P){return{$$typeof:v,_payload:{_status:-1,_result:P},_init:X}},Be.memo=function(P,W){return{$$typeof:g,type:P,compare:W===void 0?null:W}},Be.startTransition=function(P){var W=fe.T,ie={};fe.T=ie;try{var Z=P(),Ce=fe.S;Ce!==null&&Ce(ie,Z),typeof Z=="object"&&Z!==null&&typeof Z.then=="function"&&Z.then(Ne,de)}catch(Le){de(Le)}finally{fe.T=W}},Be.unstable_useCacheRefresh=function(){return fe.H.useCacheRefresh()},Be.use=function(P){return fe.H.use(P)},Be.useActionState=function(P,W,ie){return fe.H.useActionState(P,W,ie)},Be.useCallback=function(P,W){return fe.H.useCallback(P,W)},Be.useContext=function(P){return fe.H.useContext(P)},Be.useDebugValue=function(){},Be.useDeferredValue=function(P,W){return fe.H.useDeferredValue(P,W)},Be.useEffect=function(P,W,ie){var Z=fe.H;if(typeof ie=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Z.useEffect(P,W)},Be.useId=function(){return fe.H.useId()},Be.useImperativeHandle=function(P,W,ie){return fe.H.useImperativeHandle(P,W,ie)},Be.useInsertionEffect=function(P,W){return fe.H.useInsertionEffect(P,W)},Be.useLayoutEffect=function(P,W){return fe.H.useLayoutEffect(P,W)},Be.useMemo=function(P,W){return fe.H.useMemo(P,W)},Be.useOptimistic=function(P,W){return fe.H.useOptimistic(P,W)},Be.useReducer=function(P,W,ie){return fe.H.useReducer(P,W,ie)},Be.useRef=function(P){return fe.H.useRef(P)},Be.useState=function(P){return fe.H.useState(P)},Be.useSyncExternalStore=function(P,W,ie){return fe.H.useSyncExternalStore(P,W,ie)},Be.useTransition=function(){return fe.H.useTransition()},Be.version="19.1.1",Be}var qv;function Np(){return qv||(qv=1,Tm.exports=rI()),Tm.exports}var Ie=Np();const qE=FE(Ie);var Em={exports:{}},Xl={},Cm={exports:{}},Am={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gv;function sI(){return Gv||(Gv=1,function(i){function e(J,X){var de=J.length;J.push(X);e:for(;0<de;){var Ne=de-1>>>1,P=J[Ne];if(0<s(P,X))J[Ne]=X,J[de]=P,de=Ne;else break e}}function t(J){return J.length===0?null:J[0]}function n(J){if(J.length===0)return null;var X=J[0],de=J.pop();if(de!==X){J[0]=de;e:for(var Ne=0,P=J.length,W=P>>>1;Ne<W;){var ie=2*(Ne+1)-1,Z=J[ie],Ce=ie+1,Le=J[Ce];if(0>s(Z,de))Ce<P&&0>s(Le,Z)?(J[Ne]=Le,J[Ce]=de,Ne=Ce):(J[Ne]=Z,J[ie]=de,Ne=ie);else if(Ce<P&&0>s(Le,de))J[Ne]=Le,J[Ce]=de,Ne=Ce;else break e}}return X}function s(J,X){var de=J.sortIndex-X.sortIndex;return de!==0?de:J.id-X.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;i.unstable_now=function(){return a.now()}}else{var u=Date,f=u.now();i.unstable_now=function(){return u.now()-f}}var y=[],g=[],v=1,A=null,S=3,R=!1,V=!1,H=!1,Y=!1,ce=typeof setTimeout=="function"?setTimeout:null,le=typeof clearTimeout=="function"?clearTimeout:null,oe=typeof setImmediate<"u"?setImmediate:null;function pe(J){for(var X=t(g);X!==null;){if(X.callback===null)n(g);else if(X.startTime<=J)n(g),X.sortIndex=X.expirationTime,e(y,X);else break;X=t(g)}}function fe(J){if(H=!1,pe(J),!V)if(t(y)!==null)V=!0,Te||(Te=!0,z());else{var X=t(g);X!==null&&rt(fe,X.startTime-J)}}var Te=!1,O=-1,b=5,x=-1;function k(){return Y?!0:!(i.unstable_now()-x<b)}function U(){if(Y=!1,Te){var J=i.unstable_now();x=J;var X=!0;try{e:{V=!1,H&&(H=!1,le(O),O=-1),R=!0;var de=S;try{t:{for(pe(J),A=t(y);A!==null&&!(A.expirationTime>J&&k());){var Ne=A.callback;if(typeof Ne=="function"){A.callback=null,S=A.priorityLevel;var P=Ne(A.expirationTime<=J);if(J=i.unstable_now(),typeof P=="function"){A.callback=P,pe(J),X=!0;break t}A===t(y)&&n(y),pe(J)}else n(y);A=t(y)}if(A!==null)X=!0;else{var W=t(g);W!==null&&rt(fe,W.startTime-J),X=!1}}break e}finally{A=null,S=de,R=!1}X=void 0}}finally{X?z():Te=!1}}}var z;if(typeof oe=="function")z=function(){oe(U)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,We=D.port2;D.port1.onmessage=U,z=function(){We.postMessage(null)}}else z=function(){ce(U,0)};function rt(J,X){O=ce(function(){J(i.unstable_now())},X)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(J){J.callback=null},i.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<J?Math.floor(1e3/J):5},i.unstable_getCurrentPriorityLevel=function(){return S},i.unstable_next=function(J){switch(S){case 1:case 2:case 3:var X=3;break;default:X=S}var de=S;S=X;try{return J()}finally{S=de}},i.unstable_requestPaint=function(){Y=!0},i.unstable_runWithPriority=function(J,X){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var de=S;S=J;try{return X()}finally{S=de}},i.unstable_scheduleCallback=function(J,X,de){var Ne=i.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?Ne+de:Ne):de=Ne,J){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=de+P,J={id:v++,callback:X,priorityLevel:J,startTime:de,expirationTime:P,sortIndex:-1},de>Ne?(J.sortIndex=de,e(g,J),t(y)===null&&J===t(g)&&(H?(le(O),O=-1):H=!0,rt(fe,de-Ne))):(J.sortIndex=P,e(y,J),V||R||(V=!0,Te||(Te=!0,z()))),J},i.unstable_shouldYield=k,i.unstable_wrapCallback=function(J){var X=S;return function(){var de=S;S=X;try{return J.apply(this,arguments)}finally{S=de}}}}(Am)),Am}var Hv;function oI(){return Hv||(Hv=1,Cm.exports=sI()),Cm.exports}var Sm={exports:{}},dn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kv;function aI(){if(Kv)return dn;Kv=1;var i=Np();function e(y){var g="https://react.dev/errors/"+y;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)g+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+y+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var n={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(y,g,v){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:A==null?null:""+A,children:y,containerInfo:g,implementation:v}}var u=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(y,g){if(y==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return dn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,dn.createPortal=function(y,g){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return a(y,g,null,v)},dn.flushSync=function(y){var g=u.T,v=n.p;try{if(u.T=null,n.p=2,y)return y()}finally{u.T=g,n.p=v,n.d.f()}},dn.preconnect=function(y,g){typeof y=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,n.d.C(y,g))},dn.prefetchDNS=function(y){typeof y=="string"&&n.d.D(y)},dn.preinit=function(y,g){if(typeof y=="string"&&g&&typeof g.as=="string"){var v=g.as,A=f(v,g.crossOrigin),S=typeof g.integrity=="string"?g.integrity:void 0,R=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;v==="style"?n.d.S(y,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:A,integrity:S,fetchPriority:R}):v==="script"&&n.d.X(y,{crossOrigin:A,integrity:S,fetchPriority:R,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},dn.preinitModule=function(y,g){if(typeof y=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var v=f(g.as,g.crossOrigin);n.d.M(y,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&n.d.M(y)},dn.preload=function(y,g){if(typeof y=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var v=g.as,A=f(v,g.crossOrigin);n.d.L(y,v,{crossOrigin:A,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},dn.preloadModule=function(y,g){if(typeof y=="string")if(g){var v=f(g.as,g.crossOrigin);n.d.m(y,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else n.d.m(y)},dn.requestFormReset=function(y){n.d.r(y)},dn.unstable_batchedUpdates=function(y,g){return y(g)},dn.useFormState=function(y,g,v){return u.H.useFormState(y,g,v)},dn.useFormStatus=function(){return u.H.useHostTransitionStatus()},dn.version="19.1.1",dn}var Yv;function lI(){if(Yv)return Sm.exports;Yv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Sm.exports=aI(),Sm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $v;function uI(){if($v)return Xl;$v=1;var i=oI(),e=Np(),t=lI();function n(r){var o="https://react.dev/errors/"+r;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+r+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function a(r){var o=r,l=r;if(r.alternate)for(;o.return;)o=o.return;else{r=o;do o=r,(o.flags&4098)!==0&&(l=o.return),r=o.return;while(r)}return o.tag===3?l:null}function u(r){if(r.tag===13){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function f(r){if(a(r)!==r)throw Error(n(188))}function y(r){var o=r.alternate;if(!o){if(o=a(r),o===null)throw Error(n(188));return o!==r?null:r}for(var l=r,c=o;;){var p=l.return;if(p===null)break;var _=p.alternate;if(_===null){if(c=p.return,c!==null){l=c;continue}break}if(p.child===_.child){for(_=p.child;_;){if(_===l)return f(p),r;if(_===c)return f(p),o;_=_.sibling}throw Error(n(188))}if(l.return!==c.return)l=p,c=_;else{for(var C=!1,w=p.child;w;){if(w===l){C=!0,l=p,c=_;break}if(w===c){C=!0,c=p,l=_;break}w=w.sibling}if(!C){for(w=_.child;w;){if(w===l){C=!0,l=_,c=p;break}if(w===c){C=!0,c=_,l=p;break}w=w.sibling}if(!C)throw Error(n(189))}}if(l.alternate!==c)throw Error(n(190))}if(l.tag!==3)throw Error(n(188));return l.stateNode.current===l?r:o}function g(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r;for(r=r.child;r!==null;){if(o=g(r),o!==null)return o;r=r.sibling}return null}var v=Object.assign,A=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),R=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),H=Symbol.for("react.strict_mode"),Y=Symbol.for("react.profiler"),ce=Symbol.for("react.provider"),le=Symbol.for("react.consumer"),oe=Symbol.for("react.context"),pe=Symbol.for("react.forward_ref"),fe=Symbol.for("react.suspense"),Te=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function z(r){return r===null||typeof r!="object"?null:(r=U&&r[U]||r["@@iterator"],typeof r=="function"?r:null)}var D=Symbol.for("react.client.reference");function We(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===D?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case V:return"Fragment";case Y:return"Profiler";case H:return"StrictMode";case fe:return"Suspense";case Te:return"SuspenseList";case x:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case R:return"Portal";case oe:return(r.displayName||"Context")+".Provider";case le:return(r._context.displayName||"Context")+".Consumer";case pe:var o=r.render;return r=r.displayName,r||(r=o.displayName||o.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case O:return o=r.displayName||null,o!==null?o:We(r.type)||"Memo";case b:o=r._payload,r=r._init;try{return We(r(o))}catch{}}return null}var rt=Array.isArray,J=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de={pending:!1,data:null,method:null,action:null},Ne=[],P=-1;function W(r){return{current:r}}function ie(r){0>P||(r.current=Ne[P],Ne[P]=null,P--)}function Z(r,o){P++,Ne[P]=r.current,r.current=o}var Ce=W(null),Le=W(null),be=W(null),Rt=W(null);function ut(r,o){switch(Z(be,o),Z(Le,r),Z(Ce,null),o.nodeType){case 9:case 11:r=(r=o.documentElement)&&(r=r.namespaceURI)?hv(r):0;break;default:if(r=o.tagName,o=o.namespaceURI)o=hv(o),r=mv(o,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}ie(Ce),Z(Ce,r)}function yn(){ie(Ce),ie(Le),ie(be)}function pi(r){r.memoizedState!==null&&Z(Rt,r);var o=Ce.current,l=mv(o,r.type);o!==l&&(Z(Le,r),Z(Ce,l))}function Rn(r){Le.current===r&&(ie(Ce),ie(Le)),Rt.current===r&&(ie(Rt),Kl._currentValue=de)}var gi=Object.prototype.hasOwnProperty,yi=i.unstable_scheduleCallback,_n=i.unstable_cancelCallback,As=i.unstable_shouldYield,Eo=i.unstable_requestPaint,xn=i.unstable_now,Ya=i.unstable_getCurrentPriorityLevel,br=i.unstable_ImmediatePriority,Ss=i.unstable_UserBlockingPriority,ii=i.unstable_NormalPriority,Co=i.unstable_LowPriority,Gi=i.unstable_IdlePriority,Nr=i.log,ws=i.unstable_setDisableYieldValue,gt=null,re=null;function ye(r){if(typeof Nr=="function"&&ws(r),re&&typeof re.setStrictMode=="function")try{re.setStrictMode(gt,r)}catch{}}var he=Math.clz32?Math.clz32:un,yt=Math.log,Kt=Math.LN2;function un(r){return r>>>=0,r===0?32:31-(yt(r)/Kt|0)|0}var cn=256,vn=4194304;function Tn(r){var o=r&42;if(o!==0)return o;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function ri(r,o,l){var c=r.pendingLanes;if(c===0)return 0;var p=0,_=r.suspendedLanes,C=r.pingedLanes;r=r.warmLanes;var w=c&134217727;return w!==0?(c=w&~_,c!==0?p=Tn(c):(C&=w,C!==0?p=Tn(C):l||(l=w&~r,l!==0&&(p=Tn(l))))):(w=c&~_,w!==0?p=Tn(w):C!==0?p=Tn(C):l||(l=c&~r,l!==0&&(p=Tn(l)))),p===0?0:o!==0&&o!==p&&(o&_)===0&&(_=p&-p,l=o&-o,_>=l||_===32&&(l&4194048)!==0)?o:p}function Hi(r,o){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&o)===0}function Ki(r,o){switch(r){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function si(){var r=cn;return cn<<=1,(cn&4194048)===0&&(cn=256),r}function $a(){var r=vn;return vn<<=1,(vn&62914560)===0&&(vn=4194304),r}function Yi(r){for(var o=[],l=0;31>l;l++)o.push(r);return o}function $i(r,o){r.pendingLanes|=o,o!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Qa(r,o,l,c,p,_){var C=r.pendingLanes;r.pendingLanes=l,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=l,r.entangledLanes&=l,r.errorRecoveryDisabledLanes&=l,r.shellSuspendCounter=0;var w=r.entanglements,M=r.expirationTimes,G=r.hiddenUpdates;for(l=C&~l;0<l;){var j=31-he(l),te=1<<j;w[j]=0,M[j]=-1;var K=G[j];if(K!==null)for(G[j]=null,j=0;j<K.length;j++){var $=K[j];$!==null&&($.lane&=-536870913)}l&=~te}c!==0&&_i(r,c,0),_!==0&&p===0&&r.tag!==0&&(r.suspendedLanes|=_&~(C&~o))}function _i(r,o,l){r.pendingLanes|=o,r.suspendedLanes&=~o;var c=31-he(o);r.entangledLanes|=o,r.entanglements[c]=r.entanglements[c]|1073741824|l&4194090}function Wa(r,o){var l=r.entangledLanes|=o;for(r=r.entanglements;l;){var c=31-he(l),p=1<<c;p&o|r[c]&o&&(r[c]|=o),l&=~p}}function Mr(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Ao(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Dr(){var r=X.p;return r!==0?r:(r=window.event,r===void 0?32:Pv(r.type))}function Uu(r,o){var l=X.p;try{return X.p=r,o()}finally{X.p=l}}var Tt=Math.random().toString(36).slice(2),zt="__reactFiber$"+Tt,Dt="__reactProps$"+Tt,Gn="__reactContainer$"+Tt,Ja="__reactEvents$"+Tt,Cd="__reactListeners$"+Tt,Pr="__reactHandles$"+Tt,zu="__reactResources$"+Tt,Is="__reactMarker$"+Tt;function kr(r){delete r[zt],delete r[Dt],delete r[Ja],delete r[Cd],delete r[Pr]}function Qi(r){var o=r[zt];if(o)return o;for(var l=r.parentNode;l;){if(o=l[Gn]||l[zt]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(r=_v(r);r!==null;){if(l=r[zt])return l;r=_v(r)}return o}r=l,l=r.parentNode}return null}function vi(r){if(r=r[zt]||r[Gn]){var o=r.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return r}return null}function Ti(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r.stateNode;throw Error(n(33))}function En(r){var o=r[zu];return o||(o=r[zu]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function xt(r){r[Is]=!0}var Xa=new Set,So={};function oi(r,o){Wi(r,o),Wi(r+"Capture",o)}function Wi(r,o){for(So[r]=o,r=0;r<o.length;r++)Xa.add(o[r])}var Bu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Fu={},Rs={};function qu(r){return gi.call(Rs,r)?!0:gi.call(Fu,r)?!1:Bu.test(r)?Rs[r]=!0:(Fu[r]=!0,!1)}function Vr(r,o,l){if(qu(o))if(l===null)r.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":r.removeAttribute(o);return;case"boolean":var c=o.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){r.removeAttribute(o);return}}r.setAttribute(o,""+l)}}function Ei(r,o,l){if(l===null)r.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttribute(o,""+l)}}function jt(r,o,l,c){if(c===null)r.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(l);return}r.setAttributeNS(o,l,""+c)}}var xs,Gu;function Ji(r){if(xs===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);xs=o&&o[1]||"",Gu=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+xs+r+Gu}var wo=!1;function Io(r,o){if(!r||wo)return"";wo=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(o){var te=function(){throw Error()};if(Object.defineProperty(te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(te,[])}catch($){var K=$}Reflect.construct(r,[],te)}else{try{te.call()}catch($){K=$}r.call(te.prototype)}}else{try{throw Error()}catch($){K=$}(te=r())&&typeof te.catch=="function"&&te.catch(function(){})}}catch($){if($&&K&&typeof $.stack=="string")return[$.stack,K.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=c.DetermineComponentFrameRoot(),C=_[0],w=_[1];if(C&&w){var M=C.split(`
`),G=w.split(`
`);for(p=c=0;c<M.length&&!M[c].includes("DetermineComponentFrameRoot");)c++;for(;p<G.length&&!G[p].includes("DetermineComponentFrameRoot");)p++;if(c===M.length||p===G.length)for(c=M.length-1,p=G.length-1;1<=c&&0<=p&&M[c]!==G[p];)p--;for(;1<=c&&0<=p;c--,p--)if(M[c]!==G[p]){if(c!==1||p!==1)do if(c--,p--,0>p||M[c]!==G[p]){var j=`
`+M[c].replace(" at new "," at ");return r.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",r.displayName)),j}while(1<=c&&0<=p);break}}}finally{wo=!1,Error.prepareStackTrace=l}return(l=r?r.displayName||r.name:"")?Ji(l):""}function ja(r){switch(r.tag){case 26:case 27:case 5:return Ji(r.type);case 16:return Ji("Lazy");case 13:return Ji("Suspense");case 19:return Ji("SuspenseList");case 0:case 15:return Io(r.type,!1);case 11:return Io(r.type.render,!1);case 1:return Io(r.type,!0);case 31:return Ji("Activity");default:return""}}function Ro(r){try{var o="";do o+=ja(r),r=r.return;while(r);return o}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function Cn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Za(r){var o=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Ad(r){var o=Za(r)?"checked":"value",l=Object.getOwnPropertyDescriptor(r.constructor.prototype,o),c=""+r[o];if(!r.hasOwnProperty(o)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var p=l.get,_=l.set;return Object.defineProperty(r,o,{configurable:!0,get:function(){return p.call(this)},set:function(C){c=""+C,_.call(this,C)}}),Object.defineProperty(r,o,{enumerable:l.enumerable}),{getValue:function(){return c},setValue:function(C){c=""+C},stopTracking:function(){r._valueTracker=null,delete r[o]}}}}function xo(r){r._valueTracker||(r._valueTracker=Ad(r))}function el(r){if(!r)return!1;var o=r._valueTracker;if(!o)return!0;var l=o.getValue(),c="";return r&&(c=Za(r)?r.checked?"true":"false":r.value),r=c,r!==l?(o.setValue(r),!0):!1}function bs(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Sd=/[\n"\\]/g;function Pt(r){return r.replace(Sd,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function kn(r,o,l,c,p,_,C,w){r.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?r.type=C:r.removeAttribute("type"),o!=null?C==="number"?(o===0&&r.value===""||r.value!=o)&&(r.value=""+Cn(o)):r.value!==""+Cn(o)&&(r.value=""+Cn(o)):C!=="submit"&&C!=="reset"||r.removeAttribute("value"),o!=null?Or(r,C,Cn(o)):l!=null?Or(r,C,Cn(l)):c!=null&&r.removeAttribute("value"),p==null&&_!=null&&(r.defaultChecked=!!_),p!=null&&(r.checked=p&&typeof p!="function"&&typeof p!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?r.name=""+Cn(w):r.removeAttribute("name")}function Ns(r,o,l,c,p,_,C,w){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(r.type=_),o!=null||l!=null){if(!(_!=="submit"&&_!=="reset"||o!=null))return;l=l!=null?""+Cn(l):"",o=o!=null?""+Cn(o):l,w||o===r.value||(r.value=o),r.defaultValue=o}c=c??p,c=typeof c!="function"&&typeof c!="symbol"&&!!c,r.checked=w?r.checked:!!c,r.defaultChecked=!!c,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(r.name=C)}function Or(r,o,l){o==="number"&&bs(r.ownerDocument)===r||r.defaultValue===""+l||(r.defaultValue=""+l)}function Xi(r,o,l,c){if(r=r.options,o){o={};for(var p=0;p<l.length;p++)o["$"+l[p]]=!0;for(l=0;l<r.length;l++)p=o.hasOwnProperty("$"+r[l].value),r[l].selected!==p&&(r[l].selected=p),p&&c&&(r[l].defaultSelected=!0)}else{for(l=""+Cn(l),o=null,p=0;p<r.length;p++){if(r[p].value===l){r[p].selected=!0,c&&(r[p].defaultSelected=!0);return}o!==null||r[p].disabled||(o=r[p])}o!==null&&(o.selected=!0)}}function ct(r,o,l){if(o!=null&&(o=""+Cn(o),o!==r.value&&(r.value=o),l==null)){r.defaultValue!==o&&(r.defaultValue=o);return}r.defaultValue=l!=null?""+Cn(l):""}function Ms(r,o,l,c){if(o==null){if(c!=null){if(l!=null)throw Error(n(92));if(rt(c)){if(1<c.length)throw Error(n(93));c=c[0]}l=c}l==null&&(l=""),o=l}l=Cn(o),r.defaultValue=l,c=r.textContent,c===l&&c!==""&&c!==null&&(r.value=c)}function Hn(r,o){if(o){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=o;return}}r.textContent=o}var Ds=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Hu(r,o,l){var c=o.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?r.setProperty(o,""):o==="float"?r.cssFloat="":r[o]="":c?r.setProperty(o,l):typeof l!="number"||l===0||Ds.has(o)?o==="float"?r.cssFloat=l:r[o]=(""+l).trim():r[o]=l+"px"}function tl(r,o,l){if(o!=null&&typeof o!="object")throw Error(n(62));if(r=r.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||o!=null&&o.hasOwnProperty(c)||(c.indexOf("--")===0?r.setProperty(c,""):c==="float"?r.cssFloat="":r[c]="");for(var p in o)c=o[p],o.hasOwnProperty(p)&&l[p]!==c&&Hu(r,p,c)}else for(var _ in o)o.hasOwnProperty(_)&&Hu(r,_,o[_])}function nl(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Id=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function bo(r){return Id.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var ji=null;function Kn(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Zi=null,er=null;function il(r){var o=vi(r);if(o&&(r=o.stateNode)){var l=r[Dt]||null;e:switch(r=o.stateNode,o.type){case"input":if(kn(r,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),o=l.name,l.type==="radio"&&o!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Pt(""+o)+'"][type="radio"]'),o=0;o<l.length;o++){var c=l[o];if(c!==r&&c.form===r.form){var p=c[Dt]||null;if(!p)throw Error(n(90));kn(c,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(o=0;o<l.length;o++)c=l[o],c.form===r.form&&el(c)}break e;case"textarea":ct(r,l.value,l.defaultValue);break e;case"select":o=l.value,o!=null&&Xi(r,!!l.multiple,o,!1)}}}var Ci=!1;function Ku(r,o,l){if(Ci)return r(o,l);Ci=!0;try{var c=r(o);return c}finally{if(Ci=!1,(Zi!==null||er!==null)&&(Uc(),Zi&&(o=Zi,r=er,er=Zi=null,il(o),r)))for(o=0;o<r.length;o++)il(r[o])}}function Ps(r,o){var l=r.stateNode;if(l===null)return null;var c=l[Dt]||null;if(c===null)return null;l=c[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(r=r.type,c=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!c;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(n(231,o,typeof l));return l}var ai=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yn=!1;if(ai)try{var ks={};Object.defineProperty(ks,"passive",{get:function(){Yn=!0}}),window.addEventListener("test",ks,ks),window.removeEventListener("test",ks,ks)}catch{Yn=!1}var Ai=null,Lr=null,tr=null;function rl(){if(tr)return tr;var r,o=Lr,l=o.length,c,p="value"in Ai?Ai.value:Ai.textContent,_=p.length;for(r=0;r<l&&o[r]===p[r];r++);var C=l-r;for(c=1;c<=C&&o[l-c]===p[_-c];c++);return tr=p.slice(r,1<c?1-c:void 0)}function Si(r){var o=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&o===13&&(r=13)):r=o,r===10&&(r=13),32<=r||r===13?r:0}function wi(){return!0}function sl(){return!1}function Yt(r){function o(l,c,p,_,C){this._reactName=l,this._targetInst=p,this.type=c,this.nativeEvent=_,this.target=C,this.currentTarget=null;for(var w in r)r.hasOwnProperty(w)&&(l=r[w],this[w]=l?l(_):_[w]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?wi:sl,this.isPropagationStopped=sl,this}return v(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=wi)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=wi)},persist:function(){},isPersistent:wi}),o}var st={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},No=Yt(st),Vs=v({},st,{view:0,detail:0}),Yu=Yt(Vs),Mo,Do,Ii,Os=v({},Vs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zs,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Ii&&(Ii&&r.type==="mousemove"?(Mo=r.screenX-Ii.screenX,Do=r.screenY-Ii.screenY):Do=Mo=0,Ii=r),Mo)},movementY:function(r){return"movementY"in r?r.movementY:Do}}),$n=Yt(Os),$u=v({},Os,{dataTransfer:0}),Rd=Yt($u),Ls=v({},Vs,{relatedTarget:0}),Po=Yt(Ls),ol=v({},st,{animationName:0,elapsedTime:0,pseudoElement:0}),ko=Yt(ol),Qu=v({},st,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Vo=Yt(Qu),xd=v({},st,{data:0}),al=Yt(xd),Us={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ju={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ll(r){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(r):(r=Ju[r])?!!o[r]:!1}function zs(){return ll}var Xu=v({},Vs,{key:function(r){if(r.key){var o=Us[r.key]||r.key;if(o!=="Unidentified")return o}return r.type==="keypress"?(r=Si(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Wu[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zs,charCode:function(r){return r.type==="keypress"?Si(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Si(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Oo=Yt(Xu),ju=v({},Os,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ul=Yt(ju),nr=v({},Vs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zs}),Zu=Yt(nr),ec=v({},st,{propertyName:0,elapsedTime:0,pseudoElement:0}),tc=Yt(ec),nc=v({},Os,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Lo=Yt(nc),An=v({},st,{newState:0,oldState:0}),ic=Yt(An),rc=[9,13,27,32],Ri=ai&&"CompositionEvent"in window,h=null;ai&&"documentMode"in document&&(h=document.documentMode);var T=ai&&"TextEvent"in window&&!h,E=ai&&(!Ri||h&&8<h&&11>=h),I=" ",F=!1;function Q(r,o){switch(r){case"keyup":return rc.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ue(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Je=!1;function Bt(r,o){switch(r){case"compositionend":return ue(o);case"keypress":return o.which!==32?null:(F=!0,I);case"textInput":return r=o.data,r===I&&F?null:r;default:return null}}function Xe(r,o){if(Je)return r==="compositionend"||!Ri&&Q(r,o)?(r=rl(),tr=Lr=Ai=null,Je=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return E&&o.locale!=="ko"?null:o.data;default:return null}}var $t={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ft(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o==="input"?!!$t[r.type]:o==="textarea"}function ir(r,o,l,c){Zi?er?er.push(c):er=[c]:Zi=c,o=Hc(o,"onChange"),0<o.length&&(l=new No("onChange","change",null,l,c),r.push({event:l,listeners:o}))}var Zt=null,xi=null;function cl(r){lv(r,0)}function sc(r){var o=Ti(r);if(el(o))return r}function bg(r,o){if(r==="change")return o}var Ng=!1;if(ai){var bd;if(ai){var Nd="oninput"in document;if(!Nd){var Mg=document.createElement("div");Mg.setAttribute("oninput","return;"),Nd=typeof Mg.oninput=="function"}bd=Nd}else bd=!1;Ng=bd&&(!document.documentMode||9<document.documentMode)}function Dg(){Zt&&(Zt.detachEvent("onpropertychange",Pg),xi=Zt=null)}function Pg(r){if(r.propertyName==="value"&&sc(xi)){var o=[];ir(o,xi,r,Kn(r)),Ku(cl,o)}}function DS(r,o,l){r==="focusin"?(Dg(),Zt=o,xi=l,Zt.attachEvent("onpropertychange",Pg)):r==="focusout"&&Dg()}function PS(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return sc(xi)}function kS(r,o){if(r==="click")return sc(o)}function VS(r,o){if(r==="input"||r==="change")return sc(o)}function OS(r,o){return r===o&&(r!==0||1/r===1/o)||r!==r&&o!==o}var Vn=typeof Object.is=="function"?Object.is:OS;function fl(r,o){if(Vn(r,o))return!0;if(typeof r!="object"||r===null||typeof o!="object"||o===null)return!1;var l=Object.keys(r),c=Object.keys(o);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var p=l[c];if(!gi.call(o,p)||!Vn(r[p],o[p]))return!1}return!0}function kg(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Vg(r,o){var l=kg(r);r=0;for(var c;l;){if(l.nodeType===3){if(c=r+l.textContent.length,r<=o&&c>=o)return{node:l,offset:o-r};r=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=kg(l)}}function Og(r,o){return r&&o?r===o?!0:r&&r.nodeType===3?!1:o&&o.nodeType===3?Og(r,o.parentNode):"contains"in r?r.contains(o):r.compareDocumentPosition?!!(r.compareDocumentPosition(o)&16):!1:!1}function Lg(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var o=bs(r.document);o instanceof r.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch{l=!1}if(l)r=o.contentWindow;else break;o=bs(r.document)}return o}function Md(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o&&(o==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||o==="textarea"||r.contentEditable==="true")}var LS=ai&&"documentMode"in document&&11>=document.documentMode,Uo=null,Dd=null,dl=null,Pd=!1;function Ug(r,o,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Pd||Uo==null||Uo!==bs(c)||(c=Uo,"selectionStart"in c&&Md(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),dl&&fl(dl,c)||(dl=c,c=Hc(Dd,"onSelect"),0<c.length&&(o=new No("onSelect","select",null,o,l),r.push({event:o,listeners:c}),o.target=Uo)))}function Bs(r,o){var l={};return l[r.toLowerCase()]=o.toLowerCase(),l["Webkit"+r]="webkit"+o,l["Moz"+r]="moz"+o,l}var zo={animationend:Bs("Animation","AnimationEnd"),animationiteration:Bs("Animation","AnimationIteration"),animationstart:Bs("Animation","AnimationStart"),transitionrun:Bs("Transition","TransitionRun"),transitionstart:Bs("Transition","TransitionStart"),transitioncancel:Bs("Transition","TransitionCancel"),transitionend:Bs("Transition","TransitionEnd")},kd={},zg={};ai&&(zg=document.createElement("div").style,"AnimationEvent"in window||(delete zo.animationend.animation,delete zo.animationiteration.animation,delete zo.animationstart.animation),"TransitionEvent"in window||delete zo.transitionend.transition);function Fs(r){if(kd[r])return kd[r];if(!zo[r])return r;var o=zo[r],l;for(l in o)if(o.hasOwnProperty(l)&&l in zg)return kd[r]=o[l];return r}var Bg=Fs("animationend"),Fg=Fs("animationiteration"),qg=Fs("animationstart"),US=Fs("transitionrun"),zS=Fs("transitionstart"),BS=Fs("transitioncancel"),Gg=Fs("transitionend"),Hg=new Map,Vd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Vd.push("scrollEnd");function li(r,o){Hg.set(r,o),oi(o,[r])}var Kg=new WeakMap;function Qn(r,o){if(typeof r=="object"&&r!==null){var l=Kg.get(r);return l!==void 0?l:(o={value:r,source:o,stack:Ro(o)},Kg.set(r,o),o)}return{value:r,source:o,stack:Ro(o)}}var Wn=[],Bo=0,Od=0;function oc(){for(var r=Bo,o=Od=Bo=0;o<r;){var l=Wn[o];Wn[o++]=null;var c=Wn[o];Wn[o++]=null;var p=Wn[o];Wn[o++]=null;var _=Wn[o];if(Wn[o++]=null,c!==null&&p!==null){var C=c.pending;C===null?p.next=p:(p.next=C.next,C.next=p),c.pending=p}_!==0&&Yg(l,p,_)}}function ac(r,o,l,c){Wn[Bo++]=r,Wn[Bo++]=o,Wn[Bo++]=l,Wn[Bo++]=c,Od|=c,r.lanes|=c,r=r.alternate,r!==null&&(r.lanes|=c)}function Ld(r,o,l,c){return ac(r,o,l,c),lc(r)}function Fo(r,o){return ac(r,null,null,o),lc(r)}function Yg(r,o,l){r.lanes|=l;var c=r.alternate;c!==null&&(c.lanes|=l);for(var p=!1,_=r.return;_!==null;)_.childLanes|=l,c=_.alternate,c!==null&&(c.childLanes|=l),_.tag===22&&(r=_.stateNode,r===null||r._visibility&1||(p=!0)),r=_,_=_.return;return r.tag===3?(_=r.stateNode,p&&o!==null&&(p=31-he(l),r=_.hiddenUpdates,c=r[p],c===null?r[p]=[o]:c.push(o),o.lane=l|536870912),_):null}function lc(r){if(50<Ll)throw Ll=0,Gh=null,Error(n(185));for(var o=r.return;o!==null;)r=o,o=r.return;return r.tag===3?r.stateNode:null}var qo={};function FS(r,o,l,c){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function On(r,o,l,c){return new FS(r,o,l,c)}function Ud(r){return r=r.prototype,!(!r||!r.isReactComponent)}function rr(r,o){var l=r.alternate;return l===null?(l=On(r.tag,o,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=o,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&65011712,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,o=r.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l.refCleanup=r.refCleanup,l}function $g(r,o){r.flags&=65011714;var l=r.alternate;return l===null?(r.childLanes=0,r.lanes=o,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=l.childLanes,r.lanes=l.lanes,r.child=l.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=l.memoizedProps,r.memoizedState=l.memoizedState,r.updateQueue=l.updateQueue,r.type=l.type,o=l.dependencies,r.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),r}function uc(r,o,l,c,p,_){var C=0;if(c=r,typeof r=="function")Ud(r)&&(C=1);else if(typeof r=="string")C=Gw(r,l,Ce.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case x:return r=On(31,l,o,p),r.elementType=x,r.lanes=_,r;case V:return qs(l.children,p,_,o);case H:C=8,p|=24;break;case Y:return r=On(12,l,o,p|2),r.elementType=Y,r.lanes=_,r;case fe:return r=On(13,l,o,p),r.elementType=fe,r.lanes=_,r;case Te:return r=On(19,l,o,p),r.elementType=Te,r.lanes=_,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case ce:case oe:C=10;break e;case le:C=9;break e;case pe:C=11;break e;case O:C=14;break e;case b:C=16,c=null;break e}C=29,l=Error(n(130,r===null?"null":typeof r,"")),c=null}return o=On(C,l,o,p),o.elementType=r,o.type=c,o.lanes=_,o}function qs(r,o,l,c){return r=On(7,r,c,o),r.lanes=l,r}function zd(r,o,l){return r=On(6,r,null,o),r.lanes=l,r}function Bd(r,o,l){return o=On(4,r.children!==null?r.children:[],r.key,o),o.lanes=l,o.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},o}var Go=[],Ho=0,cc=null,fc=0,Jn=[],Xn=0,Gs=null,sr=1,or="";function Hs(r,o){Go[Ho++]=fc,Go[Ho++]=cc,cc=r,fc=o}function Qg(r,o,l){Jn[Xn++]=sr,Jn[Xn++]=or,Jn[Xn++]=Gs,Gs=r;var c=sr;r=or;var p=32-he(c)-1;c&=~(1<<p),l+=1;var _=32-he(o)+p;if(30<_){var C=p-p%5;_=(c&(1<<C)-1).toString(32),c>>=C,p-=C,sr=1<<32-he(o)+p|l<<p|c,or=_+r}else sr=1<<_|l<<p|c,or=r}function Fd(r){r.return!==null&&(Hs(r,1),Qg(r,1,0))}function qd(r){for(;r===cc;)cc=Go[--Ho],Go[Ho]=null,fc=Go[--Ho],Go[Ho]=null;for(;r===Gs;)Gs=Jn[--Xn],Jn[Xn]=null,or=Jn[--Xn],Jn[Xn]=null,sr=Jn[--Xn],Jn[Xn]=null}var Sn=null,wt=null,it=!1,Ks=null,bi=!1,Gd=Error(n(519));function Ys(r){var o=Error(n(418,""));throw pl(Qn(o,r)),Gd}function Wg(r){var o=r.stateNode,l=r.type,c=r.memoizedProps;switch(o[zt]=r,o[Dt]=c,l){case"dialog":Ke("cancel",o),Ke("close",o);break;case"iframe":case"object":case"embed":Ke("load",o);break;case"video":case"audio":for(l=0;l<zl.length;l++)Ke(zl[l],o);break;case"source":Ke("error",o);break;case"img":case"image":case"link":Ke("error",o),Ke("load",o);break;case"details":Ke("toggle",o);break;case"input":Ke("invalid",o),Ns(o,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),xo(o);break;case"select":Ke("invalid",o);break;case"textarea":Ke("invalid",o),Ms(o,c.value,c.defaultValue,c.children),xo(o)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||o.textContent===""+l||c.suppressHydrationWarning===!0||dv(o.textContent,l)?(c.popover!=null&&(Ke("beforetoggle",o),Ke("toggle",o)),c.onScroll!=null&&Ke("scroll",o),c.onScrollEnd!=null&&Ke("scrollend",o),c.onClick!=null&&(o.onclick=Kc),o=!0):o=!1,o||Ys(r)}function Jg(r){for(Sn=r.return;Sn;)switch(Sn.tag){case 5:case 13:bi=!1;return;case 27:case 3:bi=!0;return;default:Sn=Sn.return}}function hl(r){if(r!==Sn)return!1;if(!it)return Jg(r),it=!0,!1;var o=r.tag,l;if((l=o!==3&&o!==27)&&((l=o===5)&&(l=r.type,l=!(l!=="form"&&l!=="button")||sm(r.type,r.memoizedProps)),l=!l),l&&wt&&Ys(r),Jg(r),o===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(317));e:{for(r=r.nextSibling,o=0;r;){if(r.nodeType===8)if(l=r.data,l==="/$"){if(o===0){wt=ci(r.nextSibling);break e}o--}else l!=="$"&&l!=="$!"&&l!=="$?"||o++;r=r.nextSibling}wt=null}}else o===27?(o=wt,Zr(r.type)?(r=um,um=null,wt=r):wt=o):wt=Sn?ci(r.stateNode.nextSibling):null;return!0}function ml(){wt=Sn=null,it=!1}function Xg(){var r=Ks;return r!==null&&(Mn===null?Mn=r:Mn.push.apply(Mn,r),Ks=null),r}function pl(r){Ks===null?Ks=[r]:Ks.push(r)}var Hd=W(null),$s=null,ar=null;function Ur(r,o,l){Z(Hd,o._currentValue),o._currentValue=l}function lr(r){r._currentValue=Hd.current,ie(Hd)}function Kd(r,o,l){for(;r!==null;){var c=r.alternate;if((r.childLanes&o)!==o?(r.childLanes|=o,c!==null&&(c.childLanes|=o)):c!==null&&(c.childLanes&o)!==o&&(c.childLanes|=o),r===l)break;r=r.return}}function Yd(r,o,l,c){var p=r.child;for(p!==null&&(p.return=r);p!==null;){var _=p.dependencies;if(_!==null){var C=p.child;_=_.firstContext;e:for(;_!==null;){var w=_;_=p;for(var M=0;M<o.length;M++)if(w.context===o[M]){_.lanes|=l,w=_.alternate,w!==null&&(w.lanes|=l),Kd(_.return,l,r),c||(C=null);break e}_=w.next}}else if(p.tag===18){if(C=p.return,C===null)throw Error(n(341));C.lanes|=l,_=C.alternate,_!==null&&(_.lanes|=l),Kd(C,l,r),C=null}else C=p.child;if(C!==null)C.return=p;else for(C=p;C!==null;){if(C===r){C=null;break}if(p=C.sibling,p!==null){p.return=C.return,C=p;break}C=C.return}p=C}}function gl(r,o,l,c){r=null;for(var p=o,_=!1;p!==null;){if(!_){if((p.flags&524288)!==0)_=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var C=p.alternate;if(C===null)throw Error(n(387));if(C=C.memoizedProps,C!==null){var w=p.type;Vn(p.pendingProps.value,C.value)||(r!==null?r.push(w):r=[w])}}else if(p===Rt.current){if(C=p.alternate,C===null)throw Error(n(387));C.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(r!==null?r.push(Kl):r=[Kl])}p=p.return}r!==null&&Yd(o,r,l,c),o.flags|=262144}function dc(r){for(r=r.firstContext;r!==null;){if(!Vn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Qs(r){$s=r,ar=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function fn(r){return jg($s,r)}function hc(r,o){return $s===null&&Qs(r),jg(r,o)}function jg(r,o){var l=o._currentValue;if(o={context:o,memoizedValue:l,next:null},ar===null){if(r===null)throw Error(n(308));ar=o,r.dependencies={lanes:0,firstContext:o},r.flags|=524288}else ar=ar.next=o;return l}var qS=typeof AbortController<"u"?AbortController:function(){var r=[],o=this.signal={aborted:!1,addEventListener:function(l,c){r.push(c)}};this.abort=function(){o.aborted=!0,r.forEach(function(l){return l()})}},GS=i.unstable_scheduleCallback,HS=i.unstable_NormalPriority,qt={$$typeof:oe,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function $d(){return{controller:new qS,data:new Map,refCount:0}}function yl(r){r.refCount--,r.refCount===0&&GS(HS,function(){r.controller.abort()})}var _l=null,Qd=0,Ko=0,Yo=null;function KS(r,o){if(_l===null){var l=_l=[];Qd=0,Ko=Jh(),Yo={status:"pending",value:void 0,then:function(c){l.push(c)}}}return Qd++,o.then(Zg,Zg),o}function Zg(){if(--Qd===0&&_l!==null){Yo!==null&&(Yo.status="fulfilled");var r=_l;_l=null,Ko=0,Yo=null;for(var o=0;o<r.length;o++)(0,r[o])()}}function YS(r,o){var l=[],c={status:"pending",value:null,reason:null,then:function(p){l.push(p)}};return r.then(function(){c.status="fulfilled",c.value=o;for(var p=0;p<l.length;p++)(0,l[p])(o)},function(p){for(c.status="rejected",c.reason=p,p=0;p<l.length;p++)(0,l[p])(void 0)}),c}var ey=J.S;J.S=function(r,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&KS(r,o),ey!==null&&ey(r,o)};var Ws=W(null);function Wd(){var r=Ws.current;return r!==null?r:pt.pooledCache}function mc(r,o){o===null?Z(Ws,Ws.current):Z(Ws,o.pool)}function ty(){var r=Wd();return r===null?null:{parent:qt._currentValue,pool:r}}var vl=Error(n(460)),ny=Error(n(474)),pc=Error(n(542)),Jd={then:function(){}};function iy(r){return r=r.status,r==="fulfilled"||r==="rejected"}function gc(){}function ry(r,o,l){switch(l=r[l],l===void 0?r.push(o):l!==o&&(o.then(gc,gc),o=l),o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,oy(r),r;default:if(typeof o.status=="string")o.then(gc,gc);else{if(r=pt,r!==null&&100<r.shellSuspendCounter)throw Error(n(482));r=o,r.status="pending",r.then(function(c){if(o.status==="pending"){var p=o;p.status="fulfilled",p.value=c}},function(c){if(o.status==="pending"){var p=o;p.status="rejected",p.reason=c}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,oy(r),r}throw Tl=o,vl}}var Tl=null;function sy(){if(Tl===null)throw Error(n(459));var r=Tl;return Tl=null,r}function oy(r){if(r===vl||r===pc)throw Error(n(483))}var zr=!1;function Xd(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function jd(r,o){r=r.updateQueue,o.updateQueue===r&&(o.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Br(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Fr(r,o,l){var c=r.updateQueue;if(c===null)return null;if(c=c.shared,(ot&2)!==0){var p=c.pending;return p===null?o.next=o:(o.next=p.next,p.next=o),c.pending=o,o=lc(r),Yg(r,null,l),o}return ac(r,c,o,l),lc(r)}function El(r,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194048)!==0)){var c=o.lanes;c&=r.pendingLanes,l|=c,o.lanes=l,Wa(r,l)}}function Zd(r,o){var l=r.updateQueue,c=r.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var p=null,_=null;if(l=l.firstBaseUpdate,l!==null){do{var C={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};_===null?p=_=C:_=_.next=C,l=l.next}while(l!==null);_===null?p=_=o:_=_.next=o}else p=_=o;l={baseState:c.baseState,firstBaseUpdate:p,lastBaseUpdate:_,shared:c.shared,callbacks:c.callbacks},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=o:r.next=o,l.lastBaseUpdate=o}var eh=!1;function Cl(){if(eh){var r=Yo;if(r!==null)throw r}}function Al(r,o,l,c){eh=!1;var p=r.updateQueue;zr=!1;var _=p.firstBaseUpdate,C=p.lastBaseUpdate,w=p.shared.pending;if(w!==null){p.shared.pending=null;var M=w,G=M.next;M.next=null,C===null?_=G:C.next=G,C=M;var j=r.alternate;j!==null&&(j=j.updateQueue,w=j.lastBaseUpdate,w!==C&&(w===null?j.firstBaseUpdate=G:w.next=G,j.lastBaseUpdate=M))}if(_!==null){var te=p.baseState;C=0,j=G=M=null,w=_;do{var K=w.lane&-536870913,$=K!==w.lane;if($?(je&K)===K:(c&K)===K){K!==0&&K===Ko&&(eh=!0),j!==null&&(j=j.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var Me=r,Re=w;K=o;var ht=l;switch(Re.tag){case 1:if(Me=Re.payload,typeof Me=="function"){te=Me.call(ht,te,K);break e}te=Me;break e;case 3:Me.flags=Me.flags&-65537|128;case 0:if(Me=Re.payload,K=typeof Me=="function"?Me.call(ht,te,K):Me,K==null)break e;te=v({},te,K);break e;case 2:zr=!0}}K=w.callback,K!==null&&(r.flags|=64,$&&(r.flags|=8192),$=p.callbacks,$===null?p.callbacks=[K]:$.push(K))}else $={lane:K,tag:w.tag,payload:w.payload,callback:w.callback,next:null},j===null?(G=j=$,M=te):j=j.next=$,C|=K;if(w=w.next,w===null){if(w=p.shared.pending,w===null)break;$=w,w=$.next,$.next=null,p.lastBaseUpdate=$,p.shared.pending=null}}while(!0);j===null&&(M=te),p.baseState=M,p.firstBaseUpdate=G,p.lastBaseUpdate=j,_===null&&(p.shared.lanes=0),Wr|=C,r.lanes=C,r.memoizedState=te}}function ay(r,o){if(typeof r!="function")throw Error(n(191,r));r.call(o)}function ly(r,o){var l=r.callbacks;if(l!==null)for(r.callbacks=null,r=0;r<l.length;r++)ay(l[r],o)}var $o=W(null),yc=W(0);function uy(r,o){r=pr,Z(yc,r),Z($o,o),pr=r|o.baseLanes}function th(){Z(yc,pr),Z($o,$o.current)}function nh(){pr=yc.current,ie($o),ie(yc)}var qr=0,qe=null,ft=null,kt=null,_c=!1,Qo=!1,Js=!1,vc=0,Sl=0,Wo=null,$S=0;function bt(){throw Error(n(321))}function ih(r,o){if(o===null)return!1;for(var l=0;l<o.length&&l<r.length;l++)if(!Vn(r[l],o[l]))return!1;return!0}function rh(r,o,l,c,p,_){return qr=_,qe=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,J.H=r===null||r.memoizedState===null?Yy:$y,Js=!1,_=l(c,p),Js=!1,Qo&&(_=fy(o,l,c,p)),cy(r),_}function cy(r){J.H=wc;var o=ft!==null&&ft.next!==null;if(qr=0,kt=ft=qe=null,_c=!1,Sl=0,Wo=null,o)throw Error(n(300));r===null||Qt||(r=r.dependencies,r!==null&&dc(r)&&(Qt=!0))}function fy(r,o,l,c){qe=r;var p=0;do{if(Qo&&(Wo=null),Sl=0,Qo=!1,25<=p)throw Error(n(301));if(p+=1,kt=ft=null,r.updateQueue!=null){var _=r.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}J.H=ew,_=o(l,c)}while(Qo);return _}function QS(){var r=J.H,o=r.useState()[0];return o=typeof o.then=="function"?wl(o):o,r=r.useState()[0],(ft!==null?ft.memoizedState:null)!==r&&(qe.flags|=1024),o}function sh(){var r=vc!==0;return vc=0,r}function oh(r,o,l){o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~l}function ah(r){if(_c){for(r=r.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}_c=!1}qr=0,kt=ft=qe=null,Qo=!1,Sl=vc=0,Wo=null}function bn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?qe.memoizedState=kt=r:kt=kt.next=r,kt}function Vt(){if(ft===null){var r=qe.alternate;r=r!==null?r.memoizedState:null}else r=ft.next;var o=kt===null?qe.memoizedState:kt.next;if(o!==null)kt=o,ft=r;else{if(r===null)throw qe.alternate===null?Error(n(467)):Error(n(310));ft=r,r={memoizedState:ft.memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},kt===null?qe.memoizedState=kt=r:kt=kt.next=r}return kt}function lh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function wl(r){var o=Sl;return Sl+=1,Wo===null&&(Wo=[]),r=ry(Wo,r,o),o=qe,(kt===null?o.memoizedState:kt.next)===null&&(o=o.alternate,J.H=o===null||o.memoizedState===null?Yy:$y),r}function Tc(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return wl(r);if(r.$$typeof===oe)return fn(r)}throw Error(n(438,String(r)))}function uh(r){var o=null,l=qe.updateQueue;if(l!==null&&(o=l.memoCache),o==null){var c=qe.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(o={data:c.data.map(function(p){return p.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),l===null&&(l=lh(),qe.updateQueue=l),l.memoCache=o,l=o.data[o.index],l===void 0)for(l=o.data[o.index]=Array(r),c=0;c<r;c++)l[c]=k;return o.index++,l}function ur(r,o){return typeof o=="function"?o(r):o}function Ec(r){var o=Vt();return ch(o,ft,r)}function ch(r,o,l){var c=r.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=l;var p=r.baseQueue,_=c.pending;if(_!==null){if(p!==null){var C=p.next;p.next=_.next,_.next=C}o.baseQueue=p=_,c.pending=null}if(_=r.baseState,p===null)r.memoizedState=_;else{o=p.next;var w=C=null,M=null,G=o,j=!1;do{var te=G.lane&-536870913;if(te!==G.lane?(je&te)===te:(qr&te)===te){var K=G.revertLane;if(K===0)M!==null&&(M=M.next={lane:0,revertLane:0,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),te===Ko&&(j=!0);else if((qr&K)===K){G=G.next,K===Ko&&(j=!0);continue}else te={lane:0,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},M===null?(w=M=te,C=_):M=M.next=te,qe.lanes|=K,Wr|=K;te=G.action,Js&&l(_,te),_=G.hasEagerState?G.eagerState:l(_,te)}else K={lane:te,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},M===null?(w=M=K,C=_):M=M.next=K,qe.lanes|=te,Wr|=te;G=G.next}while(G!==null&&G!==o);if(M===null?C=_:M.next=w,!Vn(_,r.memoizedState)&&(Qt=!0,j&&(l=Yo,l!==null)))throw l;r.memoizedState=_,r.baseState=C,r.baseQueue=M,c.lastRenderedState=_}return p===null&&(c.lanes=0),[r.memoizedState,c.dispatch]}function fh(r){var o=Vt(),l=o.queue;if(l===null)throw Error(n(311));l.lastRenderedReducer=r;var c=l.dispatch,p=l.pending,_=o.memoizedState;if(p!==null){l.pending=null;var C=p=p.next;do _=r(_,C.action),C=C.next;while(C!==p);Vn(_,o.memoizedState)||(Qt=!0),o.memoizedState=_,o.baseQueue===null&&(o.baseState=_),l.lastRenderedState=_}return[_,c]}function dy(r,o,l){var c=qe,p=Vt(),_=it;if(_){if(l===void 0)throw Error(n(407));l=l()}else l=o();var C=!Vn((ft||p).memoizedState,l);C&&(p.memoizedState=l,Qt=!0),p=p.queue;var w=py.bind(null,c,p,r);if(Il(2048,8,w,[r]),p.getSnapshot!==o||C||kt!==null&&kt.memoizedState.tag&1){if(c.flags|=2048,Jo(9,Cc(),my.bind(null,c,p,l,o),null),pt===null)throw Error(n(349));_||(qr&124)!==0||hy(c,o,l)}return l}function hy(r,o,l){r.flags|=16384,r={getSnapshot:o,value:l},o=qe.updateQueue,o===null?(o=lh(),qe.updateQueue=o,o.stores=[r]):(l=o.stores,l===null?o.stores=[r]:l.push(r))}function my(r,o,l,c){o.value=l,o.getSnapshot=c,gy(o)&&yy(r)}function py(r,o,l){return l(function(){gy(o)&&yy(r)})}function gy(r){var o=r.getSnapshot;r=r.value;try{var l=o();return!Vn(r,l)}catch{return!0}}function yy(r){var o=Fo(r,2);o!==null&&Fn(o,r,2)}function dh(r){var o=bn();if(typeof r=="function"){var l=r;if(r=l(),Js){ye(!0);try{l()}finally{ye(!1)}}}return o.memoizedState=o.baseState=r,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ur,lastRenderedState:r},o}function _y(r,o,l,c){return r.baseState=l,ch(r,ft,typeof c=="function"?c:ur)}function WS(r,o,l,c,p){if(Sc(r))throw Error(n(485));if(r=o.action,r!==null){var _={payload:p,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){_.listeners.push(C)}};J.T!==null?l(!0):_.isTransition=!1,c(_),l=o.pending,l===null?(_.next=o.pending=_,vy(o,_)):(_.next=l.next,o.pending=l.next=_)}}function vy(r,o){var l=o.action,c=o.payload,p=r.state;if(o.isTransition){var _=J.T,C={};J.T=C;try{var w=l(p,c),M=J.S;M!==null&&M(C,w),Ty(r,o,w)}catch(G){hh(r,o,G)}finally{J.T=_}}else try{_=l(p,c),Ty(r,o,_)}catch(G){hh(r,o,G)}}function Ty(r,o,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){Ey(r,o,c)},function(c){return hh(r,o,c)}):Ey(r,o,l)}function Ey(r,o,l){o.status="fulfilled",o.value=l,Cy(o),r.state=l,o=r.pending,o!==null&&(l=o.next,l===o?r.pending=null:(l=l.next,o.next=l,vy(r,l)))}function hh(r,o,l){var c=r.pending;if(r.pending=null,c!==null){c=c.next;do o.status="rejected",o.reason=l,Cy(o),o=o.next;while(o!==c)}r.action=null}function Cy(r){r=r.listeners;for(var o=0;o<r.length;o++)(0,r[o])()}function Ay(r,o){return o}function Sy(r,o){if(it){var l=pt.formState;if(l!==null){e:{var c=qe;if(it){if(wt){t:{for(var p=wt,_=bi;p.nodeType!==8;){if(!_){p=null;break t}if(p=ci(p.nextSibling),p===null){p=null;break t}}_=p.data,p=_==="F!"||_==="F"?p:null}if(p){wt=ci(p.nextSibling),c=p.data==="F!";break e}}Ys(c)}c=!1}c&&(o=l[0])}}return l=bn(),l.memoizedState=l.baseState=o,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ay,lastRenderedState:o},l.queue=c,l=Gy.bind(null,qe,c),c.dispatch=l,c=dh(!1),_=_h.bind(null,qe,!1,c.queue),c=bn(),p={state:o,dispatch:null,action:r,pending:null},c.queue=p,l=WS.bind(null,qe,p,_,l),p.dispatch=l,c.memoizedState=r,[o,l,!1]}function wy(r){var o=Vt();return Iy(o,ft,r)}function Iy(r,o,l){if(o=ch(r,o,Ay)[0],r=Ec(ur)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var c=wl(o)}catch(C){throw C===vl?pc:C}else c=o;o=Vt();var p=o.queue,_=p.dispatch;return l!==o.memoizedState&&(qe.flags|=2048,Jo(9,Cc(),JS.bind(null,p,l),null)),[c,_,r]}function JS(r,o){r.action=o}function Ry(r){var o=Vt(),l=ft;if(l!==null)return Iy(o,l,r);Vt(),o=o.memoizedState,l=Vt();var c=l.queue.dispatch;return l.memoizedState=r,[o,c,!1]}function Jo(r,o,l,c){return r={tag:r,create:l,deps:c,inst:o,next:null},o=qe.updateQueue,o===null&&(o=lh(),qe.updateQueue=o),l=o.lastEffect,l===null?o.lastEffect=r.next=r:(c=l.next,l.next=r,r.next=c,o.lastEffect=r),r}function Cc(){return{destroy:void 0,resource:void 0}}function xy(){return Vt().memoizedState}function Ac(r,o,l,c){var p=bn();c=c===void 0?null:c,qe.flags|=r,p.memoizedState=Jo(1|o,Cc(),l,c)}function Il(r,o,l,c){var p=Vt();c=c===void 0?null:c;var _=p.memoizedState.inst;ft!==null&&c!==null&&ih(c,ft.memoizedState.deps)?p.memoizedState=Jo(o,_,l,c):(qe.flags|=r,p.memoizedState=Jo(1|o,_,l,c))}function by(r,o){Ac(8390656,8,r,o)}function Ny(r,o){Il(2048,8,r,o)}function My(r,o){return Il(4,2,r,o)}function Dy(r,o){return Il(4,4,r,o)}function Py(r,o){if(typeof o=="function"){r=r();var l=o(r);return function(){typeof l=="function"?l():o(null)}}if(o!=null)return r=r(),o.current=r,function(){o.current=null}}function ky(r,o,l){l=l!=null?l.concat([r]):null,Il(4,4,Py.bind(null,o,r),l)}function mh(){}function Vy(r,o){var l=Vt();o=o===void 0?null:o;var c=l.memoizedState;return o!==null&&ih(o,c[1])?c[0]:(l.memoizedState=[r,o],r)}function Oy(r,o){var l=Vt();o=o===void 0?null:o;var c=l.memoizedState;if(o!==null&&ih(o,c[1]))return c[0];if(c=r(),Js){ye(!0);try{r()}finally{ye(!1)}}return l.memoizedState=[c,o],c}function ph(r,o,l){return l===void 0||(qr&1073741824)!==0?r.memoizedState=o:(r.memoizedState=l,r=z_(),qe.lanes|=r,Wr|=r,l)}function Ly(r,o,l,c){return Vn(l,o)?l:$o.current!==null?(r=ph(r,l,c),Vn(r,o)||(Qt=!0),r):(qr&42)===0?(Qt=!0,r.memoizedState=l):(r=z_(),qe.lanes|=r,Wr|=r,o)}function Uy(r,o,l,c,p){var _=X.p;X.p=_!==0&&8>_?_:8;var C=J.T,w={};J.T=w,_h(r,!1,o,l);try{var M=p(),G=J.S;if(G!==null&&G(w,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var j=YS(M,c);Rl(r,o,j,Bn(r))}else Rl(r,o,c,Bn(r))}catch(te){Rl(r,o,{then:function(){},status:"rejected",reason:te},Bn())}finally{X.p=_,J.T=C}}function XS(){}function gh(r,o,l,c){if(r.tag!==5)throw Error(n(476));var p=zy(r).queue;Uy(r,p,o,de,l===null?XS:function(){return By(r),l(c)})}function zy(r){var o=r.memoizedState;if(o!==null)return o;o={memoizedState:de,baseState:de,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ur,lastRenderedState:de},next:null};var l={};return o.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ur,lastRenderedState:l},next:null},r.memoizedState=o,r=r.alternate,r!==null&&(r.memoizedState=o),o}function By(r){var o=zy(r).next.queue;Rl(r,o,{},Bn())}function yh(){return fn(Kl)}function Fy(){return Vt().memoizedState}function qy(){return Vt().memoizedState}function jS(r){for(var o=r.return;o!==null;){switch(o.tag){case 24:case 3:var l=Bn();r=Br(l);var c=Fr(o,r,l);c!==null&&(Fn(c,o,l),El(c,o,l)),o={cache:$d()},r.payload=o;return}o=o.return}}function ZS(r,o,l){var c=Bn();l={lane:c,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},Sc(r)?Hy(o,l):(l=Ld(r,o,l,c),l!==null&&(Fn(l,r,c),Ky(l,o,c)))}function Gy(r,o,l){var c=Bn();Rl(r,o,l,c)}function Rl(r,o,l,c){var p={lane:c,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(Sc(r))Hy(o,p);else{var _=r.alternate;if(r.lanes===0&&(_===null||_.lanes===0)&&(_=o.lastRenderedReducer,_!==null))try{var C=o.lastRenderedState,w=_(C,l);if(p.hasEagerState=!0,p.eagerState=w,Vn(w,C))return ac(r,o,p,0),pt===null&&oc(),!1}catch{}finally{}if(l=Ld(r,o,p,c),l!==null)return Fn(l,r,c),Ky(l,o,c),!0}return!1}function _h(r,o,l,c){if(c={lane:2,revertLane:Jh(),action:c,hasEagerState:!1,eagerState:null,next:null},Sc(r)){if(o)throw Error(n(479))}else o=Ld(r,l,c,2),o!==null&&Fn(o,r,2)}function Sc(r){var o=r.alternate;return r===qe||o!==null&&o===qe}function Hy(r,o){Qo=_c=!0;var l=r.pending;l===null?o.next=o:(o.next=l.next,l.next=o),r.pending=o}function Ky(r,o,l){if((l&4194048)!==0){var c=o.lanes;c&=r.pendingLanes,l|=c,o.lanes=l,Wa(r,l)}}var wc={readContext:fn,use:Tc,useCallback:bt,useContext:bt,useEffect:bt,useImperativeHandle:bt,useLayoutEffect:bt,useInsertionEffect:bt,useMemo:bt,useReducer:bt,useRef:bt,useState:bt,useDebugValue:bt,useDeferredValue:bt,useTransition:bt,useSyncExternalStore:bt,useId:bt,useHostTransitionStatus:bt,useFormState:bt,useActionState:bt,useOptimistic:bt,useMemoCache:bt,useCacheRefresh:bt},Yy={readContext:fn,use:Tc,useCallback:function(r,o){return bn().memoizedState=[r,o===void 0?null:o],r},useContext:fn,useEffect:by,useImperativeHandle:function(r,o,l){l=l!=null?l.concat([r]):null,Ac(4194308,4,Py.bind(null,o,r),l)},useLayoutEffect:function(r,o){return Ac(4194308,4,r,o)},useInsertionEffect:function(r,o){Ac(4,2,r,o)},useMemo:function(r,o){var l=bn();o=o===void 0?null:o;var c=r();if(Js){ye(!0);try{r()}finally{ye(!1)}}return l.memoizedState=[c,o],c},useReducer:function(r,o,l){var c=bn();if(l!==void 0){var p=l(o);if(Js){ye(!0);try{l(o)}finally{ye(!1)}}}else p=o;return c.memoizedState=c.baseState=p,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:p},c.queue=r,r=r.dispatch=ZS.bind(null,qe,r),[c.memoizedState,r]},useRef:function(r){var o=bn();return r={current:r},o.memoizedState=r},useState:function(r){r=dh(r);var o=r.queue,l=Gy.bind(null,qe,o);return o.dispatch=l,[r.memoizedState,l]},useDebugValue:mh,useDeferredValue:function(r,o){var l=bn();return ph(l,r,o)},useTransition:function(){var r=dh(!1);return r=Uy.bind(null,qe,r.queue,!0,!1),bn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,o,l){var c=qe,p=bn();if(it){if(l===void 0)throw Error(n(407));l=l()}else{if(l=o(),pt===null)throw Error(n(349));(je&124)!==0||hy(c,o,l)}p.memoizedState=l;var _={value:l,getSnapshot:o};return p.queue=_,by(py.bind(null,c,_,r),[r]),c.flags|=2048,Jo(9,Cc(),my.bind(null,c,_,l,o),null),l},useId:function(){var r=bn(),o=pt.identifierPrefix;if(it){var l=or,c=sr;l=(c&~(1<<32-he(c)-1)).toString(32)+l,o=""+o+"R"+l,l=vc++,0<l&&(o+="H"+l.toString(32)),o+=""}else l=$S++,o=""+o+"r"+l.toString(32)+"";return r.memoizedState=o},useHostTransitionStatus:yh,useFormState:Sy,useActionState:Sy,useOptimistic:function(r){var o=bn();o.memoizedState=o.baseState=r;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=l,o=_h.bind(null,qe,!0,l),l.dispatch=o,[r,o]},useMemoCache:uh,useCacheRefresh:function(){return bn().memoizedState=jS.bind(null,qe)}},$y={readContext:fn,use:Tc,useCallback:Vy,useContext:fn,useEffect:Ny,useImperativeHandle:ky,useInsertionEffect:My,useLayoutEffect:Dy,useMemo:Oy,useReducer:Ec,useRef:xy,useState:function(){return Ec(ur)},useDebugValue:mh,useDeferredValue:function(r,o){var l=Vt();return Ly(l,ft.memoizedState,r,o)},useTransition:function(){var r=Ec(ur)[0],o=Vt().memoizedState;return[typeof r=="boolean"?r:wl(r),o]},useSyncExternalStore:dy,useId:Fy,useHostTransitionStatus:yh,useFormState:wy,useActionState:wy,useOptimistic:function(r,o){var l=Vt();return _y(l,ft,r,o)},useMemoCache:uh,useCacheRefresh:qy},ew={readContext:fn,use:Tc,useCallback:Vy,useContext:fn,useEffect:Ny,useImperativeHandle:ky,useInsertionEffect:My,useLayoutEffect:Dy,useMemo:Oy,useReducer:fh,useRef:xy,useState:function(){return fh(ur)},useDebugValue:mh,useDeferredValue:function(r,o){var l=Vt();return ft===null?ph(l,r,o):Ly(l,ft.memoizedState,r,o)},useTransition:function(){var r=fh(ur)[0],o=Vt().memoizedState;return[typeof r=="boolean"?r:wl(r),o]},useSyncExternalStore:dy,useId:Fy,useHostTransitionStatus:yh,useFormState:Ry,useActionState:Ry,useOptimistic:function(r,o){var l=Vt();return ft!==null?_y(l,ft,r,o):(l.baseState=r,[r,l.queue.dispatch])},useMemoCache:uh,useCacheRefresh:qy},Xo=null,xl=0;function Ic(r){var o=xl;return xl+=1,Xo===null&&(Xo=[]),ry(Xo,r,o)}function bl(r,o){o=o.props.ref,r.ref=o!==void 0?o:null}function Rc(r,o){throw o.$$typeof===A?Error(n(525)):(r=Object.prototype.toString.call(o),Error(n(31,r==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":r)))}function Qy(r){var o=r._init;return o(r._payload)}function Wy(r){function o(B,L){if(r){var q=B.deletions;q===null?(B.deletions=[L],B.flags|=16):q.push(L)}}function l(B,L){if(!r)return null;for(;L!==null;)o(B,L),L=L.sibling;return null}function c(B){for(var L=new Map;B!==null;)B.key!==null?L.set(B.key,B):L.set(B.index,B),B=B.sibling;return L}function p(B,L){return B=rr(B,L),B.index=0,B.sibling=null,B}function _(B,L,q){return B.index=q,r?(q=B.alternate,q!==null?(q=q.index,q<L?(B.flags|=67108866,L):q):(B.flags|=67108866,L)):(B.flags|=1048576,L)}function C(B){return r&&B.alternate===null&&(B.flags|=67108866),B}function w(B,L,q,ee){return L===null||L.tag!==6?(L=zd(q,B.mode,ee),L.return=B,L):(L=p(L,q),L.return=B,L)}function M(B,L,q,ee){var _e=q.type;return _e===V?j(B,L,q.props.children,ee,q.key):L!==null&&(L.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===b&&Qy(_e)===L.type)?(L=p(L,q.props),bl(L,q),L.return=B,L):(L=uc(q.type,q.key,q.props,null,B.mode,ee),bl(L,q),L.return=B,L)}function G(B,L,q,ee){return L===null||L.tag!==4||L.stateNode.containerInfo!==q.containerInfo||L.stateNode.implementation!==q.implementation?(L=Bd(q,B.mode,ee),L.return=B,L):(L=p(L,q.children||[]),L.return=B,L)}function j(B,L,q,ee,_e){return L===null||L.tag!==7?(L=qs(q,B.mode,ee,_e),L.return=B,L):(L=p(L,q),L.return=B,L)}function te(B,L,q){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=zd(""+L,B.mode,q),L.return=B,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case S:return q=uc(L.type,L.key,L.props,null,B.mode,q),bl(q,L),q.return=B,q;case R:return L=Bd(L,B.mode,q),L.return=B,L;case b:var ee=L._init;return L=ee(L._payload),te(B,L,q)}if(rt(L)||z(L))return L=qs(L,B.mode,q,null),L.return=B,L;if(typeof L.then=="function")return te(B,Ic(L),q);if(L.$$typeof===oe)return te(B,hc(B,L),q);Rc(B,L)}return null}function K(B,L,q,ee){var _e=L!==null?L.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return _e!==null?null:w(B,L,""+q,ee);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case S:return q.key===_e?M(B,L,q,ee):null;case R:return q.key===_e?G(B,L,q,ee):null;case b:return _e=q._init,q=_e(q._payload),K(B,L,q,ee)}if(rt(q)||z(q))return _e!==null?null:j(B,L,q,ee,null);if(typeof q.then=="function")return K(B,L,Ic(q),ee);if(q.$$typeof===oe)return K(B,L,hc(B,q),ee);Rc(B,q)}return null}function $(B,L,q,ee,_e){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return B=B.get(q)||null,w(L,B,""+ee,_e);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case S:return B=B.get(ee.key===null?q:ee.key)||null,M(L,B,ee,_e);case R:return B=B.get(ee.key===null?q:ee.key)||null,G(L,B,ee,_e);case b:var Ge=ee._init;return ee=Ge(ee._payload),$(B,L,q,ee,_e)}if(rt(ee)||z(ee))return B=B.get(q)||null,j(L,B,ee,_e,null);if(typeof ee.then=="function")return $(B,L,q,Ic(ee),_e);if(ee.$$typeof===oe)return $(B,L,q,hc(L,ee),_e);Rc(L,ee)}return null}function Me(B,L,q,ee){for(var _e=null,Ge=null,Se=L,xe=L=0,Jt=null;Se!==null&&xe<q.length;xe++){Se.index>xe?(Jt=Se,Se=null):Jt=Se.sibling;var et=K(B,Se,q[xe],ee);if(et===null){Se===null&&(Se=Jt);break}r&&Se&&et.alternate===null&&o(B,Se),L=_(et,L,xe),Ge===null?_e=et:Ge.sibling=et,Ge=et,Se=Jt}if(xe===q.length)return l(B,Se),it&&Hs(B,xe),_e;if(Se===null){for(;xe<q.length;xe++)Se=te(B,q[xe],ee),Se!==null&&(L=_(Se,L,xe),Ge===null?_e=Se:Ge.sibling=Se,Ge=Se);return it&&Hs(B,xe),_e}for(Se=c(Se);xe<q.length;xe++)Jt=$(Se,B,xe,q[xe],ee),Jt!==null&&(r&&Jt.alternate!==null&&Se.delete(Jt.key===null?xe:Jt.key),L=_(Jt,L,xe),Ge===null?_e=Jt:Ge.sibling=Jt,Ge=Jt);return r&&Se.forEach(function(rs){return o(B,rs)}),it&&Hs(B,xe),_e}function Re(B,L,q,ee){if(q==null)throw Error(n(151));for(var _e=null,Ge=null,Se=L,xe=L=0,Jt=null,et=q.next();Se!==null&&!et.done;xe++,et=q.next()){Se.index>xe?(Jt=Se,Se=null):Jt=Se.sibling;var rs=K(B,Se,et.value,ee);if(rs===null){Se===null&&(Se=Jt);break}r&&Se&&rs.alternate===null&&o(B,Se),L=_(rs,L,xe),Ge===null?_e=rs:Ge.sibling=rs,Ge=rs,Se=Jt}if(et.done)return l(B,Se),it&&Hs(B,xe),_e;if(Se===null){for(;!et.done;xe++,et=q.next())et=te(B,et.value,ee),et!==null&&(L=_(et,L,xe),Ge===null?_e=et:Ge.sibling=et,Ge=et);return it&&Hs(B,xe),_e}for(Se=c(Se);!et.done;xe++,et=q.next())et=$(Se,B,xe,et.value,ee),et!==null&&(r&&et.alternate!==null&&Se.delete(et.key===null?xe:et.key),L=_(et,L,xe),Ge===null?_e=et:Ge.sibling=et,Ge=et);return r&&Se.forEach(function(tI){return o(B,tI)}),it&&Hs(B,xe),_e}function ht(B,L,q,ee){if(typeof q=="object"&&q!==null&&q.type===V&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case S:e:{for(var _e=q.key;L!==null;){if(L.key===_e){if(_e=q.type,_e===V){if(L.tag===7){l(B,L.sibling),ee=p(L,q.props.children),ee.return=B,B=ee;break e}}else if(L.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===b&&Qy(_e)===L.type){l(B,L.sibling),ee=p(L,q.props),bl(ee,q),ee.return=B,B=ee;break e}l(B,L);break}else o(B,L);L=L.sibling}q.type===V?(ee=qs(q.props.children,B.mode,ee,q.key),ee.return=B,B=ee):(ee=uc(q.type,q.key,q.props,null,B.mode,ee),bl(ee,q),ee.return=B,B=ee)}return C(B);case R:e:{for(_e=q.key;L!==null;){if(L.key===_e)if(L.tag===4&&L.stateNode.containerInfo===q.containerInfo&&L.stateNode.implementation===q.implementation){l(B,L.sibling),ee=p(L,q.children||[]),ee.return=B,B=ee;break e}else{l(B,L);break}else o(B,L);L=L.sibling}ee=Bd(q,B.mode,ee),ee.return=B,B=ee}return C(B);case b:return _e=q._init,q=_e(q._payload),ht(B,L,q,ee)}if(rt(q))return Me(B,L,q,ee);if(z(q)){if(_e=z(q),typeof _e!="function")throw Error(n(150));return q=_e.call(q),Re(B,L,q,ee)}if(typeof q.then=="function")return ht(B,L,Ic(q),ee);if(q.$$typeof===oe)return ht(B,L,hc(B,q),ee);Rc(B,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,L!==null&&L.tag===6?(l(B,L.sibling),ee=p(L,q),ee.return=B,B=ee):(l(B,L),ee=zd(q,B.mode,ee),ee.return=B,B=ee),C(B)):l(B,L)}return function(B,L,q,ee){try{xl=0;var _e=ht(B,L,q,ee);return Xo=null,_e}catch(Se){if(Se===vl||Se===pc)throw Se;var Ge=On(29,Se,null,B.mode);return Ge.lanes=ee,Ge.return=B,Ge}finally{}}}var jo=Wy(!0),Jy=Wy(!1),jn=W(null),Ni=null;function Gr(r){var o=r.alternate;Z(Gt,Gt.current&1),Z(jn,r),Ni===null&&(o===null||$o.current!==null||o.memoizedState!==null)&&(Ni=r)}function Xy(r){if(r.tag===22){if(Z(Gt,Gt.current),Z(jn,r),Ni===null){var o=r.alternate;o!==null&&o.memoizedState!==null&&(Ni=r)}}else Hr()}function Hr(){Z(Gt,Gt.current),Z(jn,jn.current)}function cr(r){ie(jn),Ni===r&&(Ni=null),ie(Gt)}var Gt=W(0);function xc(r){for(var o=r;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||lm(l)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function vh(r,o,l,c){o=r.memoizedState,l=l(c,o),l=l==null?o:v({},o,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var Th={enqueueSetState:function(r,o,l){r=r._reactInternals;var c=Bn(),p=Br(c);p.payload=o,l!=null&&(p.callback=l),o=Fr(r,p,c),o!==null&&(Fn(o,r,c),El(o,r,c))},enqueueReplaceState:function(r,o,l){r=r._reactInternals;var c=Bn(),p=Br(c);p.tag=1,p.payload=o,l!=null&&(p.callback=l),o=Fr(r,p,c),o!==null&&(Fn(o,r,c),El(o,r,c))},enqueueForceUpdate:function(r,o){r=r._reactInternals;var l=Bn(),c=Br(l);c.tag=2,o!=null&&(c.callback=o),o=Fr(r,c,l),o!==null&&(Fn(o,r,l),El(o,r,l))}};function jy(r,o,l,c,p,_,C){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(c,_,C):o.prototype&&o.prototype.isPureReactComponent?!fl(l,c)||!fl(p,_):!0}function Zy(r,o,l,c){r=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,c),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,c),o.state!==r&&Th.enqueueReplaceState(o,o.state,null)}function Xs(r,o){var l=o;if("ref"in o){l={};for(var c in o)c!=="ref"&&(l[c]=o[c])}if(r=r.defaultProps){l===o&&(l=v({},l));for(var p in r)l[p]===void 0&&(l[p]=r[p])}return l}var bc=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function e_(r){bc(r)}function t_(r){console.error(r)}function n_(r){bc(r)}function Nc(r,o){try{var l=r.onUncaughtError;l(o.value,{componentStack:o.stack})}catch(c){setTimeout(function(){throw c})}}function i_(r,o,l){try{var c=r.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Eh(r,o,l){return l=Br(l),l.tag=3,l.payload={element:null},l.callback=function(){Nc(r,o)},l}function r_(r){return r=Br(r),r.tag=3,r}function s_(r,o,l,c){var p=l.type.getDerivedStateFromError;if(typeof p=="function"){var _=c.value;r.payload=function(){return p(_)},r.callback=function(){i_(o,l,c)}}var C=l.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(r.callback=function(){i_(o,l,c),typeof p!="function"&&(Jr===null?Jr=new Set([this]):Jr.add(this));var w=c.stack;this.componentDidCatch(c.value,{componentStack:w!==null?w:""})})}function tw(r,o,l,c,p){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(o=l.alternate,o!==null&&gl(o,l,p,!0),l=jn.current,l!==null){switch(l.tag){case 13:return Ni===null?Kh():l.alternate===null&&It===0&&(It=3),l.flags&=-257,l.flags|=65536,l.lanes=p,c===Jd?l.flags|=16384:(o=l.updateQueue,o===null?l.updateQueue=new Set([c]):o.add(c),$h(r,c,p)),!1;case 22:return l.flags|=65536,c===Jd?l.flags|=16384:(o=l.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=o):(l=o.retryQueue,l===null?o.retryQueue=new Set([c]):l.add(c)),$h(r,c,p)),!1}throw Error(n(435,l.tag))}return $h(r,c,p),Kh(),!1}if(it)return o=jn.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=p,c!==Gd&&(r=Error(n(422),{cause:c}),pl(Qn(r,l)))):(c!==Gd&&(o=Error(n(423),{cause:c}),pl(Qn(o,l))),r=r.current.alternate,r.flags|=65536,p&=-p,r.lanes|=p,c=Qn(c,l),p=Eh(r.stateNode,c,p),Zd(r,p),It!==4&&(It=2)),!1;var _=Error(n(520),{cause:c});if(_=Qn(_,l),Ol===null?Ol=[_]:Ol.push(_),It!==4&&(It=2),o===null)return!0;c=Qn(c,l),l=o;do{switch(l.tag){case 3:return l.flags|=65536,r=p&-p,l.lanes|=r,r=Eh(l.stateNode,c,r),Zd(l,r),!1;case 1:if(o=l.type,_=l.stateNode,(l.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Jr===null||!Jr.has(_))))return l.flags|=65536,p&=-p,l.lanes|=p,p=r_(p),s_(p,r,l,c),Zd(l,p),!1}l=l.return}while(l!==null);return!1}var o_=Error(n(461)),Qt=!1;function en(r,o,l,c){o.child=r===null?Jy(o,null,l,c):jo(o,r.child,l,c)}function a_(r,o,l,c,p){l=l.render;var _=o.ref;if("ref"in c){var C={};for(var w in c)w!=="ref"&&(C[w]=c[w])}else C=c;return Qs(o),c=rh(r,o,l,C,_,p),w=sh(),r!==null&&!Qt?(oh(r,o,p),fr(r,o,p)):(it&&w&&Fd(o),o.flags|=1,en(r,o,c,p),o.child)}function l_(r,o,l,c,p){if(r===null){var _=l.type;return typeof _=="function"&&!Ud(_)&&_.defaultProps===void 0&&l.compare===null?(o.tag=15,o.type=_,u_(r,o,_,c,p)):(r=uc(l.type,null,c,o,o.mode,p),r.ref=o.ref,r.return=o,o.child=r)}if(_=r.child,!bh(r,p)){var C=_.memoizedProps;if(l=l.compare,l=l!==null?l:fl,l(C,c)&&r.ref===o.ref)return fr(r,o,p)}return o.flags|=1,r=rr(_,c),r.ref=o.ref,r.return=o,o.child=r}function u_(r,o,l,c,p){if(r!==null){var _=r.memoizedProps;if(fl(_,c)&&r.ref===o.ref)if(Qt=!1,o.pendingProps=c=_,bh(r,p))(r.flags&131072)!==0&&(Qt=!0);else return o.lanes=r.lanes,fr(r,o,p)}return Ch(r,o,l,c,p)}function c_(r,o,l){var c=o.pendingProps,p=c.children,_=r!==null?r.memoizedState:null;if(c.mode==="hidden"){if((o.flags&128)!==0){if(c=_!==null?_.baseLanes|l:l,r!==null){for(p=o.child=r.child,_=0;p!==null;)_=_|p.lanes|p.childLanes,p=p.sibling;o.childLanes=_&~c}else o.childLanes=0,o.child=null;return f_(r,o,c,l)}if((l&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},r!==null&&mc(o,_!==null?_.cachePool:null),_!==null?uy(o,_):th(),Xy(o);else return o.lanes=o.childLanes=536870912,f_(r,o,_!==null?_.baseLanes|l:l,l)}else _!==null?(mc(o,_.cachePool),uy(o,_),Hr(),o.memoizedState=null):(r!==null&&mc(o,null),th(),Hr());return en(r,o,p,l),o.child}function f_(r,o,l,c){var p=Wd();return p=p===null?null:{parent:qt._currentValue,pool:p},o.memoizedState={baseLanes:l,cachePool:p},r!==null&&mc(o,null),th(),Xy(o),r!==null&&gl(r,o,c,!0),null}function Mc(r,o){var l=o.ref;if(l===null)r!==null&&r.ref!==null&&(o.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(n(284));(r===null||r.ref!==l)&&(o.flags|=4194816)}}function Ch(r,o,l,c,p){return Qs(o),l=rh(r,o,l,c,void 0,p),c=sh(),r!==null&&!Qt?(oh(r,o,p),fr(r,o,p)):(it&&c&&Fd(o),o.flags|=1,en(r,o,l,p),o.child)}function d_(r,o,l,c,p,_){return Qs(o),o.updateQueue=null,l=fy(o,c,l,p),cy(r),c=sh(),r!==null&&!Qt?(oh(r,o,_),fr(r,o,_)):(it&&c&&Fd(o),o.flags|=1,en(r,o,l,_),o.child)}function h_(r,o,l,c,p){if(Qs(o),o.stateNode===null){var _=qo,C=l.contextType;typeof C=="object"&&C!==null&&(_=fn(C)),_=new l(c,_),o.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Th,o.stateNode=_,_._reactInternals=o,_=o.stateNode,_.props=c,_.state=o.memoizedState,_.refs={},Xd(o),C=l.contextType,_.context=typeof C=="object"&&C!==null?fn(C):qo,_.state=o.memoizedState,C=l.getDerivedStateFromProps,typeof C=="function"&&(vh(o,l,C,c),_.state=o.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(C=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),C!==_.state&&Th.enqueueReplaceState(_,_.state,null),Al(o,c,_,p),Cl(),_.state=o.memoizedState),typeof _.componentDidMount=="function"&&(o.flags|=4194308),c=!0}else if(r===null){_=o.stateNode;var w=o.memoizedProps,M=Xs(l,w);_.props=M;var G=_.context,j=l.contextType;C=qo,typeof j=="object"&&j!==null&&(C=fn(j));var te=l.getDerivedStateFromProps;j=typeof te=="function"||typeof _.getSnapshotBeforeUpdate=="function",w=o.pendingProps!==w,j||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(w||G!==C)&&Zy(o,_,c,C),zr=!1;var K=o.memoizedState;_.state=K,Al(o,c,_,p),Cl(),G=o.memoizedState,w||K!==G||zr?(typeof te=="function"&&(vh(o,l,te,c),G=o.memoizedState),(M=zr||jy(o,l,M,c,K,G,C))?(j||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(o.flags|=4194308)):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=c,o.memoizedState=G),_.props=c,_.state=G,_.context=C,c=M):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),c=!1)}else{_=o.stateNode,jd(r,o),C=o.memoizedProps,j=Xs(l,C),_.props=j,te=o.pendingProps,K=_.context,G=l.contextType,M=qo,typeof G=="object"&&G!==null&&(M=fn(G)),w=l.getDerivedStateFromProps,(G=typeof w=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(C!==te||K!==M)&&Zy(o,_,c,M),zr=!1,K=o.memoizedState,_.state=K,Al(o,c,_,p),Cl();var $=o.memoizedState;C!==te||K!==$||zr||r!==null&&r.dependencies!==null&&dc(r.dependencies)?(typeof w=="function"&&(vh(o,l,w,c),$=o.memoizedState),(j=zr||jy(o,l,j,c,K,$,M)||r!==null&&r.dependencies!==null&&dc(r.dependencies))?(G||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(c,$,M),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(c,$,M)),typeof _.componentDidUpdate=="function"&&(o.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof _.componentDidUpdate!="function"||C===r.memoizedProps&&K===r.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||C===r.memoizedProps&&K===r.memoizedState||(o.flags|=1024),o.memoizedProps=c,o.memoizedState=$),_.props=c,_.state=$,_.context=M,c=j):(typeof _.componentDidUpdate!="function"||C===r.memoizedProps&&K===r.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||C===r.memoizedProps&&K===r.memoizedState||(o.flags|=1024),c=!1)}return _=c,Mc(r,o),c=(o.flags&128)!==0,_||c?(_=o.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:_.render(),o.flags|=1,r!==null&&c?(o.child=jo(o,r.child,null,p),o.child=jo(o,null,l,p)):en(r,o,l,p),o.memoizedState=_.state,r=o.child):r=fr(r,o,p),r}function m_(r,o,l,c){return ml(),o.flags|=256,en(r,o,l,c),o.child}var Ah={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Sh(r){return{baseLanes:r,cachePool:ty()}}function wh(r,o,l){return r=r!==null?r.childLanes&~l:0,o&&(r|=Zn),r}function p_(r,o,l){var c=o.pendingProps,p=!1,_=(o.flags&128)!==0,C;if((C=_)||(C=r!==null&&r.memoizedState===null?!1:(Gt.current&2)!==0),C&&(p=!0,o.flags&=-129),C=(o.flags&32)!==0,o.flags&=-33,r===null){if(it){if(p?Gr(o):Hr(),it){var w=wt,M;if(M=w){e:{for(M=w,w=bi;M.nodeType!==8;){if(!w){w=null;break e}if(M=ci(M.nextSibling),M===null){w=null;break e}}w=M}w!==null?(o.memoizedState={dehydrated:w,treeContext:Gs!==null?{id:sr,overflow:or}:null,retryLane:536870912,hydrationErrors:null},M=On(18,null,null,0),M.stateNode=w,M.return=o,o.child=M,Sn=o,wt=null,M=!0):M=!1}M||Ys(o)}if(w=o.memoizedState,w!==null&&(w=w.dehydrated,w!==null))return lm(w)?o.lanes=32:o.lanes=536870912,null;cr(o)}return w=c.children,c=c.fallback,p?(Hr(),p=o.mode,w=Dc({mode:"hidden",children:w},p),c=qs(c,p,l,null),w.return=o,c.return=o,w.sibling=c,o.child=w,p=o.child,p.memoizedState=Sh(l),p.childLanes=wh(r,C,l),o.memoizedState=Ah,c):(Gr(o),Ih(o,w))}if(M=r.memoizedState,M!==null&&(w=M.dehydrated,w!==null)){if(_)o.flags&256?(Gr(o),o.flags&=-257,o=Rh(r,o,l)):o.memoizedState!==null?(Hr(),o.child=r.child,o.flags|=128,o=null):(Hr(),p=c.fallback,w=o.mode,c=Dc({mode:"visible",children:c.children},w),p=qs(p,w,l,null),p.flags|=2,c.return=o,p.return=o,c.sibling=p,o.child=c,jo(o,r.child,null,l),c=o.child,c.memoizedState=Sh(l),c.childLanes=wh(r,C,l),o.memoizedState=Ah,o=p);else if(Gr(o),lm(w)){if(C=w.nextSibling&&w.nextSibling.dataset,C)var G=C.dgst;C=G,c=Error(n(419)),c.stack="",c.digest=C,pl({value:c,source:null,stack:null}),o=Rh(r,o,l)}else if(Qt||gl(r,o,l,!1),C=(l&r.childLanes)!==0,Qt||C){if(C=pt,C!==null&&(c=l&-l,c=(c&42)!==0?1:Mr(c),c=(c&(C.suspendedLanes|l))!==0?0:c,c!==0&&c!==M.retryLane))throw M.retryLane=c,Fo(r,c),Fn(C,r,c),o_;w.data==="$?"||Kh(),o=Rh(r,o,l)}else w.data==="$?"?(o.flags|=192,o.child=r.child,o=null):(r=M.treeContext,wt=ci(w.nextSibling),Sn=o,it=!0,Ks=null,bi=!1,r!==null&&(Jn[Xn++]=sr,Jn[Xn++]=or,Jn[Xn++]=Gs,sr=r.id,or=r.overflow,Gs=o),o=Ih(o,c.children),o.flags|=4096);return o}return p?(Hr(),p=c.fallback,w=o.mode,M=r.child,G=M.sibling,c=rr(M,{mode:"hidden",children:c.children}),c.subtreeFlags=M.subtreeFlags&65011712,G!==null?p=rr(G,p):(p=qs(p,w,l,null),p.flags|=2),p.return=o,c.return=o,c.sibling=p,o.child=c,c=p,p=o.child,w=r.child.memoizedState,w===null?w=Sh(l):(M=w.cachePool,M!==null?(G=qt._currentValue,M=M.parent!==G?{parent:G,pool:G}:M):M=ty(),w={baseLanes:w.baseLanes|l,cachePool:M}),p.memoizedState=w,p.childLanes=wh(r,C,l),o.memoizedState=Ah,c):(Gr(o),l=r.child,r=l.sibling,l=rr(l,{mode:"visible",children:c.children}),l.return=o,l.sibling=null,r!==null&&(C=o.deletions,C===null?(o.deletions=[r],o.flags|=16):C.push(r)),o.child=l,o.memoizedState=null,l)}function Ih(r,o){return o=Dc({mode:"visible",children:o},r.mode),o.return=r,r.child=o}function Dc(r,o){return r=On(22,r,null,o),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function Rh(r,o,l){return jo(o,r.child,null,l),r=Ih(o,o.pendingProps.children),r.flags|=2,o.memoizedState=null,r}function g_(r,o,l){r.lanes|=o;var c=r.alternate;c!==null&&(c.lanes|=o),Kd(r.return,o,l)}function xh(r,o,l,c,p){var _=r.memoizedState;_===null?r.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:p}:(_.isBackwards=o,_.rendering=null,_.renderingStartTime=0,_.last=c,_.tail=l,_.tailMode=p)}function y_(r,o,l){var c=o.pendingProps,p=c.revealOrder,_=c.tail;if(en(r,o,c.children,l),c=Gt.current,(c&2)!==0)c=c&1|2,o.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=o.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&g_(r,l,o);else if(r.tag===19)g_(r,l,o);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===o)break e;for(;r.sibling===null;){if(r.return===null||r.return===o)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}c&=1}switch(Z(Gt,c),p){case"forwards":for(l=o.child,p=null;l!==null;)r=l.alternate,r!==null&&xc(r)===null&&(p=l),l=l.sibling;l=p,l===null?(p=o.child,o.child=null):(p=l.sibling,l.sibling=null),xh(o,!1,p,l,_);break;case"backwards":for(l=null,p=o.child,o.child=null;p!==null;){if(r=p.alternate,r!==null&&xc(r)===null){o.child=p;break}r=p.sibling,p.sibling=l,l=p,p=r}xh(o,!0,l,null,_);break;case"together":xh(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function fr(r,o,l){if(r!==null&&(o.dependencies=r.dependencies),Wr|=o.lanes,(l&o.childLanes)===0)if(r!==null){if(gl(r,o,l,!1),(l&o.childLanes)===0)return null}else return null;if(r!==null&&o.child!==r.child)throw Error(n(153));if(o.child!==null){for(r=o.child,l=rr(r,r.pendingProps),o.child=l,l.return=o;r.sibling!==null;)r=r.sibling,l=l.sibling=rr(r,r.pendingProps),l.return=o;l.sibling=null}return o.child}function bh(r,o){return(r.lanes&o)!==0?!0:(r=r.dependencies,!!(r!==null&&dc(r)))}function nw(r,o,l){switch(o.tag){case 3:ut(o,o.stateNode.containerInfo),Ur(o,qt,r.memoizedState.cache),ml();break;case 27:case 5:pi(o);break;case 4:ut(o,o.stateNode.containerInfo);break;case 10:Ur(o,o.type,o.memoizedProps.value);break;case 13:var c=o.memoizedState;if(c!==null)return c.dehydrated!==null?(Gr(o),o.flags|=128,null):(l&o.child.childLanes)!==0?p_(r,o,l):(Gr(o),r=fr(r,o,l),r!==null?r.sibling:null);Gr(o);break;case 19:var p=(r.flags&128)!==0;if(c=(l&o.childLanes)!==0,c||(gl(r,o,l,!1),c=(l&o.childLanes)!==0),p){if(c)return y_(r,o,l);o.flags|=128}if(p=o.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),Z(Gt,Gt.current),c)break;return null;case 22:case 23:return o.lanes=0,c_(r,o,l);case 24:Ur(o,qt,r.memoizedState.cache)}return fr(r,o,l)}function __(r,o,l){if(r!==null)if(r.memoizedProps!==o.pendingProps)Qt=!0;else{if(!bh(r,l)&&(o.flags&128)===0)return Qt=!1,nw(r,o,l);Qt=(r.flags&131072)!==0}else Qt=!1,it&&(o.flags&1048576)!==0&&Qg(o,fc,o.index);switch(o.lanes=0,o.tag){case 16:e:{r=o.pendingProps;var c=o.elementType,p=c._init;if(c=p(c._payload),o.type=c,typeof c=="function")Ud(c)?(r=Xs(c,r),o.tag=1,o=h_(null,o,c,r,l)):(o.tag=0,o=Ch(null,o,c,r,l));else{if(c!=null){if(p=c.$$typeof,p===pe){o.tag=11,o=a_(null,o,c,r,l);break e}else if(p===O){o.tag=14,o=l_(null,o,c,r,l);break e}}throw o=We(c)||c,Error(n(306,o,""))}}return o;case 0:return Ch(r,o,o.type,o.pendingProps,l);case 1:return c=o.type,p=Xs(c,o.pendingProps),h_(r,o,c,p,l);case 3:e:{if(ut(o,o.stateNode.containerInfo),r===null)throw Error(n(387));c=o.pendingProps;var _=o.memoizedState;p=_.element,jd(r,o),Al(o,c,null,l);var C=o.memoizedState;if(c=C.cache,Ur(o,qt,c),c!==_.cache&&Yd(o,[qt],l,!0),Cl(),c=C.element,_.isDehydrated)if(_={element:c,isDehydrated:!1,cache:C.cache},o.updateQueue.baseState=_,o.memoizedState=_,o.flags&256){o=m_(r,o,c,l);break e}else if(c!==p){p=Qn(Error(n(424)),o),pl(p),o=m_(r,o,c,l);break e}else{switch(r=o.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(wt=ci(r.firstChild),Sn=o,it=!0,Ks=null,bi=!0,l=Jy(o,null,c,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(ml(),c===p){o=fr(r,o,l);break e}en(r,o,c,l)}o=o.child}return o;case 26:return Mc(r,o),r===null?(l=Cv(o.type,null,o.pendingProps,null))?o.memoizedState=l:it||(l=o.type,r=o.pendingProps,c=Yc(be.current).createElement(l),c[zt]=o,c[Dt]=r,nn(c,l,r),xt(c),o.stateNode=c):o.memoizedState=Cv(o.type,r.memoizedProps,o.pendingProps,r.memoizedState),null;case 27:return pi(o),r===null&&it&&(c=o.stateNode=vv(o.type,o.pendingProps,be.current),Sn=o,bi=!0,p=wt,Zr(o.type)?(um=p,wt=ci(c.firstChild)):wt=p),en(r,o,o.pendingProps.children,l),Mc(r,o),r===null&&(o.flags|=4194304),o.child;case 5:return r===null&&it&&((p=c=wt)&&(c=Nw(c,o.type,o.pendingProps,bi),c!==null?(o.stateNode=c,Sn=o,wt=ci(c.firstChild),bi=!1,p=!0):p=!1),p||Ys(o)),pi(o),p=o.type,_=o.pendingProps,C=r!==null?r.memoizedProps:null,c=_.children,sm(p,_)?c=null:C!==null&&sm(p,C)&&(o.flags|=32),o.memoizedState!==null&&(p=rh(r,o,QS,null,null,l),Kl._currentValue=p),Mc(r,o),en(r,o,c,l),o.child;case 6:return r===null&&it&&((r=l=wt)&&(l=Mw(l,o.pendingProps,bi),l!==null?(o.stateNode=l,Sn=o,wt=null,r=!0):r=!1),r||Ys(o)),null;case 13:return p_(r,o,l);case 4:return ut(o,o.stateNode.containerInfo),c=o.pendingProps,r===null?o.child=jo(o,null,c,l):en(r,o,c,l),o.child;case 11:return a_(r,o,o.type,o.pendingProps,l);case 7:return en(r,o,o.pendingProps,l),o.child;case 8:return en(r,o,o.pendingProps.children,l),o.child;case 12:return en(r,o,o.pendingProps.children,l),o.child;case 10:return c=o.pendingProps,Ur(o,o.type,c.value),en(r,o,c.children,l),o.child;case 9:return p=o.type._context,c=o.pendingProps.children,Qs(o),p=fn(p),c=c(p),o.flags|=1,en(r,o,c,l),o.child;case 14:return l_(r,o,o.type,o.pendingProps,l);case 15:return u_(r,o,o.type,o.pendingProps,l);case 19:return y_(r,o,l);case 31:return c=o.pendingProps,l=o.mode,c={mode:c.mode,children:c.children},r===null?(l=Dc(c,l),l.ref=o.ref,o.child=l,l.return=o,o=l):(l=rr(r.child,c),l.ref=o.ref,o.child=l,l.return=o,o=l),o;case 22:return c_(r,o,l);case 24:return Qs(o),c=fn(qt),r===null?(p=Wd(),p===null&&(p=pt,_=$d(),p.pooledCache=_,_.refCount++,_!==null&&(p.pooledCacheLanes|=l),p=_),o.memoizedState={parent:c,cache:p},Xd(o),Ur(o,qt,p)):((r.lanes&l)!==0&&(jd(r,o),Al(o,null,null,l),Cl()),p=r.memoizedState,_=o.memoizedState,p.parent!==c?(p={parent:c,cache:c},o.memoizedState=p,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=p),Ur(o,qt,c)):(c=_.cache,Ur(o,qt,c),c!==p.cache&&Yd(o,[qt],l,!0))),en(r,o,o.pendingProps.children,l),o.child;case 29:throw o.pendingProps}throw Error(n(156,o.tag))}function dr(r){r.flags|=4}function v_(r,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!Rv(o)){if(o=jn.current,o!==null&&((je&4194048)===je?Ni!==null:(je&62914560)!==je&&(je&536870912)===0||o!==Ni))throw Tl=Jd,ny;r.flags|=8192}}function Pc(r,o){o!==null&&(r.flags|=4),r.flags&16384&&(o=r.tag!==22?$a():536870912,r.lanes|=o,na|=o)}function Nl(r,o){if(!it)switch(r.tailMode){case"hidden":o=r.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?o||r.tail===null?r.tail=null:r.tail.sibling=null:c.sibling=null}}function Ct(r){var o=r.alternate!==null&&r.alternate.child===r.child,l=0,c=0;if(o)for(var p=r.child;p!==null;)l|=p.lanes|p.childLanes,c|=p.subtreeFlags&65011712,c|=p.flags&65011712,p.return=r,p=p.sibling;else for(p=r.child;p!==null;)l|=p.lanes|p.childLanes,c|=p.subtreeFlags,c|=p.flags,p.return=r,p=p.sibling;return r.subtreeFlags|=c,r.childLanes=l,o}function iw(r,o,l){var c=o.pendingProps;switch(qd(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ct(o),null;case 1:return Ct(o),null;case 3:return l=o.stateNode,c=null,r!==null&&(c=r.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),lr(qt),yn(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(r===null||r.child===null)&&(hl(o)?dr(o):r===null||r.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Xg())),Ct(o),null;case 26:return l=o.memoizedState,r===null?(dr(o),l!==null?(Ct(o),v_(o,l)):(Ct(o),o.flags&=-16777217)):l?l!==r.memoizedState?(dr(o),Ct(o),v_(o,l)):(Ct(o),o.flags&=-16777217):(r.memoizedProps!==c&&dr(o),Ct(o),o.flags&=-16777217),null;case 27:Rn(o),l=be.current;var p=o.type;if(r!==null&&o.stateNode!=null)r.memoizedProps!==c&&dr(o);else{if(!c){if(o.stateNode===null)throw Error(n(166));return Ct(o),null}r=Ce.current,hl(o)?Wg(o):(r=vv(p,c,l),o.stateNode=r,dr(o))}return Ct(o),null;case 5:if(Rn(o),l=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==c&&dr(o);else{if(!c){if(o.stateNode===null)throw Error(n(166));return Ct(o),null}if(r=Ce.current,hl(o))Wg(o);else{switch(p=Yc(be.current),r){case 1:r=p.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:r=p.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":r=p.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":r=p.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":r=p.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof c.is=="string"?p.createElement("select",{is:c.is}):p.createElement("select"),c.multiple?r.multiple=!0:c.size&&(r.size=c.size);break;default:r=typeof c.is=="string"?p.createElement(l,{is:c.is}):p.createElement(l)}}r[zt]=o,r[Dt]=c;e:for(p=o.child;p!==null;){if(p.tag===5||p.tag===6)r.appendChild(p.stateNode);else if(p.tag!==4&&p.tag!==27&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===o)break e;for(;p.sibling===null;){if(p.return===null||p.return===o)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}o.stateNode=r;e:switch(nn(r,l,c),l){case"button":case"input":case"select":case"textarea":r=!!c.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&dr(o)}}return Ct(o),o.flags&=-16777217,null;case 6:if(r&&o.stateNode!=null)r.memoizedProps!==c&&dr(o);else{if(typeof c!="string"&&o.stateNode===null)throw Error(n(166));if(r=be.current,hl(o)){if(r=o.stateNode,l=o.memoizedProps,c=null,p=Sn,p!==null)switch(p.tag){case 27:case 5:c=p.memoizedProps}r[zt]=o,r=!!(r.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||dv(r.nodeValue,l)),r||Ys(o)}else r=Yc(r).createTextNode(c),r[zt]=o,o.stateNode=r}return Ct(o),null;case 13:if(c=o.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(p=hl(o),c!==null&&c.dehydrated!==null){if(r===null){if(!p)throw Error(n(318));if(p=o.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(n(317));p[zt]=o}else ml(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Ct(o),p=!1}else p=Xg(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=p),p=!0;if(!p)return o.flags&256?(cr(o),o):(cr(o),null)}if(cr(o),(o.flags&128)!==0)return o.lanes=l,o;if(l=c!==null,r=r!==null&&r.memoizedState!==null,l){c=o.child,p=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(p=c.alternate.memoizedState.cachePool.pool);var _=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(_=c.memoizedState.cachePool.pool),_!==p&&(c.flags|=2048)}return l!==r&&l&&(o.child.flags|=8192),Pc(o,o.updateQueue),Ct(o),null;case 4:return yn(),r===null&&em(o.stateNode.containerInfo),Ct(o),null;case 10:return lr(o.type),Ct(o),null;case 19:if(ie(Gt),p=o.memoizedState,p===null)return Ct(o),null;if(c=(o.flags&128)!==0,_=p.rendering,_===null)if(c)Nl(p,!1);else{if(It!==0||r!==null&&(r.flags&128)!==0)for(r=o.child;r!==null;){if(_=xc(r),_!==null){for(o.flags|=128,Nl(p,!1),r=_.updateQueue,o.updateQueue=r,Pc(o,r),o.subtreeFlags=0,r=l,l=o.child;l!==null;)$g(l,r),l=l.sibling;return Z(Gt,Gt.current&1|2),o.child}r=r.sibling}p.tail!==null&&xn()>Oc&&(o.flags|=128,c=!0,Nl(p,!1),o.lanes=4194304)}else{if(!c)if(r=xc(_),r!==null){if(o.flags|=128,c=!0,r=r.updateQueue,o.updateQueue=r,Pc(o,r),Nl(p,!0),p.tail===null&&p.tailMode==="hidden"&&!_.alternate&&!it)return Ct(o),null}else 2*xn()-p.renderingStartTime>Oc&&l!==536870912&&(o.flags|=128,c=!0,Nl(p,!1),o.lanes=4194304);p.isBackwards?(_.sibling=o.child,o.child=_):(r=p.last,r!==null?r.sibling=_:o.child=_,p.last=_)}return p.tail!==null?(o=p.tail,p.rendering=o,p.tail=o.sibling,p.renderingStartTime=xn(),o.sibling=null,r=Gt.current,Z(Gt,c?r&1|2:r&1),o):(Ct(o),null);case 22:case 23:return cr(o),nh(),c=o.memoizedState!==null,r!==null?r.memoizedState!==null!==c&&(o.flags|=8192):c&&(o.flags|=8192),c?(l&536870912)!==0&&(o.flags&128)===0&&(Ct(o),o.subtreeFlags&6&&(o.flags|=8192)):Ct(o),l=o.updateQueue,l!==null&&Pc(o,l.retryQueue),l=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),c=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(c=o.memoizedState.cachePool.pool),c!==l&&(o.flags|=2048),r!==null&&ie(Ws),null;case 24:return l=null,r!==null&&(l=r.memoizedState.cache),o.memoizedState.cache!==l&&(o.flags|=2048),lr(qt),Ct(o),null;case 25:return null;case 30:return null}throw Error(n(156,o.tag))}function rw(r,o){switch(qd(o),o.tag){case 1:return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 3:return lr(qt),yn(),r=o.flags,(r&65536)!==0&&(r&128)===0?(o.flags=r&-65537|128,o):null;case 26:case 27:case 5:return Rn(o),null;case 13:if(cr(o),r=o.memoizedState,r!==null&&r.dehydrated!==null){if(o.alternate===null)throw Error(n(340));ml()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 19:return ie(Gt),null;case 4:return yn(),null;case 10:return lr(o.type),null;case 22:case 23:return cr(o),nh(),r!==null&&ie(Ws),r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 24:return lr(qt),null;case 25:return null;default:return null}}function T_(r,o){switch(qd(o),o.tag){case 3:lr(qt),yn();break;case 26:case 27:case 5:Rn(o);break;case 4:yn();break;case 13:cr(o);break;case 19:ie(Gt);break;case 10:lr(o.type);break;case 22:case 23:cr(o),nh(),r!==null&&ie(Ws);break;case 24:lr(qt)}}function Ml(r,o){try{var l=o.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var p=c.next;l=p;do{if((l.tag&r)===r){c=void 0;var _=l.create,C=l.inst;c=_(),C.destroy=c}l=l.next}while(l!==p)}}catch(w){mt(o,o.return,w)}}function Kr(r,o,l){try{var c=o.updateQueue,p=c!==null?c.lastEffect:null;if(p!==null){var _=p.next;c=_;do{if((c.tag&r)===r){var C=c.inst,w=C.destroy;if(w!==void 0){C.destroy=void 0,p=o;var M=l,G=w;try{G()}catch(j){mt(p,M,j)}}}c=c.next}while(c!==_)}}catch(j){mt(o,o.return,j)}}function E_(r){var o=r.updateQueue;if(o!==null){var l=r.stateNode;try{ly(o,l)}catch(c){mt(r,r.return,c)}}}function C_(r,o,l){l.props=Xs(r.type,r.memoizedProps),l.state=r.memoizedState;try{l.componentWillUnmount()}catch(c){mt(r,o,c)}}function Dl(r,o){try{var l=r.ref;if(l!==null){switch(r.tag){case 26:case 27:case 5:var c=r.stateNode;break;case 30:c=r.stateNode;break;default:c=r.stateNode}typeof l=="function"?r.refCleanup=l(c):l.current=c}}catch(p){mt(r,o,p)}}function Mi(r,o){var l=r.ref,c=r.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(p){mt(r,o,p)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(p){mt(r,o,p)}else l.current=null}function A_(r){var o=r.type,l=r.memoizedProps,c=r.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(p){mt(r,r.return,p)}}function Nh(r,o,l){try{var c=r.stateNode;ww(c,r.type,l,o),c[Dt]=o}catch(p){mt(r,r.return,p)}}function S_(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Zr(r.type)||r.tag===4}function Mh(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||S_(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Zr(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Dh(r,o,l){var c=r.tag;if(c===5||c===6)r=r.stateNode,o?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(r,o):(o=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,o.appendChild(r),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=Kc));else if(c!==4&&(c===27&&Zr(r.type)&&(l=r.stateNode,o=null),r=r.child,r!==null))for(Dh(r,o,l),r=r.sibling;r!==null;)Dh(r,o,l),r=r.sibling}function kc(r,o,l){var c=r.tag;if(c===5||c===6)r=r.stateNode,o?l.insertBefore(r,o):l.appendChild(r);else if(c!==4&&(c===27&&Zr(r.type)&&(l=r.stateNode),r=r.child,r!==null))for(kc(r,o,l),r=r.sibling;r!==null;)kc(r,o,l),r=r.sibling}function w_(r){var o=r.stateNode,l=r.memoizedProps;try{for(var c=r.type,p=o.attributes;p.length;)o.removeAttributeNode(p[0]);nn(o,c,l),o[zt]=r,o[Dt]=l}catch(_){mt(r,r.return,_)}}var hr=!1,Nt=!1,Ph=!1,I_=typeof WeakSet=="function"?WeakSet:Set,Wt=null;function sw(r,o){if(r=r.containerInfo,im=jc,r=Lg(r),Md(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var p=c.anchorOffset,_=c.focusNode;c=c.focusOffset;try{l.nodeType,_.nodeType}catch{l=null;break e}var C=0,w=-1,M=-1,G=0,j=0,te=r,K=null;t:for(;;){for(var $;te!==l||p!==0&&te.nodeType!==3||(w=C+p),te!==_||c!==0&&te.nodeType!==3||(M=C+c),te.nodeType===3&&(C+=te.nodeValue.length),($=te.firstChild)!==null;)K=te,te=$;for(;;){if(te===r)break t;if(K===l&&++G===p&&(w=C),K===_&&++j===c&&(M=C),($=te.nextSibling)!==null)break;te=K,K=te.parentNode}te=$}l=w===-1||M===-1?null:{start:w,end:M}}else l=null}l=l||{start:0,end:0}}else l=null;for(rm={focusedElem:r,selectionRange:l},jc=!1,Wt=o;Wt!==null;)if(o=Wt,r=o.child,(o.subtreeFlags&1024)!==0&&r!==null)r.return=o,Wt=r;else for(;Wt!==null;){switch(o=Wt,_=o.alternate,r=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&_!==null){r=void 0,l=o,p=_.memoizedProps,_=_.memoizedState,c=l.stateNode;try{var Me=Xs(l.type,p,l.elementType===l.type);r=c.getSnapshotBeforeUpdate(Me,_),c.__reactInternalSnapshotBeforeUpdate=r}catch(Re){mt(l,l.return,Re)}}break;case 3:if((r&1024)!==0){if(r=o.stateNode.containerInfo,l=r.nodeType,l===9)am(r);else if(l===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":am(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(n(163))}if(r=o.sibling,r!==null){r.return=o.return,Wt=r;break}Wt=o.return}}function R_(r,o,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:Yr(r,l),c&4&&Ml(5,l);break;case 1:if(Yr(r,l),c&4)if(r=l.stateNode,o===null)try{r.componentDidMount()}catch(C){mt(l,l.return,C)}else{var p=Xs(l.type,o.memoizedProps);o=o.memoizedState;try{r.componentDidUpdate(p,o,r.__reactInternalSnapshotBeforeUpdate)}catch(C){mt(l,l.return,C)}}c&64&&E_(l),c&512&&Dl(l,l.return);break;case 3:if(Yr(r,l),c&64&&(r=l.updateQueue,r!==null)){if(o=null,l.child!==null)switch(l.child.tag){case 27:case 5:o=l.child.stateNode;break;case 1:o=l.child.stateNode}try{ly(r,o)}catch(C){mt(l,l.return,C)}}break;case 27:o===null&&c&4&&w_(l);case 26:case 5:Yr(r,l),o===null&&c&4&&A_(l),c&512&&Dl(l,l.return);break;case 12:Yr(r,l);break;case 13:Yr(r,l),c&4&&N_(r,l),c&64&&(r=l.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(l=mw.bind(null,l),Dw(r,l))));break;case 22:if(c=l.memoizedState!==null||hr,!c){o=o!==null&&o.memoizedState!==null||Nt,p=hr;var _=Nt;hr=c,(Nt=o)&&!_?$r(r,l,(l.subtreeFlags&8772)!==0):Yr(r,l),hr=p,Nt=_}break;case 30:break;default:Yr(r,l)}}function x_(r){var o=r.alternate;o!==null&&(r.alternate=null,x_(o)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(o=r.stateNode,o!==null&&kr(o)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Et=null,Nn=!1;function mr(r,o,l){for(l=l.child;l!==null;)b_(r,o,l),l=l.sibling}function b_(r,o,l){if(re&&typeof re.onCommitFiberUnmount=="function")try{re.onCommitFiberUnmount(gt,l)}catch{}switch(l.tag){case 26:Nt||Mi(l,o),mr(r,o,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Nt||Mi(l,o);var c=Et,p=Nn;Zr(l.type)&&(Et=l.stateNode,Nn=!1),mr(r,o,l),Fl(l.stateNode),Et=c,Nn=p;break;case 5:Nt||Mi(l,o);case 6:if(c=Et,p=Nn,Et=null,mr(r,o,l),Et=c,Nn=p,Et!==null)if(Nn)try{(Et.nodeType===9?Et.body:Et.nodeName==="HTML"?Et.ownerDocument.body:Et).removeChild(l.stateNode)}catch(_){mt(l,o,_)}else try{Et.removeChild(l.stateNode)}catch(_){mt(l,o,_)}break;case 18:Et!==null&&(Nn?(r=Et,yv(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,l.stateNode),Wl(r)):yv(Et,l.stateNode));break;case 4:c=Et,p=Nn,Et=l.stateNode.containerInfo,Nn=!0,mr(r,o,l),Et=c,Nn=p;break;case 0:case 11:case 14:case 15:Nt||Kr(2,l,o),Nt||Kr(4,l,o),mr(r,o,l);break;case 1:Nt||(Mi(l,o),c=l.stateNode,typeof c.componentWillUnmount=="function"&&C_(l,o,c)),mr(r,o,l);break;case 21:mr(r,o,l);break;case 22:Nt=(c=Nt)||l.memoizedState!==null,mr(r,o,l),Nt=c;break;default:mr(r,o,l)}}function N_(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Wl(r)}catch(l){mt(o,o.return,l)}}function ow(r){switch(r.tag){case 13:case 19:var o=r.stateNode;return o===null&&(o=r.stateNode=new I_),o;case 22:return r=r.stateNode,o=r._retryCache,o===null&&(o=r._retryCache=new I_),o;default:throw Error(n(435,r.tag))}}function kh(r,o){var l=ow(r);o.forEach(function(c){var p=pw.bind(null,r,c);l.has(c)||(l.add(c),c.then(p,p))})}function Ln(r,o){var l=o.deletions;if(l!==null)for(var c=0;c<l.length;c++){var p=l[c],_=r,C=o,w=C;e:for(;w!==null;){switch(w.tag){case 27:if(Zr(w.type)){Et=w.stateNode,Nn=!1;break e}break;case 5:Et=w.stateNode,Nn=!1;break e;case 3:case 4:Et=w.stateNode.containerInfo,Nn=!0;break e}w=w.return}if(Et===null)throw Error(n(160));b_(_,C,p),Et=null,Nn=!1,_=p.alternate,_!==null&&(_.return=null),p.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)M_(o,r),o=o.sibling}var ui=null;function M_(r,o){var l=r.alternate,c=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Ln(o,r),Un(r),c&4&&(Kr(3,r,r.return),Ml(3,r),Kr(5,r,r.return));break;case 1:Ln(o,r),Un(r),c&512&&(Nt||l===null||Mi(l,l.return)),c&64&&hr&&(r=r.updateQueue,r!==null&&(c=r.callbacks,c!==null&&(l=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var p=ui;if(Ln(o,r),Un(r),c&512&&(Nt||l===null||Mi(l,l.return)),c&4){var _=l!==null?l.memoizedState:null;if(c=r.memoizedState,l===null)if(c===null)if(r.stateNode===null){e:{c=r.type,l=r.memoizedProps,p=p.ownerDocument||p;t:switch(c){case"title":_=p.getElementsByTagName("title")[0],(!_||_[Is]||_[zt]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=p.createElement(c),p.head.insertBefore(_,p.querySelector("head > title"))),nn(_,c,l),_[zt]=r,xt(_),c=_;break e;case"link":var C=wv("link","href",p).get(c+(l.href||""));if(C){for(var w=0;w<C.length;w++)if(_=C[w],_.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&_.getAttribute("rel")===(l.rel==null?null:l.rel)&&_.getAttribute("title")===(l.title==null?null:l.title)&&_.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){C.splice(w,1);break t}}_=p.createElement(c),nn(_,c,l),p.head.appendChild(_);break;case"meta":if(C=wv("meta","content",p).get(c+(l.content||""))){for(w=0;w<C.length;w++)if(_=C[w],_.getAttribute("content")===(l.content==null?null:""+l.content)&&_.getAttribute("name")===(l.name==null?null:l.name)&&_.getAttribute("property")===(l.property==null?null:l.property)&&_.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&_.getAttribute("charset")===(l.charSet==null?null:l.charSet)){C.splice(w,1);break t}}_=p.createElement(c),nn(_,c,l),p.head.appendChild(_);break;default:throw Error(n(468,c))}_[zt]=r,xt(_),c=_}r.stateNode=c}else Iv(p,r.type,r.stateNode);else r.stateNode=Sv(p,c,r.memoizedProps);else _!==c?(_===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):_.count--,c===null?Iv(p,r.type,r.stateNode):Sv(p,c,r.memoizedProps)):c===null&&r.stateNode!==null&&Nh(r,r.memoizedProps,l.memoizedProps)}break;case 27:Ln(o,r),Un(r),c&512&&(Nt||l===null||Mi(l,l.return)),l!==null&&c&4&&Nh(r,r.memoizedProps,l.memoizedProps);break;case 5:if(Ln(o,r),Un(r),c&512&&(Nt||l===null||Mi(l,l.return)),r.flags&32){p=r.stateNode;try{Hn(p,"")}catch($){mt(r,r.return,$)}}c&4&&r.stateNode!=null&&(p=r.memoizedProps,Nh(r,p,l!==null?l.memoizedProps:p)),c&1024&&(Ph=!0);break;case 6:if(Ln(o,r),Un(r),c&4){if(r.stateNode===null)throw Error(n(162));c=r.memoizedProps,l=r.stateNode;try{l.nodeValue=c}catch($){mt(r,r.return,$)}}break;case 3:if(Wc=null,p=ui,ui=$c(o.containerInfo),Ln(o,r),ui=p,Un(r),c&4&&l!==null&&l.memoizedState.isDehydrated)try{Wl(o.containerInfo)}catch($){mt(r,r.return,$)}Ph&&(Ph=!1,D_(r));break;case 4:c=ui,ui=$c(r.stateNode.containerInfo),Ln(o,r),Un(r),ui=c;break;case 12:Ln(o,r),Un(r);break;case 13:Ln(o,r),Un(r),r.child.flags&8192&&r.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Bh=xn()),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,kh(r,c)));break;case 22:p=r.memoizedState!==null;var M=l!==null&&l.memoizedState!==null,G=hr,j=Nt;if(hr=G||p,Nt=j||M,Ln(o,r),Nt=j,hr=G,Un(r),c&8192)e:for(o=r.stateNode,o._visibility=p?o._visibility&-2:o._visibility|1,p&&(l===null||M||hr||Nt||js(r)),l=null,o=r;;){if(o.tag===5||o.tag===26){if(l===null){M=l=o;try{if(_=M.stateNode,p)C=_.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{w=M.stateNode;var te=M.memoizedProps.style,K=te!=null&&te.hasOwnProperty("display")?te.display:null;w.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch($){mt(M,M.return,$)}}}else if(o.tag===6){if(l===null){M=o;try{M.stateNode.nodeValue=p?"":M.memoizedProps}catch($){mt(M,M.return,$)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===r)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break e;for(;o.sibling===null;){if(o.return===null||o.return===r)break e;l===o&&(l=null),o=o.return}l===o&&(l=null),o.sibling.return=o.return,o=o.sibling}c&4&&(c=r.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,kh(r,l))));break;case 19:Ln(o,r),Un(r),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,kh(r,c)));break;case 30:break;case 21:break;default:Ln(o,r),Un(r)}}function Un(r){var o=r.flags;if(o&2){try{for(var l,c=r.return;c!==null;){if(S_(c)){l=c;break}c=c.return}if(l==null)throw Error(n(160));switch(l.tag){case 27:var p=l.stateNode,_=Mh(r);kc(r,_,p);break;case 5:var C=l.stateNode;l.flags&32&&(Hn(C,""),l.flags&=-33);var w=Mh(r);kc(r,w,C);break;case 3:case 4:var M=l.stateNode.containerInfo,G=Mh(r);Dh(r,G,M);break;default:throw Error(n(161))}}catch(j){mt(r,r.return,j)}r.flags&=-3}o&4096&&(r.flags&=-4097)}function D_(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var o=r;D_(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),r=r.sibling}}function Yr(r,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)R_(r,o.alternate,o),o=o.sibling}function js(r){for(r=r.child;r!==null;){var o=r;switch(o.tag){case 0:case 11:case 14:case 15:Kr(4,o,o.return),js(o);break;case 1:Mi(o,o.return);var l=o.stateNode;typeof l.componentWillUnmount=="function"&&C_(o,o.return,l),js(o);break;case 27:Fl(o.stateNode);case 26:case 5:Mi(o,o.return),js(o);break;case 22:o.memoizedState===null&&js(o);break;case 30:js(o);break;default:js(o)}r=r.sibling}}function $r(r,o,l){for(l=l&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var c=o.alternate,p=r,_=o,C=_.flags;switch(_.tag){case 0:case 11:case 15:$r(p,_,l),Ml(4,_);break;case 1:if($r(p,_,l),c=_,p=c.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(G){mt(c,c.return,G)}if(c=_,p=c.updateQueue,p!==null){var w=c.stateNode;try{var M=p.shared.hiddenCallbacks;if(M!==null)for(p.shared.hiddenCallbacks=null,p=0;p<M.length;p++)ay(M[p],w)}catch(G){mt(c,c.return,G)}}l&&C&64&&E_(_),Dl(_,_.return);break;case 27:w_(_);case 26:case 5:$r(p,_,l),l&&c===null&&C&4&&A_(_),Dl(_,_.return);break;case 12:$r(p,_,l);break;case 13:$r(p,_,l),l&&C&4&&N_(p,_);break;case 22:_.memoizedState===null&&$r(p,_,l),Dl(_,_.return);break;case 30:break;default:$r(p,_,l)}o=o.sibling}}function Vh(r,o){var l=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),r=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(r=o.memoizedState.cachePool.pool),r!==l&&(r!=null&&r.refCount++,l!=null&&yl(l))}function Oh(r,o){r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&yl(r))}function Di(r,o,l,c){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)P_(r,o,l,c),o=o.sibling}function P_(r,o,l,c){var p=o.flags;switch(o.tag){case 0:case 11:case 15:Di(r,o,l,c),p&2048&&Ml(9,o);break;case 1:Di(r,o,l,c);break;case 3:Di(r,o,l,c),p&2048&&(r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&yl(r)));break;case 12:if(p&2048){Di(r,o,l,c),r=o.stateNode;try{var _=o.memoizedProps,C=_.id,w=_.onPostCommit;typeof w=="function"&&w(C,o.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(M){mt(o,o.return,M)}}else Di(r,o,l,c);break;case 13:Di(r,o,l,c);break;case 23:break;case 22:_=o.stateNode,C=o.alternate,o.memoizedState!==null?_._visibility&2?Di(r,o,l,c):Pl(r,o):_._visibility&2?Di(r,o,l,c):(_._visibility|=2,Zo(r,o,l,c,(o.subtreeFlags&10256)!==0)),p&2048&&Vh(C,o);break;case 24:Di(r,o,l,c),p&2048&&Oh(o.alternate,o);break;default:Di(r,o,l,c)}}function Zo(r,o,l,c,p){for(p=p&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var _=r,C=o,w=l,M=c,G=C.flags;switch(C.tag){case 0:case 11:case 15:Zo(_,C,w,M,p),Ml(8,C);break;case 23:break;case 22:var j=C.stateNode;C.memoizedState!==null?j._visibility&2?Zo(_,C,w,M,p):Pl(_,C):(j._visibility|=2,Zo(_,C,w,M,p)),p&&G&2048&&Vh(C.alternate,C);break;case 24:Zo(_,C,w,M,p),p&&G&2048&&Oh(C.alternate,C);break;default:Zo(_,C,w,M,p)}o=o.sibling}}function Pl(r,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var l=r,c=o,p=c.flags;switch(c.tag){case 22:Pl(l,c),p&2048&&Vh(c.alternate,c);break;case 24:Pl(l,c),p&2048&&Oh(c.alternate,c);break;default:Pl(l,c)}o=o.sibling}}var kl=8192;function ea(r){if(r.subtreeFlags&kl)for(r=r.child;r!==null;)k_(r),r=r.sibling}function k_(r){switch(r.tag){case 26:ea(r),r.flags&kl&&r.memoizedState!==null&&Kw(ui,r.memoizedState,r.memoizedProps);break;case 5:ea(r);break;case 3:case 4:var o=ui;ui=$c(r.stateNode.containerInfo),ea(r),ui=o;break;case 22:r.memoizedState===null&&(o=r.alternate,o!==null&&o.memoizedState!==null?(o=kl,kl=16777216,ea(r),kl=o):ea(r));break;default:ea(r)}}function V_(r){var o=r.alternate;if(o!==null&&(r=o.child,r!==null)){o.child=null;do o=r.sibling,r.sibling=null,r=o;while(r!==null)}}function Vl(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var c=o[l];Wt=c,L_(c,r)}V_(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)O_(r),r=r.sibling}function O_(r){switch(r.tag){case 0:case 11:case 15:Vl(r),r.flags&2048&&Kr(9,r,r.return);break;case 3:Vl(r);break;case 12:Vl(r);break;case 22:var o=r.stateNode;r.memoizedState!==null&&o._visibility&2&&(r.return===null||r.return.tag!==13)?(o._visibility&=-3,Vc(r)):Vl(r);break;default:Vl(r)}}function Vc(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var c=o[l];Wt=c,L_(c,r)}V_(r)}for(r=r.child;r!==null;){switch(o=r,o.tag){case 0:case 11:case 15:Kr(8,o,o.return),Vc(o);break;case 22:l=o.stateNode,l._visibility&2&&(l._visibility&=-3,Vc(o));break;default:Vc(o)}r=r.sibling}}function L_(r,o){for(;Wt!==null;){var l=Wt;switch(l.tag){case 0:case 11:case 15:Kr(8,l,o);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:yl(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,Wt=c;else e:for(l=r;Wt!==null;){c=Wt;var p=c.sibling,_=c.return;if(x_(c),c===l){Wt=null;break e}if(p!==null){p.return=_,Wt=p;break e}Wt=_}}}var aw={getCacheForType:function(r){var o=fn(qt),l=o.data.get(r);return l===void 0&&(l=r(),o.data.set(r,l)),l}},lw=typeof WeakMap=="function"?WeakMap:Map,ot=0,pt=null,He=null,je=0,at=0,zn=null,Qr=!1,ta=!1,Lh=!1,pr=0,It=0,Wr=0,Zs=0,Uh=0,Zn=0,na=0,Ol=null,Mn=null,zh=!1,Bh=0,Oc=1/0,Lc=null,Jr=null,tn=0,Xr=null,ia=null,ra=0,Fh=0,qh=null,U_=null,Ll=0,Gh=null;function Bn(){if((ot&2)!==0&&je!==0)return je&-je;if(J.T!==null){var r=Ko;return r!==0?r:Jh()}return Dr()}function z_(){Zn===0&&(Zn=(je&536870912)===0||it?si():536870912);var r=jn.current;return r!==null&&(r.flags|=32),Zn}function Fn(r,o,l){(r===pt&&(at===2||at===9)||r.cancelPendingCommit!==null)&&(sa(r,0),jr(r,je,Zn,!1)),$i(r,l),((ot&2)===0||r!==pt)&&(r===pt&&((ot&2)===0&&(Zs|=l),It===4&&jr(r,je,Zn,!1)),Pi(r))}function B_(r,o,l){if((ot&6)!==0)throw Error(n(327));var c=!l&&(o&124)===0&&(o&r.expiredLanes)===0||Hi(r,o),p=c?fw(r,o):Yh(r,o,!0),_=c;do{if(p===0){ta&&!c&&jr(r,o,0,!1);break}else{if(l=r.current.alternate,_&&!uw(l)){p=Yh(r,o,!1),_=!1;continue}if(p===2){if(_=o,r.errorRecoveryDisabledLanes&_)var C=0;else C=r.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){o=C;e:{var w=r;p=Ol;var M=w.current.memoizedState.isDehydrated;if(M&&(sa(w,C).flags|=256),C=Yh(w,C,!1),C!==2){if(Lh&&!M){w.errorRecoveryDisabledLanes|=_,Zs|=_,p=4;break e}_=Mn,Mn=p,_!==null&&(Mn===null?Mn=_:Mn.push.apply(Mn,_))}p=C}if(_=!1,p!==2)continue}}if(p===1){sa(r,0),jr(r,o,0,!0);break}e:{switch(c=r,_=p,_){case 0:case 1:throw Error(n(345));case 4:if((o&4194048)!==o)break;case 6:jr(c,o,Zn,!Qr);break e;case 2:Mn=null;break;case 3:case 5:break;default:throw Error(n(329))}if((o&62914560)===o&&(p=Bh+300-xn(),10<p)){if(jr(c,o,Zn,!Qr),ri(c,0,!0)!==0)break e;c.timeoutHandle=pv(F_.bind(null,c,l,Mn,Lc,zh,o,Zn,Zs,na,Qr,_,2,-0,0),p);break e}F_(c,l,Mn,Lc,zh,o,Zn,Zs,na,Qr,_,0,-0,0)}}break}while(!0);Pi(r)}function F_(r,o,l,c,p,_,C,w,M,G,j,te,K,$){if(r.timeoutHandle=-1,te=o.subtreeFlags,(te&8192||(te&16785408)===16785408)&&(Hl={stylesheets:null,count:0,unsuspend:Hw},k_(o),te=Yw(),te!==null)){r.cancelPendingCommit=te(Q_.bind(null,r,o,_,l,c,p,C,w,M,j,1,K,$)),jr(r,_,C,!G);return}Q_(r,o,_,l,c,p,C,w,M)}function uw(r){for(var o=r;;){var l=o.tag;if((l===0||l===11||l===15)&&o.flags&16384&&(l=o.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var p=l[c],_=p.getSnapshot;p=p.value;try{if(!Vn(_(),p))return!1}catch{return!1}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function jr(r,o,l,c){o&=~Uh,o&=~Zs,r.suspendedLanes|=o,r.pingedLanes&=~o,c&&(r.warmLanes|=o),c=r.expirationTimes;for(var p=o;0<p;){var _=31-he(p),C=1<<_;c[_]=-1,p&=~C}l!==0&&_i(r,l,o)}function Uc(){return(ot&6)===0?(Ul(0),!1):!0}function Hh(){if(He!==null){if(at===0)var r=He.return;else r=He,ar=$s=null,ah(r),Xo=null,xl=0,r=He;for(;r!==null;)T_(r.alternate,r),r=r.return;He=null}}function sa(r,o){var l=r.timeoutHandle;l!==-1&&(r.timeoutHandle=-1,Rw(l)),l=r.cancelPendingCommit,l!==null&&(r.cancelPendingCommit=null,l()),Hh(),pt=r,He=l=rr(r.current,null),je=o,at=0,zn=null,Qr=!1,ta=Hi(r,o),Lh=!1,na=Zn=Uh=Zs=Wr=It=0,Mn=Ol=null,zh=!1,(o&8)!==0&&(o|=o&32);var c=r.entangledLanes;if(c!==0)for(r=r.entanglements,c&=o;0<c;){var p=31-he(c),_=1<<p;o|=r[p],c&=~_}return pr=o,oc(),l}function q_(r,o){qe=null,J.H=wc,o===vl||o===pc?(o=sy(),at=3):o===ny?(o=sy(),at=4):at=o===o_?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,zn=o,He===null&&(It=1,Nc(r,Qn(o,r.current)))}function G_(){var r=J.H;return J.H=wc,r===null?wc:r}function H_(){var r=J.A;return J.A=aw,r}function Kh(){It=4,Qr||(je&4194048)!==je&&jn.current!==null||(ta=!0),(Wr&134217727)===0&&(Zs&134217727)===0||pt===null||jr(pt,je,Zn,!1)}function Yh(r,o,l){var c=ot;ot|=2;var p=G_(),_=H_();(pt!==r||je!==o)&&(Lc=null,sa(r,o)),o=!1;var C=It;e:do try{if(at!==0&&He!==null){var w=He,M=zn;switch(at){case 8:Hh(),C=6;break e;case 3:case 2:case 9:case 6:jn.current===null&&(o=!0);var G=at;if(at=0,zn=null,oa(r,w,M,G),l&&ta){C=0;break e}break;default:G=at,at=0,zn=null,oa(r,w,M,G)}}cw(),C=It;break}catch(j){q_(r,j)}while(!0);return o&&r.shellSuspendCounter++,ar=$s=null,ot=c,J.H=p,J.A=_,He===null&&(pt=null,je=0,oc()),C}function cw(){for(;He!==null;)K_(He)}function fw(r,o){var l=ot;ot|=2;var c=G_(),p=H_();pt!==r||je!==o?(Lc=null,Oc=xn()+500,sa(r,o)):ta=Hi(r,o);e:do try{if(at!==0&&He!==null){o=He;var _=zn;t:switch(at){case 1:at=0,zn=null,oa(r,o,_,1);break;case 2:case 9:if(iy(_)){at=0,zn=null,Y_(o);break}o=function(){at!==2&&at!==9||pt!==r||(at=7),Pi(r)},_.then(o,o);break e;case 3:at=7;break e;case 4:at=5;break e;case 7:iy(_)?(at=0,zn=null,Y_(o)):(at=0,zn=null,oa(r,o,_,7));break;case 5:var C=null;switch(He.tag){case 26:C=He.memoizedState;case 5:case 27:var w=He;if(!C||Rv(C)){at=0,zn=null;var M=w.sibling;if(M!==null)He=M;else{var G=w.return;G!==null?(He=G,zc(G)):He=null}break t}}at=0,zn=null,oa(r,o,_,5);break;case 6:at=0,zn=null,oa(r,o,_,6);break;case 8:Hh(),It=6;break e;default:throw Error(n(462))}}dw();break}catch(j){q_(r,j)}while(!0);return ar=$s=null,J.H=c,J.A=p,ot=l,He!==null?0:(pt=null,je=0,oc(),It)}function dw(){for(;He!==null&&!As();)K_(He)}function K_(r){var o=__(r.alternate,r,pr);r.memoizedProps=r.pendingProps,o===null?zc(r):He=o}function Y_(r){var o=r,l=o.alternate;switch(o.tag){case 15:case 0:o=d_(l,o,o.pendingProps,o.type,void 0,je);break;case 11:o=d_(l,o,o.pendingProps,o.type.render,o.ref,je);break;case 5:ah(o);default:T_(l,o),o=He=$g(o,pr),o=__(l,o,pr)}r.memoizedProps=r.pendingProps,o===null?zc(r):He=o}function oa(r,o,l,c){ar=$s=null,ah(o),Xo=null,xl=0;var p=o.return;try{if(tw(r,p,o,l,je)){It=1,Nc(r,Qn(l,r.current)),He=null;return}}catch(_){if(p!==null)throw He=p,_;It=1,Nc(r,Qn(l,r.current)),He=null;return}o.flags&32768?(it||c===1?r=!0:ta||(je&536870912)!==0?r=!1:(Qr=r=!0,(c===2||c===9||c===3||c===6)&&(c=jn.current,c!==null&&c.tag===13&&(c.flags|=16384))),$_(o,r)):zc(o)}function zc(r){var o=r;do{if((o.flags&32768)!==0){$_(o,Qr);return}r=o.return;var l=iw(o.alternate,o,pr);if(l!==null){He=l;return}if(o=o.sibling,o!==null){He=o;return}He=o=r}while(o!==null);It===0&&(It=5)}function $_(r,o){do{var l=rw(r.alternate,r);if(l!==null){l.flags&=32767,He=l;return}if(l=r.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!o&&(r=r.sibling,r!==null)){He=r;return}He=r=l}while(r!==null);It=6,He=null}function Q_(r,o,l,c,p,_,C,w,M){r.cancelPendingCommit=null;do Bc();while(tn!==0);if((ot&6)!==0)throw Error(n(327));if(o!==null){if(o===r.current)throw Error(n(177));if(_=o.lanes|o.childLanes,_|=Od,Qa(r,l,_,C,w,M),r===pt&&(He=pt=null,je=0),ia=o,Xr=r,ra=l,Fh=_,qh=p,U_=c,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,gw(ii,function(){return Z_(),null})):(r.callbackNode=null,r.callbackPriority=0),c=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||c){c=J.T,J.T=null,p=X.p,X.p=2,C=ot,ot|=4;try{sw(r,o,l)}finally{ot=C,X.p=p,J.T=c}}tn=1,W_(),J_(),X_()}}function W_(){if(tn===1){tn=0;var r=Xr,o=ia,l=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||l){l=J.T,J.T=null;var c=X.p;X.p=2;var p=ot;ot|=4;try{M_(o,r);var _=rm,C=Lg(r.containerInfo),w=_.focusedElem,M=_.selectionRange;if(C!==w&&w&&w.ownerDocument&&Og(w.ownerDocument.documentElement,w)){if(M!==null&&Md(w)){var G=M.start,j=M.end;if(j===void 0&&(j=G),"selectionStart"in w)w.selectionStart=G,w.selectionEnd=Math.min(j,w.value.length);else{var te=w.ownerDocument||document,K=te&&te.defaultView||window;if(K.getSelection){var $=K.getSelection(),Me=w.textContent.length,Re=Math.min(M.start,Me),ht=M.end===void 0?Re:Math.min(M.end,Me);!$.extend&&Re>ht&&(C=ht,ht=Re,Re=C);var B=Vg(w,Re),L=Vg(w,ht);if(B&&L&&($.rangeCount!==1||$.anchorNode!==B.node||$.anchorOffset!==B.offset||$.focusNode!==L.node||$.focusOffset!==L.offset)){var q=te.createRange();q.setStart(B.node,B.offset),$.removeAllRanges(),Re>ht?($.addRange(q),$.extend(L.node,L.offset)):(q.setEnd(L.node,L.offset),$.addRange(q))}}}}for(te=[],$=w;$=$.parentNode;)$.nodeType===1&&te.push({element:$,left:$.scrollLeft,top:$.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<te.length;w++){var ee=te[w];ee.element.scrollLeft=ee.left,ee.element.scrollTop=ee.top}}jc=!!im,rm=im=null}finally{ot=p,X.p=c,J.T=l}}r.current=o,tn=2}}function J_(){if(tn===2){tn=0;var r=Xr,o=ia,l=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||l){l=J.T,J.T=null;var c=X.p;X.p=2;var p=ot;ot|=4;try{R_(r,o.alternate,o)}finally{ot=p,X.p=c,J.T=l}}tn=3}}function X_(){if(tn===4||tn===3){tn=0,Eo();var r=Xr,o=ia,l=ra,c=U_;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?tn=5:(tn=0,ia=Xr=null,j_(r,r.pendingLanes));var p=r.pendingLanes;if(p===0&&(Jr=null),Ao(l),o=o.stateNode,re&&typeof re.onCommitFiberRoot=="function")try{re.onCommitFiberRoot(gt,o,void 0,(o.current.flags&128)===128)}catch{}if(c!==null){o=J.T,p=X.p,X.p=2,J.T=null;try{for(var _=r.onRecoverableError,C=0;C<c.length;C++){var w=c[C];_(w.value,{componentStack:w.stack})}}finally{J.T=o,X.p=p}}(ra&3)!==0&&Bc(),Pi(r),p=r.pendingLanes,(l&4194090)!==0&&(p&42)!==0?r===Gh?Ll++:(Ll=0,Gh=r):Ll=0,Ul(0)}}function j_(r,o){(r.pooledCacheLanes&=o)===0&&(o=r.pooledCache,o!=null&&(r.pooledCache=null,yl(o)))}function Bc(r){return W_(),J_(),X_(),Z_()}function Z_(){if(tn!==5)return!1;var r=Xr,o=Fh;Fh=0;var l=Ao(ra),c=J.T,p=X.p;try{X.p=32>l?32:l,J.T=null,l=qh,qh=null;var _=Xr,C=ra;if(tn=0,ia=Xr=null,ra=0,(ot&6)!==0)throw Error(n(331));var w=ot;if(ot|=4,O_(_.current),P_(_,_.current,C,l),ot=w,Ul(0,!1),re&&typeof re.onPostCommitFiberRoot=="function")try{re.onPostCommitFiberRoot(gt,_)}catch{}return!0}finally{X.p=p,J.T=c,j_(r,o)}}function ev(r,o,l){o=Qn(l,o),o=Eh(r.stateNode,o,2),r=Fr(r,o,2),r!==null&&($i(r,2),Pi(r))}function mt(r,o,l){if(r.tag===3)ev(r,r,l);else for(;o!==null;){if(o.tag===3){ev(o,r,l);break}else if(o.tag===1){var c=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Jr===null||!Jr.has(c))){r=Qn(l,r),l=r_(2),c=Fr(o,l,2),c!==null&&(s_(l,c,o,r),$i(c,2),Pi(c));break}}o=o.return}}function $h(r,o,l){var c=r.pingCache;if(c===null){c=r.pingCache=new lw;var p=new Set;c.set(o,p)}else p=c.get(o),p===void 0&&(p=new Set,c.set(o,p));p.has(l)||(Lh=!0,p.add(l),r=hw.bind(null,r,o,l),o.then(r,r))}function hw(r,o,l){var c=r.pingCache;c!==null&&c.delete(o),r.pingedLanes|=r.suspendedLanes&l,r.warmLanes&=~l,pt===r&&(je&l)===l&&(It===4||It===3&&(je&62914560)===je&&300>xn()-Bh?(ot&2)===0&&sa(r,0):Uh|=l,na===je&&(na=0)),Pi(r)}function tv(r,o){o===0&&(o=$a()),r=Fo(r,o),r!==null&&($i(r,o),Pi(r))}function mw(r){var o=r.memoizedState,l=0;o!==null&&(l=o.retryLane),tv(r,l)}function pw(r,o){var l=0;switch(r.tag){case 13:var c=r.stateNode,p=r.memoizedState;p!==null&&(l=p.retryLane);break;case 19:c=r.stateNode;break;case 22:c=r.stateNode._retryCache;break;default:throw Error(n(314))}c!==null&&c.delete(o),tv(r,l)}function gw(r,o){return yi(r,o)}var Fc=null,aa=null,Qh=!1,qc=!1,Wh=!1,eo=0;function Pi(r){r!==aa&&r.next===null&&(aa===null?Fc=aa=r:aa=aa.next=r),qc=!0,Qh||(Qh=!0,_w())}function Ul(r,o){if(!Wh&&qc){Wh=!0;do for(var l=!1,c=Fc;c!==null;){if(r!==0){var p=c.pendingLanes;if(p===0)var _=0;else{var C=c.suspendedLanes,w=c.pingedLanes;_=(1<<31-he(42|r)+1)-1,_&=p&~(C&~w),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(l=!0,sv(c,_))}else _=je,_=ri(c,c===pt?_:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(_&3)===0||Hi(c,_)||(l=!0,sv(c,_));c=c.next}while(l);Wh=!1}}function yw(){nv()}function nv(){qc=Qh=!1;var r=0;eo!==0&&(Iw()&&(r=eo),eo=0);for(var o=xn(),l=null,c=Fc;c!==null;){var p=c.next,_=iv(c,o);_===0?(c.next=null,l===null?Fc=p:l.next=p,p===null&&(aa=l)):(l=c,(r!==0||(_&3)!==0)&&(qc=!0)),c=p}Ul(r)}function iv(r,o){for(var l=r.suspendedLanes,c=r.pingedLanes,p=r.expirationTimes,_=r.pendingLanes&-62914561;0<_;){var C=31-he(_),w=1<<C,M=p[C];M===-1?((w&l)===0||(w&c)!==0)&&(p[C]=Ki(w,o)):M<=o&&(r.expiredLanes|=w),_&=~w}if(o=pt,l=je,l=ri(r,r===o?l:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),c=r.callbackNode,l===0||r===o&&(at===2||at===9)||r.cancelPendingCommit!==null)return c!==null&&c!==null&&_n(c),r.callbackNode=null,r.callbackPriority=0;if((l&3)===0||Hi(r,l)){if(o=l&-l,o===r.callbackPriority)return o;switch(c!==null&&_n(c),Ao(l)){case 2:case 8:l=Ss;break;case 32:l=ii;break;case 268435456:l=Gi;break;default:l=ii}return c=rv.bind(null,r),l=yi(l,c),r.callbackPriority=o,r.callbackNode=l,o}return c!==null&&c!==null&&_n(c),r.callbackPriority=2,r.callbackNode=null,2}function rv(r,o){if(tn!==0&&tn!==5)return r.callbackNode=null,r.callbackPriority=0,null;var l=r.callbackNode;if(Bc()&&r.callbackNode!==l)return null;var c=je;return c=ri(r,r===pt?c:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),c===0?null:(B_(r,c,o),iv(r,xn()),r.callbackNode!=null&&r.callbackNode===l?rv.bind(null,r):null)}function sv(r,o){if(Bc())return null;B_(r,o,!0)}function _w(){xw(function(){(ot&6)!==0?yi(br,yw):nv()})}function Jh(){return eo===0&&(eo=si()),eo}function ov(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:bo(""+r)}function av(r,o){var l=o.ownerDocument.createElement("input");return l.name=o.name,l.value=o.value,r.id&&l.setAttribute("form",r.id),o.parentNode.insertBefore(l,o),r=new FormData(r),l.parentNode.removeChild(l),r}function vw(r,o,l,c,p){if(o==="submit"&&l&&l.stateNode===p){var _=ov((p[Dt]||null).action),C=c.submitter;C&&(o=(o=C[Dt]||null)?ov(o.formAction):C.getAttribute("formAction"),o!==null&&(_=o,C=null));var w=new No("action","action",null,c,p);r.push({event:w,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(eo!==0){var M=C?av(p,C):new FormData(p);gh(l,{pending:!0,data:M,method:p.method,action:_},null,M)}}else typeof _=="function"&&(w.preventDefault(),M=C?av(p,C):new FormData(p),gh(l,{pending:!0,data:M,method:p.method,action:_},_,M))},currentTarget:p}]})}}for(var Xh=0;Xh<Vd.length;Xh++){var jh=Vd[Xh],Tw=jh.toLowerCase(),Ew=jh[0].toUpperCase()+jh.slice(1);li(Tw,"on"+Ew)}li(Bg,"onAnimationEnd"),li(Fg,"onAnimationIteration"),li(qg,"onAnimationStart"),li("dblclick","onDoubleClick"),li("focusin","onFocus"),li("focusout","onBlur"),li(US,"onTransitionRun"),li(zS,"onTransitionStart"),li(BS,"onTransitionCancel"),li(Gg,"onTransitionEnd"),Wi("onMouseEnter",["mouseout","mouseover"]),Wi("onMouseLeave",["mouseout","mouseover"]),Wi("onPointerEnter",["pointerout","pointerover"]),Wi("onPointerLeave",["pointerout","pointerover"]),oi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),oi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),oi("onBeforeInput",["compositionend","keypress","textInput","paste"]),oi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),oi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),oi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Cw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(zl));function lv(r,o){o=(o&4)!==0;for(var l=0;l<r.length;l++){var c=r[l],p=c.event;c=c.listeners;e:{var _=void 0;if(o)for(var C=c.length-1;0<=C;C--){var w=c[C],M=w.instance,G=w.currentTarget;if(w=w.listener,M!==_&&p.isPropagationStopped())break e;_=w,p.currentTarget=G;try{_(p)}catch(j){bc(j)}p.currentTarget=null,_=M}else for(C=0;C<c.length;C++){if(w=c[C],M=w.instance,G=w.currentTarget,w=w.listener,M!==_&&p.isPropagationStopped())break e;_=w,p.currentTarget=G;try{_(p)}catch(j){bc(j)}p.currentTarget=null,_=M}}}}function Ke(r,o){var l=o[Ja];l===void 0&&(l=o[Ja]=new Set);var c=r+"__bubble";l.has(c)||(uv(o,r,2,!1),l.add(c))}function Zh(r,o,l){var c=0;o&&(c|=4),uv(l,r,c,o)}var Gc="_reactListening"+Math.random().toString(36).slice(2);function em(r){if(!r[Gc]){r[Gc]=!0,Xa.forEach(function(l){l!=="selectionchange"&&(Cw.has(l)||Zh(l,!1,r),Zh(l,!0,r))});var o=r.nodeType===9?r:r.ownerDocument;o===null||o[Gc]||(o[Gc]=!0,Zh("selectionchange",!1,o))}}function uv(r,o,l,c){switch(Pv(o)){case 2:var p=Ww;break;case 8:p=Jw;break;default:p=mm}l=p.bind(null,o,l,r),p=void 0,!Yn||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(p=!0),c?p!==void 0?r.addEventListener(o,l,{capture:!0,passive:p}):r.addEventListener(o,l,!0):p!==void 0?r.addEventListener(o,l,{passive:p}):r.addEventListener(o,l,!1)}function tm(r,o,l,c,p){var _=c;if((o&1)===0&&(o&2)===0&&c!==null)e:for(;;){if(c===null)return;var C=c.tag;if(C===3||C===4){var w=c.stateNode.containerInfo;if(w===p)break;if(C===4)for(C=c.return;C!==null;){var M=C.tag;if((M===3||M===4)&&C.stateNode.containerInfo===p)return;C=C.return}for(;w!==null;){if(C=Qi(w),C===null)return;if(M=C.tag,M===5||M===6||M===26||M===27){c=_=C;continue e}w=w.parentNode}}c=c.return}Ku(function(){var G=_,j=Kn(l),te=[];e:{var K=Hg.get(r);if(K!==void 0){var $=No,Me=r;switch(r){case"keypress":if(Si(l)===0)break e;case"keydown":case"keyup":$=Oo;break;case"focusin":Me="focus",$=Po;break;case"focusout":Me="blur",$=Po;break;case"beforeblur":case"afterblur":$=Po;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$=$n;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$=Rd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$=Zu;break;case Bg:case Fg:case qg:$=ko;break;case Gg:$=tc;break;case"scroll":case"scrollend":$=Yu;break;case"wheel":$=Lo;break;case"copy":case"cut":case"paste":$=Vo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$=ul;break;case"toggle":case"beforetoggle":$=ic}var Re=(o&4)!==0,ht=!Re&&(r==="scroll"||r==="scrollend"),B=Re?K!==null?K+"Capture":null:K;Re=[];for(var L=G,q;L!==null;){var ee=L;if(q=ee.stateNode,ee=ee.tag,ee!==5&&ee!==26&&ee!==27||q===null||B===null||(ee=Ps(L,B),ee!=null&&Re.push(Bl(L,ee,q))),ht)break;L=L.return}0<Re.length&&(K=new $(K,Me,null,l,j),te.push({event:K,listeners:Re}))}}if((o&7)===0){e:{if(K=r==="mouseover"||r==="pointerover",$=r==="mouseout"||r==="pointerout",K&&l!==ji&&(Me=l.relatedTarget||l.fromElement)&&(Qi(Me)||Me[Gn]))break e;if(($||K)&&(K=j.window===j?j:(K=j.ownerDocument)?K.defaultView||K.parentWindow:window,$?(Me=l.relatedTarget||l.toElement,$=G,Me=Me?Qi(Me):null,Me!==null&&(ht=a(Me),Re=Me.tag,Me!==ht||Re!==5&&Re!==27&&Re!==6)&&(Me=null)):($=null,Me=G),$!==Me)){if(Re=$n,ee="onMouseLeave",B="onMouseEnter",L="mouse",(r==="pointerout"||r==="pointerover")&&(Re=ul,ee="onPointerLeave",B="onPointerEnter",L="pointer"),ht=$==null?K:Ti($),q=Me==null?K:Ti(Me),K=new Re(ee,L+"leave",$,l,j),K.target=ht,K.relatedTarget=q,ee=null,Qi(j)===G&&(Re=new Re(B,L+"enter",Me,l,j),Re.target=q,Re.relatedTarget=ht,ee=Re),ht=ee,$&&Me)t:{for(Re=$,B=Me,L=0,q=Re;q;q=la(q))L++;for(q=0,ee=B;ee;ee=la(ee))q++;for(;0<L-q;)Re=la(Re),L--;for(;0<q-L;)B=la(B),q--;for(;L--;){if(Re===B||B!==null&&Re===B.alternate)break t;Re=la(Re),B=la(B)}Re=null}else Re=null;$!==null&&cv(te,K,$,Re,!1),Me!==null&&ht!==null&&cv(te,ht,Me,Re,!0)}}e:{if(K=G?Ti(G):window,$=K.nodeName&&K.nodeName.toLowerCase(),$==="select"||$==="input"&&K.type==="file")var _e=bg;else if(Ft(K))if(Ng)_e=VS;else{_e=PS;var Ge=DS}else $=K.nodeName,!$||$.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?G&&nl(G.elementType)&&(_e=bg):_e=kS;if(_e&&(_e=_e(r,G))){ir(te,_e,l,j);break e}Ge&&Ge(r,K,G),r==="focusout"&&G&&K.type==="number"&&G.memoizedProps.value!=null&&Or(K,"number",K.value)}switch(Ge=G?Ti(G):window,r){case"focusin":(Ft(Ge)||Ge.contentEditable==="true")&&(Uo=Ge,Dd=G,dl=null);break;case"focusout":dl=Dd=Uo=null;break;case"mousedown":Pd=!0;break;case"contextmenu":case"mouseup":case"dragend":Pd=!1,Ug(te,l,j);break;case"selectionchange":if(LS)break;case"keydown":case"keyup":Ug(te,l,j)}var Se;if(Ri)e:{switch(r){case"compositionstart":var xe="onCompositionStart";break e;case"compositionend":xe="onCompositionEnd";break e;case"compositionupdate":xe="onCompositionUpdate";break e}xe=void 0}else Je?Q(r,l)&&(xe="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(xe="onCompositionStart");xe&&(E&&l.locale!=="ko"&&(Je||xe!=="onCompositionStart"?xe==="onCompositionEnd"&&Je&&(Se=rl()):(Ai=j,Lr="value"in Ai?Ai.value:Ai.textContent,Je=!0)),Ge=Hc(G,xe),0<Ge.length&&(xe=new al(xe,r,null,l,j),te.push({event:xe,listeners:Ge}),Se?xe.data=Se:(Se=ue(l),Se!==null&&(xe.data=Se)))),(Se=T?Bt(r,l):Xe(r,l))&&(xe=Hc(G,"onBeforeInput"),0<xe.length&&(Ge=new al("onBeforeInput","beforeinput",null,l,j),te.push({event:Ge,listeners:xe}),Ge.data=Se)),vw(te,r,G,l,j)}lv(te,o)})}function Bl(r,o,l){return{instance:r,listener:o,currentTarget:l}}function Hc(r,o){for(var l=o+"Capture",c=[];r!==null;){var p=r,_=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||_===null||(p=Ps(r,l),p!=null&&c.unshift(Bl(r,p,_)),p=Ps(r,o),p!=null&&c.push(Bl(r,p,_))),r.tag===3)return c;r=r.return}return[]}function la(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function cv(r,o,l,c,p){for(var _=o._reactName,C=[];l!==null&&l!==c;){var w=l,M=w.alternate,G=w.stateNode;if(w=w.tag,M!==null&&M===c)break;w!==5&&w!==26&&w!==27||G===null||(M=G,p?(G=Ps(l,_),G!=null&&C.unshift(Bl(l,G,M))):p||(G=Ps(l,_),G!=null&&C.push(Bl(l,G,M)))),l=l.return}C.length!==0&&r.push({event:o,listeners:C})}var Aw=/\r\n?/g,Sw=/\u0000|\uFFFD/g;function fv(r){return(typeof r=="string"?r:""+r).replace(Aw,`
`).replace(Sw,"")}function dv(r,o){return o=fv(o),fv(r)===o}function Kc(){}function dt(r,o,l,c,p,_){switch(l){case"children":typeof c=="string"?o==="body"||o==="textarea"&&c===""||Hn(r,c):(typeof c=="number"||typeof c=="bigint")&&o!=="body"&&Hn(r,""+c);break;case"className":Ei(r,"class",c);break;case"tabIndex":Ei(r,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Ei(r,l,c);break;case"style":tl(r,c,_);break;case"data":if(o!=="object"){Ei(r,"data",c);break}case"src":case"href":if(c===""&&(o!=="a"||l!=="href")){r.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){r.removeAttribute(l);break}c=bo(""+c),r.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){r.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(l==="formAction"?(o!=="input"&&dt(r,o,"name",p.name,p,null),dt(r,o,"formEncType",p.formEncType,p,null),dt(r,o,"formMethod",p.formMethod,p,null),dt(r,o,"formTarget",p.formTarget,p,null)):(dt(r,o,"encType",p.encType,p,null),dt(r,o,"method",p.method,p,null),dt(r,o,"target",p.target,p,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){r.removeAttribute(l);break}c=bo(""+c),r.setAttribute(l,c);break;case"onClick":c!=null&&(r.onclick=Kc);break;case"onScroll":c!=null&&Ke("scroll",r);break;case"onScrollEnd":c!=null&&Ke("scrollend",r);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(n(61));if(l=c.__html,l!=null){if(p.children!=null)throw Error(n(60));r.innerHTML=l}}break;case"multiple":r.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":r.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){r.removeAttribute("xlink:href");break}l=bo(""+c),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(l,""+c):r.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(l,""):r.removeAttribute(l);break;case"capture":case"download":c===!0?r.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(l,c):r.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?r.setAttribute(l,c):r.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?r.removeAttribute(l):r.setAttribute(l,c);break;case"popover":Ke("beforetoggle",r),Ke("toggle",r),Vr(r,"popover",c);break;case"xlinkActuate":jt(r,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":jt(r,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":jt(r,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":jt(r,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":jt(r,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":jt(r,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":jt(r,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":jt(r,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":jt(r,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Vr(r,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=wd.get(l)||l,Vr(r,l,c))}}function nm(r,o,l,c,p,_){switch(l){case"style":tl(r,c,_);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(n(61));if(l=c.__html,l!=null){if(p.children!=null)throw Error(n(60));r.innerHTML=l}}break;case"children":typeof c=="string"?Hn(r,c):(typeof c=="number"||typeof c=="bigint")&&Hn(r,""+c);break;case"onScroll":c!=null&&Ke("scroll",r);break;case"onScrollEnd":c!=null&&Ke("scrollend",r);break;case"onClick":c!=null&&(r.onclick=Kc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!So.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(p=l.endsWith("Capture"),o=l.slice(2,p?l.length-7:void 0),_=r[Dt]||null,_=_!=null?_[l]:null,typeof _=="function"&&r.removeEventListener(o,_,p),typeof c=="function")){typeof _!="function"&&_!==null&&(l in r?r[l]=null:r.hasAttribute(l)&&r.removeAttribute(l)),r.addEventListener(o,c,p);break e}l in r?r[l]=c:c===!0?r.setAttribute(l,""):Vr(r,l,c)}}}function nn(r,o,l){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ke("error",r),Ke("load",r);var c=!1,p=!1,_;for(_ in l)if(l.hasOwnProperty(_)){var C=l[_];if(C!=null)switch(_){case"src":c=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:dt(r,o,_,C,l,null)}}p&&dt(r,o,"srcSet",l.srcSet,l,null),c&&dt(r,o,"src",l.src,l,null);return;case"input":Ke("invalid",r);var w=_=C=p=null,M=null,G=null;for(c in l)if(l.hasOwnProperty(c)){var j=l[c];if(j!=null)switch(c){case"name":p=j;break;case"type":C=j;break;case"checked":M=j;break;case"defaultChecked":G=j;break;case"value":_=j;break;case"defaultValue":w=j;break;case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(n(137,o));break;default:dt(r,o,c,j,l,null)}}Ns(r,_,w,M,G,C,p,!1),xo(r);return;case"select":Ke("invalid",r),c=C=_=null;for(p in l)if(l.hasOwnProperty(p)&&(w=l[p],w!=null))switch(p){case"value":_=w;break;case"defaultValue":C=w;break;case"multiple":c=w;default:dt(r,o,p,w,l,null)}o=_,l=C,r.multiple=!!c,o!=null?Xi(r,!!c,o,!1):l!=null&&Xi(r,!!c,l,!0);return;case"textarea":Ke("invalid",r),_=p=c=null;for(C in l)if(l.hasOwnProperty(C)&&(w=l[C],w!=null))switch(C){case"value":c=w;break;case"defaultValue":p=w;break;case"children":_=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(n(91));break;default:dt(r,o,C,w,l,null)}Ms(r,c,p,_),xo(r);return;case"option":for(M in l)if(l.hasOwnProperty(M)&&(c=l[M],c!=null))switch(M){case"selected":r.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:dt(r,o,M,c,l,null)}return;case"dialog":Ke("beforetoggle",r),Ke("toggle",r),Ke("cancel",r),Ke("close",r);break;case"iframe":case"object":Ke("load",r);break;case"video":case"audio":for(c=0;c<zl.length;c++)Ke(zl[c],r);break;case"image":Ke("error",r),Ke("load",r);break;case"details":Ke("toggle",r);break;case"embed":case"source":case"link":Ke("error",r),Ke("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in l)if(l.hasOwnProperty(G)&&(c=l[G],c!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:dt(r,o,G,c,l,null)}return;default:if(nl(o)){for(j in l)l.hasOwnProperty(j)&&(c=l[j],c!==void 0&&nm(r,o,j,c,l,void 0));return}}for(w in l)l.hasOwnProperty(w)&&(c=l[w],c!=null&&dt(r,o,w,c,l,null))}function ww(r,o,l,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,_=null,C=null,w=null,M=null,G=null,j=null;for($ in l){var te=l[$];if(l.hasOwnProperty($)&&te!=null)switch($){case"checked":break;case"value":break;case"defaultValue":M=te;default:c.hasOwnProperty($)||dt(r,o,$,null,c,te)}}for(var K in c){var $=c[K];if(te=l[K],c.hasOwnProperty(K)&&($!=null||te!=null))switch(K){case"type":_=$;break;case"name":p=$;break;case"checked":G=$;break;case"defaultChecked":j=$;break;case"value":C=$;break;case"defaultValue":w=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(n(137,o));break;default:$!==te&&dt(r,o,K,$,c,te)}}kn(r,C,w,M,G,j,_,p);return;case"select":$=C=w=K=null;for(_ in l)if(M=l[_],l.hasOwnProperty(_)&&M!=null)switch(_){case"value":break;case"multiple":$=M;default:c.hasOwnProperty(_)||dt(r,o,_,null,c,M)}for(p in c)if(_=c[p],M=l[p],c.hasOwnProperty(p)&&(_!=null||M!=null))switch(p){case"value":K=_;break;case"defaultValue":w=_;break;case"multiple":C=_;default:_!==M&&dt(r,o,p,_,c,M)}o=w,l=C,c=$,K!=null?Xi(r,!!l,K,!1):!!c!=!!l&&(o!=null?Xi(r,!!l,o,!0):Xi(r,!!l,l?[]:"",!1));return;case"textarea":$=K=null;for(w in l)if(p=l[w],l.hasOwnProperty(w)&&p!=null&&!c.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:dt(r,o,w,null,c,p)}for(C in c)if(p=c[C],_=l[C],c.hasOwnProperty(C)&&(p!=null||_!=null))switch(C){case"value":K=p;break;case"defaultValue":$=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(n(91));break;default:p!==_&&dt(r,o,C,p,c,_)}ct(r,K,$);return;case"option":for(var Me in l)if(K=l[Me],l.hasOwnProperty(Me)&&K!=null&&!c.hasOwnProperty(Me))switch(Me){case"selected":r.selected=!1;break;default:dt(r,o,Me,null,c,K)}for(M in c)if(K=c[M],$=l[M],c.hasOwnProperty(M)&&K!==$&&(K!=null||$!=null))switch(M){case"selected":r.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:dt(r,o,M,K,c,$)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Re in l)K=l[Re],l.hasOwnProperty(Re)&&K!=null&&!c.hasOwnProperty(Re)&&dt(r,o,Re,null,c,K);for(G in c)if(K=c[G],$=l[G],c.hasOwnProperty(G)&&K!==$&&(K!=null||$!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(n(137,o));break;default:dt(r,o,G,K,c,$)}return;default:if(nl(o)){for(var ht in l)K=l[ht],l.hasOwnProperty(ht)&&K!==void 0&&!c.hasOwnProperty(ht)&&nm(r,o,ht,void 0,c,K);for(j in c)K=c[j],$=l[j],!c.hasOwnProperty(j)||K===$||K===void 0&&$===void 0||nm(r,o,j,K,c,$);return}}for(var B in l)K=l[B],l.hasOwnProperty(B)&&K!=null&&!c.hasOwnProperty(B)&&dt(r,o,B,null,c,K);for(te in c)K=c[te],$=l[te],!c.hasOwnProperty(te)||K===$||K==null&&$==null||dt(r,o,te,K,c,$)}var im=null,rm=null;function Yc(r){return r.nodeType===9?r:r.ownerDocument}function hv(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function mv(r,o){if(r===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&o==="foreignObject"?0:r}function sm(r,o){return r==="textarea"||r==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var om=null;function Iw(){var r=window.event;return r&&r.type==="popstate"?r===om?!1:(om=r,!0):(om=null,!1)}var pv=typeof setTimeout=="function"?setTimeout:void 0,Rw=typeof clearTimeout=="function"?clearTimeout:void 0,gv=typeof Promise=="function"?Promise:void 0,xw=typeof queueMicrotask=="function"?queueMicrotask:typeof gv<"u"?function(r){return gv.resolve(null).then(r).catch(bw)}:pv;function bw(r){setTimeout(function(){throw r})}function Zr(r){return r==="head"}function yv(r,o){var l=o,c=0,p=0;do{var _=l.nextSibling;if(r.removeChild(l),_&&_.nodeType===8)if(l=_.data,l==="/$"){if(0<c&&8>c){l=c;var C=r.ownerDocument;if(l&1&&Fl(C.documentElement),l&2&&Fl(C.body),l&4)for(l=C.head,Fl(l),C=l.firstChild;C;){var w=C.nextSibling,M=C.nodeName;C[Is]||M==="SCRIPT"||M==="STYLE"||M==="LINK"&&C.rel.toLowerCase()==="stylesheet"||l.removeChild(C),C=w}}if(p===0){r.removeChild(_),Wl(o);return}p--}else l==="$"||l==="$?"||l==="$!"?p++:c=l.charCodeAt(0)-48;else c=0;l=_}while(l);Wl(o)}function am(r){var o=r.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var l=o;switch(o=o.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":am(l),kr(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}r.removeChild(l)}}function Nw(r,o,l,c){for(;r.nodeType===1;){var p=l;if(r.nodeName.toLowerCase()!==o.toLowerCase()){if(!c&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(c){if(!r[Is])switch(o){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(_=r.getAttribute("rel"),_==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(_!==p.rel||r.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||r.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||r.getAttribute("title")!==(p.title==null?null:p.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(_=r.getAttribute("src"),(_!==(p.src==null?null:p.src)||r.getAttribute("type")!==(p.type==null?null:p.type)||r.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&_&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(o==="input"&&r.type==="hidden"){var _=p.name==null?null:""+p.name;if(p.type==="hidden"&&r.getAttribute("name")===_)return r}else return r;if(r=ci(r.nextSibling),r===null)break}return null}function Mw(r,o,l){if(o==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!l||(r=ci(r.nextSibling),r===null))return null;return r}function lm(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function Dw(r,o){var l=r.ownerDocument;if(r.data!=="$?"||l.readyState==="complete")o();else{var c=function(){o(),l.removeEventListener("DOMContentLoaded",c)};l.addEventListener("DOMContentLoaded",c),r._reactRetry=c}}function ci(r){for(;r!=null;r=r.nextSibling){var o=r.nodeType;if(o===1||o===3)break;if(o===8){if(o=r.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return r}var um=null;function _v(r){r=r.previousSibling;for(var o=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"){if(o===0)return r;o--}else l==="/$"&&o++}r=r.previousSibling}return null}function vv(r,o,l){switch(o=Yc(l),r){case"html":if(r=o.documentElement,!r)throw Error(n(452));return r;case"head":if(r=o.head,!r)throw Error(n(453));return r;case"body":if(r=o.body,!r)throw Error(n(454));return r;default:throw Error(n(451))}}function Fl(r){for(var o=r.attributes;o.length;)r.removeAttributeNode(o[0]);kr(r)}var ei=new Map,Tv=new Set;function $c(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var gr=X.d;X.d={f:Pw,r:kw,D:Vw,C:Ow,L:Lw,m:Uw,X:Bw,S:zw,M:Fw};function Pw(){var r=gr.f(),o=Uc();return r||o}function kw(r){var o=vi(r);o!==null&&o.tag===5&&o.type==="form"?By(o):gr.r(r)}var ua=typeof document>"u"?null:document;function Ev(r,o,l){var c=ua;if(c&&typeof o=="string"&&o){var p=Pt(o);p='link[rel="'+r+'"][href="'+p+'"]',typeof l=="string"&&(p+='[crossorigin="'+l+'"]'),Tv.has(p)||(Tv.add(p),r={rel:r,crossOrigin:l,href:o},c.querySelector(p)===null&&(o=c.createElement("link"),nn(o,"link",r),xt(o),c.head.appendChild(o)))}}function Vw(r){gr.D(r),Ev("dns-prefetch",r,null)}function Ow(r,o){gr.C(r,o),Ev("preconnect",r,o)}function Lw(r,o,l){gr.L(r,o,l);var c=ua;if(c&&r&&o){var p='link[rel="preload"][as="'+Pt(o)+'"]';o==="image"&&l&&l.imageSrcSet?(p+='[imagesrcset="'+Pt(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(p+='[imagesizes="'+Pt(l.imageSizes)+'"]')):p+='[href="'+Pt(r)+'"]';var _=p;switch(o){case"style":_=ca(r);break;case"script":_=fa(r)}ei.has(_)||(r=v({rel:"preload",href:o==="image"&&l&&l.imageSrcSet?void 0:r,as:o},l),ei.set(_,r),c.querySelector(p)!==null||o==="style"&&c.querySelector(ql(_))||o==="script"&&c.querySelector(Gl(_))||(o=c.createElement("link"),nn(o,"link",r),xt(o),c.head.appendChild(o)))}}function Uw(r,o){gr.m(r,o);var l=ua;if(l&&r){var c=o&&typeof o.as=="string"?o.as:"script",p='link[rel="modulepreload"][as="'+Pt(c)+'"][href="'+Pt(r)+'"]',_=p;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=fa(r)}if(!ei.has(_)&&(r=v({rel:"modulepreload",href:r},o),ei.set(_,r),l.querySelector(p)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Gl(_)))return}c=l.createElement("link"),nn(c,"link",r),xt(c),l.head.appendChild(c)}}}function zw(r,o,l){gr.S(r,o,l);var c=ua;if(c&&r){var p=En(c).hoistableStyles,_=ca(r);o=o||"default";var C=p.get(_);if(!C){var w={loading:0,preload:null};if(C=c.querySelector(ql(_)))w.loading=5;else{r=v({rel:"stylesheet",href:r,"data-precedence":o},l),(l=ei.get(_))&&cm(r,l);var M=C=c.createElement("link");xt(M),nn(M,"link",r),M._p=new Promise(function(G,j){M.onload=G,M.onerror=j}),M.addEventListener("load",function(){w.loading|=1}),M.addEventListener("error",function(){w.loading|=2}),w.loading|=4,Qc(C,o,c)}C={type:"stylesheet",instance:C,count:1,state:w},p.set(_,C)}}}function Bw(r,o){gr.X(r,o);var l=ua;if(l&&r){var c=En(l).hoistableScripts,p=fa(r),_=c.get(p);_||(_=l.querySelector(Gl(p)),_||(r=v({src:r,async:!0},o),(o=ei.get(p))&&fm(r,o),_=l.createElement("script"),xt(_),nn(_,"link",r),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(p,_))}}function Fw(r,o){gr.M(r,o);var l=ua;if(l&&r){var c=En(l).hoistableScripts,p=fa(r),_=c.get(p);_||(_=l.querySelector(Gl(p)),_||(r=v({src:r,async:!0,type:"module"},o),(o=ei.get(p))&&fm(r,o),_=l.createElement("script"),xt(_),nn(_,"link",r),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(p,_))}}function Cv(r,o,l,c){var p=(p=be.current)?$c(p):null;if(!p)throw Error(n(446));switch(r){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(o=ca(l.href),l=En(p).hoistableStyles,c=l.get(o),c||(c={type:"style",instance:null,count:0,state:null},l.set(o,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){r=ca(l.href);var _=En(p).hoistableStyles,C=_.get(r);if(C||(p=p.ownerDocument||p,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(r,C),(_=p.querySelector(ql(r)))&&!_._p&&(C.instance=_,C.state.loading=5),ei.has(r)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},ei.set(r,l),_||qw(p,r,l,C.state))),o&&c===null)throw Error(n(528,""));return C}if(o&&c!==null)throw Error(n(529,""));return null;case"script":return o=l.async,l=l.src,typeof l=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=fa(l),l=En(p).hoistableScripts,c=l.get(o),c||(c={type:"script",instance:null,count:0,state:null},l.set(o,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,r))}}function ca(r){return'href="'+Pt(r)+'"'}function ql(r){return'link[rel="stylesheet"]['+r+"]"}function Av(r){return v({},r,{"data-precedence":r.precedence,precedence:null})}function qw(r,o,l,c){r.querySelector('link[rel="preload"][as="style"]['+o+"]")?c.loading=1:(o=r.createElement("link"),c.preload=o,o.addEventListener("load",function(){return c.loading|=1}),o.addEventListener("error",function(){return c.loading|=2}),nn(o,"link",l),xt(o),r.head.appendChild(o))}function fa(r){return'[src="'+Pt(r)+'"]'}function Gl(r){return"script[async]"+r}function Sv(r,o,l){if(o.count++,o.instance===null)switch(o.type){case"style":var c=r.querySelector('style[data-href~="'+Pt(l.href)+'"]');if(c)return o.instance=c,xt(c),c;var p=v({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(r.ownerDocument||r).createElement("style"),xt(c),nn(c,"style",p),Qc(c,l.precedence,r),o.instance=c;case"stylesheet":p=ca(l.href);var _=r.querySelector(ql(p));if(_)return o.state.loading|=4,o.instance=_,xt(_),_;c=Av(l),(p=ei.get(p))&&cm(c,p),_=(r.ownerDocument||r).createElement("link"),xt(_);var C=_;return C._p=new Promise(function(w,M){C.onload=w,C.onerror=M}),nn(_,"link",c),o.state.loading|=4,Qc(_,l.precedence,r),o.instance=_;case"script":return _=fa(l.src),(p=r.querySelector(Gl(_)))?(o.instance=p,xt(p),p):(c=l,(p=ei.get(_))&&(c=v({},l),fm(c,p)),r=r.ownerDocument||r,p=r.createElement("script"),xt(p),nn(p,"link",c),r.head.appendChild(p),o.instance=p);case"void":return null;default:throw Error(n(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(c=o.instance,o.state.loading|=4,Qc(c,l.precedence,r));return o.instance}function Qc(r,o,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=c.length?c[c.length-1]:null,_=p,C=0;C<c.length;C++){var w=c[C];if(w.dataset.precedence===o)_=w;else if(_!==p)break}_?_.parentNode.insertBefore(r,_.nextSibling):(o=l.nodeType===9?l.head:l,o.insertBefore(r,o.firstChild))}function cm(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.title==null&&(r.title=o.title)}function fm(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.integrity==null&&(r.integrity=o.integrity)}var Wc=null;function wv(r,o,l){if(Wc===null){var c=new Map,p=Wc=new Map;p.set(l,c)}else p=Wc,c=p.get(l),c||(c=new Map,p.set(l,c));if(c.has(r))return c;for(c.set(r,null),l=l.getElementsByTagName(r),p=0;p<l.length;p++){var _=l[p];if(!(_[Is]||_[zt]||r==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var C=_.getAttribute(o)||"";C=r+C;var w=c.get(C);w?w.push(_):c.set(C,[_])}}return c}function Iv(r,o,l){r=r.ownerDocument||r,r.head.insertBefore(l,o==="title"?r.querySelector("head > title"):null)}function Gw(r,o,l){if(l===1||o.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return r=o.disabled,typeof o.precedence=="string"&&r==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function Rv(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var Hl=null;function Hw(){}function Kw(r,o,l){if(Hl===null)throw Error(n(475));var c=Hl;if(o.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var p=ca(l.href),_=r.querySelector(ql(p));if(_){r=_._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(c.count++,c=Jc.bind(c),r.then(c,c)),o.state.loading|=4,o.instance=_,xt(_);return}_=r.ownerDocument||r,l=Av(l),(p=ei.get(p))&&cm(l,p),_=_.createElement("link"),xt(_);var C=_;C._p=new Promise(function(w,M){C.onload=w,C.onerror=M}),nn(_,"link",l),o.instance=_}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(o,r),(r=o.state.preload)&&(o.state.loading&3)===0&&(c.count++,o=Jc.bind(c),r.addEventListener("load",o),r.addEventListener("error",o))}}function Yw(){if(Hl===null)throw Error(n(475));var r=Hl;return r.stylesheets&&r.count===0&&dm(r,r.stylesheets),0<r.count?function(o){var l=setTimeout(function(){if(r.stylesheets&&dm(r,r.stylesheets),r.unsuspend){var c=r.unsuspend;r.unsuspend=null,c()}},6e4);return r.unsuspend=o,function(){r.unsuspend=null,clearTimeout(l)}}:null}function Jc(){if(this.count--,this.count===0){if(this.stylesheets)dm(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Xc=null;function dm(r,o){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Xc=new Map,o.forEach($w,r),Xc=null,Jc.call(r))}function $w(r,o){if(!(o.state.loading&4)){var l=Xc.get(r);if(l)var c=l.get(null);else{l=new Map,Xc.set(r,l);for(var p=r.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<p.length;_++){var C=p[_];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(l.set(C.dataset.precedence,C),c=C)}c&&l.set(null,c)}p=o.instance,C=p.getAttribute("data-precedence"),_=l.get(C)||c,_===c&&l.set(null,p),l.set(C,p),this.count++,c=Jc.bind(this),p.addEventListener("load",c),p.addEventListener("error",c),_?_.parentNode.insertBefore(p,_.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(p,r.firstChild)),o.state.loading|=4}}var Kl={$$typeof:oe,Provider:null,Consumer:null,_currentValue:de,_currentValue2:de,_threadCount:0};function Qw(r,o,l,c,p,_,C,w){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Yi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yi(0),this.hiddenUpdates=Yi(null),this.identifierPrefix=c,this.onUncaughtError=p,this.onCaughtError=_,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function xv(r,o,l,c,p,_,C,w,M,G,j,te){return r=new Qw(r,o,l,C,w,M,G,te),o=1,_===!0&&(o|=24),_=On(3,null,null,o),r.current=_,_.stateNode=r,o=$d(),o.refCount++,r.pooledCache=o,o.refCount++,_.memoizedState={element:c,isDehydrated:l,cache:o},Xd(_),r}function bv(r){return r?(r=qo,r):qo}function Nv(r,o,l,c,p,_){p=bv(p),c.context===null?c.context=p:c.pendingContext=p,c=Br(o),c.payload={element:l},_=_===void 0?null:_,_!==null&&(c.callback=_),l=Fr(r,c,o),l!==null&&(Fn(l,r,o),El(l,r,o))}function Mv(r,o){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<o?l:o}}function hm(r,o){Mv(r,o),(r=r.alternate)&&Mv(r,o)}function Dv(r){if(r.tag===13){var o=Fo(r,67108864);o!==null&&Fn(o,r,67108864),hm(r,67108864)}}var jc=!0;function Ww(r,o,l,c){var p=J.T;J.T=null;var _=X.p;try{X.p=2,mm(r,o,l,c)}finally{X.p=_,J.T=p}}function Jw(r,o,l,c){var p=J.T;J.T=null;var _=X.p;try{X.p=8,mm(r,o,l,c)}finally{X.p=_,J.T=p}}function mm(r,o,l,c){if(jc){var p=pm(c);if(p===null)tm(r,o,c,Zc,l),kv(r,c);else if(jw(p,r,o,l,c))c.stopPropagation();else if(kv(r,c),o&4&&-1<Xw.indexOf(r)){for(;p!==null;){var _=vi(p);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var C=Tn(_.pendingLanes);if(C!==0){var w=_;for(w.pendingLanes|=2,w.entangledLanes|=2;C;){var M=1<<31-he(C);w.entanglements[1]|=M,C&=~M}Pi(_),(ot&6)===0&&(Oc=xn()+500,Ul(0))}}break;case 13:w=Fo(_,2),w!==null&&Fn(w,_,2),Uc(),hm(_,2)}if(_=pm(c),_===null&&tm(r,o,c,Zc,l),_===p)break;p=_}p!==null&&c.stopPropagation()}else tm(r,o,c,null,l)}}function pm(r){return r=Kn(r),gm(r)}var Zc=null;function gm(r){if(Zc=null,r=Qi(r),r!==null){var o=a(r);if(o===null)r=null;else{var l=o.tag;if(l===13){if(r=u(o),r!==null)return r;r=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;r=null}else o!==r&&(r=null)}}return Zc=r,null}function Pv(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ya()){case br:return 2;case Ss:return 8;case ii:case Co:return 32;case Gi:return 268435456;default:return 32}default:return 32}}var ym=!1,es=null,ts=null,ns=null,Yl=new Map,$l=new Map,is=[],Xw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function kv(r,o){switch(r){case"focusin":case"focusout":es=null;break;case"dragenter":case"dragleave":ts=null;break;case"mouseover":case"mouseout":ns=null;break;case"pointerover":case"pointerout":Yl.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":$l.delete(o.pointerId)}}function Ql(r,o,l,c,p,_){return r===null||r.nativeEvent!==_?(r={blockedOn:o,domEventName:l,eventSystemFlags:c,nativeEvent:_,targetContainers:[p]},o!==null&&(o=vi(o),o!==null&&Dv(o)),r):(r.eventSystemFlags|=c,o=r.targetContainers,p!==null&&o.indexOf(p)===-1&&o.push(p),r)}function jw(r,o,l,c,p){switch(o){case"focusin":return es=Ql(es,r,o,l,c,p),!0;case"dragenter":return ts=Ql(ts,r,o,l,c,p),!0;case"mouseover":return ns=Ql(ns,r,o,l,c,p),!0;case"pointerover":var _=p.pointerId;return Yl.set(_,Ql(Yl.get(_)||null,r,o,l,c,p)),!0;case"gotpointercapture":return _=p.pointerId,$l.set(_,Ql($l.get(_)||null,r,o,l,c,p)),!0}return!1}function Vv(r){var o=Qi(r.target);if(o!==null){var l=a(o);if(l!==null){if(o=l.tag,o===13){if(o=u(l),o!==null){r.blockedOn=o,Uu(r.priority,function(){if(l.tag===13){var c=Bn();c=Mr(c);var p=Fo(l,c);p!==null&&Fn(p,l,c),hm(l,c)}});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function ef(r){if(r.blockedOn!==null)return!1;for(var o=r.targetContainers;0<o.length;){var l=pm(r.nativeEvent);if(l===null){l=r.nativeEvent;var c=new l.constructor(l.type,l);ji=c,l.target.dispatchEvent(c),ji=null}else return o=vi(l),o!==null&&Dv(o),r.blockedOn=l,!1;o.shift()}return!0}function Ov(r,o,l){ef(r)&&l.delete(o)}function Zw(){ym=!1,es!==null&&ef(es)&&(es=null),ts!==null&&ef(ts)&&(ts=null),ns!==null&&ef(ns)&&(ns=null),Yl.forEach(Ov),$l.forEach(Ov)}function tf(r,o){r.blockedOn===o&&(r.blockedOn=null,ym||(ym=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Zw)))}var nf=null;function Lv(r){nf!==r&&(nf=r,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){nf===r&&(nf=null);for(var o=0;o<r.length;o+=3){var l=r[o],c=r[o+1],p=r[o+2];if(typeof c!="function"){if(gm(c||l)===null)continue;break}var _=vi(l);_!==null&&(r.splice(o,3),o-=3,gh(_,{pending:!0,data:p,method:l.method,action:c},c,p))}}))}function Wl(r){function o(M){return tf(M,r)}es!==null&&tf(es,r),ts!==null&&tf(ts,r),ns!==null&&tf(ns,r),Yl.forEach(o),$l.forEach(o);for(var l=0;l<is.length;l++){var c=is[l];c.blockedOn===r&&(c.blockedOn=null)}for(;0<is.length&&(l=is[0],l.blockedOn===null);)Vv(l),l.blockedOn===null&&is.shift();if(l=(r.ownerDocument||r).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var p=l[c],_=l[c+1],C=p[Dt]||null;if(typeof _=="function")C||Lv(l);else if(C){var w=null;if(_&&_.hasAttribute("formAction")){if(p=_,C=_[Dt]||null)w=C.formAction;else if(gm(p)!==null)continue}else w=C.action;typeof w=="function"?l[c+1]=w:(l.splice(c,3),c-=3),Lv(l)}}}function _m(r){this._internalRoot=r}rf.prototype.render=_m.prototype.render=function(r){var o=this._internalRoot;if(o===null)throw Error(n(409));var l=o.current,c=Bn();Nv(l,c,r,o,null,null)},rf.prototype.unmount=_m.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var o=r.containerInfo;Nv(r.current,2,null,r,null,null),Uc(),o[Gn]=null}};function rf(r){this._internalRoot=r}rf.prototype.unstable_scheduleHydration=function(r){if(r){var o=Dr();r={blockedOn:null,target:r,priority:o};for(var l=0;l<is.length&&o!==0&&o<is[l].priority;l++);is.splice(l,0,r),l===0&&Vv(r)}};var Uv=e.version;if(Uv!=="19.1.1")throw Error(n(527,Uv,"19.1.1"));X.findDOMNode=function(r){var o=r._reactInternals;if(o===void 0)throw typeof r.render=="function"?Error(n(188)):(r=Object.keys(r).join(","),Error(n(268,r)));return r=y(o),r=r!==null?g(r):null,r=r===null?null:r.stateNode,r};var eI={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sf.isDisabled&&sf.supportsFiber)try{gt=sf.inject(eI),re=sf}catch{}}return Xl.createRoot=function(r,o){if(!s(r))throw Error(n(299));var l=!1,c="",p=e_,_=t_,C=n_,w=null;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(c=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(C=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(w=o.unstable_transitionCallbacks)),o=xv(r,1,!1,null,null,l,c,p,_,C,w,null),r[Gn]=o.current,em(r),new _m(o)},Xl.hydrateRoot=function(r,o,l){if(!s(r))throw Error(n(299));var c=!1,p="",_=e_,C=t_,w=n_,M=null,G=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onUncaughtError!==void 0&&(_=l.onUncaughtError),l.onCaughtError!==void 0&&(C=l.onCaughtError),l.onRecoverableError!==void 0&&(w=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(M=l.unstable_transitionCallbacks),l.formState!==void 0&&(G=l.formState)),o=xv(r,1,!0,o,l??null,c,p,_,C,w,M,G),o.context=bv(null),l=o.current,c=Bn(),c=Mr(c),p=Br(c),p.callback=null,Fr(l,p,c),l=c,o.current.lanes=l,$i(o,l),Pi(o),r[Gn]=o.current,em(r),new rf(o)},Xl.version="19.1.1",Xl}var Qv;function cI(){if(Qv)return Em.exports;Qv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Em.exports=uI(),Em.exports}var fI=cI();const dI=FE(fI),hI=({chatHistory:i,activeChatId:e,onSelectChat:t,onNewChat:n,onToggleSidebar:s,onDeleteChat:a,t:u,isMobile:f=!1})=>{const[y,g]=Ie.useState(null),v=R=>{g(R)},A=()=>{y&&(a(y),g(null))},S=()=>{g(null)};return N.jsxs(N.Fragment,{children:[N.jsxs("div",{className:"h-full flex flex-col bg-zinc-800",children:[N.jsxs("div",{className:"p-4 border-b border-zinc-700 flex items-center justify-between",children:[N.jsx("h2",{className:"text-lg font-semibold text-zinc-100",children:"Chats"}),f&&N.jsx("button",{onClick:s,className:"p-2 text-zinc-400 hover:text-zinc-100 hover:bg-zinc-700 rounded-lg transition-colors","aria-label":"Close sidebar",children:""})]}),N.jsx("div",{className:"p-4",children:N.jsxs("button",{onClick:n,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-4 rounded-xl transition-all duration-200 flex items-center justify-center gap-2 shadow-lg hover:shadow-xl transform hover:scale-[1.02] active:scale-[0.98]",children:[N.jsx("span",{className:"text-lg",children:"+"}),N.jsx("span",{children:u("newChatTitle")})]})}),N.jsx("div",{className:"flex-1 overflow-y-auto px-4 pb-4",children:N.jsx("div",{className:"space-y-2",children:i.length===0?N.jsxs("div",{className:"text-center text-zinc-500 py-8",children:[N.jsx("div",{className:"text-4xl mb-2",children:""}),N.jsx("p",{className:"text-sm",children:"No chats yet"}),N.jsx("p",{className:"text-xs text-zinc-600",children:"Start a new conversation"})]}):i.map(R=>{var V,H;return N.jsxs("div",{className:"group relative",children:[N.jsx("button",{onClick:()=>t(R.id),className:`w-full text-left p-3 rounded-xl transition-all duration-200 ${R.id===e?"bg-zinc-700 border border-zinc-600 shadow-md":"hover:bg-zinc-700/50 border border-transparent hover:border-zinc-600"}`,children:N.jsxs("div",{className:"flex items-start gap-3",children:[N.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0 mt-0.5 ${R.id===e?"bg-blue-600 text-white":"bg-zinc-600 text-zinc-300 group-hover:bg-zinc-500"}`,children:N.jsx("span",{className:"text-sm",children:""})}),N.jsxs("div",{className:"flex-1 min-w-0",children:[N.jsx("h3",{className:`font-medium text-sm truncate ${R.id===e?"text-zinc-100":"text-zinc-200"}`,children:R.title}),R.messages.length>1&&N.jsxs("p",{className:"text-xs text-zinc-500 truncate mt-1",children:[(V=R.messages[R.messages.length-1])==null?void 0:V.text.substring(0,50),((H=R.messages[R.messages.length-1])==null?void 0:H.text.length)>50?"...":""]}),N.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[N.jsx("span",{className:`text-xs px-2 py-1 rounded-md ${R.language==="kannada"?"bg-green-900/50 text-green-300 border border-green-800":"bg-blue-900/50 text-blue-300 border border-blue-800"}`,children:R.language==="kannada"?"Kanglish":"English"}),N.jsxs("span",{className:"text-xs text-zinc-500",children:[R.messages.length-1," messages"]})]})]})]})}),N.jsx("button",{onClick:Y=>{Y.stopPropagation(),v(R.id)},className:"absolute right-2 top-1/2 transform -translate-y-1/2 p-1.5 text-zinc-500 hover:text-red-400 hover:bg-zinc-700 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200","aria-label":"Delete chat",children:N.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},R.id)})})}),N.jsx("div",{className:"p-4 border-t border-zinc-700",children:N.jsxs("div",{className:"text-center",children:[N.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center mx-auto mb-2",children:N.jsx("span",{className:"text-xl font-bold text-white",children:"N"})}),N.jsx("p",{className:"text-xs text-zinc-400",children:"NammAI"}),N.jsx("p",{className:"text-xs text-zinc-500",children:"Your AI Assistant"})]})})]}),y&&N.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:N.jsxs("div",{className:"bg-zinc-800 rounded-xl border border-zinc-700 max-w-md w-full p-6 shadow-2xl",children:[N.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[N.jsx("div",{className:"bg-amber-500/20 p-2 rounded-lg",children:N.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-amber-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),N.jsxs("div",{children:[N.jsx("h3",{className:"text-lg font-semibold text-zinc-100 mb-1",children:"Delete Chat?"}),N.jsx("p",{className:"text-zinc-400 text-sm mb-3",children:"This action cannot be undone. This will permanently delete your chat and all its messages."}),N.jsx("div",{className:"bg-amber-900/20 border border-amber-800/50 rounded-lg p-3 mb-4",children:N.jsxs("div",{className:"flex items-start gap-2",children:[N.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-amber-500 flex-shrink-0 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),N.jsxs("div",{children:[N.jsx("p",{className:"text-xs font-medium text-amber-400",children:"Disclaimer"}),N.jsx("p",{className:"text-xs text-amber-300 mt-1",children:"Once deleted, your chat history cannot be recovered. Make sure you've saved any important information."})]})]})})]})]}),N.jsxs("div",{className:"flex gap-3 justify-end",children:[N.jsx("button",{onClick:S,className:"px-4 py-2 text-sm font-medium text-zinc-300 hover:text-zinc-100 hover:bg-zinc-700 rounded-lg transition-colors",children:"Cancel"}),N.jsxs("button",{onClick:A,className:"px-4 py-2 text-sm font-medium bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors flex items-center gap-2",children:[N.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete Chat"]})]})]})})]})};var io=(i=>(i.USER="USER",i.AI="AI",i))(io||{});const mI=({messages:i,onSendMessage:e,isAiTyping:t,generationMode:n,setGenerationMode:s,onShowToast:a,t:u,isMobile:f,expandedCodeBlocks:y=new Set,onToggleCodeBlock:g,showCodePreview:v={},onToggleCodePreview:A,previewHtml:S,setPreviewHtml:R,hideProfilePhotos:V=!1})=>{const[H,Y]=Ie.useState(""),[ce,le]=Ie.useState(!1),[oe,pe]=Ie.useState(null),fe=Ie.useRef(null),Te=Ie.useRef(null),O=Ie.useRef(null),b=Ie.useCallback(()=>{var X;(X=fe.current)==null||X.scrollIntoView({behavior:"smooth"})},[]);qE.useEffect(()=>{b()},[i,b]);const x=async X=>{X.preventDefault(),!(!H.trim()||t)&&(e(H),Y(""),O.current&&(O.current.style.height="auto"))},k=X=>{X.key==="Enter"&&!X.shiftKey&&(X.preventDefault(),x(X))},U=X=>{Y(X.target.value);const de=X.target;de.style.height="auto",de.style.height=Math.min(de.scrollHeight,120)+"px"},z=async X=>{var P;const de=(P=X.target.files)==null?void 0:P[0];if(!de)return;if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(de.type)){a("Please upload a valid image file (JPEG, PNG, GIF, WebP)");return}if(de.size>5*1024*1024){a("File size must be less than 5MB");return}le(!0);try{const W=await new Promise((ie,Z)=>{const Ce=new FileReader;Ce.onload=()=>{const Le=Ce.result;ie(Le.split(",")[1])},Ce.onerror=Z,Ce.readAsDataURL(de)});e(H||"",{mimeType:de.type,data:W}),Y(""),O.current&&(O.current.style.height="auto")}catch(W){console.error("Error uploading file:",W),a("Error uploading file")}finally{le(!1),X.target.value=""}},D=(X,de)=>{const Ne=/```(\w+)?\n([\s\S]*?)```/g,P=[];let W=0,ie,Z=0;for(;(ie=Ne.exec(X))!==null;)ie.index>W&&P.push({type:"text",content:X.slice(W,ie.index)}),P.push({type:"code",content:ie[2].trim(),language:ie[1]||"text",index:Z}),W=ie.index+ie[0].length,Z++;return W<X.length&&P.push({type:"text",content:X.slice(W)}),P.length===0&&P.push({type:"text",content:X}),P},We=X=>{navigator.clipboard.writeText(X).then(()=>{a("Code copied to clipboard!")}).catch(()=>{a("Failed to copy code")})},rt=(X,de,Ne,P)=>{const W=y.has(Ne),ie=W?X:X.split(`
`).slice(0,3).join(`
`),Z=!W&&X.split(`
`).length>3;return N.jsxs("div",{className:"my-4",children:[N.jsxs("div",{className:"bg-zinc-800 rounded-lg overflow-hidden",children:[N.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-zinc-700 border-b border-zinc-600",children:[N.jsx("span",{className:"text-sm text-zinc-300 font-medium",children:de}),N.jsxs("div",{className:"flex items-center gap-2",children:[N.jsx("button",{onClick:()=>We(X),className:"px-2 py-1 text-xs text-zinc-300 hover:text-white hover:bg-zinc-600 rounded transition-colors",title:"Copy code",children:" Copy"}),Z&&N.jsx("button",{onClick:()=>g==null?void 0:g(Ne),className:"px-2 py-1 text-xs text-blue-400 hover:text-blue-300 hover:bg-zinc-600 rounded transition-colors",children:"Click to see full code"}),W&&N.jsx("button",{onClick:()=>g==null?void 0:g(Ne),className:"px-2 py-1 text-xs text-zinc-400 hover:text-zinc-300 hover:bg-zinc-600 rounded transition-colors",children:"Minimize"})]})]}),N.jsxs("div",{className:"p-4 overflow-x-auto",children:[N.jsx("pre",{className:"text-sm text-zinc-100",children:N.jsx("code",{children:ie})}),Z&&N.jsxs("div",{className:"text-zinc-500 text-xs mt-2",children:["... ",X.split(`
`).length-3," more lines"]})]})]}),de==="html"&&N.jsx("div",{className:"mt-2",children:N.jsx("button",{onClick:()=>{R&&R(X),pe(Ne)},className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm font-medium",children:"Preview"})})]},`${Ne}-${P}`)},J=X=>{const de=X.sender===io.USER;return N.jsxs("div",{className:`flex gap-3 ${de?"justify-end":"justify-start"} mb-4`,children:[!de&&!V&&N.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center flex-shrink-0",children:N.jsx("span",{className:"text-xs font-bold text-white",children:"AI"})}),N.jsx("div",{className:`max-w-[80%] rounded-2xl px-4 py-3 ${de?"bg-blue-600 text-white ml-auto":"bg-zinc-700 text-zinc-100"}`,children:X.isTyping?N.jsxs("div",{className:"flex items-center gap-1",children:[N.jsx("div",{className:"w-2 h-2 bg-zinc-400 rounded-full animate-pulse"}),N.jsx("div",{className:"w-2 h-2 bg-zinc-400 rounded-full animate-pulse",style:{animationDelay:"0.2s"}}),N.jsx("div",{className:"w-2 h-2 bg-zinc-400 rounded-full animate-pulse",style:{animationDelay:"0.4s"}})]}):N.jsx("div",{className:"whitespace-pre-wrap break-words",children:de?X.text:D(X.text,X.id).map((Ne,P)=>Ne.type==="code"?rt(Ne.content,Ne.language||"text",X.id,Ne.index||0):N.jsx("span",{className:"whitespace-pre-wrap",children:Ne.content},P))})}),de&&!V&&N.jsx("div",{className:"w-8 h-8 bg-orange-500 rounded-full flex items-center justify-center flex-shrink-0",children:N.jsx("span",{className:"text-xs font-bold text-white",children:"U"})})]},X.id)};return N.jsxs("div",{className:"flex flex-col h-full",children:[N.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[i.length===0?N.jsx("div",{className:"flex items-center justify-center h-full",children:N.jsxs("div",{className:"text-center text-zinc-400",children:[N.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-4",children:N.jsx("span",{className:"text-2xl font-bold text-white",children:"AI"})}),N.jsx("p",{className:"text-lg mb-2",children:"Welcome to NammAI!"}),N.jsx("p",{className:"text-sm",children:"How can I assist you today?"})]})}):i.map(J),t&&N.jsxs("div",{className:"flex gap-3 justify-start mb-4",children:[!V&&N.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center flex-shrink-0",children:N.jsx("span",{className:"text-xs font-bold text-white",children:"AI"})}),N.jsx("div",{className:"max-w-[80%] rounded-2xl px-4 py-3 bg-zinc-700 text-zinc-100",children:N.jsxs("div",{className:"flex items-center gap-1",children:[N.jsx("div",{className:"w-2 h-2 bg-zinc-400 rounded-full animate-pulse"}),N.jsx("div",{className:"w-2 h-2 bg-zinc-400 rounded-full animate-pulse",style:{animationDelay:"0.2s"}}),N.jsx("div",{className:"w-2 h-2 bg-zinc-400 rounded-full animate-pulse",style:{animationDelay:"0.4s"}})]})})]}),N.jsx("div",{ref:fe})]}),N.jsxs("div",{className:"flex items-center gap-2 py-3 justify-center px-2",children:[N.jsxs("button",{onClick:()=>s("chat"),className:`rounded-lg transition-all duration-200 flex items-center group relative ${f?"px-2 py-2 text-xs flex-1 max-w-[120px] flex-col gap-1":"px-3 py-1.5 text-sm gap-2"} ${n==="chat"?"bg-blue-600 text-white shadow-sm":"text-zinc-300 hover:text-white hover:bg-zinc-700 border border-zinc-600"}`,title:"Chat Mode - General conversation and assistance",children:[N.jsx("span",{className:"text-sm",children:""}),N.jsx("span",{className:`font-medium ${f?"text-xs":"text-sm"}`,children:"Chat"}),!f&&N.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-1 bg-zinc-900 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50",children:"General conversation and assistance"})]}),N.jsxs("button",{onClick:()=>s("code"),className:`rounded-lg transition-all duration-200 flex items-center group relative ${f?"px-2 py-2 text-xs flex-1 max-w-[120px] flex-col gap-1":"px-3 py-1.5 text-sm gap-2"} ${n==="code"?"bg-green-600 text-white shadow-sm":"text-zinc-300 hover:text-white hover:bg-zinc-700 border border-zinc-600"}`,title:"Code Mode - Programming and development help",children:[N.jsx("span",{className:"text-sm",children:""}),N.jsx("span",{className:`font-medium ${f?"text-xs":"text-sm"}`,children:"Code"}),!f&&N.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-1 bg-zinc-900 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50",children:"Programming and development help"})]}),N.jsxs("button",{onClick:()=>s("slides"),className:`rounded-lg transition-all duration-200 flex items-center group relative ${f?"px-2 py-2 text-xs flex-1 max-w-[120px] flex-col gap-1":"px-3 py-1.5 text-sm gap-2"} ${n==="slides"?"bg-purple-600 text-white shadow-sm":"text-zinc-300 hover:text-white hover:bg-zinc-700 border border-zinc-600"}`,title:"Slide Mode - Create presentations and slides",children:[N.jsx("span",{className:"text-sm",children:""}),N.jsx("span",{className:`font-medium ${f?"text-xs":"text-sm"}`,children:"Slides"}),!f&&N.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-1 bg-zinc-900 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50",children:"Create presentations and slides"})]})]}),N.jsxs("div",{className:"border-t border-zinc-700 bg-zinc-800 p-4",children:[N.jsxs("form",{onSubmit:x,className:"flex gap-3 items-center",children:[N.jsxs("div",{className:"flex-1 relative",children:[N.jsx("textarea",{ref:O,value:H,onChange:U,onKeyDown:k,placeholder:"Type your message...",className:"w-full bg-zinc-700 text-zinc-100 rounded-xl px-4 py-3 pr-12 resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors",style:{minHeight:"48px",maxHeight:"120px"},disabled:t||ce}),N.jsx("button",{type:"button",onClick:()=>{var X;return(X=Te.current)==null?void 0:X.click()},disabled:t||ce,className:"absolute right-3 top-1/2 transform -translate-y-1/2 p-1.5 text-zinc-400 hover:text-zinc-100 transition-colors disabled:opacity-50",title:"Upload image",children:ce?N.jsx("div",{className:"w-5 h-5 border-2 border-zinc-400 border-t-transparent rounded-full animate-spin"}):N.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})})})]}),N.jsx("button",{type:"submit",disabled:!H.trim()||t||ce,className:"bg-blue-600 text-white rounded-xl px-4 py-3 hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex-shrink-0",children:t?N.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):N.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]}),N.jsx("input",{ref:Te,type:"file",accept:"image/*",onChange:z,className:"hidden"})]}),oe!==null&&N.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>pe(null),children:N.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] flex flex-col",onClick:X=>X.stopPropagation(),children:[N.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[N.jsx("h3",{className:"text-lg font-medium",children:"HTML Preview"}),N.jsx("button",{onClick:()=>pe(null),className:"text-gray-500 hover:text-gray-700",children:""})]}),N.jsx("div",{className:"flex-1 overflow-auto p-4",children:N.jsx("iframe",{srcDoc:S||"",className:"w-full h-full min-h-[500px] border-0",sandbox:"allow-scripts allow-same-origin allow-popups",title:"HTML Preview"})})]})})]})};var nt;(function(i){i.assertEqual=s=>{};function e(s){}i.assertIs=e;function t(s){throw new Error}i.assertNever=t,i.arrayToEnum=s=>{const a={};for(const u of s)a[u]=u;return a},i.getValidEnumValues=s=>{const a=i.objectKeys(s).filter(f=>typeof s[s[f]]!="number"),u={};for(const f of a)u[f]=s[f];return i.objectValues(u)},i.objectValues=s=>i.objectKeys(s).map(function(a){return s[a]}),i.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const a=[];for(const u in s)Object.prototype.hasOwnProperty.call(s,u)&&a.push(u);return a},i.find=(s,a)=>{for(const u of s)if(a(u))return u},i.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function n(s,a=" | "){return s.map(u=>typeof u=="string"?`'${u}'`:u).join(a)}i.joinValues=n,i.jsonStringifyReplacer=(s,a)=>typeof a=="bigint"?a.toString():a})(nt||(nt={}));var Wv;(function(i){i.mergeShapes=(e,t)=>({...e,...t})})(Wv||(Wv={}));const ve=nt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),os=i=>{switch(typeof i){case"undefined":return ve.undefined;case"string":return ve.string;case"number":return Number.isNaN(i)?ve.nan:ve.number;case"boolean":return ve.boolean;case"function":return ve.function;case"bigint":return ve.bigint;case"symbol":return ve.symbol;case"object":return Array.isArray(i)?ve.array:i===null?ve.null:i.then&&typeof i.then=="function"&&i.catch&&typeof i.catch=="function"?ve.promise:typeof Map<"u"&&i instanceof Map?ve.map:typeof Set<"u"&&i instanceof Set?ve.set:typeof Date<"u"&&i instanceof Date?ve.date:ve.object;default:return ve.unknown}},ae=nt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Ar extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(a){return a.message},n={_errors:[]},s=a=>{for(const u of a.issues)if(u.code==="invalid_union")u.unionErrors.map(s);else if(u.code==="invalid_return_type")s(u.returnTypeError);else if(u.code==="invalid_arguments")s(u.argumentsError);else if(u.path.length===0)n._errors.push(t(u));else{let f=n,y=0;for(;y<u.path.length;){const g=u.path[y];y===u.path.length-1?(f[g]=f[g]||{_errors:[]},f[g]._errors.push(t(u))):f[g]=f[g]||{_errors:[]},f=f[g],y++}}};return s(this),n}static assert(e){if(!(e instanceof Ar))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,nt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},n=[];for(const s of this.issues)if(s.path.length>0){const a=s.path[0];t[a]=t[a]||[],t[a].push(e(s))}else n.push(e(s));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}Ar.create=i=>new Ar(i);const Fm=(i,e)=>{let t;switch(i.code){case ae.invalid_type:i.received===ve.undefined?t="Required":t=`Expected ${i.expected}, received ${i.received}`;break;case ae.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(i.expected,nt.jsonStringifyReplacer)}`;break;case ae.unrecognized_keys:t=`Unrecognized key(s) in object: ${nt.joinValues(i.keys,", ")}`;break;case ae.invalid_union:t="Invalid input";break;case ae.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${nt.joinValues(i.options)}`;break;case ae.invalid_enum_value:t=`Invalid enum value. Expected ${nt.joinValues(i.options)}, received '${i.received}'`;break;case ae.invalid_arguments:t="Invalid function arguments";break;case ae.invalid_return_type:t="Invalid function return type";break;case ae.invalid_date:t="Invalid date";break;case ae.invalid_string:typeof i.validation=="object"?"includes"in i.validation?(t=`Invalid input: must include "${i.validation.includes}"`,typeof i.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${i.validation.position}`)):"startsWith"in i.validation?t=`Invalid input: must start with "${i.validation.startsWith}"`:"endsWith"in i.validation?t=`Invalid input: must end with "${i.validation.endsWith}"`:nt.assertNever(i.validation):i.validation!=="regex"?t=`Invalid ${i.validation}`:t="Invalid";break;case ae.too_small:i.type==="array"?t=`Array must contain ${i.exact?"exactly":i.inclusive?"at least":"more than"} ${i.minimum} element(s)`:i.type==="string"?t=`String must contain ${i.exact?"exactly":i.inclusive?"at least":"over"} ${i.minimum} character(s)`:i.type==="number"?t=`Number must be ${i.exact?"exactly equal to ":i.inclusive?"greater than or equal to ":"greater than "}${i.minimum}`:i.type==="bigint"?t=`Number must be ${i.exact?"exactly equal to ":i.inclusive?"greater than or equal to ":"greater than "}${i.minimum}`:i.type==="date"?t=`Date must be ${i.exact?"exactly equal to ":i.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(i.minimum))}`:t="Invalid input";break;case ae.too_big:i.type==="array"?t=`Array must contain ${i.exact?"exactly":i.inclusive?"at most":"less than"} ${i.maximum} element(s)`:i.type==="string"?t=`String must contain ${i.exact?"exactly":i.inclusive?"at most":"under"} ${i.maximum} character(s)`:i.type==="number"?t=`Number must be ${i.exact?"exactly":i.inclusive?"less than or equal to":"less than"} ${i.maximum}`:i.type==="bigint"?t=`BigInt must be ${i.exact?"exactly":i.inclusive?"less than or equal to":"less than"} ${i.maximum}`:i.type==="date"?t=`Date must be ${i.exact?"exactly":i.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(i.maximum))}`:t="Invalid input";break;case ae.custom:t="Invalid input";break;case ae.invalid_intersection_types:t="Intersection results could not be merged";break;case ae.not_multiple_of:t=`Number must be a multiple of ${i.multipleOf}`;break;case ae.not_finite:t="Number must be finite";break;default:t=e.defaultError,nt.assertNever(i)}return{message:t}};let pI=Fm;function gI(){return pI}const yI=i=>{const{data:e,path:t,errorMaps:n,issueData:s}=i,a=[...t,...s.path||[]],u={...s,path:a};if(s.message!==void 0)return{...s,path:a,message:s.message};let f="";const y=n.filter(g=>!!g).slice().reverse();for(const g of y)f=g(u,{data:e,defaultError:f}).message;return{...s,path:a,message:f}};function me(i,e){const t=gI(),n=yI({issueData:e,data:i.data,path:i.path,errorMaps:[i.common.contextualErrorMap,i.schemaErrorMap,t,t===Fm?void 0:Fm].filter(s=>!!s)});i.common.issues.push(n)}class In{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const s of t){if(s.status==="aborted")return Oe;s.status==="dirty"&&e.dirty(),n.push(s.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const s of t){const a=await s.key,u=await s.value;n.push({key:a,value:u})}return In.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const s of t){const{key:a,value:u}=s;if(a.status==="aborted"||u.status==="aborted")return Oe;a.status==="dirty"&&e.dirty(),u.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof u.value<"u"||s.alwaysSet)&&(n[a.value]=u.value)}return{status:e.value,value:n}}}const Oe=Object.freeze({status:"aborted"}),eu=i=>({status:"dirty",value:i}),ni=i=>({status:"valid",value:i}),Jv=i=>i.status==="aborted",Xv=i=>i.status==="dirty",Aa=i=>i.status==="valid",If=i=>typeof Promise<"u"&&i instanceof Promise;var Ae;(function(i){i.errToObj=e=>typeof e=="string"?{message:e}:e||{},i.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Ae||(Ae={}));class Bi{constructor(e,t,n,s){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const jv=(i,e)=>{if(Aa(e))return{success:!0,data:e.value};if(!i.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new Ar(i.common.issues);return this._error=t,this._error}}};function Fe(i){if(!i)return{};const{errorMap:e,invalid_type_error:t,required_error:n,description:s}=i;if(e&&(t||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(u,f)=>{const{message:y}=i;return u.code==="invalid_enum_value"?{message:y??f.defaultError}:typeof f.data>"u"?{message:y??n??f.defaultError}:u.code!=="invalid_type"?{message:f.defaultError}:{message:y??t??f.defaultError}},description:s}}class Qe{get description(){return this._def.description}_getType(e){return os(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:os(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new In,ctx:{common:e.parent.common,data:e.data,parsedType:os(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(If(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){const n={common:{issues:[],async:(t==null?void 0:t.async)??!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:os(e)},s=this._parseSync({data:e,path:n.path,parent:n});return jv(n,s)}"~validate"(e){var n,s;const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:os(e)};if(!this["~standard"].async)try{const a=this._parseSync({data:e,path:[],parent:t});return Aa(a)?{value:a.value}:{issues:t.common.issues}}catch(a){(s=(n=a==null?void 0:a.message)==null?void 0:n.toLowerCase())!=null&&s.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(a=>Aa(a)?{value:a.value}:{issues:t.common.issues})}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:os(e)},s=this._parse({data:e,path:n.path,parent:n}),a=await(If(s)?s:Promise.resolve(s));return jv(n,a)}refine(e,t){const n=s=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(s):t;return this._refinement((s,a)=>{const u=e(s),f=()=>a.addIssue({code:ae.custom,...n(s)});return typeof Promise<"u"&&u instanceof Promise?u.then(y=>y?!0:(f(),!1)):u?!0:(f(),!1)})}refinement(e,t){return this._refinement((n,s)=>e(n)?!0:(s.addIssue(typeof t=="function"?t(n,s):t),!1))}_refinement(e){return new Ia({schema:this,typeName:ke.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return fs.create(this,this._def)}nullable(){return Ra.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Oi.create(this)}promise(){return Mf.create(this,this._def)}or(e){return xf.create([this,e],this._def)}and(e){return bf.create(this,e,this._def)}transform(e){return new Ia({...Fe(this._def),schema:this,typeName:ke.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new Km({...Fe(this._def),innerType:this,defaultValue:t,typeName:ke.ZodDefault})}brand(){return new BI({typeName:ke.ZodBranded,type:this,...Fe(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new Ym({...Fe(this._def),innerType:this,catchValue:t,typeName:ke.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return Mp.create(this,e)}readonly(){return $m.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const _I=/^c[^\s-]{8,}$/i,vI=/^[0-9a-z]+$/,TI=/^[0-9A-HJKMNP-TV-Z]{26}$/i,EI=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,CI=/^[a-z0-9_-]{21}$/i,AI=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,SI=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,wI=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,II="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let wm;const RI=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,xI=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,bI=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,NI=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,MI=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,DI=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,GE="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",PI=new RegExp(`^${GE}$`);function HE(i){let e="[0-5]\\d";i.precision?e=`${e}\\.\\d{${i.precision}}`:i.precision==null&&(e=`${e}(\\.\\d+)?`);const t=i.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`}function kI(i){return new RegExp(`^${HE(i)}$`)}function VI(i){let e=`${GE}T${HE(i)}`;const t=[];return t.push(i.local?"Z?":"Z"),i.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function OI(i,e){return!!((e==="v4"||!e)&&RI.test(i)||(e==="v6"||!e)&&bI.test(i))}function LI(i,e){if(!AI.test(i))return!1;try{const[t]=i.split(".");if(!t)return!1;const n=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),s=JSON.parse(atob(n));return!(typeof s!="object"||s===null||"typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||e&&s.alg!==e)}catch{return!1}}function UI(i,e){return!!((e==="v4"||!e)&&xI.test(i)||(e==="v6"||!e)&&NI.test(i))}class Vi extends Qe{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ve.string){const a=this._getOrReturnCtx(e);return me(a,{code:ae.invalid_type,expected:ve.string,received:a.parsedType}),Oe}const n=new In;let s;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(s=this._getOrReturnCtx(e,s),me(s,{code:ae.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="max")e.data.length>a.value&&(s=this._getOrReturnCtx(e,s),me(s,{code:ae.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="length"){const u=e.data.length>a.value,f=e.data.length<a.value;(u||f)&&(s=this._getOrReturnCtx(e,s),u?me(s,{code:ae.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):f&&me(s,{code:ae.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),n.dirty())}else if(a.kind==="email")wI.test(e.data)||(s=this._getOrReturnCtx(e,s),me(s,{validation:"email",code:ae.invalid_string,message:a.message}),n.dirty());else if(a.kind==="emoji")wm||(wm=new RegExp(II,"u")),wm.test(e.data)||(s=this._getOrReturnCtx(e,s),me(s,{validation:"emoji",code:ae.invalid_string,message:a.message}),n.dirty());else if(a.kind==="uuid")EI.test(e.data)||(s=this._getOrReturnCtx(e,s),me(s,{validation:"uuid",code:ae.invalid_string,message:a.message}),n.dirty());else if(a.kind==="nanoid")CI.test(e.data)||(s=this._getOrReturnCtx(e,s),me(s,{validation:"nanoid",code:ae.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid")_I.test(e.data)||(s=this._getOrReturnCtx(e,s),me(s,{validation:"cuid",code:ae.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid2")vI.test(e.data)||(s=this._getOrReturnCtx(e,s),me(s,{validation:"cuid2",code:ae.invalid_string,message:a.message}),n.dirty());else if(a.kind==="ulid")TI.test(e.data)||(s=this._getOrReturnCtx(e,s),me(s,{validation:"ulid",code:ae.invalid_string,message:a.message}),n.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),me(s,{validation:"url",code:ae.invalid_string,message:a.message}),n.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),me(s,{validation:"regex",code:ae.invalid_string,message:a.message}),n.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(s=this._getOrReturnCtx(e,s),me(s,{code:ae.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),n.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(s=this._getOrReturnCtx(e,s),me(s,{code:ae.invalid_string,validation:{startsWith:a.value},message:a.message}),n.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(s=this._getOrReturnCtx(e,s),me(s,{code:ae.invalid_string,validation:{endsWith:a.value},message:a.message}),n.dirty()):a.kind==="datetime"?VI(a).test(e.data)||(s=this._getOrReturnCtx(e,s),me(s,{code:ae.invalid_string,validation:"datetime",message:a.message}),n.dirty()):a.kind==="date"?PI.test(e.data)||(s=this._getOrReturnCtx(e,s),me(s,{code:ae.invalid_string,validation:"date",message:a.message}),n.dirty()):a.kind==="time"?kI(a).test(e.data)||(s=this._getOrReturnCtx(e,s),me(s,{code:ae.invalid_string,validation:"time",message:a.message}),n.dirty()):a.kind==="duration"?SI.test(e.data)||(s=this._getOrReturnCtx(e,s),me(s,{validation:"duration",code:ae.invalid_string,message:a.message}),n.dirty()):a.kind==="ip"?OI(e.data,a.version)||(s=this._getOrReturnCtx(e,s),me(s,{validation:"ip",code:ae.invalid_string,message:a.message}),n.dirty()):a.kind==="jwt"?LI(e.data,a.alg)||(s=this._getOrReturnCtx(e,s),me(s,{validation:"jwt",code:ae.invalid_string,message:a.message}),n.dirty()):a.kind==="cidr"?UI(e.data,a.version)||(s=this._getOrReturnCtx(e,s),me(s,{validation:"cidr",code:ae.invalid_string,message:a.message}),n.dirty()):a.kind==="base64"?MI.test(e.data)||(s=this._getOrReturnCtx(e,s),me(s,{validation:"base64",code:ae.invalid_string,message:a.message}),n.dirty()):a.kind==="base64url"?DI.test(e.data)||(s=this._getOrReturnCtx(e,s),me(s,{validation:"base64url",code:ae.invalid_string,message:a.message}),n.dirty()):nt.assertNever(a);return{status:n.value,value:e.data}}_regex(e,t,n){return this.refinement(s=>e.test(s),{validation:t,code:ae.invalid_string,...Ae.errToObj(n)})}_addCheck(e){return new Vi({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Ae.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Ae.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Ae.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Ae.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Ae.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Ae.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Ae.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Ae.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Ae.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Ae.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Ae.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Ae.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Ae.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...Ae.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Ae.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Ae.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...Ae.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...Ae.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...Ae.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...Ae.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...Ae.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...Ae.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...Ae.errToObj(t)})}nonempty(e){return this.min(1,Ae.errToObj(e))}trim(){return new Vi({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Vi({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Vi({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Vi.create=i=>new Vi({checks:[],typeName:ke.ZodString,coerce:(i==null?void 0:i.coerce)??!1,...Fe(i)});function zI(i,e){const t=(i.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,s=t>n?t:n,a=Number.parseInt(i.toFixed(s).replace(".","")),u=Number.parseInt(e.toFixed(s).replace(".",""));return a%u/10**s}class lo extends Qe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ve.number){const a=this._getOrReturnCtx(e);return me(a,{code:ae.invalid_type,expected:ve.number,received:a.parsedType}),Oe}let n;const s=new In;for(const a of this._def.checks)a.kind==="int"?nt.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),me(n,{code:ae.invalid_type,expected:"integer",received:"float",message:a.message}),s.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),me(n,{code:ae.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),s.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),me(n,{code:ae.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),s.dirty()):a.kind==="multipleOf"?zI(e.data,a.value)!==0&&(n=this._getOrReturnCtx(e,n),me(n,{code:ae.not_multiple_of,multipleOf:a.value,message:a.message}),s.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),me(n,{code:ae.not_finite,message:a.message}),s.dirty()):nt.assertNever(a);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Ae.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Ae.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Ae.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Ae.toString(t))}setLimit(e,t,n,s){return new lo({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:Ae.toString(s)}]})}_addCheck(e){return new lo({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Ae.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ae.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ae.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ae.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ae.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Ae.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:Ae.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ae.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ae.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&nt.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(t===null||n.value>t)&&(t=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}lo.create=i=>new lo({checks:[],typeName:ke.ZodNumber,coerce:(i==null?void 0:i.coerce)||!1,...Fe(i)});class uo extends Qe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==ve.bigint)return this._getInvalidInput(e);let n;const s=new In;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),me(n,{code:ae.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),s.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),me(n,{code:ae.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),s.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),me(n,{code:ae.not_multiple_of,multipleOf:a.value,message:a.message}),s.dirty()):nt.assertNever(a);return{status:s.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return me(t,{code:ae.invalid_type,expected:ve.bigint,received:t.parsedType}),Oe}gte(e,t){return this.setLimit("min",e,!0,Ae.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Ae.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Ae.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Ae.toString(t))}setLimit(e,t,n,s){return new uo({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:Ae.toString(s)}]})}_addCheck(e){return new uo({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ae.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ae.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ae.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ae.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Ae.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}uo.create=i=>new uo({checks:[],typeName:ke.ZodBigInt,coerce:(i==null?void 0:i.coerce)??!1,...Fe(i)});class Rf extends Qe{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ve.boolean){const n=this._getOrReturnCtx(e);return me(n,{code:ae.invalid_type,expected:ve.boolean,received:n.parsedType}),Oe}return ni(e.data)}}Rf.create=i=>new Rf({typeName:ke.ZodBoolean,coerce:(i==null?void 0:i.coerce)||!1,...Fe(i)});class Sa extends Qe{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ve.date){const a=this._getOrReturnCtx(e);return me(a,{code:ae.invalid_type,expected:ve.date,received:a.parsedType}),Oe}if(Number.isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return me(a,{code:ae.invalid_date}),Oe}const n=new In;let s;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(s=this._getOrReturnCtx(e,s),me(s,{code:ae.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),n.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(s=this._getOrReturnCtx(e,s),me(s,{code:ae.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),n.dirty()):nt.assertNever(a);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Sa({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:Ae.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:Ae.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}Sa.create=i=>new Sa({checks:[],coerce:(i==null?void 0:i.coerce)||!1,typeName:ke.ZodDate,...Fe(i)});class Zv extends Qe{_parse(e){if(this._getType(e)!==ve.symbol){const n=this._getOrReturnCtx(e);return me(n,{code:ae.invalid_type,expected:ve.symbol,received:n.parsedType}),Oe}return ni(e.data)}}Zv.create=i=>new Zv({typeName:ke.ZodSymbol,...Fe(i)});class eT extends Qe{_parse(e){if(this._getType(e)!==ve.undefined){const n=this._getOrReturnCtx(e);return me(n,{code:ae.invalid_type,expected:ve.undefined,received:n.parsedType}),Oe}return ni(e.data)}}eT.create=i=>new eT({typeName:ke.ZodUndefined,...Fe(i)});class tT extends Qe{_parse(e){if(this._getType(e)!==ve.null){const n=this._getOrReturnCtx(e);return me(n,{code:ae.invalid_type,expected:ve.null,received:n.parsedType}),Oe}return ni(e.data)}}tT.create=i=>new tT({typeName:ke.ZodNull,...Fe(i)});class nT extends Qe{constructor(){super(...arguments),this._any=!0}_parse(e){return ni(e.data)}}nT.create=i=>new nT({typeName:ke.ZodAny,...Fe(i)});class qm extends Qe{constructor(){super(...arguments),this._unknown=!0}_parse(e){return ni(e.data)}}qm.create=i=>new qm({typeName:ke.ZodUnknown,...Fe(i)});class gs extends Qe{_parse(e){const t=this._getOrReturnCtx(e);return me(t,{code:ae.invalid_type,expected:ve.never,received:t.parsedType}),Oe}}gs.create=i=>new gs({typeName:ke.ZodNever,...Fe(i)});class iT extends Qe{_parse(e){if(this._getType(e)!==ve.undefined){const n=this._getOrReturnCtx(e);return me(n,{code:ae.invalid_type,expected:ve.void,received:n.parsedType}),Oe}return ni(e.data)}}iT.create=i=>new iT({typeName:ke.ZodVoid,...Fe(i)});class Oi extends Qe{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),s=this._def;if(t.parsedType!==ve.array)return me(t,{code:ae.invalid_type,expected:ve.array,received:t.parsedType}),Oe;if(s.exactLength!==null){const u=t.data.length>s.exactLength.value,f=t.data.length<s.exactLength.value;(u||f)&&(me(t,{code:u?ae.too_big:ae.too_small,minimum:f?s.exactLength.value:void 0,maximum:u?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),n.dirty())}if(s.minLength!==null&&t.data.length<s.minLength.value&&(me(t,{code:ae.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),n.dirty()),s.maxLength!==null&&t.data.length>s.maxLength.value&&(me(t,{code:ae.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((u,f)=>s.type._parseAsync(new Bi(t,u,t.path,f)))).then(u=>In.mergeArray(n,u));const a=[...t.data].map((u,f)=>s.type._parseSync(new Bi(t,u,t.path,f)));return In.mergeArray(n,a)}get element(){return this._def.type}min(e,t){return new Oi({...this._def,minLength:{value:e,message:Ae.toString(t)}})}max(e,t){return new Oi({...this._def,maxLength:{value:e,message:Ae.toString(t)}})}length(e,t){return new Oi({...this._def,exactLength:{value:e,message:Ae.toString(t)}})}nonempty(e){return this.min(1,e)}}Oi.create=(i,e)=>new Oi({type:i,minLength:null,maxLength:null,exactLength:null,typeName:ke.ZodArray,...Fe(e)});function ha(i){if(i instanceof Lt){const e={};for(const t in i.shape){const n=i.shape[t];e[t]=fs.create(ha(n))}return new Lt({...i._def,shape:()=>e})}else return i instanceof Oi?new Oi({...i._def,type:ha(i.element)}):i instanceof fs?fs.create(ha(i.unwrap())):i instanceof Ra?Ra.create(ha(i.unwrap())):i instanceof co?co.create(i.items.map(e=>ha(e))):i}class Lt extends Qe{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=nt.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==ve.object){const g=this._getOrReturnCtx(e);return me(g,{code:ae.invalid_type,expected:ve.object,received:g.parsedType}),Oe}const{status:n,ctx:s}=this._processInputParams(e),{shape:a,keys:u}=this._getCached(),f=[];if(!(this._def.catchall instanceof gs&&this._def.unknownKeys==="strip"))for(const g in s.data)u.includes(g)||f.push(g);const y=[];for(const g of u){const v=a[g],A=s.data[g];y.push({key:{status:"valid",value:g},value:v._parse(new Bi(s,A,s.path,g)),alwaysSet:g in s.data})}if(this._def.catchall instanceof gs){const g=this._def.unknownKeys;if(g==="passthrough")for(const v of f)y.push({key:{status:"valid",value:v},value:{status:"valid",value:s.data[v]}});else if(g==="strict")f.length>0&&(me(s,{code:ae.unrecognized_keys,keys:f}),n.dirty());else if(g!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const g=this._def.catchall;for(const v of f){const A=s.data[v];y.push({key:{status:"valid",value:v},value:g._parse(new Bi(s,A,s.path,v)),alwaysSet:v in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const g=[];for(const v of y){const A=await v.key,S=await v.value;g.push({key:A,value:S,alwaysSet:v.alwaysSet})}return g}).then(g=>In.mergeObjectSync(n,g)):In.mergeObjectSync(n,y)}get shape(){return this._def.shape()}strict(e){return Ae.errToObj,new Lt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,n)=>{var a,u;const s=((u=(a=this._def).errorMap)==null?void 0:u.call(a,t,n).message)??n.defaultError;return t.code==="unrecognized_keys"?{message:Ae.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new Lt({...this._def,unknownKeys:"strip"})}passthrough(){return new Lt({...this._def,unknownKeys:"passthrough"})}extend(e){return new Lt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Lt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ke.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new Lt({...this._def,catchall:e})}pick(e){const t={};for(const n of nt.objectKeys(e))e[n]&&this.shape[n]&&(t[n]=this.shape[n]);return new Lt({...this._def,shape:()=>t})}omit(e){const t={};for(const n of nt.objectKeys(this.shape))e[n]||(t[n]=this.shape[n]);return new Lt({...this._def,shape:()=>t})}deepPartial(){return ha(this)}partial(e){const t={};for(const n of nt.objectKeys(this.shape)){const s=this.shape[n];e&&!e[n]?t[n]=s:t[n]=s.optional()}return new Lt({...this._def,shape:()=>t})}required(e){const t={};for(const n of nt.objectKeys(this.shape))if(e&&!e[n])t[n]=this.shape[n];else{let a=this.shape[n];for(;a instanceof fs;)a=a._def.innerType;t[n]=a}return new Lt({...this._def,shape:()=>t})}keyof(){return KE(nt.objectKeys(this.shape))}}Lt.create=(i,e)=>new Lt({shape:()=>i,unknownKeys:"strip",catchall:gs.create(),typeName:ke.ZodObject,...Fe(e)});Lt.strictCreate=(i,e)=>new Lt({shape:()=>i,unknownKeys:"strict",catchall:gs.create(),typeName:ke.ZodObject,...Fe(e)});Lt.lazycreate=(i,e)=>new Lt({shape:i,unknownKeys:"strip",catchall:gs.create(),typeName:ke.ZodObject,...Fe(e)});class xf extends Qe{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;function s(a){for(const f of a)if(f.result.status==="valid")return f.result;for(const f of a)if(f.result.status==="dirty")return t.common.issues.push(...f.ctx.common.issues),f.result;const u=a.map(f=>new Ar(f.ctx.common.issues));return me(t,{code:ae.invalid_union,unionErrors:u}),Oe}if(t.common.async)return Promise.all(n.map(async a=>{const u={...t,common:{...t.common,issues:[]},parent:null};return{result:await a._parseAsync({data:t.data,path:t.path,parent:u}),ctx:u}})).then(s);{let a;const u=[];for(const y of n){const g={...t,common:{...t.common,issues:[]},parent:null},v=y._parseSync({data:t.data,path:t.path,parent:g});if(v.status==="valid")return v;v.status==="dirty"&&!a&&(a={result:v,ctx:g}),g.common.issues.length&&u.push(g.common.issues)}if(a)return t.common.issues.push(...a.ctx.common.issues),a.result;const f=u.map(y=>new Ar(y));return me(t,{code:ae.invalid_union,unionErrors:f}),Oe}}get options(){return this._def.options}}xf.create=(i,e)=>new xf({options:i,typeName:ke.ZodUnion,...Fe(e)});function Gm(i,e){const t=os(i),n=os(e);if(i===e)return{valid:!0,data:i};if(t===ve.object&&n===ve.object){const s=nt.objectKeys(e),a=nt.objectKeys(i).filter(f=>s.indexOf(f)!==-1),u={...i,...e};for(const f of a){const y=Gm(i[f],e[f]);if(!y.valid)return{valid:!1};u[f]=y.data}return{valid:!0,data:u}}else if(t===ve.array&&n===ve.array){if(i.length!==e.length)return{valid:!1};const s=[];for(let a=0;a<i.length;a++){const u=i[a],f=e[a],y=Gm(u,f);if(!y.valid)return{valid:!1};s.push(y.data)}return{valid:!0,data:s}}else return t===ve.date&&n===ve.date&&+i==+e?{valid:!0,data:i}:{valid:!1}}class bf extends Qe{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),s=(a,u)=>{if(Jv(a)||Jv(u))return Oe;const f=Gm(a.value,u.value);return f.valid?((Xv(a)||Xv(u))&&t.dirty(),{status:t.value,value:f.data}):(me(n,{code:ae.invalid_intersection_types}),Oe)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([a,u])=>s(a,u)):s(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}bf.create=(i,e,t)=>new bf({left:i,right:e,typeName:ke.ZodIntersection,...Fe(t)});class co extends Qe{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==ve.array)return me(n,{code:ae.invalid_type,expected:ve.array,received:n.parsedType}),Oe;if(n.data.length<this._def.items.length)return me(n,{code:ae.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Oe;!this._def.rest&&n.data.length>this._def.items.length&&(me(n,{code:ae.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const a=[...n.data].map((u,f)=>{const y=this._def.items[f]||this._def.rest;return y?y._parse(new Bi(n,u,n.path,f)):null}).filter(u=>!!u);return n.common.async?Promise.all(a).then(u=>In.mergeArray(t,u)):In.mergeArray(t,a)}get items(){return this._def.items}rest(e){return new co({...this._def,rest:e})}}co.create=(i,e)=>{if(!Array.isArray(i))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new co({items:i,typeName:ke.ZodTuple,rest:null,...Fe(e)})};class Nf extends Qe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==ve.object)return me(n,{code:ae.invalid_type,expected:ve.object,received:n.parsedType}),Oe;const s=[],a=this._def.keyType,u=this._def.valueType;for(const f in n.data)s.push({key:a._parse(new Bi(n,f,n.path,f)),value:u._parse(new Bi(n,n.data[f],n.path,f)),alwaysSet:f in n.data});return n.common.async?In.mergeObjectAsync(t,s):In.mergeObjectSync(t,s)}get element(){return this._def.valueType}static create(e,t,n){return t instanceof Qe?new Nf({keyType:e,valueType:t,typeName:ke.ZodRecord,...Fe(n)}):new Nf({keyType:Vi.create(),valueType:e,typeName:ke.ZodRecord,...Fe(t)})}}class rT extends Qe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==ve.map)return me(n,{code:ae.invalid_type,expected:ve.map,received:n.parsedType}),Oe;const s=this._def.keyType,a=this._def.valueType,u=[...n.data.entries()].map(([f,y],g)=>({key:s._parse(new Bi(n,f,n.path,[g,"key"])),value:a._parse(new Bi(n,y,n.path,[g,"value"]))}));if(n.common.async){const f=new Map;return Promise.resolve().then(async()=>{for(const y of u){const g=await y.key,v=await y.value;if(g.status==="aborted"||v.status==="aborted")return Oe;(g.status==="dirty"||v.status==="dirty")&&t.dirty(),f.set(g.value,v.value)}return{status:t.value,value:f}})}else{const f=new Map;for(const y of u){const g=y.key,v=y.value;if(g.status==="aborted"||v.status==="aborted")return Oe;(g.status==="dirty"||v.status==="dirty")&&t.dirty(),f.set(g.value,v.value)}return{status:t.value,value:f}}}}rT.create=(i,e,t)=>new rT({valueType:e,keyType:i,typeName:ke.ZodMap,...Fe(t)});class hu extends Qe{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==ve.set)return me(n,{code:ae.invalid_type,expected:ve.set,received:n.parsedType}),Oe;const s=this._def;s.minSize!==null&&n.data.size<s.minSize.value&&(me(n,{code:ae.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),t.dirty()),s.maxSize!==null&&n.data.size>s.maxSize.value&&(me(n,{code:ae.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),t.dirty());const a=this._def.valueType;function u(y){const g=new Set;for(const v of y){if(v.status==="aborted")return Oe;v.status==="dirty"&&t.dirty(),g.add(v.value)}return{status:t.value,value:g}}const f=[...n.data.values()].map((y,g)=>a._parse(new Bi(n,y,n.path,g)));return n.common.async?Promise.all(f).then(y=>u(y)):u(f)}min(e,t){return new hu({...this._def,minSize:{value:e,message:Ae.toString(t)}})}max(e,t){return new hu({...this._def,maxSize:{value:e,message:Ae.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}hu.create=(i,e)=>new hu({valueType:i,minSize:null,maxSize:null,typeName:ke.ZodSet,...Fe(e)});class Hm extends Qe{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}Hm.create=(i,e)=>new Hm({getter:i,typeName:ke.ZodLazy,...Fe(e)});class sT extends Qe{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return me(t,{received:t.data,code:ae.invalid_literal,expected:this._def.value}),Oe}return{status:"valid",value:e.data}}get value(){return this._def.value}}sT.create=(i,e)=>new sT({value:i,typeName:ke.ZodLiteral,...Fe(e)});function KE(i,e){return new wa({values:i,typeName:ke.ZodEnum,...Fe(e)})}class wa extends Qe{_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),n=this._def.values;return me(t,{expected:nt.joinValues(n),received:t.parsedType,code:ae.invalid_type}),Oe}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return me(t,{received:t.data,code:ae.invalid_enum_value,options:n}),Oe}return ni(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return wa.create(e,{...this._def,...t})}exclude(e,t=this._def){return wa.create(this.options.filter(n=>!e.includes(n)),{...this._def,...t})}}wa.create=KE;class oT extends Qe{_parse(e){const t=nt.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==ve.string&&n.parsedType!==ve.number){const s=nt.objectValues(t);return me(n,{expected:nt.joinValues(s),received:n.parsedType,code:ae.invalid_type}),Oe}if(this._cache||(this._cache=new Set(nt.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const s=nt.objectValues(t);return me(n,{received:n.data,code:ae.invalid_enum_value,options:s}),Oe}return ni(e.data)}get enum(){return this._def.values}}oT.create=(i,e)=>new oT({values:i,typeName:ke.ZodNativeEnum,...Fe(e)});class Mf extends Qe{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==ve.promise&&t.common.async===!1)return me(t,{code:ae.invalid_type,expected:ve.promise,received:t.parsedType}),Oe;const n=t.parsedType===ve.promise?t.data:Promise.resolve(t.data);return ni(n.then(s=>this._def.type.parseAsync(s,{path:t.path,errorMap:t.common.contextualErrorMap})))}}Mf.create=(i,e)=>new Mf({type:i,typeName:ke.ZodPromise,...Fe(e)});class Ia extends Qe{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ke.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),s=this._def.effect||null,a={addIssue:u=>{me(n,u),u.fatal?t.abort():t.dirty()},get path(){return n.path}};if(a.addIssue=a.addIssue.bind(a),s.type==="preprocess"){const u=s.transform(n.data,a);if(n.common.async)return Promise.resolve(u).then(async f=>{if(t.value==="aborted")return Oe;const y=await this._def.schema._parseAsync({data:f,path:n.path,parent:n});return y.status==="aborted"?Oe:y.status==="dirty"||t.value==="dirty"?eu(y.value):y});{if(t.value==="aborted")return Oe;const f=this._def.schema._parseSync({data:u,path:n.path,parent:n});return f.status==="aborted"?Oe:f.status==="dirty"||t.value==="dirty"?eu(f.value):f}}if(s.type==="refinement"){const u=f=>{const y=s.refinement(f,a);if(n.common.async)return Promise.resolve(y);if(y instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return f};if(n.common.async===!1){const f=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return f.status==="aborted"?Oe:(f.status==="dirty"&&t.dirty(),u(f.value),{status:t.value,value:f.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(f=>f.status==="aborted"?Oe:(f.status==="dirty"&&t.dirty(),u(f.value).then(()=>({status:t.value,value:f.value}))))}if(s.type==="transform")if(n.common.async===!1){const u=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Aa(u))return Oe;const f=s.transform(u.value,a);if(f instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:f}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(u=>Aa(u)?Promise.resolve(s.transform(u.value,a)).then(f=>({status:t.value,value:f})):Oe);nt.assertNever(s)}}Ia.create=(i,e,t)=>new Ia({schema:i,typeName:ke.ZodEffects,effect:e,...Fe(t)});Ia.createWithPreprocess=(i,e,t)=>new Ia({schema:e,effect:{type:"preprocess",transform:i},typeName:ke.ZodEffects,...Fe(t)});class fs extends Qe{_parse(e){return this._getType(e)===ve.undefined?ni(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}fs.create=(i,e)=>new fs({innerType:i,typeName:ke.ZodOptional,...Fe(e)});class Ra extends Qe{_parse(e){return this._getType(e)===ve.null?ni(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ra.create=(i,e)=>new Ra({innerType:i,typeName:ke.ZodNullable,...Fe(e)});class Km extends Qe{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===ve.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}Km.create=(i,e)=>new Km({innerType:i,typeName:ke.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Fe(e)});class Ym extends Qe{_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},s=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return If(s)?s.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Ar(n.common.issues)},input:n.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Ar(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}Ym.create=(i,e)=>new Ym({innerType:i,typeName:ke.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Fe(e)});class aT extends Qe{_parse(e){if(this._getType(e)!==ve.nan){const n=this._getOrReturnCtx(e);return me(n,{code:ae.invalid_type,expected:ve.nan,received:n.parsedType}),Oe}return{status:"valid",value:e.data}}}aT.create=i=>new aT({typeName:ke.ZodNaN,...Fe(i)});class BI extends Qe{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class Mp extends Qe{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?Oe:a.status==="dirty"?(t.dirty(),eu(a.value)):this._def.out._parseAsync({data:a.value,path:n.path,parent:n})})();{const s=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?Oe:s.status==="dirty"?(t.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:n.path,parent:n})}}static create(e,t){return new Mp({in:e,out:t,typeName:ke.ZodPipeline})}}class $m extends Qe{_parse(e){const t=this._def.innerType._parse(e),n=s=>(Aa(s)&&(s.value=Object.freeze(s.value)),s);return If(t)?t.then(s=>n(s)):n(t)}unwrap(){return this._def.innerType}}$m.create=(i,e)=>new $m({innerType:i,typeName:ke.ZodReadonly,...Fe(e)});var ke;(function(i){i.ZodString="ZodString",i.ZodNumber="ZodNumber",i.ZodNaN="ZodNaN",i.ZodBigInt="ZodBigInt",i.ZodBoolean="ZodBoolean",i.ZodDate="ZodDate",i.ZodSymbol="ZodSymbol",i.ZodUndefined="ZodUndefined",i.ZodNull="ZodNull",i.ZodAny="ZodAny",i.ZodUnknown="ZodUnknown",i.ZodNever="ZodNever",i.ZodVoid="ZodVoid",i.ZodArray="ZodArray",i.ZodObject="ZodObject",i.ZodUnion="ZodUnion",i.ZodDiscriminatedUnion="ZodDiscriminatedUnion",i.ZodIntersection="ZodIntersection",i.ZodTuple="ZodTuple",i.ZodRecord="ZodRecord",i.ZodMap="ZodMap",i.ZodSet="ZodSet",i.ZodFunction="ZodFunction",i.ZodLazy="ZodLazy",i.ZodLiteral="ZodLiteral",i.ZodEnum="ZodEnum",i.ZodEffects="ZodEffects",i.ZodNativeEnum="ZodNativeEnum",i.ZodOptional="ZodOptional",i.ZodNullable="ZodNullable",i.ZodDefault="ZodDefault",i.ZodCatch="ZodCatch",i.ZodPromise="ZodPromise",i.ZodBranded="ZodBranded",i.ZodPipeline="ZodPipeline",i.ZodReadonly="ZodReadonly"})(ke||(ke={}));const to=Vi.create,lT=lo.create;uo.create;const FI=Rf.create;Sa.create;const uT=qm.create;gs.create;const tu=Oi.create,qI=Lt.create,GI=xf.create;bf.create;co.create;const HI=Nf.create,KI=Hm.create,YI=wa.create;Mf.create;fs.create;Ra.create;const da={string:i=>Vi.create({...i,coerce:!0}),number:i=>lo.create({...i,coerce:!0}),boolean:i=>Rf.create({...i,coerce:!0}),bigint:i=>uo.create({...i,coerce:!0}),date:i=>Sa.create({...i,coerce:!0})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let $I,QI;function WI(){return{geminiUrl:$I,vertexUrl:QI}}function JI(i,e,t){var n,s,a;if(!(!((n=i.httpOptions)===null||n===void 0)&&n.baseUrl)){const u=WI();return i.vertexai?(s=u.vertexUrl)!==null&&s!==void 0?s:e:(a=u.geminiUrl)!==null&&a!==void 0?a:t}return i.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wu{}function De(i,e){const t=/\{([^}]+)\}/g;return i.replace(t,(n,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const a=e[s];return a!=null?String(a):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function m(i,e,t){for(let a=0;a<e.length-1;a++){const u=e[a];if(u.endsWith("[]")){const f=u.slice(0,-2);if(!(f in i))if(Array.isArray(t))i[f]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(i[f])){const y=i[f];if(Array.isArray(t))for(let g=0;g<y.length;g++){const v=y[g];m(v,e.slice(a+1),t[g])}else for(const g of y)m(g,e.slice(a+1),t)}return}else if(u.endsWith("[0]")){const f=u.slice(0,-3);f in i||(i[f]=[{}]);const y=i[f];m(y[0],e.slice(a+1),t);return}(!i[u]||typeof i[u]!="object")&&(i[u]={}),i=i[u]}const n=e[e.length-1],s=i[n];if(s!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===s)return;if(typeof s=="object"&&typeof t=="object"&&s!==null&&t!==null)Object.assign(s,t);else throw new Error(`Cannot set value for an existing key. Key: ${n}`)}else i[n]=t}function d(i,e){try{if(e.length===1&&e[0]==="_self")return i;for(let t=0;t<e.length;t++){if(typeof i!="object"||i===null)return;const n=e[t];if(n.endsWith("[]")){const s=n.slice(0,-2);if(s in i){const a=i[s];return Array.isArray(a)?a.map(u=>d(u,e.slice(t+1))):void 0}else return}else i=i[n]}return i}catch(t){if(t instanceof TypeError)return;throw t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var cT;(function(i){i.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",i.OUTCOME_OK="OUTCOME_OK",i.OUTCOME_FAILED="OUTCOME_FAILED",i.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(cT||(cT={}));var fT;(function(i){i.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",i.PYTHON="PYTHON"})(fT||(fT={}));var dT;(function(i){i.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",i.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",i.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",i.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",i.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(dT||(dT={}));var hT;(function(i){i.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",i.SEVERITY="SEVERITY",i.PROBABILITY="PROBABILITY"})(hT||(hT={}));var mT;(function(i){i.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE",i.OFF="OFF"})(mT||(mT={}));var ki;(function(i){i.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",i.STRING="STRING",i.NUMBER="NUMBER",i.INTEGER="INTEGER",i.BOOLEAN="BOOLEAN",i.ARRAY="ARRAY",i.OBJECT="OBJECT"})(ki||(ki={}));var pT;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(pT||(pT={}));var gT;(function(i){i.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",i.NO_AUTH="NO_AUTH",i.API_KEY_AUTH="API_KEY_AUTH",i.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",i.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",i.OAUTH="OAUTH",i.OIDC_AUTH="OIDC_AUTH"})(gT||(gT={}));var yT;(function(i){i.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",i.STOP="STOP",i.MAX_TOKENS="MAX_TOKENS",i.SAFETY="SAFETY",i.RECITATION="RECITATION",i.LANGUAGE="LANGUAGE",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.SPII="SPII",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.IMAGE_SAFETY="IMAGE_SAFETY"})(yT||(yT={}));var _T;(function(i){i.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",i.NEGLIGIBLE="NEGLIGIBLE",i.LOW="LOW",i.MEDIUM="MEDIUM",i.HIGH="HIGH"})(_T||(_T={}));var vT;(function(i){i.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",i.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",i.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",i.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",i.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(vT||(vT={}));var TT;(function(i){i.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",i.SAFETY="SAFETY",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT"})(TT||(TT={}));var ET;(function(i){i.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",i.ON_DEMAND="ON_DEMAND",i.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(ET||(ET={}));var Df;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.AUDIO="AUDIO"})(Df||(Df={}));var CT;(function(i){i.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",i.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",i.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",i.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(CT||(CT={}));var Qm;(function(i){i.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",i.JOB_STATE_QUEUED="JOB_STATE_QUEUED",i.JOB_STATE_PENDING="JOB_STATE_PENDING",i.JOB_STATE_RUNNING="JOB_STATE_RUNNING",i.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",i.JOB_STATE_FAILED="JOB_STATE_FAILED",i.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",i.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",i.JOB_STATE_PAUSED="JOB_STATE_PAUSED",i.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",i.JOB_STATE_UPDATING="JOB_STATE_UPDATING",i.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Qm||(Qm={}));var AT;(function(i){i.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",i.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",i.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",i.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",i.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",i.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",i.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(AT||(AT={}));var ST;(function(i){i.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",i.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",i.BALANCED="BALANCED",i.PRIORITIZE_COST="PRIORITIZE_COST"})(ST||(ST={}));var wT;(function(i){i.UNSPECIFIED="UNSPECIFIED",i.BLOCKING="BLOCKING",i.NON_BLOCKING="NON_BLOCKING"})(wT||(wT={}));var IT;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(IT||(IT={}));var RT;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.AUTO="AUTO",i.ANY="ANY",i.NONE="NONE"})(RT||(RT={}));var xT;(function(i){i.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",i.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",i.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR"})(xT||(xT={}));var bT;(function(i){i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE"})(bT||(bT={}));var NT;(function(i){i.DONT_ALLOW="DONT_ALLOW",i.ALLOW_ADULT="ALLOW_ADULT",i.ALLOW_ALL="ALLOW_ALL"})(NT||(NT={}));var MT;(function(i){i.auto="auto",i.en="en",i.ja="ja",i.ko="ko",i.hi="hi"})(MT||(MT={}));var DT;(function(i){i.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",i.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",i.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",i.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",i.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(DT||(DT={}));var PT;(function(i){i.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",i.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",i.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",i.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(PT||(PT={}));var kT;(function(i){i.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",i.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",i.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",i.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(kT||(kT={}));var VT;(function(i){i.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",i.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",i.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",i.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",i.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",i.EDIT_MODE_STYLE="EDIT_MODE_STYLE",i.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",i.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(VT||(VT={}));var OT;(function(i){i.STATE_UNSPECIFIED="STATE_UNSPECIFIED",i.PROCESSING="PROCESSING",i.ACTIVE="ACTIVE",i.FAILED="FAILED"})(OT||(OT={}));var LT;(function(i){i.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",i.UPLOADED="UPLOADED",i.GENERATED="GENERATED"})(LT||(LT={}));var UT;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.VIDEO="VIDEO",i.AUDIO="AUDIO",i.DOCUMENT="DOCUMENT"})(UT||(UT={}));var zT;(function(i){i.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",i.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",i.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(zT||(zT={}));var BT;(function(i){i.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",i.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",i.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(BT||(BT={}));var FT;(function(i){i.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",i.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",i.NO_INTERRUPTION="NO_INTERRUPTION"})(FT||(FT={}));var qT;(function(i){i.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",i.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",i.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(qT||(qT={}));var GT;(function(i){i.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",i.SILENT="SILENT",i.WHEN_IDLE="WHEN_IDLE",i.INTERRUPT="INTERRUPT"})(GT||(GT={}));var HT;(function(i){i.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",i.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",i.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",i.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",i.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",i.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",i.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",i.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",i.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",i.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",i.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",i.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",i.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(HT||(HT={}));var KT;(function(i){i.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",i.QUALITY="QUALITY",i.DIVERSITY="DIVERSITY"})(KT||(KT={}));var ya;(function(i){i.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",i.PLAY="PLAY",i.PAUSE="PAUSE",i.STOP="STOP",i.RESET_CONTEXT="RESET_CONTEXT"})(ya||(ya={}));class jl{get text(){var e,t,n,s,a,u,f,y;if(((s=(n=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||n===void 0?void 0:n.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let g="",v=!1;const A=[];for(const S of(y=(f=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)!==null&&y!==void 0?y:[]){for(const[R,V]of Object.entries(S))R!=="text"&&R!=="thought"&&(V!==null||V!==void 0)&&A.push(R);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;v=!0,g+=S.text}}return A.length>0&&console.warn(`there are non-text parts ${A} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?g:void 0}get data(){var e,t,n,s,a,u,f,y;if(((s=(n=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||n===void 0?void 0:n.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let g="";const v=[];for(const A of(y=(f=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)!==null&&y!==void 0?y:[]){for(const[S,R]of Object.entries(A))S!=="inlineData"&&(R!==null||R!==void 0)&&v.push(S);A.inlineData&&typeof A.inlineData.data=="string"&&(g+=atob(A.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),g.length>0?btoa(g):void 0}get functionCalls(){var e,t,n,s,a,u,f,y;if(((s=(n=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||n===void 0?void 0:n.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const g=(y=(f=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||y===void 0?void 0:y.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((g==null?void 0:g.length)!==0)return g}get executableCode(){var e,t,n,s,a,u,f,y,g;if(((s=(n=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||n===void 0?void 0:n.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(y=(f=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||y===void 0?void 0:y.filter(A=>A.executableCode).map(A=>A.executableCode).filter(A=>A!==void 0);if((v==null?void 0:v.length)!==0)return(g=v==null?void 0:v[0])===null||g===void 0?void 0:g.code}get codeExecutionResult(){var e,t,n,s,a,u,f,y,g;if(((s=(n=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||n===void 0?void 0:n.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(y=(f=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||y===void 0?void 0:y.filter(A=>A.codeExecutionResult).map(A=>A.codeExecutionResult).filter(A=>A!==void 0);if((v==null?void 0:v.length)!==0)return(g=v==null?void 0:v[0])===null||g===void 0?void 0:g.output}}class YT{}class $T{}class XI{}class jI{}class QT{}class WT{}class JT{}class ZI{}class XT{}class jT{}class ZT{}class eR{}class Wm{constructor(e){const t={};for(const n of e.headers.entries())t[n[0]]=n[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class tR{}class nR{}class iR{get text(){var e,t,n;let s="",a=!1;const u=[];for(const f of(n=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&n!==void 0?n:[]){for(const[y,g]of Object.entries(f))y!=="text"&&y!=="thought"&&g!==null&&u.push(y);if(typeof f.text=="string"){if(typeof f.thought=="boolean"&&f.thought)continue;a=!0,s+=f.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?s:void 0}get data(){var e,t,n;let s="";const a=[];for(const u of(n=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&n!==void 0?n:[]){for(const[f,y]of Object.entries(u))f!=="inlineData"&&y!==null&&a.push(f);u.inlineData&&typeof u.inlineData.data=="string"&&(s+=atob(u.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class rR{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vt(i,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(i.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function YE(i,e){const t=vt(i,e);return t?t.startsWith("publishers/")&&i.isVertexAI()?`projects/${i.getProject()}/locations/${i.getLocation()}/${t}`:t.startsWith("models/")&&i.isVertexAI()?`projects/${i.getProject()}/locations/${i.getLocation()}/publishers/google/${t}`:t:""}function $E(i,e){return Array.isArray(e)?e.map(t=>Pf(i,t)):[Pf(i,e)]}function Pf(i,e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function sR(i,e){const t=Pf(i,e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function oR(i,e){const t=Pf(i,e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function e0(i,e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function QE(i,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>e0(i,t)):[e0(i,e)]}function Jm(i){return i!=null&&typeof i=="object"&&"parts"in i&&Array.isArray(i.parts)}function t0(i){return i!=null&&typeof i=="object"&&"functionCall"in i}function n0(i){return i!=null&&typeof i=="object"&&"functionResponse"in i}function Pn(i,e){if(e==null)throw new Error("ContentUnion is required");return Jm(e)?e:{role:"user",parts:QE(i,e)}}function WE(i,e){if(!e)return[];if(i.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const n=Pn(i,t);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]});if(i.isVertexAI()){const t=Pn(i,e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>Pn(i,t)):[Pn(i,e)]}function fi(i,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(t0(e)||n0(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Pn(i,e)]}const t=[],n=[],s=Jm(e[0]);for(const a of e){const u=Jm(a);if(u!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(u)t.push(a);else{if(t0(a)||n0(a))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(a)}}return s||t.push({role:"user",parts:QE(i,n)}),t}const i0=YI(["string","number","integer","object","array","boolean","null"]),aR=GI([i0,tu(i0)]);function lR(i=!0){const e=KI(()=>{const t=qI({type:aR.optional(),format:to().optional(),title:to().optional(),description:to().optional(),default:uT().optional(),items:e.optional(),minItems:da.string().optional(),maxItems:da.string().optional(),enum:tu(uT()).optional(),properties:HI(to(),e).optional(),required:tu(to()).optional(),minProperties:da.string().optional(),maxProperties:da.string().optional(),propertyOrdering:tu(to()).optional(),minimum:lT().optional(),maximum:lT().optional(),minLength:da.string().optional(),maxLength:da.string().optional(),pattern:to().optional(),anyOf:tu(e).optional(),additionalProperties:FI().optional()});return i?t.strict():t});return e}function uR(i,e){i.includes("null")&&(e.nullable=!0);const t=i.filter(n=>n!=="null");if(t.length===1)e.type=Object.keys(ki).includes(t[0].toUpperCase())?ki[t[0].toUpperCase()]:ki.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const n of t)e.anyOf.push({type:Object.keys(ki).includes(n.toUpperCase())?ki[n.toUpperCase()]:ki.TYPE_UNSPECIFIED})}}function ou(i){const e={},t=["items"],n=["anyOf"],s=["properties"];if(i.type&&i.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=i.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,i=a[1]):a[1].type==="null"&&(e.nullable=!0,i=a[0])),i.type instanceof Array&&uR(i.type,e);for(const[u,f]of Object.entries(i))if(f!=null)if(u=="type"){if(f==="null")throw new Error("type: null can not be the only possible type for the field.");if(f instanceof Array)continue;e.type=Object.keys(ki).includes(f.toUpperCase())?f.toUpperCase():ki.TYPE_UNSPECIFIED}else if(t.includes(u))e[u]=ou(f);else if(n.includes(u)){const y=[];for(const g of f){if(g.type=="null"){e.nullable=!0;continue}y.push(ou(g))}e[u]=y}else if(s.includes(u)){const y={};for(const[g,v]of Object.entries(f))y[g]=ou(v);e[u]=y}else{if(u==="additionalProperties")continue;e[u]=f}return e}function kf(i,e){if(Object.keys(e).includes("$schema")){delete e.$schema;const t=lR().parse(e);return ou(t)}else return ou(e)}function JE(i,e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function XE(i,e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function Jf(i,e){if(e.functionDeclarations)for(const t of e.functionDeclarations)t.parameters&&(t.parameters=kf(i,t.parameters)),t.response&&(t.response=kf(i,t.response));return e}function Xf(i,e){if(e==null)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");const t=[];for(const n of e)t.push(n);return t}function cR(i,e,t,n=1){const s=!e.startsWith(`${t}/`)&&e.split("/").length===n;return i.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${i.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${i.getProject()}/locations/${i.getLocation()}/${e}`:s?`projects/${i.getProject()}/locations/${i.getLocation()}/${t}/${e}`:e:s?`${t}/${e}`:e}function Ts(i,e){if(typeof e!="string")throw new Error("name must be a string");return cR(i,e,"cachedContents")}function jE(i,e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function Es(i,e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}function fR(i){return i!=null&&typeof i=="object"&&"name"in i}function dR(i){return i!=null&&typeof i=="object"&&"video"in i}function hR(i){return i!=null&&typeof i=="object"&&"uri"in i}function ZE(i,e){var t;let n;if(fR(e)&&(n=e.name),!(hR(e)&&(n=e.uri,n===void 0))&&!(dR(e)&&(n=(t=e.video)===null||t===void 0?void 0:t.uri,n===void 0))){if(typeof e=="string"&&(n=e),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const a=n.split("files/")[1].match(/[a-z0-9]+/);if(a===null)throw new Error(`Could not extract file name from URI ${n}`);n=a[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function eC(i,e){let t;return i.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function tC(i,e){for(const t of["models","tunedModels","publisherModels"])if(mR(e,t))return e[t];return[]}function mR(i,e){return i!==null&&typeof i=="object"&&e in i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pR(i,e){const t={},n=d(e,["fps"]);n!=null&&m(t,["fps"],n);const s=d(e,["endOffset"]);s!=null&&m(t,["endOffset"],s);const a=d(e,["startOffset"]);return a!=null&&m(t,["startOffset"],a),t}function gR(i,e){const t={};if(d(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(e,["data"]);n!=null&&m(t,["data"],n);const s=d(e,["mimeType"]);return s!=null&&m(t,["mimeType"],s),t}function yR(i,e){const t={},n=d(e,["videoMetadata"]);n!=null&&m(t,["videoMetadata"],pR(i,n));const s=d(e,["thought"]);s!=null&&m(t,["thought"],s);const a=d(e,["inlineData"]);a!=null&&m(t,["inlineData"],gR(i,a));const u=d(e,["codeExecutionResult"]);u!=null&&m(t,["codeExecutionResult"],u);const f=d(e,["executableCode"]);f!=null&&m(t,["executableCode"],f);const y=d(e,["fileData"]);y!=null&&m(t,["fileData"],y);const g=d(e,["functionCall"]);g!=null&&m(t,["functionCall"],g);const v=d(e,["functionResponse"]);v!=null&&m(t,["functionResponse"],v);const A=d(e,["text"]);return A!=null&&m(t,["text"],A),t}function r0(i,e){const t={},n=d(e,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>yR(i,u))),m(t,["parts"],a)}const s=d(e,["role"]);return s!=null&&m(t,["role"],s),t}function _R(i,e){const t={},n=d(e,["behavior"]);n!=null&&m(t,["behavior"],n);const s=d(e,["description"]);s!=null&&m(t,["description"],s);const a=d(e,["name"]);a!=null&&m(t,["name"],a);const u=d(e,["parameters"]);u!=null&&m(t,["parameters"],u);const f=d(e,["response"]);return f!=null&&m(t,["response"],f),t}function vR(i,e){const t={},n=d(e,["startTime"]);n!=null&&m(t,["startTime"],n);const s=d(e,["endTime"]);return s!=null&&m(t,["endTime"],s),t}function TR(i,e){const t={},n=d(e,["timeRangeFilter"]);return n!=null&&m(t,["timeRangeFilter"],vR(i,n)),t}function ER(i,e){const t={},n=d(e,["mode"]);n!=null&&m(t,["mode"],n);const s=d(e,["dynamicThreshold"]);return s!=null&&m(t,["dynamicThreshold"],s),t}function CR(i,e){const t={},n=d(e,["dynamicRetrievalConfig"]);return n!=null&&m(t,["dynamicRetrievalConfig"],ER(i,n)),t}function AR(){return{}}function SR(i,e){const t={},n=d(e,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(g=>_R(i,g))),m(t,["functionDeclarations"],y)}if(d(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=d(e,["googleSearch"]);s!=null&&m(t,["googleSearch"],TR(i,s));const a=d(e,["googleSearchRetrieval"]);if(a!=null&&m(t,["googleSearchRetrieval"],CR(i,a)),d(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(d(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");d(e,["urlContext"])!=null&&m(t,["urlContext"],AR());const f=d(e,["codeExecution"]);return f!=null&&m(t,["codeExecution"],f),t}function wR(i,e){const t={},n=d(e,["mode"]);n!=null&&m(t,["mode"],n);const s=d(e,["allowedFunctionNames"]);return s!=null&&m(t,["allowedFunctionNames"],s),t}function IR(i,e){const t={},n=d(e,["latitude"]);n!=null&&m(t,["latitude"],n);const s=d(e,["longitude"]);return s!=null&&m(t,["longitude"],s),t}function RR(i,e){const t={},n=d(e,["latLng"]);return n!=null&&m(t,["latLng"],IR(i,n)),t}function xR(i,e){const t={},n=d(e,["functionCallingConfig"]);n!=null&&m(t,["functionCallingConfig"],wR(i,n));const s=d(e,["retrievalConfig"]);return s!=null&&m(t,["retrievalConfig"],RR(i,s)),t}function bR(i,e,t){const n={},s=d(e,["ttl"]);t!==void 0&&s!=null&&m(t,["ttl"],s);const a=d(e,["expireTime"]);t!==void 0&&a!=null&&m(t,["expireTime"],a);const u=d(e,["displayName"]);t!==void 0&&u!=null&&m(t,["displayName"],u);const f=d(e,["contents"]);if(t!==void 0&&f!=null){let A=fi(i,f);Array.isArray(A)&&(A=A.map(S=>r0(i,S))),m(t,["contents"],A)}const y=d(e,["systemInstruction"]);t!==void 0&&y!=null&&m(t,["systemInstruction"],r0(i,Pn(i,y)));const g=d(e,["tools"]);if(t!==void 0&&g!=null){let A=g;Array.isArray(A)&&(A=A.map(S=>SR(i,S))),m(t,["tools"],A)}const v=d(e,["toolConfig"]);if(t!==void 0&&v!=null&&m(t,["toolConfig"],xR(i,v)),d(e,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function NR(i,e){const t={},n=d(e,["model"]);n!=null&&m(t,["model"],YE(i,n));const s=d(e,["config"]);return s!=null&&m(t,["config"],bR(i,s,t)),t}function MR(i,e){const t={},n=d(e,["name"]);n!=null&&m(t,["_url","name"],Ts(i,n));const s=d(e,["config"]);return s!=null&&m(t,["config"],s),t}function DR(i,e){const t={},n=d(e,["name"]);n!=null&&m(t,["_url","name"],Ts(i,n));const s=d(e,["config"]);return s!=null&&m(t,["config"],s),t}function PR(i,e,t){const n={},s=d(e,["ttl"]);t!==void 0&&s!=null&&m(t,["ttl"],s);const a=d(e,["expireTime"]);return t!==void 0&&a!=null&&m(t,["expireTime"],a),n}function kR(i,e){const t={},n=d(e,["name"]);n!=null&&m(t,["_url","name"],Ts(i,n));const s=d(e,["config"]);return s!=null&&m(t,["config"],PR(i,s,t)),t}function VR(i,e,t){const n={},s=d(e,["pageSize"]);t!==void 0&&s!=null&&m(t,["_query","pageSize"],s);const a=d(e,["pageToken"]);return t!==void 0&&a!=null&&m(t,["_query","pageToken"],a),n}function OR(i,e){const t={},n=d(e,["config"]);return n!=null&&m(t,["config"],VR(i,n,t)),t}function LR(i,e){const t={},n=d(e,["fps"]);n!=null&&m(t,["fps"],n);const s=d(e,["endOffset"]);s!=null&&m(t,["endOffset"],s);const a=d(e,["startOffset"]);return a!=null&&m(t,["startOffset"],a),t}function UR(i,e){const t={},n=d(e,["displayName"]);n!=null&&m(t,["displayName"],n);const s=d(e,["data"]);s!=null&&m(t,["data"],s);const a=d(e,["mimeType"]);return a!=null&&m(t,["mimeType"],a),t}function zR(i,e){const t={},n=d(e,["videoMetadata"]);n!=null&&m(t,["videoMetadata"],LR(i,n));const s=d(e,["thought"]);s!=null&&m(t,["thought"],s);const a=d(e,["inlineData"]);a!=null&&m(t,["inlineData"],UR(i,a));const u=d(e,["codeExecutionResult"]);u!=null&&m(t,["codeExecutionResult"],u);const f=d(e,["executableCode"]);f!=null&&m(t,["executableCode"],f);const y=d(e,["fileData"]);y!=null&&m(t,["fileData"],y);const g=d(e,["functionCall"]);g!=null&&m(t,["functionCall"],g);const v=d(e,["functionResponse"]);v!=null&&m(t,["functionResponse"],v);const A=d(e,["text"]);return A!=null&&m(t,["text"],A),t}function s0(i,e){const t={},n=d(e,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>zR(i,u))),m(t,["parts"],a)}const s=d(e,["role"]);return s!=null&&m(t,["role"],s),t}function BR(i,e){const t={};if(d(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=d(e,["description"]);n!=null&&m(t,["description"],n);const s=d(e,["name"]);s!=null&&m(t,["name"],s);const a=d(e,["parameters"]);a!=null&&m(t,["parameters"],a);const u=d(e,["response"]);return u!=null&&m(t,["response"],u),t}function FR(i,e){const t={},n=d(e,["startTime"]);n!=null&&m(t,["startTime"],n);const s=d(e,["endTime"]);return s!=null&&m(t,["endTime"],s),t}function qR(i,e){const t={},n=d(e,["timeRangeFilter"]);return n!=null&&m(t,["timeRangeFilter"],FR(i,n)),t}function GR(i,e){const t={},n=d(e,["mode"]);n!=null&&m(t,["mode"],n);const s=d(e,["dynamicThreshold"]);return s!=null&&m(t,["dynamicThreshold"],s),t}function HR(i,e){const t={},n=d(e,["dynamicRetrievalConfig"]);return n!=null&&m(t,["dynamicRetrievalConfig"],GR(i,n)),t}function KR(){return{}}function YR(i,e){const t={},n=d(e,["apiKeyString"]);return n!=null&&m(t,["apiKeyString"],n),t}function $R(i,e){const t={},n=d(e,["apiKeyConfig"]);n!=null&&m(t,["apiKeyConfig"],YR(i,n));const s=d(e,["authType"]);s!=null&&m(t,["authType"],s);const a=d(e,["googleServiceAccountConfig"]);a!=null&&m(t,["googleServiceAccountConfig"],a);const u=d(e,["httpBasicAuthConfig"]);u!=null&&m(t,["httpBasicAuthConfig"],u);const f=d(e,["oauthConfig"]);f!=null&&m(t,["oauthConfig"],f);const y=d(e,["oidcConfig"]);return y!=null&&m(t,["oidcConfig"],y),t}function QR(i,e){const t={},n=d(e,["authConfig"]);return n!=null&&m(t,["authConfig"],$R(i,n)),t}function WR(i,e){const t={},n=d(e,["functionDeclarations"]);if(n!=null){let v=n;Array.isArray(v)&&(v=v.map(A=>BR(i,A))),m(t,["functionDeclarations"],v)}const s=d(e,["retrieval"]);s!=null&&m(t,["retrieval"],s);const a=d(e,["googleSearch"]);a!=null&&m(t,["googleSearch"],qR(i,a));const u=d(e,["googleSearchRetrieval"]);u!=null&&m(t,["googleSearchRetrieval"],HR(i,u)),d(e,["enterpriseWebSearch"])!=null&&m(t,["enterpriseWebSearch"],KR());const y=d(e,["googleMaps"]);if(y!=null&&m(t,["googleMaps"],QR(i,y)),d(e,["urlContext"])!==void 0)throw new Error("urlContext parameter is not supported in Vertex AI.");const g=d(e,["codeExecution"]);return g!=null&&m(t,["codeExecution"],g),t}function JR(i,e){const t={},n=d(e,["mode"]);n!=null&&m(t,["mode"],n);const s=d(e,["allowedFunctionNames"]);return s!=null&&m(t,["allowedFunctionNames"],s),t}function XR(i,e){const t={},n=d(e,["latitude"]);n!=null&&m(t,["latitude"],n);const s=d(e,["longitude"]);return s!=null&&m(t,["longitude"],s),t}function jR(i,e){const t={},n=d(e,["latLng"]);return n!=null&&m(t,["latLng"],XR(i,n)),t}function ZR(i,e){const t={},n=d(e,["functionCallingConfig"]);n!=null&&m(t,["functionCallingConfig"],JR(i,n));const s=d(e,["retrievalConfig"]);return s!=null&&m(t,["retrievalConfig"],jR(i,s)),t}function ex(i,e,t){const n={},s=d(e,["ttl"]);t!==void 0&&s!=null&&m(t,["ttl"],s);const a=d(e,["expireTime"]);t!==void 0&&a!=null&&m(t,["expireTime"],a);const u=d(e,["displayName"]);t!==void 0&&u!=null&&m(t,["displayName"],u);const f=d(e,["contents"]);if(t!==void 0&&f!=null){let S=fi(i,f);Array.isArray(S)&&(S=S.map(R=>s0(i,R))),m(t,["contents"],S)}const y=d(e,["systemInstruction"]);t!==void 0&&y!=null&&m(t,["systemInstruction"],s0(i,Pn(i,y)));const g=d(e,["tools"]);if(t!==void 0&&g!=null){let S=g;Array.isArray(S)&&(S=S.map(R=>WR(i,R))),m(t,["tools"],S)}const v=d(e,["toolConfig"]);t!==void 0&&v!=null&&m(t,["toolConfig"],ZR(i,v));const A=d(e,["kmsKeyName"]);return t!==void 0&&A!=null&&m(t,["encryption_spec","kmsKeyName"],A),n}function tx(i,e){const t={},n=d(e,["model"]);n!=null&&m(t,["model"],YE(i,n));const s=d(e,["config"]);return s!=null&&m(t,["config"],ex(i,s,t)),t}function nx(i,e){const t={},n=d(e,["name"]);n!=null&&m(t,["_url","name"],Ts(i,n));const s=d(e,["config"]);return s!=null&&m(t,["config"],s),t}function ix(i,e){const t={},n=d(e,["name"]);n!=null&&m(t,["_url","name"],Ts(i,n));const s=d(e,["config"]);return s!=null&&m(t,["config"],s),t}function rx(i,e,t){const n={},s=d(e,["ttl"]);t!==void 0&&s!=null&&m(t,["ttl"],s);const a=d(e,["expireTime"]);return t!==void 0&&a!=null&&m(t,["expireTime"],a),n}function sx(i,e){const t={},n=d(e,["name"]);n!=null&&m(t,["_url","name"],Ts(i,n));const s=d(e,["config"]);return s!=null&&m(t,["config"],rx(i,s,t)),t}function ox(i,e,t){const n={},s=d(e,["pageSize"]);t!==void 0&&s!=null&&m(t,["_query","pageSize"],s);const a=d(e,["pageToken"]);return t!==void 0&&a!=null&&m(t,["_query","pageToken"],a),n}function ax(i,e){const t={},n=d(e,["config"]);return n!=null&&m(t,["config"],ox(i,n,t)),t}function hf(i,e){const t={},n=d(e,["name"]);n!=null&&m(t,["name"],n);const s=d(e,["displayName"]);s!=null&&m(t,["displayName"],s);const a=d(e,["model"]);a!=null&&m(t,["model"],a);const u=d(e,["createTime"]);u!=null&&m(t,["createTime"],u);const f=d(e,["updateTime"]);f!=null&&m(t,["updateTime"],f);const y=d(e,["expireTime"]);y!=null&&m(t,["expireTime"],y);const g=d(e,["usageMetadata"]);return g!=null&&m(t,["usageMetadata"],g),t}function lx(){return{}}function ux(i,e){const t={},n=d(e,["nextPageToken"]);n!=null&&m(t,["nextPageToken"],n);const s=d(e,["cachedContents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>hf(i,u))),m(t,["cachedContents"],a)}return t}function mf(i,e){const t={},n=d(e,["name"]);n!=null&&m(t,["name"],n);const s=d(e,["displayName"]);s!=null&&m(t,["displayName"],s);const a=d(e,["model"]);a!=null&&m(t,["model"],a);const u=d(e,["createTime"]);u!=null&&m(t,["createTime"],u);const f=d(e,["updateTime"]);f!=null&&m(t,["updateTime"],f);const y=d(e,["expireTime"]);y!=null&&m(t,["expireTime"],y);const g=d(e,["usageMetadata"]);return g!=null&&m(t,["usageMetadata"],g),t}function cx(){return{}}function fx(i,e){const t={},n=d(e,["nextPageToken"]);n!=null&&m(t,["nextPageToken"],n);const s=d(e,["cachedContents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>mf(i,u))),m(t,["cachedContents"],a)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var xa;(function(i){i.PAGED_ITEM_BATCH_JOBS="batchJobs",i.PAGED_ITEM_MODELS="models",i.PAGED_ITEM_TUNING_JOBS="tuningJobs",i.PAGED_ITEM_FILES="files",i.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(xa||(xa={}));class jf{constructor(e,t,n,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,n,s)}init(e,t,n){var s,a;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.idxInternal=0;let u={config:{}};n?typeof n=="object"?u=Object.assign({},n):u=n:u={config:{}},u.config&&(u.config.pageToken=t.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(a=(s=u.config)===null||s===void 0?void 0:s.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dx extends wu{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new jf(xa.PAGED_ITEM_CACHED_CONTENTS,n=>this.listInternal(n),await this.listInternal(t),t)}async create(e){var t,n,s,a;let u,f="",y={};if(this.apiClient.isVertexAI()){const g=tx(this.apiClient,e);return f=De("cachedContents",g._url),y=g._query,delete g.config,delete g._url,delete g._query,u=this.apiClient.request({path:f,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(v=>v.json()),u.then(v=>mf(this.apiClient,v))}else{const g=NR(this.apiClient,e);return f=De("cachedContents",g._url),y=g._query,delete g.config,delete g._url,delete g._query,u=this.apiClient.request({path:f,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>hf(this.apiClient,v))}}async get(e){var t,n,s,a;let u,f="",y={};if(this.apiClient.isVertexAI()){const g=nx(this.apiClient,e);return f=De("{name}",g._url),y=g._query,delete g.config,delete g._url,delete g._query,u=this.apiClient.request({path:f,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(v=>v.json()),u.then(v=>mf(this.apiClient,v))}else{const g=MR(this.apiClient,e);return f=De("{name}",g._url),y=g._query,delete g.config,delete g._url,delete g._query,u=this.apiClient.request({path:f,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>hf(this.apiClient,v))}}async delete(e){var t,n,s,a;let u,f="",y={};if(this.apiClient.isVertexAI()){const g=ix(this.apiClient,e);return f=De("{name}",g._url),y=g._query,delete g.config,delete g._url,delete g._query,u=this.apiClient.request({path:f,queryParams:y,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(v=>v.json()),u.then(()=>{const v=cx(),A=new jT;return Object.assign(A,v),A})}else{const g=DR(this.apiClient,e);return f=De("{name}",g._url),y=g._query,delete g.config,delete g._url,delete g._query,u=this.apiClient.request({path:f,queryParams:y,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(()=>{const v=lx(),A=new jT;return Object.assign(A,v),A})}}async update(e){var t,n,s,a;let u,f="",y={};if(this.apiClient.isVertexAI()){const g=sx(this.apiClient,e);return f=De("{name}",g._url),y=g._query,delete g.config,delete g._url,delete g._query,u=this.apiClient.request({path:f,queryParams:y,body:JSON.stringify(g),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(v=>v.json()),u.then(v=>mf(this.apiClient,v))}else{const g=kR(this.apiClient,e);return f=De("{name}",g._url),y=g._query,delete g.config,delete g._url,delete g._query,u=this.apiClient.request({path:f,queryParams:y,body:JSON.stringify(g),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>hf(this.apiClient,v))}}async listInternal(e){var t,n,s,a;let u,f="",y={};if(this.apiClient.isVertexAI()){const g=ax(this.apiClient,e);return f=De("cachedContents",g._url),y=g._query,delete g.config,delete g._url,delete g._query,u=this.apiClient.request({path:f,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(v=>v.json()),u.then(v=>{const A=fx(this.apiClient,v),S=new ZT;return Object.assign(S,A),S})}else{const g=OR(this.apiClient,e);return f=De("cachedContents",g._url),y=g._query,delete g.config,delete g._url,delete g._query,u=this.apiClient.request({path:f,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>{const A=ux(this.apiClient,v),S=new ZT;return Object.assign(S,A),S})}}}function o0(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],n=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&n>=i.length&&(i=void 0),{value:i&&i[n++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function At(i){return this instanceof At?(this.v=i,this):new At(i)}function au(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(i,e||[]),s,a=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",u),s[Symbol.asyncIterator]=function(){return this},s;function u(R){return function(V){return Promise.resolve(V).then(R,A)}}function f(R,V){n[R]&&(s[R]=function(H){return new Promise(function(Y,ce){a.push([R,H,Y,ce])>1||y(R,H)})},V&&(s[R]=V(s[R])))}function y(R,V){try{g(n[R](V))}catch(H){S(a[0][3],H)}}function g(R){R.value instanceof At?Promise.resolve(R.value.v).then(v,A):S(a[0][2],R)}function v(R){y("next",R)}function A(R){y("throw",R)}function S(R,V){R(V),a.shift(),a.length&&y(a[0][0],a[0][1])}}function pf(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof o0=="function"?o0(i):i[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(a){t[a]=i[a]&&function(u){return new Promise(function(f,y){u=i[a](u),s(f,y,u.done,u.value)})}}function s(a,u,f,y){Promise.resolve(y).then(function(g){a({value:g,done:f})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hx(i){var e;if(i.candidates==null||i.candidates.length===0)return!1;const t=(e=i.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:nC(t)}function nC(i){if(i.parts===void 0||i.parts.length===0)return!1;for(const e of i.parts)if(e===void 0||Object.keys(e).length===0||!e.thought&&e.text!==void 0&&e.text==="")return!1;return!0}function mx(i){if(i.length!==0){for(const e of i)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function a0(i){if(i===void 0||i.length===0)return[];const e=[],t=i.length;let n=0;for(;n<t;)if(i[n].role==="user")e.push(i[n]),n++;else{const s=[];let a=!0;for(;n<t&&i[n].role==="model";)s.push(i[n]),a&&!nC(i[n])&&(a=!1),n++;a?e.push(...s):e.pop()}return e}class px{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new gx(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class gx{constructor(e,t,n,s={},a=[]){this.apiClient=e,this.modelsModule=t,this.model=n,this.config=s,this.history=a,this.sendPromise=Promise.resolve(),mx(a)}async sendMessage(e){var t;await this.sendPromise;const n=Pn(this.apiClient,e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(n),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var a,u,f;const y=await s,g=(u=(a=y.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content,v=y.automaticFunctionCallingHistory,A=this.getHistory(!0).length;let S=[];v!=null&&(S=(f=v.slice(A))!==null&&f!==void 0?f:[]);const R=g?[g]:[];this.recordHistory(n,R,S)})(),await this.sendPromise,s}async sendMessageStream(e){var t;await this.sendPromise;const n=Pn(this.apiClient,e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(n),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const a=await s;return this.processStreamResponse(a,n)}getHistory(e=!1){const t=e?a0(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var n,s;return au(this,arguments,function*(){var u,f,y,g;const v=[];try{for(var A=!0,S=pf(e),R;R=yield At(S.next()),u=R.done,!u;A=!0){g=R.value,A=!1;const V=g;if(hx(V)){const H=(s=(n=V.candidates)===null||n===void 0?void 0:n[0])===null||s===void 0?void 0:s.content;H!==void 0&&v.push(H)}yield yield At(V)}}catch(V){f={error:V}}finally{try{!A&&!u&&(y=S.return)&&(yield At(y.call(S)))}finally{if(f)throw f.error}}this.recordHistory(t,v)})}recordHistory(e,t,n){let s=[];t.length>0&&t.every(a=>a.role!==void 0)?s=t:s.push({role:"model",parts:[]}),n&&n.length>0?this.history.push(...a0(n)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yx(i,e,t){const n={},s=d(e,["pageSize"]);t!==void 0&&s!=null&&m(t,["_query","pageSize"],s);const a=d(e,["pageToken"]);return t!==void 0&&a!=null&&m(t,["_query","pageToken"],a),n}function _x(i,e){const t={},n=d(e,["config"]);return n!=null&&m(t,["config"],yx(i,n,t)),t}function vx(i,e){const t={},n=d(e,["details"]);n!=null&&m(t,["details"],n);const s=d(e,["message"]);s!=null&&m(t,["message"],s);const a=d(e,["code"]);return a!=null&&m(t,["code"],a),t}function Tx(i,e){const t={},n=d(e,["name"]);n!=null&&m(t,["name"],n);const s=d(e,["displayName"]);s!=null&&m(t,["displayName"],s);const a=d(e,["mimeType"]);a!=null&&m(t,["mimeType"],a);const u=d(e,["sizeBytes"]);u!=null&&m(t,["sizeBytes"],u);const f=d(e,["createTime"]);f!=null&&m(t,["createTime"],f);const y=d(e,["expirationTime"]);y!=null&&m(t,["expirationTime"],y);const g=d(e,["updateTime"]);g!=null&&m(t,["updateTime"],g);const v=d(e,["sha256Hash"]);v!=null&&m(t,["sha256Hash"],v);const A=d(e,["uri"]);A!=null&&m(t,["uri"],A);const S=d(e,["downloadUri"]);S!=null&&m(t,["downloadUri"],S);const R=d(e,["state"]);R!=null&&m(t,["state"],R);const V=d(e,["source"]);V!=null&&m(t,["source"],V);const H=d(e,["videoMetadata"]);H!=null&&m(t,["videoMetadata"],H);const Y=d(e,["error"]);return Y!=null&&m(t,["error"],vx(i,Y)),t}function Ex(i,e){const t={},n=d(e,["file"]);n!=null&&m(t,["file"],Tx(i,n));const s=d(e,["config"]);return s!=null&&m(t,["config"],s),t}function Cx(i,e){const t={},n=d(e,["name"]);n!=null&&m(t,["_url","file"],ZE(i,n));const s=d(e,["config"]);return s!=null&&m(t,["config"],s),t}function Ax(i,e){const t={},n=d(e,["name"]);n!=null&&m(t,["_url","file"],ZE(i,n));const s=d(e,["config"]);return s!=null&&m(t,["config"],s),t}function Sx(i,e){const t={},n=d(e,["details"]);n!=null&&m(t,["details"],n);const s=d(e,["message"]);s!=null&&m(t,["message"],s);const a=d(e,["code"]);return a!=null&&m(t,["code"],a),t}function Xm(i,e){const t={},n=d(e,["name"]);n!=null&&m(t,["name"],n);const s=d(e,["displayName"]);s!=null&&m(t,["displayName"],s);const a=d(e,["mimeType"]);a!=null&&m(t,["mimeType"],a);const u=d(e,["sizeBytes"]);u!=null&&m(t,["sizeBytes"],u);const f=d(e,["createTime"]);f!=null&&m(t,["createTime"],f);const y=d(e,["expirationTime"]);y!=null&&m(t,["expirationTime"],y);const g=d(e,["updateTime"]);g!=null&&m(t,["updateTime"],g);const v=d(e,["sha256Hash"]);v!=null&&m(t,["sha256Hash"],v);const A=d(e,["uri"]);A!=null&&m(t,["uri"],A);const S=d(e,["downloadUri"]);S!=null&&m(t,["downloadUri"],S);const R=d(e,["state"]);R!=null&&m(t,["state"],R);const V=d(e,["source"]);V!=null&&m(t,["source"],V);const H=d(e,["videoMetadata"]);H!=null&&m(t,["videoMetadata"],H);const Y=d(e,["error"]);return Y!=null&&m(t,["error"],Sx(i,Y)),t}function wx(i,e){const t={},n=d(e,["nextPageToken"]);n!=null&&m(t,["nextPageToken"],n);const s=d(e,["files"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>Xm(i,u))),m(t,["files"],a)}return t}function Ix(){return{}}function Rx(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xx extends wu{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new jf(xa.PAGED_ITEM_FILES,n=>this.listInternal(n),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>Xm(this.apiClient,t))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,n;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=_x(this.apiClient,e);return a=De("files",f._url),u=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),s.then(y=>{const g=wx(this.apiClient,y),v=new eR;return Object.assign(v,g),v})}}async createInternal(e){var t,n;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=Ex(this.apiClient,e);return a=De("upload/v1beta/files",f._url),u=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),s.then(()=>{const y=Ix(),g=new tR;return Object.assign(g,y),g})}}async get(e){var t,n;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=Cx(this.apiClient,e);return a=De("files/{file}",f._url),u=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),s.then(y=>Xm(this.apiClient,y))}}async delete(e){var t,n;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=Ax(this.apiClient,e);return a=De("files/{file}",f._url),u=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),s.then(()=>{const y=Rx(),g=new nR;return Object.assign(g,y),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bx(i,e){const t={},n=d(e,["voiceName"]);return n!=null&&m(t,["voiceName"],n),t}function Nx(i,e){const t={},n=d(e,["voiceName"]);return n!=null&&m(t,["voiceName"],n),t}function iC(i,e){const t={},n=d(e,["prebuiltVoiceConfig"]);return n!=null&&m(t,["prebuiltVoiceConfig"],bx(i,n)),t}function Mx(i,e){const t={},n=d(e,["prebuiltVoiceConfig"]);return n!=null&&m(t,["prebuiltVoiceConfig"],Nx(i,n)),t}function Dx(i,e){const t={},n=d(e,["speaker"]);n!=null&&m(t,["speaker"],n);const s=d(e,["voiceConfig"]);return s!=null&&m(t,["voiceConfig"],iC(i,s)),t}function Px(i,e){const t={},n=d(e,["speakerVoiceConfigs"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>Dx(i,a))),m(t,["speakerVoiceConfigs"],s)}return t}function kx(i,e){const t={},n=d(e,["voiceConfig"]);n!=null&&m(t,["voiceConfig"],iC(i,n));const s=d(e,["multiSpeakerVoiceConfig"]);s!=null&&m(t,["multiSpeakerVoiceConfig"],Px(i,s));const a=d(e,["languageCode"]);return a!=null&&m(t,["languageCode"],a),t}function Vx(i,e){const t={},n=d(e,["voiceConfig"]);if(n!=null&&m(t,["voiceConfig"],Mx(i,n)),d(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const s=d(e,["languageCode"]);return s!=null&&m(t,["languageCode"],s),t}function Ox(i,e){const t={},n=d(e,["fps"]);n!=null&&m(t,["fps"],n);const s=d(e,["endOffset"]);s!=null&&m(t,["endOffset"],s);const a=d(e,["startOffset"]);return a!=null&&m(t,["startOffset"],a),t}function Lx(i,e){const t={},n=d(e,["fps"]);n!=null&&m(t,["fps"],n);const s=d(e,["endOffset"]);s!=null&&m(t,["endOffset"],s);const a=d(e,["startOffset"]);return a!=null&&m(t,["startOffset"],a),t}function Ux(i,e){const t={};if(d(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(e,["data"]);n!=null&&m(t,["data"],n);const s=d(e,["mimeType"]);return s!=null&&m(t,["mimeType"],s),t}function zx(i,e){const t={},n=d(e,["displayName"]);n!=null&&m(t,["displayName"],n);const s=d(e,["data"]);s!=null&&m(t,["data"],s);const a=d(e,["mimeType"]);return a!=null&&m(t,["mimeType"],a),t}function Bx(i,e){const t={},n=d(e,["videoMetadata"]);n!=null&&m(t,["videoMetadata"],Ox(i,n));const s=d(e,["thought"]);s!=null&&m(t,["thought"],s);const a=d(e,["inlineData"]);a!=null&&m(t,["inlineData"],Ux(i,a));const u=d(e,["codeExecutionResult"]);u!=null&&m(t,["codeExecutionResult"],u);const f=d(e,["executableCode"]);f!=null&&m(t,["executableCode"],f);const y=d(e,["fileData"]);y!=null&&m(t,["fileData"],y);const g=d(e,["functionCall"]);g!=null&&m(t,["functionCall"],g);const v=d(e,["functionResponse"]);v!=null&&m(t,["functionResponse"],v);const A=d(e,["text"]);return A!=null&&m(t,["text"],A),t}function Fx(i,e){const t={},n=d(e,["videoMetadata"]);n!=null&&m(t,["videoMetadata"],Lx(i,n));const s=d(e,["thought"]);s!=null&&m(t,["thought"],s);const a=d(e,["inlineData"]);a!=null&&m(t,["inlineData"],zx(i,a));const u=d(e,["codeExecutionResult"]);u!=null&&m(t,["codeExecutionResult"],u);const f=d(e,["executableCode"]);f!=null&&m(t,["executableCode"],f);const y=d(e,["fileData"]);y!=null&&m(t,["fileData"],y);const g=d(e,["functionCall"]);g!=null&&m(t,["functionCall"],g);const v=d(e,["functionResponse"]);v!=null&&m(t,["functionResponse"],v);const A=d(e,["text"]);return A!=null&&m(t,["text"],A),t}function qx(i,e){const t={},n=d(e,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>Bx(i,u))),m(t,["parts"],a)}const s=d(e,["role"]);return s!=null&&m(t,["role"],s),t}function Gx(i,e){const t={},n=d(e,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>Fx(i,u))),m(t,["parts"],a)}const s=d(e,["role"]);return s!=null&&m(t,["role"],s),t}function Hx(i,e){const t={},n=d(e,["behavior"]);n!=null&&m(t,["behavior"],n);const s=d(e,["description"]);s!=null&&m(t,["description"],s);const a=d(e,["name"]);a!=null&&m(t,["name"],a);const u=d(e,["parameters"]);u!=null&&m(t,["parameters"],u);const f=d(e,["response"]);return f!=null&&m(t,["response"],f),t}function Kx(i,e){const t={};if(d(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=d(e,["description"]);n!=null&&m(t,["description"],n);const s=d(e,["name"]);s!=null&&m(t,["name"],s);const a=d(e,["parameters"]);a!=null&&m(t,["parameters"],a);const u=d(e,["response"]);return u!=null&&m(t,["response"],u),t}function Yx(i,e){const t={},n=d(e,["startTime"]);n!=null&&m(t,["startTime"],n);const s=d(e,["endTime"]);return s!=null&&m(t,["endTime"],s),t}function $x(i,e){const t={},n=d(e,["startTime"]);n!=null&&m(t,["startTime"],n);const s=d(e,["endTime"]);return s!=null&&m(t,["endTime"],s),t}function Qx(i,e){const t={},n=d(e,["timeRangeFilter"]);return n!=null&&m(t,["timeRangeFilter"],Yx(i,n)),t}function Wx(i,e){const t={},n=d(e,["timeRangeFilter"]);return n!=null&&m(t,["timeRangeFilter"],$x(i,n)),t}function Jx(i,e){const t={},n=d(e,["mode"]);n!=null&&m(t,["mode"],n);const s=d(e,["dynamicThreshold"]);return s!=null&&m(t,["dynamicThreshold"],s),t}function Xx(i,e){const t={},n=d(e,["mode"]);n!=null&&m(t,["mode"],n);const s=d(e,["dynamicThreshold"]);return s!=null&&m(t,["dynamicThreshold"],s),t}function jx(i,e){const t={},n=d(e,["dynamicRetrievalConfig"]);return n!=null&&m(t,["dynamicRetrievalConfig"],Jx(i,n)),t}function Zx(i,e){const t={},n=d(e,["dynamicRetrievalConfig"]);return n!=null&&m(t,["dynamicRetrievalConfig"],Xx(i,n)),t}function eb(){return{}}function tb(i,e){const t={},n=d(e,["apiKeyString"]);return n!=null&&m(t,["apiKeyString"],n),t}function nb(i,e){const t={},n=d(e,["apiKeyConfig"]);n!=null&&m(t,["apiKeyConfig"],tb(i,n));const s=d(e,["authType"]);s!=null&&m(t,["authType"],s);const a=d(e,["googleServiceAccountConfig"]);a!=null&&m(t,["googleServiceAccountConfig"],a);const u=d(e,["httpBasicAuthConfig"]);u!=null&&m(t,["httpBasicAuthConfig"],u);const f=d(e,["oauthConfig"]);f!=null&&m(t,["oauthConfig"],f);const y=d(e,["oidcConfig"]);return y!=null&&m(t,["oidcConfig"],y),t}function ib(i,e){const t={},n=d(e,["authConfig"]);return n!=null&&m(t,["authConfig"],nb(i,n)),t}function rb(){return{}}function sb(i,e){const t={},n=d(e,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(g=>Hx(i,g))),m(t,["functionDeclarations"],y)}if(d(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=d(e,["googleSearch"]);s!=null&&m(t,["googleSearch"],Qx(i,s));const a=d(e,["googleSearchRetrieval"]);if(a!=null&&m(t,["googleSearchRetrieval"],jx(i,a)),d(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(d(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");d(e,["urlContext"])!=null&&m(t,["urlContext"],rb());const f=d(e,["codeExecution"]);return f!=null&&m(t,["codeExecution"],f),t}function ob(i,e){const t={},n=d(e,["functionDeclarations"]);if(n!=null){let v=n;Array.isArray(v)&&(v=v.map(A=>Kx(i,A))),m(t,["functionDeclarations"],v)}const s=d(e,["retrieval"]);s!=null&&m(t,["retrieval"],s);const a=d(e,["googleSearch"]);a!=null&&m(t,["googleSearch"],Wx(i,a));const u=d(e,["googleSearchRetrieval"]);u!=null&&m(t,["googleSearchRetrieval"],Zx(i,u)),d(e,["enterpriseWebSearch"])!=null&&m(t,["enterpriseWebSearch"],eb());const y=d(e,["googleMaps"]);if(y!=null&&m(t,["googleMaps"],ib(i,y)),d(e,["urlContext"])!==void 0)throw new Error("urlContext parameter is not supported in Vertex AI.");const g=d(e,["codeExecution"]);return g!=null&&m(t,["codeExecution"],g),t}function ab(i,e){const t={},n=d(e,["handle"]);if(n!=null&&m(t,["handle"],n),d(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function lb(i,e){const t={},n=d(e,["handle"]);n!=null&&m(t,["handle"],n);const s=d(e,["transparent"]);return s!=null&&m(t,["transparent"],s),t}function l0(){return{}}function u0(){return{}}function ub(i,e){const t={},n=d(e,["disabled"]);n!=null&&m(t,["disabled"],n);const s=d(e,["startOfSpeechSensitivity"]);s!=null&&m(t,["startOfSpeechSensitivity"],s);const a=d(e,["endOfSpeechSensitivity"]);a!=null&&m(t,["endOfSpeechSensitivity"],a);const u=d(e,["prefixPaddingMs"]);u!=null&&m(t,["prefixPaddingMs"],u);const f=d(e,["silenceDurationMs"]);return f!=null&&m(t,["silenceDurationMs"],f),t}function cb(i,e){const t={},n=d(e,["disabled"]);n!=null&&m(t,["disabled"],n);const s=d(e,["startOfSpeechSensitivity"]);s!=null&&m(t,["startOfSpeechSensitivity"],s);const a=d(e,["endOfSpeechSensitivity"]);a!=null&&m(t,["endOfSpeechSensitivity"],a);const u=d(e,["prefixPaddingMs"]);u!=null&&m(t,["prefixPaddingMs"],u);const f=d(e,["silenceDurationMs"]);return f!=null&&m(t,["silenceDurationMs"],f),t}function fb(i,e){const t={},n=d(e,["automaticActivityDetection"]);n!=null&&m(t,["automaticActivityDetection"],ub(i,n));const s=d(e,["activityHandling"]);s!=null&&m(t,["activityHandling"],s);const a=d(e,["turnCoverage"]);return a!=null&&m(t,["turnCoverage"],a),t}function db(i,e){const t={},n=d(e,["automaticActivityDetection"]);n!=null&&m(t,["automaticActivityDetection"],cb(i,n));const s=d(e,["activityHandling"]);s!=null&&m(t,["activityHandling"],s);const a=d(e,["turnCoverage"]);return a!=null&&m(t,["turnCoverage"],a),t}function hb(i,e){const t={},n=d(e,["targetTokens"]);return n!=null&&m(t,["targetTokens"],n),t}function mb(i,e){const t={},n=d(e,["targetTokens"]);return n!=null&&m(t,["targetTokens"],n),t}function pb(i,e){const t={},n=d(e,["triggerTokens"]);n!=null&&m(t,["triggerTokens"],n);const s=d(e,["slidingWindow"]);return s!=null&&m(t,["slidingWindow"],hb(i,s)),t}function gb(i,e){const t={},n=d(e,["triggerTokens"]);n!=null&&m(t,["triggerTokens"],n);const s=d(e,["slidingWindow"]);return s!=null&&m(t,["slidingWindow"],mb(i,s)),t}function yb(i,e){const t={},n=d(e,["proactiveAudio"]);return n!=null&&m(t,["proactiveAudio"],n),t}function _b(i,e){const t={},n=d(e,["proactiveAudio"]);return n!=null&&m(t,["proactiveAudio"],n),t}function vb(i,e,t){const n={},s=d(e,["generationConfig"]);t!==void 0&&s!=null&&m(t,["setup","generationConfig"],s);const a=d(e,["responseModalities"]);t!==void 0&&a!=null&&m(t,["setup","generationConfig","responseModalities"],a);const u=d(e,["temperature"]);t!==void 0&&u!=null&&m(t,["setup","generationConfig","temperature"],u);const f=d(e,["topP"]);t!==void 0&&f!=null&&m(t,["setup","generationConfig","topP"],f);const y=d(e,["topK"]);t!==void 0&&y!=null&&m(t,["setup","generationConfig","topK"],y);const g=d(e,["maxOutputTokens"]);t!==void 0&&g!=null&&m(t,["setup","generationConfig","maxOutputTokens"],g);const v=d(e,["mediaResolution"]);t!==void 0&&v!=null&&m(t,["setup","generationConfig","mediaResolution"],v);const A=d(e,["seed"]);t!==void 0&&A!=null&&m(t,["setup","generationConfig","seed"],A);const S=d(e,["speechConfig"]);t!==void 0&&S!=null&&m(t,["setup","generationConfig","speechConfig"],kx(i,XE(i,S)));const R=d(e,["enableAffectiveDialog"]);t!==void 0&&R!=null&&m(t,["setup","generationConfig","enableAffectiveDialog"],R);const V=d(e,["systemInstruction"]);t!==void 0&&V!=null&&m(t,["setup","systemInstruction"],qx(i,Pn(i,V)));const H=d(e,["tools"]);if(t!==void 0&&H!=null){let Te=Xf(i,H);Array.isArray(Te)&&(Te=Te.map(O=>sb(i,Jf(i,O)))),m(t,["setup","tools"],Te)}const Y=d(e,["sessionResumption"]);t!==void 0&&Y!=null&&m(t,["setup","sessionResumption"],ab(i,Y));const ce=d(e,["inputAudioTranscription"]);t!==void 0&&ce!=null&&m(t,["setup","inputAudioTranscription"],l0());const le=d(e,["outputAudioTranscription"]);t!==void 0&&le!=null&&m(t,["setup","outputAudioTranscription"],l0());const oe=d(e,["realtimeInputConfig"]);t!==void 0&&oe!=null&&m(t,["setup","realtimeInputConfig"],fb(i,oe));const pe=d(e,["contextWindowCompression"]);t!==void 0&&pe!=null&&m(t,["setup","contextWindowCompression"],pb(i,pe));const fe=d(e,["proactivity"]);return t!==void 0&&fe!=null&&m(t,["setup","proactivity"],yb(i,fe)),n}function Tb(i,e,t){const n={},s=d(e,["generationConfig"]);t!==void 0&&s!=null&&m(t,["setup","generationConfig"],s);const a=d(e,["responseModalities"]);t!==void 0&&a!=null&&m(t,["setup","generationConfig","responseModalities"],a);const u=d(e,["temperature"]);t!==void 0&&u!=null&&m(t,["setup","generationConfig","temperature"],u);const f=d(e,["topP"]);t!==void 0&&f!=null&&m(t,["setup","generationConfig","topP"],f);const y=d(e,["topK"]);t!==void 0&&y!=null&&m(t,["setup","generationConfig","topK"],y);const g=d(e,["maxOutputTokens"]);t!==void 0&&g!=null&&m(t,["setup","generationConfig","maxOutputTokens"],g);const v=d(e,["mediaResolution"]);t!==void 0&&v!=null&&m(t,["setup","generationConfig","mediaResolution"],v);const A=d(e,["seed"]);t!==void 0&&A!=null&&m(t,["setup","generationConfig","seed"],A);const S=d(e,["speechConfig"]);t!==void 0&&S!=null&&m(t,["setup","generationConfig","speechConfig"],Vx(i,XE(i,S)));const R=d(e,["enableAffectiveDialog"]);t!==void 0&&R!=null&&m(t,["setup","generationConfig","enableAffectiveDialog"],R);const V=d(e,["systemInstruction"]);t!==void 0&&V!=null&&m(t,["setup","systemInstruction"],Gx(i,Pn(i,V)));const H=d(e,["tools"]);if(t!==void 0&&H!=null){let Te=Xf(i,H);Array.isArray(Te)&&(Te=Te.map(O=>ob(i,Jf(i,O)))),m(t,["setup","tools"],Te)}const Y=d(e,["sessionResumption"]);t!==void 0&&Y!=null&&m(t,["setup","sessionResumption"],lb(i,Y));const ce=d(e,["inputAudioTranscription"]);t!==void 0&&ce!=null&&m(t,["setup","inputAudioTranscription"],u0());const le=d(e,["outputAudioTranscription"]);t!==void 0&&le!=null&&m(t,["setup","outputAudioTranscription"],u0());const oe=d(e,["realtimeInputConfig"]);t!==void 0&&oe!=null&&m(t,["setup","realtimeInputConfig"],db(i,oe));const pe=d(e,["contextWindowCompression"]);t!==void 0&&pe!=null&&m(t,["setup","contextWindowCompression"],gb(i,pe));const fe=d(e,["proactivity"]);return t!==void 0&&fe!=null&&m(t,["setup","proactivity"],_b(i,fe)),n}function Eb(i,e){const t={},n=d(e,["model"]);n!=null&&m(t,["setup","model"],vt(i,n));const s=d(e,["config"]);return s!=null&&m(t,["config"],vb(i,s,t)),t}function Cb(i,e){const t={},n=d(e,["model"]);n!=null&&m(t,["setup","model"],vt(i,n));const s=d(e,["config"]);return s!=null&&m(t,["config"],Tb(i,s,t)),t}function Ab(){return{}}function Sb(){return{}}function wb(){return{}}function Ib(){return{}}function Rb(i,e){const t={},n=d(e,["media"]);n!=null&&m(t,["mediaChunks"],$E(i,n));const s=d(e,["audio"]);s!=null&&m(t,["audio"],oR(i,s));const a=d(e,["audioStreamEnd"]);a!=null&&m(t,["audioStreamEnd"],a);const u=d(e,["video"]);u!=null&&m(t,["video"],sR(i,u));const f=d(e,["text"]);return f!=null&&m(t,["text"],f),d(e,["activityStart"])!=null&&m(t,["activityStart"],Ab()),d(e,["activityEnd"])!=null&&m(t,["activityEnd"],wb()),t}function xb(i,e){const t={},n=d(e,["media"]);if(n!=null&&m(t,["mediaChunks"],$E(i,n)),d(e,["audio"])!==void 0)throw new Error("audio parameter is not supported in Vertex AI.");const s=d(e,["audioStreamEnd"]);if(s!=null&&m(t,["audioStreamEnd"],s),d(e,["video"])!==void 0)throw new Error("video parameter is not supported in Vertex AI.");if(d(e,["text"])!==void 0)throw new Error("text parameter is not supported in Vertex AI.");return d(e,["activityStart"])!=null&&m(t,["activityStart"],Sb()),d(e,["activityEnd"])!=null&&m(t,["activityEnd"],Ib()),t}function rC(i,e){const t={},n=d(e,["text"]);n!=null&&m(t,["text"],n);const s=d(e,["weight"]);return s!=null&&m(t,["weight"],s),t}function bb(i,e){const t={},n=d(e,["weightedPrompts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>rC(i,a))),m(t,["weightedPrompts"],s)}return t}function sC(i,e){const t={},n=d(e,["temperature"]);n!=null&&m(t,["temperature"],n);const s=d(e,["topK"]);s!=null&&m(t,["topK"],s);const a=d(e,["seed"]);a!=null&&m(t,["seed"],a);const u=d(e,["guidance"]);u!=null&&m(t,["guidance"],u);const f=d(e,["bpm"]);f!=null&&m(t,["bpm"],f);const y=d(e,["density"]);y!=null&&m(t,["density"],y);const g=d(e,["brightness"]);g!=null&&m(t,["brightness"],g);const v=d(e,["scale"]);v!=null&&m(t,["scale"],v);const A=d(e,["muteBass"]);A!=null&&m(t,["muteBass"],A);const S=d(e,["muteDrums"]);S!=null&&m(t,["muteDrums"],S);const R=d(e,["onlyBassAndDrums"]);R!=null&&m(t,["onlyBassAndDrums"],R);const V=d(e,["musicGenerationMode"]);return V!=null&&m(t,["musicGenerationMode"],V),t}function Nb(i,e){const t={},n=d(e,["musicGenerationConfig"]);return n!=null&&m(t,["musicGenerationConfig"],sC(i,n)),t}function oC(i,e){const t={},n=d(e,["model"]);return n!=null&&m(t,["model"],n),t}function aC(i,e){const t={},n=d(e,["weightedPrompts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>rC(i,a))),m(t,["weightedPrompts"],s)}return t}function jm(i,e){const t={},n=d(e,["setup"]);n!=null&&m(t,["setup"],oC(i,n));const s=d(e,["clientContent"]);s!=null&&m(t,["clientContent"],aC(i,s));const a=d(e,["musicGenerationConfig"]);a!=null&&m(t,["musicGenerationConfig"],sC(i,a));const u=d(e,["playbackControl"]);return u!=null&&m(t,["playbackControl"],u),t}function Mb(){return{}}function Db(){return{}}function Pb(i,e){const t={},n=d(e,["fps"]);n!=null&&m(t,["fps"],n);const s=d(e,["endOffset"]);s!=null&&m(t,["endOffset"],s);const a=d(e,["startOffset"]);return a!=null&&m(t,["startOffset"],a),t}function kb(i,e){const t={},n=d(e,["fps"]);n!=null&&m(t,["fps"],n);const s=d(e,["endOffset"]);s!=null&&m(t,["endOffset"],s);const a=d(e,["startOffset"]);return a!=null&&m(t,["startOffset"],a),t}function Vb(i,e){const t={},n=d(e,["data"]);n!=null&&m(t,["data"],n);const s=d(e,["mimeType"]);return s!=null&&m(t,["mimeType"],s),t}function Ob(i,e){const t={},n=d(e,["displayName"]);n!=null&&m(t,["displayName"],n);const s=d(e,["data"]);s!=null&&m(t,["data"],s);const a=d(e,["mimeType"]);return a!=null&&m(t,["mimeType"],a),t}function Lb(i,e){const t={},n=d(e,["videoMetadata"]);n!=null&&m(t,["videoMetadata"],Pb(i,n));const s=d(e,["thought"]);s!=null&&m(t,["thought"],s);const a=d(e,["inlineData"]);a!=null&&m(t,["inlineData"],Vb(i,a));const u=d(e,["codeExecutionResult"]);u!=null&&m(t,["codeExecutionResult"],u);const f=d(e,["executableCode"]);f!=null&&m(t,["executableCode"],f);const y=d(e,["fileData"]);y!=null&&m(t,["fileData"],y);const g=d(e,["functionCall"]);g!=null&&m(t,["functionCall"],g);const v=d(e,["functionResponse"]);v!=null&&m(t,["functionResponse"],v);const A=d(e,["text"]);return A!=null&&m(t,["text"],A),t}function Ub(i,e){const t={},n=d(e,["videoMetadata"]);n!=null&&m(t,["videoMetadata"],kb(i,n));const s=d(e,["thought"]);s!=null&&m(t,["thought"],s);const a=d(e,["inlineData"]);a!=null&&m(t,["inlineData"],Ob(i,a));const u=d(e,["codeExecutionResult"]);u!=null&&m(t,["codeExecutionResult"],u);const f=d(e,["executableCode"]);f!=null&&m(t,["executableCode"],f);const y=d(e,["fileData"]);y!=null&&m(t,["fileData"],y);const g=d(e,["functionCall"]);g!=null&&m(t,["functionCall"],g);const v=d(e,["functionResponse"]);v!=null&&m(t,["functionResponse"],v);const A=d(e,["text"]);return A!=null&&m(t,["text"],A),t}function zb(i,e){const t={},n=d(e,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>Lb(i,u))),m(t,["parts"],a)}const s=d(e,["role"]);return s!=null&&m(t,["role"],s),t}function Bb(i,e){const t={},n=d(e,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>Ub(i,u))),m(t,["parts"],a)}const s=d(e,["role"]);return s!=null&&m(t,["role"],s),t}function c0(i,e){const t={},n=d(e,["text"]);n!=null&&m(t,["text"],n);const s=d(e,["finished"]);return s!=null&&m(t,["finished"],s),t}function f0(i,e){const t={},n=d(e,["text"]);n!=null&&m(t,["text"],n);const s=d(e,["finished"]);return s!=null&&m(t,["finished"],s),t}function Fb(i,e){const t={},n=d(e,["retrievedUrl"]);n!=null&&m(t,["retrievedUrl"],n);const s=d(e,["urlRetrievalStatus"]);return s!=null&&m(t,["urlRetrievalStatus"],s),t}function qb(i,e){const t={},n=d(e,["urlMetadata"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>Fb(i,a))),m(t,["urlMetadata"],s)}return t}function Gb(i,e){const t={},n=d(e,["modelTurn"]);n!=null&&m(t,["modelTurn"],zb(i,n));const s=d(e,["turnComplete"]);s!=null&&m(t,["turnComplete"],s);const a=d(e,["interrupted"]);a!=null&&m(t,["interrupted"],a);const u=d(e,["groundingMetadata"]);u!=null&&m(t,["groundingMetadata"],u);const f=d(e,["generationComplete"]);f!=null&&m(t,["generationComplete"],f);const y=d(e,["inputTranscription"]);y!=null&&m(t,["inputTranscription"],c0(i,y));const g=d(e,["outputTranscription"]);g!=null&&m(t,["outputTranscription"],c0(i,g));const v=d(e,["urlContextMetadata"]);return v!=null&&m(t,["urlContextMetadata"],qb(i,v)),t}function Hb(i,e){const t={},n=d(e,["modelTurn"]);n!=null&&m(t,["modelTurn"],Bb(i,n));const s=d(e,["turnComplete"]);s!=null&&m(t,["turnComplete"],s);const a=d(e,["interrupted"]);a!=null&&m(t,["interrupted"],a);const u=d(e,["groundingMetadata"]);u!=null&&m(t,["groundingMetadata"],u);const f=d(e,["generationComplete"]);f!=null&&m(t,["generationComplete"],f);const y=d(e,["inputTranscription"]);y!=null&&m(t,["inputTranscription"],f0(i,y));const g=d(e,["outputTranscription"]);return g!=null&&m(t,["outputTranscription"],f0(i,g)),t}function Kb(i,e){const t={},n=d(e,["id"]);n!=null&&m(t,["id"],n);const s=d(e,["args"]);s!=null&&m(t,["args"],s);const a=d(e,["name"]);return a!=null&&m(t,["name"],a),t}function Yb(i,e){const t={},n=d(e,["args"]);n!=null&&m(t,["args"],n);const s=d(e,["name"]);return s!=null&&m(t,["name"],s),t}function $b(i,e){const t={},n=d(e,["functionCalls"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>Kb(i,a))),m(t,["functionCalls"],s)}return t}function Qb(i,e){const t={},n=d(e,["functionCalls"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>Yb(i,a))),m(t,["functionCalls"],s)}return t}function Wb(i,e){const t={},n=d(e,["ids"]);return n!=null&&m(t,["ids"],n),t}function Jb(i,e){const t={},n=d(e,["ids"]);return n!=null&&m(t,["ids"],n),t}function of(i,e){const t={},n=d(e,["modality"]);n!=null&&m(t,["modality"],n);const s=d(e,["tokenCount"]);return s!=null&&m(t,["tokenCount"],s),t}function af(i,e){const t={},n=d(e,["modality"]);n!=null&&m(t,["modality"],n);const s=d(e,["tokenCount"]);return s!=null&&m(t,["tokenCount"],s),t}function Xb(i,e){const t={},n=d(e,["promptTokenCount"]);n!=null&&m(t,["promptTokenCount"],n);const s=d(e,["cachedContentTokenCount"]);s!=null&&m(t,["cachedContentTokenCount"],s);const a=d(e,["responseTokenCount"]);a!=null&&m(t,["responseTokenCount"],a);const u=d(e,["toolUsePromptTokenCount"]);u!=null&&m(t,["toolUsePromptTokenCount"],u);const f=d(e,["thoughtsTokenCount"]);f!=null&&m(t,["thoughtsTokenCount"],f);const y=d(e,["totalTokenCount"]);y!=null&&m(t,["totalTokenCount"],y);const g=d(e,["promptTokensDetails"]);if(g!=null){let R=g;Array.isArray(R)&&(R=R.map(V=>of(i,V))),m(t,["promptTokensDetails"],R)}const v=d(e,["cacheTokensDetails"]);if(v!=null){let R=v;Array.isArray(R)&&(R=R.map(V=>of(i,V))),m(t,["cacheTokensDetails"],R)}const A=d(e,["responseTokensDetails"]);if(A!=null){let R=A;Array.isArray(R)&&(R=R.map(V=>of(i,V))),m(t,["responseTokensDetails"],R)}const S=d(e,["toolUsePromptTokensDetails"]);if(S!=null){let R=S;Array.isArray(R)&&(R=R.map(V=>of(i,V))),m(t,["toolUsePromptTokensDetails"],R)}return t}function jb(i,e){const t={},n=d(e,["promptTokenCount"]);n!=null&&m(t,["promptTokenCount"],n);const s=d(e,["cachedContentTokenCount"]);s!=null&&m(t,["cachedContentTokenCount"],s);const a=d(e,["candidatesTokenCount"]);a!=null&&m(t,["responseTokenCount"],a);const u=d(e,["toolUsePromptTokenCount"]);u!=null&&m(t,["toolUsePromptTokenCount"],u);const f=d(e,["thoughtsTokenCount"]);f!=null&&m(t,["thoughtsTokenCount"],f);const y=d(e,["totalTokenCount"]);y!=null&&m(t,["totalTokenCount"],y);const g=d(e,["promptTokensDetails"]);if(g!=null){let V=g;Array.isArray(V)&&(V=V.map(H=>af(i,H))),m(t,["promptTokensDetails"],V)}const v=d(e,["cacheTokensDetails"]);if(v!=null){let V=v;Array.isArray(V)&&(V=V.map(H=>af(i,H))),m(t,["cacheTokensDetails"],V)}const A=d(e,["candidatesTokensDetails"]);if(A!=null){let V=A;Array.isArray(V)&&(V=V.map(H=>af(i,H))),m(t,["responseTokensDetails"],V)}const S=d(e,["toolUsePromptTokensDetails"]);if(S!=null){let V=S;Array.isArray(V)&&(V=V.map(H=>af(i,H))),m(t,["toolUsePromptTokensDetails"],V)}const R=d(e,["trafficType"]);return R!=null&&m(t,["trafficType"],R),t}function Zb(i,e){const t={},n=d(e,["timeLeft"]);return n!=null&&m(t,["timeLeft"],n),t}function eN(i,e){const t={},n=d(e,["timeLeft"]);return n!=null&&m(t,["timeLeft"],n),t}function tN(i,e){const t={},n=d(e,["newHandle"]);n!=null&&m(t,["newHandle"],n);const s=d(e,["resumable"]);s!=null&&m(t,["resumable"],s);const a=d(e,["lastConsumedClientMessageIndex"]);return a!=null&&m(t,["lastConsumedClientMessageIndex"],a),t}function nN(i,e){const t={},n=d(e,["newHandle"]);n!=null&&m(t,["newHandle"],n);const s=d(e,["resumable"]);s!=null&&m(t,["resumable"],s);const a=d(e,["lastConsumedClientMessageIndex"]);return a!=null&&m(t,["lastConsumedClientMessageIndex"],a),t}function iN(i,e){const t={};d(e,["setupComplete"])!=null&&m(t,["setupComplete"],Mb());const s=d(e,["serverContent"]);s!=null&&m(t,["serverContent"],Gb(i,s));const a=d(e,["toolCall"]);a!=null&&m(t,["toolCall"],$b(i,a));const u=d(e,["toolCallCancellation"]);u!=null&&m(t,["toolCallCancellation"],Wb(i,u));const f=d(e,["usageMetadata"]);f!=null&&m(t,["usageMetadata"],Xb(i,f));const y=d(e,["goAway"]);y!=null&&m(t,["goAway"],Zb(i,y));const g=d(e,["sessionResumptionUpdate"]);return g!=null&&m(t,["sessionResumptionUpdate"],tN(i,g)),t}function rN(i,e){const t={};d(e,["setupComplete"])!=null&&m(t,["setupComplete"],Db());const s=d(e,["serverContent"]);s!=null&&m(t,["serverContent"],Hb(i,s));const a=d(e,["toolCall"]);a!=null&&m(t,["toolCall"],Qb(i,a));const u=d(e,["toolCallCancellation"]);u!=null&&m(t,["toolCallCancellation"],Jb(i,u));const f=d(e,["usageMetadata"]);f!=null&&m(t,["usageMetadata"],jb(i,f));const y=d(e,["goAway"]);y!=null&&m(t,["goAway"],eN(i,y));const g=d(e,["sessionResumptionUpdate"]);return g!=null&&m(t,["sessionResumptionUpdate"],nN(i,g)),t}function sN(){return{}}function oN(i,e){const t={},n=d(e,["text"]);n!=null&&m(t,["text"],n);const s=d(e,["weight"]);return s!=null&&m(t,["weight"],s),t}function aN(i,e){const t={},n=d(e,["weightedPrompts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>oN(i,a))),m(t,["weightedPrompts"],s)}return t}function lN(i,e){const t={},n=d(e,["temperature"]);n!=null&&m(t,["temperature"],n);const s=d(e,["topK"]);s!=null&&m(t,["topK"],s);const a=d(e,["seed"]);a!=null&&m(t,["seed"],a);const u=d(e,["guidance"]);u!=null&&m(t,["guidance"],u);const f=d(e,["bpm"]);f!=null&&m(t,["bpm"],f);const y=d(e,["density"]);y!=null&&m(t,["density"],y);const g=d(e,["brightness"]);g!=null&&m(t,["brightness"],g);const v=d(e,["scale"]);v!=null&&m(t,["scale"],v);const A=d(e,["muteBass"]);A!=null&&m(t,["muteBass"],A);const S=d(e,["muteDrums"]);S!=null&&m(t,["muteDrums"],S);const R=d(e,["onlyBassAndDrums"]);R!=null&&m(t,["onlyBassAndDrums"],R);const V=d(e,["musicGenerationMode"]);return V!=null&&m(t,["musicGenerationMode"],V),t}function uN(i,e){const t={},n=d(e,["clientContent"]);n!=null&&m(t,["clientContent"],aN(i,n));const s=d(e,["musicGenerationConfig"]);return s!=null&&m(t,["musicGenerationConfig"],lN(i,s)),t}function cN(i,e){const t={},n=d(e,["data"]);n!=null&&m(t,["data"],n);const s=d(e,["mimeType"]);s!=null&&m(t,["mimeType"],s);const a=d(e,["sourceMetadata"]);return a!=null&&m(t,["sourceMetadata"],uN(i,a)),t}function fN(i,e){const t={},n=d(e,["audioChunks"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>cN(i,a))),m(t,["audioChunks"],s)}return t}function dN(i,e){const t={},n=d(e,["text"]);n!=null&&m(t,["text"],n);const s=d(e,["filteredReason"]);return s!=null&&m(t,["filteredReason"],s),t}function hN(i,e){const t={};d(e,["setupComplete"])!=null&&m(t,["setupComplete"],sN());const s=d(e,["serverContent"]);s!=null&&m(t,["serverContent"],fN(i,s));const a=d(e,["filteredPrompt"]);return a!=null&&m(t,["filteredPrompt"],dN(i,a)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mN(i,e){const t={},n=d(e,["fps"]);n!=null&&m(t,["fps"],n);const s=d(e,["endOffset"]);s!=null&&m(t,["endOffset"],s);const a=d(e,["startOffset"]);return a!=null&&m(t,["startOffset"],a),t}function pN(i,e){const t={};if(d(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(e,["data"]);n!=null&&m(t,["data"],n);const s=d(e,["mimeType"]);return s!=null&&m(t,["mimeType"],s),t}function gN(i,e){const t={},n=d(e,["videoMetadata"]);n!=null&&m(t,["videoMetadata"],mN(i,n));const s=d(e,["thought"]);s!=null&&m(t,["thought"],s);const a=d(e,["inlineData"]);a!=null&&m(t,["inlineData"],pN(i,a));const u=d(e,["codeExecutionResult"]);u!=null&&m(t,["codeExecutionResult"],u);const f=d(e,["executableCode"]);f!=null&&m(t,["executableCode"],f);const y=d(e,["fileData"]);y!=null&&m(t,["fileData"],y);const g=d(e,["functionCall"]);g!=null&&m(t,["functionCall"],g);const v=d(e,["functionResponse"]);v!=null&&m(t,["functionResponse"],v);const A=d(e,["text"]);return A!=null&&m(t,["text"],A),t}function Zf(i,e){const t={},n=d(e,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>gN(i,u))),m(t,["parts"],a)}const s=d(e,["role"]);return s!=null&&m(t,["role"],s),t}function yN(i,e){const t={};if(d(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=d(e,["category"]);n!=null&&m(t,["category"],n);const s=d(e,["threshold"]);return s!=null&&m(t,["threshold"],s),t}function _N(i,e){const t={},n=d(e,["behavior"]);n!=null&&m(t,["behavior"],n);const s=d(e,["description"]);s!=null&&m(t,["description"],s);const a=d(e,["name"]);a!=null&&m(t,["name"],a);const u=d(e,["parameters"]);u!=null&&m(t,["parameters"],u);const f=d(e,["response"]);return f!=null&&m(t,["response"],f),t}function vN(i,e){const t={},n=d(e,["startTime"]);n!=null&&m(t,["startTime"],n);const s=d(e,["endTime"]);return s!=null&&m(t,["endTime"],s),t}function TN(i,e){const t={},n=d(e,["timeRangeFilter"]);return n!=null&&m(t,["timeRangeFilter"],vN(i,n)),t}function EN(i,e){const t={},n=d(e,["mode"]);n!=null&&m(t,["mode"],n);const s=d(e,["dynamicThreshold"]);return s!=null&&m(t,["dynamicThreshold"],s),t}function CN(i,e){const t={},n=d(e,["dynamicRetrievalConfig"]);return n!=null&&m(t,["dynamicRetrievalConfig"],EN(i,n)),t}function AN(){return{}}function SN(i,e){const t={},n=d(e,["functionDeclarations"]);if(n!=null){let y=n;Array.isArray(y)&&(y=y.map(g=>_N(i,g))),m(t,["functionDeclarations"],y)}if(d(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=d(e,["googleSearch"]);s!=null&&m(t,["googleSearch"],TN(i,s));const a=d(e,["googleSearchRetrieval"]);if(a!=null&&m(t,["googleSearchRetrieval"],CN(i,a)),d(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(d(e,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");d(e,["urlContext"])!=null&&m(t,["urlContext"],AN());const f=d(e,["codeExecution"]);return f!=null&&m(t,["codeExecution"],f),t}function wN(i,e){const t={},n=d(e,["mode"]);n!=null&&m(t,["mode"],n);const s=d(e,["allowedFunctionNames"]);return s!=null&&m(t,["allowedFunctionNames"],s),t}function IN(i,e){const t={},n=d(e,["latitude"]);n!=null&&m(t,["latitude"],n);const s=d(e,["longitude"]);return s!=null&&m(t,["longitude"],s),t}function RN(i,e){const t={},n=d(e,["latLng"]);return n!=null&&m(t,["latLng"],IN(i,n)),t}function xN(i,e){const t={},n=d(e,["functionCallingConfig"]);n!=null&&m(t,["functionCallingConfig"],wN(i,n));const s=d(e,["retrievalConfig"]);return s!=null&&m(t,["retrievalConfig"],RN(i,s)),t}function bN(i,e){const t={},n=d(e,["voiceName"]);return n!=null&&m(t,["voiceName"],n),t}function lC(i,e){const t={},n=d(e,["prebuiltVoiceConfig"]);return n!=null&&m(t,["prebuiltVoiceConfig"],bN(i,n)),t}function NN(i,e){const t={},n=d(e,["speaker"]);n!=null&&m(t,["speaker"],n);const s=d(e,["voiceConfig"]);return s!=null&&m(t,["voiceConfig"],lC(i,s)),t}function MN(i,e){const t={},n=d(e,["speakerVoiceConfigs"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>NN(i,a))),m(t,["speakerVoiceConfigs"],s)}return t}function DN(i,e){const t={},n=d(e,["voiceConfig"]);n!=null&&m(t,["voiceConfig"],lC(i,n));const s=d(e,["multiSpeakerVoiceConfig"]);s!=null&&m(t,["multiSpeakerVoiceConfig"],MN(i,s));const a=d(e,["languageCode"]);return a!=null&&m(t,["languageCode"],a),t}function PN(i,e){const t={},n=d(e,["includeThoughts"]);n!=null&&m(t,["includeThoughts"],n);const s=d(e,["thinkingBudget"]);return s!=null&&m(t,["thinkingBudget"],s),t}function kN(i,e,t){const n={},s=d(e,["systemInstruction"]);t!==void 0&&s!=null&&m(t,["systemInstruction"],Zf(i,Pn(i,s)));const a=d(e,["temperature"]);a!=null&&m(n,["temperature"],a);const u=d(e,["topP"]);u!=null&&m(n,["topP"],u);const f=d(e,["topK"]);f!=null&&m(n,["topK"],f);const y=d(e,["candidateCount"]);y!=null&&m(n,["candidateCount"],y);const g=d(e,["maxOutputTokens"]);g!=null&&m(n,["maxOutputTokens"],g);const v=d(e,["stopSequences"]);v!=null&&m(n,["stopSequences"],v);const A=d(e,["responseLogprobs"]);A!=null&&m(n,["responseLogprobs"],A);const S=d(e,["logprobs"]);S!=null&&m(n,["logprobs"],S);const R=d(e,["presencePenalty"]);R!=null&&m(n,["presencePenalty"],R);const V=d(e,["frequencyPenalty"]);V!=null&&m(n,["frequencyPenalty"],V);const H=d(e,["seed"]);H!=null&&m(n,["seed"],H);const Y=d(e,["responseMimeType"]);Y!=null&&m(n,["responseMimeType"],Y);const ce=d(e,["responseSchema"]);if(ce!=null&&m(n,["responseSchema"],kf(i,ce)),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const le=d(e,["safetySettings"]);if(t!==void 0&&le!=null){let k=le;Array.isArray(k)&&(k=k.map(U=>yN(i,U))),m(t,["safetySettings"],k)}const oe=d(e,["tools"]);if(t!==void 0&&oe!=null){let k=Xf(i,oe);Array.isArray(k)&&(k=k.map(U=>SN(i,Jf(i,U)))),m(t,["tools"],k)}const pe=d(e,["toolConfig"]);if(t!==void 0&&pe!=null&&m(t,["toolConfig"],xN(i,pe)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const fe=d(e,["cachedContent"]);t!==void 0&&fe!=null&&m(t,["cachedContent"],Ts(i,fe));const Te=d(e,["responseModalities"]);Te!=null&&m(n,["responseModalities"],Te);const O=d(e,["mediaResolution"]);O!=null&&m(n,["mediaResolution"],O);const b=d(e,["speechConfig"]);if(b!=null&&m(n,["speechConfig"],DN(i,JE(i,b))),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const x=d(e,["thinkingConfig"]);return x!=null&&m(n,["thinkingConfig"],PN(i,x)),n}function d0(i,e){const t={},n=d(e,["model"]);n!=null&&m(t,["_url","model"],vt(i,n));const s=d(e,["contents"]);if(s!=null){let u=fi(i,s);Array.isArray(u)&&(u=u.map(f=>Zf(i,f))),m(t,["contents"],u)}const a=d(e,["config"]);return a!=null&&m(t,["generationConfig"],kN(i,a,t)),t}function VN(i,e,t){const n={},s=d(e,["taskType"]);t!==void 0&&s!=null&&m(t,["requests[]","taskType"],s);const a=d(e,["title"]);t!==void 0&&a!=null&&m(t,["requests[]","title"],a);const u=d(e,["outputDimensionality"]);if(t!==void 0&&u!=null&&m(t,["requests[]","outputDimensionality"],u),d(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function ON(i,e){const t={},n=d(e,["model"]);n!=null&&m(t,["_url","model"],vt(i,n));const s=d(e,["contents"]);s!=null&&m(t,["requests[]","content"],WE(i,s));const a=d(e,["config"]);a!=null&&m(t,["config"],VN(i,a,t));const u=d(e,["model"]);return u!==void 0&&m(t,["requests[]","model"],vt(i,u)),t}function LN(i,e,t){const n={};if(d(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=d(e,["numberOfImages"]);t!==void 0&&s!=null&&m(t,["parameters","sampleCount"],s);const a=d(e,["aspectRatio"]);t!==void 0&&a!=null&&m(t,["parameters","aspectRatio"],a);const u=d(e,["guidanceScale"]);if(t!==void 0&&u!=null&&m(t,["parameters","guidanceScale"],u),d(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const f=d(e,["safetyFilterLevel"]);t!==void 0&&f!=null&&m(t,["parameters","safetySetting"],f);const y=d(e,["personGeneration"]);t!==void 0&&y!=null&&m(t,["parameters","personGeneration"],y);const g=d(e,["includeSafetyAttributes"]);t!==void 0&&g!=null&&m(t,["parameters","includeSafetyAttributes"],g);const v=d(e,["includeRaiReason"]);t!==void 0&&v!=null&&m(t,["parameters","includeRaiReason"],v);const A=d(e,["language"]);t!==void 0&&A!=null&&m(t,["parameters","language"],A);const S=d(e,["outputMimeType"]);t!==void 0&&S!=null&&m(t,["parameters","outputOptions","mimeType"],S);const R=d(e,["outputCompressionQuality"]);if(t!==void 0&&R!=null&&m(t,["parameters","outputOptions","compressionQuality"],R),d(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(d(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function UN(i,e){const t={},n=d(e,["model"]);n!=null&&m(t,["_url","model"],vt(i,n));const s=d(e,["prompt"]);s!=null&&m(t,["instances[0]","prompt"],s);const a=d(e,["config"]);return a!=null&&m(t,["config"],LN(i,a,t)),t}function zN(i,e){const t={},n=d(e,["model"]);n!=null&&m(t,["_url","name"],vt(i,n));const s=d(e,["config"]);return s!=null&&m(t,["config"],s),t}function BN(i,e,t){const n={},s=d(e,["pageSize"]);t!==void 0&&s!=null&&m(t,["_query","pageSize"],s);const a=d(e,["pageToken"]);t!==void 0&&a!=null&&m(t,["_query","pageToken"],a);const u=d(e,["filter"]);t!==void 0&&u!=null&&m(t,["_query","filter"],u);const f=d(e,["queryBase"]);return t!==void 0&&f!=null&&m(t,["_url","models_url"],eC(i,f)),n}function FN(i,e){const t={},n=d(e,["config"]);return n!=null&&m(t,["config"],BN(i,n,t)),t}function qN(i,e,t){const n={},s=d(e,["displayName"]);t!==void 0&&s!=null&&m(t,["displayName"],s);const a=d(e,["description"]);t!==void 0&&a!=null&&m(t,["description"],a);const u=d(e,["defaultCheckpointId"]);return t!==void 0&&u!=null&&m(t,["defaultCheckpointId"],u),n}function GN(i,e){const t={},n=d(e,["model"]);n!=null&&m(t,["_url","name"],vt(i,n));const s=d(e,["config"]);return s!=null&&m(t,["config"],qN(i,s,t)),t}function HN(i,e){const t={},n=d(e,["model"]);n!=null&&m(t,["_url","name"],vt(i,n));const s=d(e,["config"]);return s!=null&&m(t,["config"],s),t}function KN(i,e){const t={};if(d(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(d(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(d(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function YN(i,e){const t={},n=d(e,["model"]);n!=null&&m(t,["_url","model"],vt(i,n));const s=d(e,["contents"]);if(s!=null){let u=fi(i,s);Array.isArray(u)&&(u=u.map(f=>Zf(i,f))),m(t,["contents"],u)}const a=d(e,["config"]);return a!=null&&m(t,["config"],KN(i,a)),t}function $N(i,e){const t={};if(d(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=d(e,["imageBytes"]);n!=null&&m(t,["bytesBase64Encoded"],Es(i,n));const s=d(e,["mimeType"]);return s!=null&&m(t,["mimeType"],s),t}function QN(i,e,t){const n={},s=d(e,["numberOfVideos"]);if(t!==void 0&&s!=null&&m(t,["parameters","sampleCount"],s),d(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const a=d(e,["durationSeconds"]);if(t!==void 0&&a!=null&&m(t,["parameters","durationSeconds"],a),d(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=d(e,["aspectRatio"]);if(t!==void 0&&u!=null&&m(t,["parameters","aspectRatio"],u),d(e,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const f=d(e,["personGeneration"]);if(t!==void 0&&f!=null&&m(t,["parameters","personGeneration"],f),d(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const y=d(e,["negativePrompt"]);if(t!==void 0&&y!=null&&m(t,["parameters","negativePrompt"],y),d(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function WN(i,e){const t={},n=d(e,["model"]);n!=null&&m(t,["_url","model"],vt(i,n));const s=d(e,["prompt"]);s!=null&&m(t,["instances[0]","prompt"],s);const a=d(e,["image"]);a!=null&&m(t,["instances[0]","image"],$N(i,a));const u=d(e,["config"]);return u!=null&&m(t,["config"],QN(i,u,t)),t}function JN(i,e){const t={},n=d(e,["fps"]);n!=null&&m(t,["fps"],n);const s=d(e,["endOffset"]);s!=null&&m(t,["endOffset"],s);const a=d(e,["startOffset"]);return a!=null&&m(t,["startOffset"],a),t}function XN(i,e){const t={},n=d(e,["displayName"]);n!=null&&m(t,["displayName"],n);const s=d(e,["data"]);s!=null&&m(t,["data"],s);const a=d(e,["mimeType"]);return a!=null&&m(t,["mimeType"],a),t}function jN(i,e){const t={},n=d(e,["videoMetadata"]);n!=null&&m(t,["videoMetadata"],JN(i,n));const s=d(e,["thought"]);s!=null&&m(t,["thought"],s);const a=d(e,["inlineData"]);a!=null&&m(t,["inlineData"],XN(i,a));const u=d(e,["codeExecutionResult"]);u!=null&&m(t,["codeExecutionResult"],u);const f=d(e,["executableCode"]);f!=null&&m(t,["executableCode"],f);const y=d(e,["fileData"]);y!=null&&m(t,["fileData"],y);const g=d(e,["functionCall"]);g!=null&&m(t,["functionCall"],g);const v=d(e,["functionResponse"]);v!=null&&m(t,["functionResponse"],v);const A=d(e,["text"]);return A!=null&&m(t,["text"],A),t}function za(i,e){const t={},n=d(e,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>jN(i,u))),m(t,["parts"],a)}const s=d(e,["role"]);return s!=null&&m(t,["role"],s),t}function ZN(i,e){const t={},n=d(e,["featureSelectionPreference"]);return n!=null&&m(t,["featureSelectionPreference"],n),t}function e1(i,e){const t={},n=d(e,["method"]);n!=null&&m(t,["method"],n);const s=d(e,["category"]);s!=null&&m(t,["category"],s);const a=d(e,["threshold"]);return a!=null&&m(t,["threshold"],a),t}function t1(i,e){const t={};if(d(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=d(e,["description"]);n!=null&&m(t,["description"],n);const s=d(e,["name"]);s!=null&&m(t,["name"],s);const a=d(e,["parameters"]);a!=null&&m(t,["parameters"],a);const u=d(e,["response"]);return u!=null&&m(t,["response"],u),t}function n1(i,e){const t={},n=d(e,["startTime"]);n!=null&&m(t,["startTime"],n);const s=d(e,["endTime"]);return s!=null&&m(t,["endTime"],s),t}function i1(i,e){const t={},n=d(e,["timeRangeFilter"]);return n!=null&&m(t,["timeRangeFilter"],n1(i,n)),t}function r1(i,e){const t={},n=d(e,["mode"]);n!=null&&m(t,["mode"],n);const s=d(e,["dynamicThreshold"]);return s!=null&&m(t,["dynamicThreshold"],s),t}function s1(i,e){const t={},n=d(e,["dynamicRetrievalConfig"]);return n!=null&&m(t,["dynamicRetrievalConfig"],r1(i,n)),t}function o1(){return{}}function a1(i,e){const t={},n=d(e,["apiKeyString"]);return n!=null&&m(t,["apiKeyString"],n),t}function l1(i,e){const t={},n=d(e,["apiKeyConfig"]);n!=null&&m(t,["apiKeyConfig"],a1(i,n));const s=d(e,["authType"]);s!=null&&m(t,["authType"],s);const a=d(e,["googleServiceAccountConfig"]);a!=null&&m(t,["googleServiceAccountConfig"],a);const u=d(e,["httpBasicAuthConfig"]);u!=null&&m(t,["httpBasicAuthConfig"],u);const f=d(e,["oauthConfig"]);f!=null&&m(t,["oauthConfig"],f);const y=d(e,["oidcConfig"]);return y!=null&&m(t,["oidcConfig"],y),t}function u1(i,e){const t={},n=d(e,["authConfig"]);return n!=null&&m(t,["authConfig"],l1(i,n)),t}function uC(i,e){const t={},n=d(e,["functionDeclarations"]);if(n!=null){let v=n;Array.isArray(v)&&(v=v.map(A=>t1(i,A))),m(t,["functionDeclarations"],v)}const s=d(e,["retrieval"]);s!=null&&m(t,["retrieval"],s);const a=d(e,["googleSearch"]);a!=null&&m(t,["googleSearch"],i1(i,a));const u=d(e,["googleSearchRetrieval"]);u!=null&&m(t,["googleSearchRetrieval"],s1(i,u)),d(e,["enterpriseWebSearch"])!=null&&m(t,["enterpriseWebSearch"],o1());const y=d(e,["googleMaps"]);if(y!=null&&m(t,["googleMaps"],u1(i,y)),d(e,["urlContext"])!==void 0)throw new Error("urlContext parameter is not supported in Vertex AI.");const g=d(e,["codeExecution"]);return g!=null&&m(t,["codeExecution"],g),t}function c1(i,e){const t={},n=d(e,["mode"]);n!=null&&m(t,["mode"],n);const s=d(e,["allowedFunctionNames"]);return s!=null&&m(t,["allowedFunctionNames"],s),t}function f1(i,e){const t={},n=d(e,["latitude"]);n!=null&&m(t,["latitude"],n);const s=d(e,["longitude"]);return s!=null&&m(t,["longitude"],s),t}function d1(i,e){const t={},n=d(e,["latLng"]);return n!=null&&m(t,["latLng"],f1(i,n)),t}function h1(i,e){const t={},n=d(e,["functionCallingConfig"]);n!=null&&m(t,["functionCallingConfig"],c1(i,n));const s=d(e,["retrievalConfig"]);return s!=null&&m(t,["retrievalConfig"],d1(i,s)),t}function m1(i,e){const t={},n=d(e,["voiceName"]);return n!=null&&m(t,["voiceName"],n),t}function p1(i,e){const t={},n=d(e,["prebuiltVoiceConfig"]);return n!=null&&m(t,["prebuiltVoiceConfig"],m1(i,n)),t}function g1(i,e){const t={},n=d(e,["voiceConfig"]);if(n!=null&&m(t,["voiceConfig"],p1(i,n)),d(e,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const s=d(e,["languageCode"]);return s!=null&&m(t,["languageCode"],s),t}function y1(i,e){const t={},n=d(e,["includeThoughts"]);n!=null&&m(t,["includeThoughts"],n);const s=d(e,["thinkingBudget"]);return s!=null&&m(t,["thinkingBudget"],s),t}function _1(i,e,t){const n={},s=d(e,["systemInstruction"]);t!==void 0&&s!=null&&m(t,["systemInstruction"],za(i,Pn(i,s)));const a=d(e,["temperature"]);a!=null&&m(n,["temperature"],a);const u=d(e,["topP"]);u!=null&&m(n,["topP"],u);const f=d(e,["topK"]);f!=null&&m(n,["topK"],f);const y=d(e,["candidateCount"]);y!=null&&m(n,["candidateCount"],y);const g=d(e,["maxOutputTokens"]);g!=null&&m(n,["maxOutputTokens"],g);const v=d(e,["stopSequences"]);v!=null&&m(n,["stopSequences"],v);const A=d(e,["responseLogprobs"]);A!=null&&m(n,["responseLogprobs"],A);const S=d(e,["logprobs"]);S!=null&&m(n,["logprobs"],S);const R=d(e,["presencePenalty"]);R!=null&&m(n,["presencePenalty"],R);const V=d(e,["frequencyPenalty"]);V!=null&&m(n,["frequencyPenalty"],V);const H=d(e,["seed"]);H!=null&&m(n,["seed"],H);const Y=d(e,["responseMimeType"]);Y!=null&&m(n,["responseMimeType"],Y);const ce=d(e,["responseSchema"]);ce!=null&&m(n,["responseSchema"],kf(i,ce));const le=d(e,["routingConfig"]);le!=null&&m(n,["routingConfig"],le);const oe=d(e,["modelSelectionConfig"]);oe!=null&&m(n,["modelConfig"],ZN(i,oe));const pe=d(e,["safetySettings"]);if(t!==void 0&&pe!=null){let We=pe;Array.isArray(We)&&(We=We.map(rt=>e1(i,rt))),m(t,["safetySettings"],We)}const fe=d(e,["tools"]);if(t!==void 0&&fe!=null){let We=Xf(i,fe);Array.isArray(We)&&(We=We.map(rt=>uC(i,Jf(i,rt)))),m(t,["tools"],We)}const Te=d(e,["toolConfig"]);t!==void 0&&Te!=null&&m(t,["toolConfig"],h1(i,Te));const O=d(e,["labels"]);t!==void 0&&O!=null&&m(t,["labels"],O);const b=d(e,["cachedContent"]);t!==void 0&&b!=null&&m(t,["cachedContent"],Ts(i,b));const x=d(e,["responseModalities"]);x!=null&&m(n,["responseModalities"],x);const k=d(e,["mediaResolution"]);k!=null&&m(n,["mediaResolution"],k);const U=d(e,["speechConfig"]);U!=null&&m(n,["speechConfig"],g1(i,JE(i,U)));const z=d(e,["audioTimestamp"]);z!=null&&m(n,["audioTimestamp"],z);const D=d(e,["thinkingConfig"]);return D!=null&&m(n,["thinkingConfig"],y1(i,D)),n}function h0(i,e){const t={},n=d(e,["model"]);n!=null&&m(t,["_url","model"],vt(i,n));const s=d(e,["contents"]);if(s!=null){let u=fi(i,s);Array.isArray(u)&&(u=u.map(f=>za(i,f))),m(t,["contents"],u)}const a=d(e,["config"]);return a!=null&&m(t,["generationConfig"],_1(i,a,t)),t}function v1(i,e,t){const n={},s=d(e,["taskType"]);t!==void 0&&s!=null&&m(t,["instances[]","task_type"],s);const a=d(e,["title"]);t!==void 0&&a!=null&&m(t,["instances[]","title"],a);const u=d(e,["outputDimensionality"]);t!==void 0&&u!=null&&m(t,["parameters","outputDimensionality"],u);const f=d(e,["mimeType"]);t!==void 0&&f!=null&&m(t,["instances[]","mimeType"],f);const y=d(e,["autoTruncate"]);return t!==void 0&&y!=null&&m(t,["parameters","autoTruncate"],y),n}function T1(i,e){const t={},n=d(e,["model"]);n!=null&&m(t,["_url","model"],vt(i,n));const s=d(e,["contents"]);s!=null&&m(t,["instances[]","content"],WE(i,s));const a=d(e,["config"]);return a!=null&&m(t,["config"],v1(i,a,t)),t}function E1(i,e,t){const n={},s=d(e,["outputGcsUri"]);t!==void 0&&s!=null&&m(t,["parameters","storageUri"],s);const a=d(e,["negativePrompt"]);t!==void 0&&a!=null&&m(t,["parameters","negativePrompt"],a);const u=d(e,["numberOfImages"]);t!==void 0&&u!=null&&m(t,["parameters","sampleCount"],u);const f=d(e,["aspectRatio"]);t!==void 0&&f!=null&&m(t,["parameters","aspectRatio"],f);const y=d(e,["guidanceScale"]);t!==void 0&&y!=null&&m(t,["parameters","guidanceScale"],y);const g=d(e,["seed"]);t!==void 0&&g!=null&&m(t,["parameters","seed"],g);const v=d(e,["safetyFilterLevel"]);t!==void 0&&v!=null&&m(t,["parameters","safetySetting"],v);const A=d(e,["personGeneration"]);t!==void 0&&A!=null&&m(t,["parameters","personGeneration"],A);const S=d(e,["includeSafetyAttributes"]);t!==void 0&&S!=null&&m(t,["parameters","includeSafetyAttributes"],S);const R=d(e,["includeRaiReason"]);t!==void 0&&R!=null&&m(t,["parameters","includeRaiReason"],R);const V=d(e,["language"]);t!==void 0&&V!=null&&m(t,["parameters","language"],V);const H=d(e,["outputMimeType"]);t!==void 0&&H!=null&&m(t,["parameters","outputOptions","mimeType"],H);const Y=d(e,["outputCompressionQuality"]);t!==void 0&&Y!=null&&m(t,["parameters","outputOptions","compressionQuality"],Y);const ce=d(e,["addWatermark"]);t!==void 0&&ce!=null&&m(t,["parameters","addWatermark"],ce);const le=d(e,["enhancePrompt"]);return t!==void 0&&le!=null&&m(t,["parameters","enhancePrompt"],le),n}function C1(i,e){const t={},n=d(e,["model"]);n!=null&&m(t,["_url","model"],vt(i,n));const s=d(e,["prompt"]);s!=null&&m(t,["instances[0]","prompt"],s);const a=d(e,["config"]);return a!=null&&m(t,["config"],E1(i,a,t)),t}function Dp(i,e){const t={},n=d(e,["gcsUri"]);n!=null&&m(t,["gcsUri"],n);const s=d(e,["imageBytes"]);s!=null&&m(t,["bytesBase64Encoded"],Es(i,s));const a=d(e,["mimeType"]);return a!=null&&m(t,["mimeType"],a),t}function A1(i,e){const t={},n=d(e,["maskMode"]);n!=null&&m(t,["maskMode"],n);const s=d(e,["segmentationClasses"]);s!=null&&m(t,["maskClasses"],s);const a=d(e,["maskDilation"]);return a!=null&&m(t,["dilation"],a),t}function S1(i,e){const t={},n=d(e,["controlType"]);n!=null&&m(t,["controlType"],n);const s=d(e,["enableControlImageComputation"]);return s!=null&&m(t,["computeControl"],s),t}function w1(i,e){const t={},n=d(e,["styleDescription"]);return n!=null&&m(t,["styleDescription"],n),t}function I1(i,e){const t={},n=d(e,["subjectType"]);n!=null&&m(t,["subjectType"],n);const s=d(e,["subjectDescription"]);return s!=null&&m(t,["subjectDescription"],s),t}function R1(i,e){const t={},n=d(e,["referenceImage"]);n!=null&&m(t,["referenceImage"],Dp(i,n));const s=d(e,["referenceId"]);s!=null&&m(t,["referenceId"],s);const a=d(e,["referenceType"]);a!=null&&m(t,["referenceType"],a);const u=d(e,["maskImageConfig"]);u!=null&&m(t,["maskImageConfig"],A1(i,u));const f=d(e,["controlImageConfig"]);f!=null&&m(t,["controlImageConfig"],S1(i,f));const y=d(e,["styleImageConfig"]);y!=null&&m(t,["styleImageConfig"],w1(i,y));const g=d(e,["subjectImageConfig"]);return g!=null&&m(t,["subjectImageConfig"],I1(i,g)),t}function x1(i,e,t){const n={},s=d(e,["outputGcsUri"]);t!==void 0&&s!=null&&m(t,["parameters","storageUri"],s);const a=d(e,["negativePrompt"]);t!==void 0&&a!=null&&m(t,["parameters","negativePrompt"],a);const u=d(e,["numberOfImages"]);t!==void 0&&u!=null&&m(t,["parameters","sampleCount"],u);const f=d(e,["aspectRatio"]);t!==void 0&&f!=null&&m(t,["parameters","aspectRatio"],f);const y=d(e,["guidanceScale"]);t!==void 0&&y!=null&&m(t,["parameters","guidanceScale"],y);const g=d(e,["seed"]);t!==void 0&&g!=null&&m(t,["parameters","seed"],g);const v=d(e,["safetyFilterLevel"]);t!==void 0&&v!=null&&m(t,["parameters","safetySetting"],v);const A=d(e,["personGeneration"]);t!==void 0&&A!=null&&m(t,["parameters","personGeneration"],A);const S=d(e,["includeSafetyAttributes"]);t!==void 0&&S!=null&&m(t,["parameters","includeSafetyAttributes"],S);const R=d(e,["includeRaiReason"]);t!==void 0&&R!=null&&m(t,["parameters","includeRaiReason"],R);const V=d(e,["language"]);t!==void 0&&V!=null&&m(t,["parameters","language"],V);const H=d(e,["outputMimeType"]);t!==void 0&&H!=null&&m(t,["parameters","outputOptions","mimeType"],H);const Y=d(e,["outputCompressionQuality"]);t!==void 0&&Y!=null&&m(t,["parameters","outputOptions","compressionQuality"],Y);const ce=d(e,["editMode"]);t!==void 0&&ce!=null&&m(t,["parameters","editMode"],ce);const le=d(e,["baseSteps"]);return t!==void 0&&le!=null&&m(t,["parameters","editConfig","baseSteps"],le),n}function b1(i,e){const t={},n=d(e,["model"]);n!=null&&m(t,["_url","model"],vt(i,n));const s=d(e,["prompt"]);s!=null&&m(t,["instances[0]","prompt"],s);const a=d(e,["referenceImages"]);if(a!=null){let f=a;Array.isArray(f)&&(f=f.map(y=>R1(i,y))),m(t,["instances[0]","referenceImages"],f)}const u=d(e,["config"]);return u!=null&&m(t,["config"],x1(i,u,t)),t}function N1(i,e,t){const n={},s=d(e,["includeRaiReason"]);t!==void 0&&s!=null&&m(t,["parameters","includeRaiReason"],s);const a=d(e,["outputMimeType"]);t!==void 0&&a!=null&&m(t,["parameters","outputOptions","mimeType"],a);const u=d(e,["outputCompressionQuality"]);t!==void 0&&u!=null&&m(t,["parameters","outputOptions","compressionQuality"],u);const f=d(e,["numberOfImages"]);t!==void 0&&f!=null&&m(t,["parameters","sampleCount"],f);const y=d(e,["mode"]);return t!==void 0&&y!=null&&m(t,["parameters","mode"],y),n}function M1(i,e){const t={},n=d(e,["model"]);n!=null&&m(t,["_url","model"],vt(i,n));const s=d(e,["image"]);s!=null&&m(t,["instances[0]","image"],Dp(i,s));const a=d(e,["upscaleFactor"]);a!=null&&m(t,["parameters","upscaleConfig","upscaleFactor"],a);const u=d(e,["config"]);return u!=null&&m(t,["config"],N1(i,u,t)),t}function D1(i,e){const t={},n=d(e,["model"]);n!=null&&m(t,["_url","name"],vt(i,n));const s=d(e,["config"]);return s!=null&&m(t,["config"],s),t}function P1(i,e,t){const n={},s=d(e,["pageSize"]);t!==void 0&&s!=null&&m(t,["_query","pageSize"],s);const a=d(e,["pageToken"]);t!==void 0&&a!=null&&m(t,["_query","pageToken"],a);const u=d(e,["filter"]);t!==void 0&&u!=null&&m(t,["_query","filter"],u);const f=d(e,["queryBase"]);return t!==void 0&&f!=null&&m(t,["_url","models_url"],eC(i,f)),n}function k1(i,e){const t={},n=d(e,["config"]);return n!=null&&m(t,["config"],P1(i,n,t)),t}function V1(i,e,t){const n={},s=d(e,["displayName"]);t!==void 0&&s!=null&&m(t,["displayName"],s);const a=d(e,["description"]);t!==void 0&&a!=null&&m(t,["description"],a);const u=d(e,["defaultCheckpointId"]);return t!==void 0&&u!=null&&m(t,["defaultCheckpointId"],u),n}function O1(i,e){const t={},n=d(e,["model"]);n!=null&&m(t,["_url","model"],vt(i,n));const s=d(e,["config"]);return s!=null&&m(t,["config"],V1(i,s,t)),t}function L1(i,e){const t={},n=d(e,["model"]);n!=null&&m(t,["_url","name"],vt(i,n));const s=d(e,["config"]);return s!=null&&m(t,["config"],s),t}function U1(i,e,t){const n={},s=d(e,["systemInstruction"]);t!==void 0&&s!=null&&m(t,["systemInstruction"],za(i,Pn(i,s)));const a=d(e,["tools"]);if(t!==void 0&&a!=null){let f=a;Array.isArray(f)&&(f=f.map(y=>uC(i,y))),m(t,["tools"],f)}const u=d(e,["generationConfig"]);return t!==void 0&&u!=null&&m(t,["generationConfig"],u),n}function z1(i,e){const t={},n=d(e,["model"]);n!=null&&m(t,["_url","model"],vt(i,n));const s=d(e,["contents"]);if(s!=null){let u=fi(i,s);Array.isArray(u)&&(u=u.map(f=>za(i,f))),m(t,["contents"],u)}const a=d(e,["config"]);return a!=null&&m(t,["config"],U1(i,a,t)),t}function B1(i,e){const t={},n=d(e,["model"]);n!=null&&m(t,["_url","model"],vt(i,n));const s=d(e,["contents"]);if(s!=null){let u=fi(i,s);Array.isArray(u)&&(u=u.map(f=>za(i,f))),m(t,["contents"],u)}const a=d(e,["config"]);return a!=null&&m(t,["config"],a),t}function F1(i,e,t){const n={},s=d(e,["numberOfVideos"]);t!==void 0&&s!=null&&m(t,["parameters","sampleCount"],s);const a=d(e,["outputGcsUri"]);t!==void 0&&a!=null&&m(t,["parameters","storageUri"],a);const u=d(e,["fps"]);t!==void 0&&u!=null&&m(t,["parameters","fps"],u);const f=d(e,["durationSeconds"]);t!==void 0&&f!=null&&m(t,["parameters","durationSeconds"],f);const y=d(e,["seed"]);t!==void 0&&y!=null&&m(t,["parameters","seed"],y);const g=d(e,["aspectRatio"]);t!==void 0&&g!=null&&m(t,["parameters","aspectRatio"],g);const v=d(e,["resolution"]);t!==void 0&&v!=null&&m(t,["parameters","resolution"],v);const A=d(e,["personGeneration"]);t!==void 0&&A!=null&&m(t,["parameters","personGeneration"],A);const S=d(e,["pubsubTopic"]);t!==void 0&&S!=null&&m(t,["parameters","pubsubTopic"],S);const R=d(e,["negativePrompt"]);t!==void 0&&R!=null&&m(t,["parameters","negativePrompt"],R);const V=d(e,["enhancePrompt"]);return t!==void 0&&V!=null&&m(t,["parameters","enhancePrompt"],V),n}function q1(i,e){const t={},n=d(e,["model"]);n!=null&&m(t,["_url","model"],vt(i,n));const s=d(e,["prompt"]);s!=null&&m(t,["instances[0]","prompt"],s);const a=d(e,["image"]);a!=null&&m(t,["instances[0]","image"],Dp(i,a));const u=d(e,["config"]);return u!=null&&m(t,["config"],F1(i,u,t)),t}function G1(i,e){const t={},n=d(e,["fps"]);n!=null&&m(t,["fps"],n);const s=d(e,["endOffset"]);s!=null&&m(t,["endOffset"],s);const a=d(e,["startOffset"]);return a!=null&&m(t,["startOffset"],a),t}function H1(i,e){const t={},n=d(e,["data"]);n!=null&&m(t,["data"],n);const s=d(e,["mimeType"]);return s!=null&&m(t,["mimeType"],s),t}function K1(i,e){const t={},n=d(e,["videoMetadata"]);n!=null&&m(t,["videoMetadata"],G1(i,n));const s=d(e,["thought"]);s!=null&&m(t,["thought"],s);const a=d(e,["inlineData"]);a!=null&&m(t,["inlineData"],H1(i,a));const u=d(e,["codeExecutionResult"]);u!=null&&m(t,["codeExecutionResult"],u);const f=d(e,["executableCode"]);f!=null&&m(t,["executableCode"],f);const y=d(e,["fileData"]);y!=null&&m(t,["fileData"],y);const g=d(e,["functionCall"]);g!=null&&m(t,["functionCall"],g);const v=d(e,["functionResponse"]);v!=null&&m(t,["functionResponse"],v);const A=d(e,["text"]);return A!=null&&m(t,["text"],A),t}function Y1(i,e){const t={},n=d(e,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>K1(i,u))),m(t,["parts"],a)}const s=d(e,["role"]);return s!=null&&m(t,["role"],s),t}function $1(i,e){const t={},n=d(e,["citationSources"]);return n!=null&&m(t,["citations"],n),t}function Q1(i,e){const t={},n=d(e,["retrievedUrl"]);n!=null&&m(t,["retrievedUrl"],n);const s=d(e,["urlRetrievalStatus"]);return s!=null&&m(t,["urlRetrievalStatus"],s),t}function W1(i,e){const t={},n=d(e,["urlMetadata"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>Q1(i,a))),m(t,["urlMetadata"],s)}return t}function J1(i,e){const t={},n=d(e,["content"]);n!=null&&m(t,["content"],Y1(i,n));const s=d(e,["citationMetadata"]);s!=null&&m(t,["citationMetadata"],$1(i,s));const a=d(e,["tokenCount"]);a!=null&&m(t,["tokenCount"],a);const u=d(e,["finishReason"]);u!=null&&m(t,["finishReason"],u);const f=d(e,["urlContextMetadata"]);f!=null&&m(t,["urlContextMetadata"],W1(i,f));const y=d(e,["avgLogprobs"]);y!=null&&m(t,["avgLogprobs"],y);const g=d(e,["groundingMetadata"]);g!=null&&m(t,["groundingMetadata"],g);const v=d(e,["index"]);v!=null&&m(t,["index"],v);const A=d(e,["logprobsResult"]);A!=null&&m(t,["logprobsResult"],A);const S=d(e,["safetyRatings"]);return S!=null&&m(t,["safetyRatings"],S),t}function m0(i,e){const t={},n=d(e,["candidates"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(y=>J1(i,y))),m(t,["candidates"],f)}const s=d(e,["modelVersion"]);s!=null&&m(t,["modelVersion"],s);const a=d(e,["promptFeedback"]);a!=null&&m(t,["promptFeedback"],a);const u=d(e,["usageMetadata"]);return u!=null&&m(t,["usageMetadata"],u),t}function X1(i,e){const t={},n=d(e,["values"]);return n!=null&&m(t,["values"],n),t}function j1(){return{}}function Z1(i,e){const t={},n=d(e,["embeddings"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>X1(i,u))),m(t,["embeddings"],a)}return d(e,["metadata"])!=null&&m(t,["metadata"],j1()),t}function eM(i,e){const t={},n=d(e,["bytesBase64Encoded"]);n!=null&&m(t,["imageBytes"],Es(i,n));const s=d(e,["mimeType"]);return s!=null&&m(t,["mimeType"],s),t}function cC(i,e){const t={},n=d(e,["safetyAttributes","categories"]);n!=null&&m(t,["categories"],n);const s=d(e,["safetyAttributes","scores"]);s!=null&&m(t,["scores"],s);const a=d(e,["contentType"]);return a!=null&&m(t,["contentType"],a),t}function tM(i,e){const t={},n=d(e,["_self"]);n!=null&&m(t,["image"],eM(i,n));const s=d(e,["raiFilteredReason"]);s!=null&&m(t,["raiFilteredReason"],s);const a=d(e,["_self"]);return a!=null&&m(t,["safetyAttributes"],cC(i,a)),t}function nM(i,e){const t={},n=d(e,["predictions"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>tM(i,u))),m(t,["generatedImages"],a)}const s=d(e,["positivePromptSafetyAttributes"]);return s!=null&&m(t,["positivePromptSafetyAttributes"],cC(i,s)),t}function iM(i,e){const t={},n=d(e,["baseModel"]);n!=null&&m(t,["baseModel"],n);const s=d(e,["createTime"]);s!=null&&m(t,["createTime"],s);const a=d(e,["updateTime"]);return a!=null&&m(t,["updateTime"],a),t}function Zm(i,e){const t={},n=d(e,["name"]);n!=null&&m(t,["name"],n);const s=d(e,["displayName"]);s!=null&&m(t,["displayName"],s);const a=d(e,["description"]);a!=null&&m(t,["description"],a);const u=d(e,["version"]);u!=null&&m(t,["version"],u);const f=d(e,["_self"]);f!=null&&m(t,["tunedModelInfo"],iM(i,f));const y=d(e,["inputTokenLimit"]);y!=null&&m(t,["inputTokenLimit"],y);const g=d(e,["outputTokenLimit"]);g!=null&&m(t,["outputTokenLimit"],g);const v=d(e,["supportedGenerationMethods"]);return v!=null&&m(t,["supportedActions"],v),t}function rM(i,e){const t={},n=d(e,["nextPageToken"]);n!=null&&m(t,["nextPageToken"],n);const s=d(e,["_self"]);if(s!=null){let a=tC(i,s);Array.isArray(a)&&(a=a.map(u=>Zm(i,u))),m(t,["models"],a)}return t}function sM(){return{}}function oM(i,e){const t={},n=d(e,["totalTokens"]);n!=null&&m(t,["totalTokens"],n);const s=d(e,["cachedContentTokenCount"]);return s!=null&&m(t,["cachedContentTokenCount"],s),t}function aM(i,e){const t={},n=d(e,["video","uri"]);n!=null&&m(t,["uri"],n);const s=d(e,["video","encodedVideo"]);s!=null&&m(t,["videoBytes"],Es(i,s));const a=d(e,["encoding"]);return a!=null&&m(t,["mimeType"],a),t}function lM(i,e){const t={},n=d(e,["_self"]);return n!=null&&m(t,["video"],aM(i,n)),t}function uM(i,e){const t={},n=d(e,["generatedSamples"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(f=>lM(i,f))),m(t,["generatedVideos"],u)}const s=d(e,["raiMediaFilteredCount"]);s!=null&&m(t,["raiMediaFilteredCount"],s);const a=d(e,["raiMediaFilteredReasons"]);return a!=null&&m(t,["raiMediaFilteredReasons"],a),t}function cM(i,e){const t={},n=d(e,["name"]);n!=null&&m(t,["name"],n);const s=d(e,["metadata"]);s!=null&&m(t,["metadata"],s);const a=d(e,["done"]);a!=null&&m(t,["done"],a);const u=d(e,["error"]);u!=null&&m(t,["error"],u);const f=d(e,["response","generateVideoResponse"]);return f!=null&&m(t,["response"],uM(i,f)),t}function fM(i,e){const t={},n=d(e,["fps"]);n!=null&&m(t,["fps"],n);const s=d(e,["endOffset"]);s!=null&&m(t,["endOffset"],s);const a=d(e,["startOffset"]);return a!=null&&m(t,["startOffset"],a),t}function dM(i,e){const t={},n=d(e,["displayName"]);n!=null&&m(t,["displayName"],n);const s=d(e,["data"]);s!=null&&m(t,["data"],s);const a=d(e,["mimeType"]);return a!=null&&m(t,["mimeType"],a),t}function hM(i,e){const t={},n=d(e,["videoMetadata"]);n!=null&&m(t,["videoMetadata"],fM(i,n));const s=d(e,["thought"]);s!=null&&m(t,["thought"],s);const a=d(e,["inlineData"]);a!=null&&m(t,["inlineData"],dM(i,a));const u=d(e,["codeExecutionResult"]);u!=null&&m(t,["codeExecutionResult"],u);const f=d(e,["executableCode"]);f!=null&&m(t,["executableCode"],f);const y=d(e,["fileData"]);y!=null&&m(t,["fileData"],y);const g=d(e,["functionCall"]);g!=null&&m(t,["functionCall"],g);const v=d(e,["functionResponse"]);v!=null&&m(t,["functionResponse"],v);const A=d(e,["text"]);return A!=null&&m(t,["text"],A),t}function mM(i,e){const t={},n=d(e,["parts"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>hM(i,u))),m(t,["parts"],a)}const s=d(e,["role"]);return s!=null&&m(t,["role"],s),t}function pM(i,e){const t={},n=d(e,["citations"]);return n!=null&&m(t,["citations"],n),t}function gM(i,e){const t={},n=d(e,["content"]);n!=null&&m(t,["content"],mM(i,n));const s=d(e,["citationMetadata"]);s!=null&&m(t,["citationMetadata"],pM(i,s));const a=d(e,["finishMessage"]);a!=null&&m(t,["finishMessage"],a);const u=d(e,["finishReason"]);u!=null&&m(t,["finishReason"],u);const f=d(e,["avgLogprobs"]);f!=null&&m(t,["avgLogprobs"],f);const y=d(e,["groundingMetadata"]);y!=null&&m(t,["groundingMetadata"],y);const g=d(e,["index"]);g!=null&&m(t,["index"],g);const v=d(e,["logprobsResult"]);v!=null&&m(t,["logprobsResult"],v);const A=d(e,["safetyRatings"]);return A!=null&&m(t,["safetyRatings"],A),t}function p0(i,e){const t={},n=d(e,["candidates"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(v=>gM(i,v))),m(t,["candidates"],g)}const s=d(e,["createTime"]);s!=null&&m(t,["createTime"],s);const a=d(e,["responseId"]);a!=null&&m(t,["responseId"],a);const u=d(e,["modelVersion"]);u!=null&&m(t,["modelVersion"],u);const f=d(e,["promptFeedback"]);f!=null&&m(t,["promptFeedback"],f);const y=d(e,["usageMetadata"]);return y!=null&&m(t,["usageMetadata"],y),t}function yM(i,e){const t={},n=d(e,["truncated"]);n!=null&&m(t,["truncated"],n);const s=d(e,["token_count"]);return s!=null&&m(t,["tokenCount"],s),t}function _M(i,e){const t={},n=d(e,["values"]);n!=null&&m(t,["values"],n);const s=d(e,["statistics"]);return s!=null&&m(t,["statistics"],yM(i,s)),t}function vM(i,e){const t={},n=d(e,["billableCharacterCount"]);return n!=null&&m(t,["billableCharacterCount"],n),t}function TM(i,e){const t={},n=d(e,["predictions[]","embeddings"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>_M(i,u))),m(t,["embeddings"],a)}const s=d(e,["metadata"]);return s!=null&&m(t,["metadata"],vM(i,s)),t}function EM(i,e){const t={},n=d(e,["gcsUri"]);n!=null&&m(t,["gcsUri"],n);const s=d(e,["bytesBase64Encoded"]);s!=null&&m(t,["imageBytes"],Es(i,s));const a=d(e,["mimeType"]);return a!=null&&m(t,["mimeType"],a),t}function fC(i,e){const t={},n=d(e,["safetyAttributes","categories"]);n!=null&&m(t,["categories"],n);const s=d(e,["safetyAttributes","scores"]);s!=null&&m(t,["scores"],s);const a=d(e,["contentType"]);return a!=null&&m(t,["contentType"],a),t}function Pp(i,e){const t={},n=d(e,["_self"]);n!=null&&m(t,["image"],EM(i,n));const s=d(e,["raiFilteredReason"]);s!=null&&m(t,["raiFilteredReason"],s);const a=d(e,["_self"]);a!=null&&m(t,["safetyAttributes"],fC(i,a));const u=d(e,["prompt"]);return u!=null&&m(t,["enhancedPrompt"],u),t}function CM(i,e){const t={},n=d(e,["predictions"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>Pp(i,u))),m(t,["generatedImages"],a)}const s=d(e,["positivePromptSafetyAttributes"]);return s!=null&&m(t,["positivePromptSafetyAttributes"],fC(i,s)),t}function AM(i,e){const t={},n=d(e,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>Pp(i,a))),m(t,["generatedImages"],s)}return t}function SM(i,e){const t={},n=d(e,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>Pp(i,a))),m(t,["generatedImages"],s)}return t}function wM(i,e){const t={},n=d(e,["endpoint"]);n!=null&&m(t,["name"],n);const s=d(e,["deployedModelId"]);return s!=null&&m(t,["deployedModelId"],s),t}function IM(i,e){const t={},n=d(e,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&m(t,["baseModel"],n);const s=d(e,["createTime"]);s!=null&&m(t,["createTime"],s);const a=d(e,["updateTime"]);return a!=null&&m(t,["updateTime"],a),t}function RM(i,e){const t={},n=d(e,["checkpointId"]);n!=null&&m(t,["checkpointId"],n);const s=d(e,["epoch"]);s!=null&&m(t,["epoch"],s);const a=d(e,["step"]);return a!=null&&m(t,["step"],a),t}function ep(i,e){const t={},n=d(e,["name"]);n!=null&&m(t,["name"],n);const s=d(e,["displayName"]);s!=null&&m(t,["displayName"],s);const a=d(e,["description"]);a!=null&&m(t,["description"],a);const u=d(e,["versionId"]);u!=null&&m(t,["version"],u);const f=d(e,["deployedModels"]);if(f!=null){let S=f;Array.isArray(S)&&(S=S.map(R=>wM(i,R))),m(t,["endpoints"],S)}const y=d(e,["labels"]);y!=null&&m(t,["labels"],y);const g=d(e,["_self"]);g!=null&&m(t,["tunedModelInfo"],IM(i,g));const v=d(e,["defaultCheckpointId"]);v!=null&&m(t,["defaultCheckpointId"],v);const A=d(e,["checkpoints"]);if(A!=null){let S=A;Array.isArray(S)&&(S=S.map(R=>RM(i,R))),m(t,["checkpoints"],S)}return t}function xM(i,e){const t={},n=d(e,["nextPageToken"]);n!=null&&m(t,["nextPageToken"],n);const s=d(e,["_self"]);if(s!=null){let a=tC(i,s);Array.isArray(a)&&(a=a.map(u=>ep(i,u))),m(t,["models"],a)}return t}function bM(){return{}}function NM(i,e){const t={},n=d(e,["totalTokens"]);return n!=null&&m(t,["totalTokens"],n),t}function MM(i,e){const t={},n=d(e,["tokensInfo"]);return n!=null&&m(t,["tokensInfo"],n),t}function DM(i,e){const t={},n=d(e,["gcsUri"]);n!=null&&m(t,["uri"],n);const s=d(e,["bytesBase64Encoded"]);s!=null&&m(t,["videoBytes"],Es(i,s));const a=d(e,["mimeType"]);return a!=null&&m(t,["mimeType"],a),t}function PM(i,e){const t={},n=d(e,["_self"]);return n!=null&&m(t,["video"],DM(i,n)),t}function kM(i,e){const t={},n=d(e,["videos"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(f=>PM(i,f))),m(t,["generatedVideos"],u)}const s=d(e,["raiMediaFilteredCount"]);s!=null&&m(t,["raiMediaFilteredCount"],s);const a=d(e,["raiMediaFilteredReasons"]);return a!=null&&m(t,["raiMediaFilteredReasons"],a),t}function VM(i,e){const t={},n=d(e,["name"]);n!=null&&m(t,["name"],n);const s=d(e,["metadata"]);s!=null&&m(t,["metadata"],s);const a=d(e,["done"]);a!=null&&m(t,["done"],a);const u=d(e,["error"]);u!=null&&m(t,["error"],u);const f=d(e,["response"]);return f!=null&&m(t,["response"],kM(i,f)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const OM="Content-Type",LM="X-Server-Timeout",UM="User-Agent",tp="x-goog-api-client",zM="0.15.0",BM=`google-genai-sdk/${zM}`,FM="v1beta1",qM="v1beta",g0=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class dC extends Error{constructor(e,t){t?super(e,{cause:t}):super(e,{cause:new Error().stack}),this.message=e,this.name="ClientError"}}class np extends Error{constructor(e,t){t?super(e,{cause:t}):super(e,{cause:new Error().stack}),this.message=e,this.name="ServerError"}}class GM{constructor(e){var t,n;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:FM,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:qM,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const n=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&n.push(e.apiVersion),n.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,n){const s=[this.getRequestUrlInternal(t)];return n&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,t,n);if(e.queryParams)for(const[u,f]of Object.entries(e.queryParams))s.searchParams.append(u,String(f));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,t,e.abortSignal),this.unaryApiCall(s,a,e.httpMethod)}patchHttpOptions(e,t){const n=JSON.parse(JSON.stringify(e));for(const[s,a]of Object.entries(t))typeof a=="object"?n[s]=Object.assign(Object.assign({},n[s]),a):a!==void 0&&(n[s]=a);return n}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,t,n);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,t,e.abortSignal),this.streamApiCall(s,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,n){if(t&&t.timeout||n){const s=new AbortController,a=s.signal;t.timeout&&(t==null?void 0:t.timeout)>0&&setTimeout(()=>s.abort(),t.timeout),n&&n.addEventListener("abort",()=>{s.abort()}),e.signal=a}return e.headers=await this.getHeadersInternal(t),e}async unaryApiCall(e,t,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:n})).then(async s=>(await y0(s),new Wm(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,t,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:n})).then(async s=>(await y0(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){var t;return au(this,arguments,function*(){const s=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),a=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let u="";for(;;){const{done:f,value:y}=yield At(s.read());if(f){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const g=a.decode(y);try{const A=JSON.parse(g);if("error"in A){const S=JSON.parse(JSON.stringify(A.error)),R=S.status,V=S.code,H=`got status: ${R}. ${JSON.stringify(A)}`;if(V>=400&&V<500)throw new dC(H);if(V>=500&&V<600)throw new np(H)}}catch(A){const S=A;if(S.name==="ClientError"||S.name==="ServerError")throw A}u+=g;let v=u.match(g0);for(;v;){const A=v[1];try{const S=new Response(A,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield At(new Wm(S)),u=u.slice(v[0].length),v=u.match(g0)}catch(S){throw new Error(`exception parsing stream chunk ${A}. ${S}`)}}}}finally{s.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(n=>{throw new Error(`exception ${n} sending request`)})}getDefaultHeaders(){const e={},t=BM+" "+this.clientOptions.userAgentExtra;return e[UM]=t,e[tp]=t,e[OM]="application/json",e}async getHeadersInternal(e){const t=new Headers;if(e&&e.headers){for(const[n,s]of Object.entries(e.headers))t.append(n,s);e.timeout&&e.timeout>0&&t.append(LM,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(t),t}async uploadFile(e,t){var n;const s={};t!=null&&(s.mimeType=t.mimeType,s.name=t.name,s.displayName=t.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const a=this.clientOptions.uploader,u=await a.stat(e);s.sizeBytes=String(u.size);const f=(n=t==null?void 0:t.mimeType)!==null&&n!==void 0?n:u.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=f;const y=await this.fetchUploadUrl(s,t);return a.upload(e,y,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t){var n;let s={};t!=null&&t.httpOptions?s=t.httpOptions:s={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const a={file:e},u=await this.request({path:De("upload/v1beta/files",a._url),body:JSON.stringify(a),httpMethod:"POST",httpOptions:s});if(!u||!(u!=null&&u.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const f=(n=u==null?void 0:u.headers)===null||n===void 0?void 0:n["x-goog-upload-url"];if(f===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return f}}async function y0(i){var e;if(i===void 0)throw new np("response is undefined");if(!i.ok){const t=i.status,n=i.statusText;let s;!((e=i.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await i.json():s={error:{message:await i.text(),code:i.status,status:i.statusText}};const a=`got status: ${t} ${n}. ${JSON.stringify(s)}`;throw t>=400&&t<500?new dC(a):t>=500&&t<600?new np(a):new Error(a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const HM="mcp_used/unknown";function ip(i){for(const e of i)if(kp(e)||typeof e=="object"&&"inputSchema"in e)return!0;return!1}function rp(i){var e;i[tp]=(((e=i[tp])!==null&&e!==void 0?e:"")+` ${HM}`).trimStart()}function KM(i){var e,t,n;return(n=(t=(e=i.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(s=>kp(s)))!==null&&n!==void 0?n:!1}function YM(i){var e,t,n;return(n=(t=(e=i.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(s=>!kp(s)))!==null&&n!==void 0?n:!1}function kp(i){return i!==null&&typeof i=="object"&&"tool"in i&&"callTool"in i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function $M(i,e,t){const n=new rR,s=JSON.parse(t.data),a=hN(i,s);Object.assign(n,a),e(n)}class QM{constructor(e,t,n){this.apiClient=e,this.auth=t,this.webSocketFactory=n}async connect(e){var t,n;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),u=XM(this.apiClient.getDefaultHeaders()),f=this.apiClient.getApiKey(),y=`${s}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${f}`;let g=()=>{};const v=new Promise(oe=>{g=oe}),A=e.callbacks,S=function(){g({})},R=this.apiClient,V={onopen:S,onmessage:oe=>{$M(R,A.onmessage,oe)},onerror:(t=A==null?void 0:A.onerror)!==null&&t!==void 0?t:function(oe){},onclose:(n=A==null?void 0:A.onclose)!==null&&n!==void 0?n:function(oe){}},H=this.webSocketFactory.create(y,JM(u),V);H.connect(),await v;const Y=vt(this.apiClient,e.model),ce=oC(this.apiClient,{model:Y}),le=jm(this.apiClient,{setup:ce});return H.send(JSON.stringify(le)),new WM(H,this.apiClient)}}class WM{constructor(e,t){this.conn=e,this.apiClient=t}async setClientContent(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=bb(this.apiClient,e),n=aC(this.apiClient,t);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=Nb(this.apiClient,e),n=jm(this.apiClient,t);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const t=jm(this.apiClient,{playbackControl:e});this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(ya.PLAY)}pause(){this.sendPlaybackControl(ya.PAUSE)}stop(){this.sendPlaybackControl(ya.STOP)}resetContext(){this.sendPlaybackControl(ya.RESET_CONTEXT)}close(){this.conn.close()}}function JM(i){const e={};return i.forEach((t,n)=>{e[n]=t}),e}function XM(i){const e=new Headers;for(const[t,n]of Object.entries(i))e.append(t,n);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jM="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function ZM(i,e,t){const n=new iR;let s;if(t.data instanceof Blob?s=JSON.parse(await t.data.text()):s=JSON.parse(t.data),i.isVertexAI()){const a=rN(i,s);Object.assign(n,a)}else{const a=iN(i,s);Object.assign(n,a)}e(n)}class eD{constructor(e,t,n){this.apiClient=e,this.auth=t,this.webSocketFactory=n,this.music=new QM(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,n,s,a,u,f;const y=this.apiClient.getWebsocketBaseUrl(),g=this.apiClient.getApiVersion();let v;const A=this.apiClient.getDefaultHeaders();e.config&&e.config.tools&&ip(e.config.tools)&&rp(A);const S=rD(A);if(this.apiClient.isVertexAI())v=`${y}/ws/google.cloud.aiplatform.${g}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S);else{const x=this.apiClient.getApiKey();v=`${y}/ws/google.ai.generativelanguage.${g}.GenerativeService.BidiGenerateContent?key=${x}`}let R=()=>{};const V=new Promise(x=>{R=x}),H=e.callbacks,Y=function(){var x;(x=H==null?void 0:H.onopen)===null||x===void 0||x.call(H),R({})},ce=this.apiClient,le={onopen:Y,onmessage:x=>{ZM(ce,H.onmessage,x)},onerror:(t=H==null?void 0:H.onerror)!==null&&t!==void 0?t:function(x){},onclose:(n=H==null?void 0:H.onclose)!==null&&n!==void 0?n:function(x){}},oe=this.webSocketFactory.create(v,iD(S),le);oe.connect(),await V;let pe=vt(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&pe.startsWith("publishers/")){const x=this.apiClient.getProject(),k=this.apiClient.getLocation();pe=`projects/${x}/locations/${k}/`+pe}let fe={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Df.AUDIO]}:e.config.responseModalities=[Df.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const Te=(f=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&f!==void 0?f:[],O=[];for(const x of Te)if(this.isCallableTool(x)){const k=x;O.push(await k.tool())}else O.push(x);O.length>0&&(e.config.tools=O);const b={model:pe,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?fe=Cb(this.apiClient,b):fe=Eb(this.apiClient,b),delete fe.config,oe.send(JSON.stringify(fe)),new nD(oe,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const tD={turnComplete:!0};class nD{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let n=[];try{n=fi(e,t.turns),e.isVertexAI()?n=n.map(s=>za(e,s)):n=n.map(s=>Zf(e,s))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:n,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let n=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?n=t.functionResponses:n=[t.functionResponses],n.length===0)throw new Error("functionResponses is required.");for(const a of n){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(jM)}return{toolResponse:{functionResponses:n}}}sendClientContent(e){e=Object.assign(Object.assign({},tD),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:xb(this.apiClient,e)}:t={realtimeInput:Rb(this.apiClient,e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function iD(i){const e={};return i.forEach((t,n)=>{e[n]=t}),e}function rD(i){const e=new Headers;for(const[t,n]of Object.entries(i))e.append(t,n);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _0=10;function v0(i){var e,t,n;if(!((e=i==null?void 0:i.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const u of(t=i==null?void 0:i.tools)!==null&&t!==void 0?t:[])if(gf(u)){s=!0;break}if(!s)return!0;const a=(n=i==null?void 0:i.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function gf(i){return"callTool"in i&&typeof i.callTool=="function"}function T0(i){var e;return!(!((e=i==null?void 0:i.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sD extends wu{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var n,s,a,u,f;if(t.config&&t.config.tools&&ip(t.config.tools)&&(t.config.httpOptions||(t.config.httpOptions={}),t.config.httpOptions.headers||(t.config.httpOptions.headers=this.apiClient.getDefaultHeaders()),rp(t.config.httpOptions.headers)),!KM(t)||v0(t.config))return await this.generateContentInternal(t);if(YM(t))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");const y=await this.transformCallableTools(t);let g,v;const A=fi(this.apiClient,y.contents),S=(a=(s=(n=y.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&a!==void 0?a:_0;let R=0;for(;R<S&&(g=await this.generateContentInternal(y),!(!g.functionCalls||g.functionCalls.length===0));){const V=g.candidates[0].content,H=[];for(const Y of(f=(u=t.config)===null||u===void 0?void 0:u.tools)!==null&&f!==void 0?f:[])if(gf(Y)){const le=await Y.callTool(g.functionCalls);H.push(...le)}R++,v={role:"user",parts:H},y.contents=fi(this.apiClient,y.contents),y.contents.push(V),y.contents.push(v),T0(y.config)&&(A.push(V),A.push(v))}return T0(y.config)&&(g.automaticFunctionCallingHistory=A),g},this.generateContentStream=async t=>{if(t.config&&t.config.tools&&ip(t.config.tools)&&(t.config.httpOptions||(t.config.httpOptions={}),t.config.httpOptions.headers||(t.config.httpOptions.headers=this.apiClient.getDefaultHeaders()),rp(t.config.httpOptions.headers)),v0(t.config)){const n=await this.transformCallableTools(t);return await this.generateContentStreamInternal(n)}else return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(n=>{var s;let a;const u=[];if(n!=null&&n.generatedImages)for(const y of n.generatedImages)y&&(y!=null&&y.safetyAttributes)&&((s=y==null?void 0:y.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?a=y==null?void 0:y.safetyAttributes:u.push(y);let f;return a?f={generatedImages:u,positivePromptSafetyAttributes:a}:f={generatedImages:u},f}),this.list=async t=>{var n;const u={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((n=u.config)===null||n===void 0)&&n.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new jf(xa.PAGED_ITEM_MODELS,f=>this.listInternal(f),await this.listInternal(u),u)},this.editImage=async t=>{const n={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(n.referenceImages=t.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(n)},this.upscaleImage=async t=>{let n={numberOfImages:1,mode:"upscale"};t.config&&(n=Object.assign(Object.assign({},n),t.config));const s={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:n};return await this.upscaleImageInternal(s)}}async transformCallableTools(e){var t;const n=(t=e.config)===null||t===void 0?void 0:t.tools;if(!n)return e;const s=await Promise.all(n.map(async u=>gf(u)?await u.tool():u)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:s})};return a.config.tools=s,a}async initAfcToolsMap(e){var t,n,s;const a=new Map;for(const u of(n=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&n!==void 0?n:[])if(gf(u)){const f=u,y=await f.tool();for(const g of(s=y.functionDeclarations)!==null&&s!==void 0?s:[]){if(!g.name)throw new Error("Function declaration name is required.");if(a.has(g.name))throw new Error(`Duplicate tool declaration name: ${g.name}`);a.set(g.name,f)}}return a}async processAfcStream(e){var t,n,s;const a=(s=(n=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls)!==null&&s!==void 0?s:_0;let u=!1,f=0;const y=await this.initAfcToolsMap(e);return function(g,v,A){var S,R;return au(this,arguments,function*(){for(var V,H,Y,ce;f<a;){u&&(f++,u=!1);const fe=yield At(g.transformCallableTools(A)),Te=yield At(g.generateContentStreamInternal(fe)),O=[],b=[];try{for(var le=!0,oe=(H=void 0,pf(Te)),pe;pe=yield At(oe.next()),V=pe.done,!V;le=!0){ce=pe.value,le=!1;const x=ce;if(yield yield At(x),x.candidates&&(!((S=x.candidates[0])===null||S===void 0)&&S.content)){b.push(x.candidates[0].content);for(const k of(R=x.candidates[0].content.parts)!==null&&R!==void 0?R:[])if(f<a&&k.functionCall){if(!k.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(k.functionCall.name)){const U=yield At(v.get(k.functionCall.name).callTool([k.functionCall]));O.push(...U)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${k.functionCall.name}`)}}}}catch(x){H={error:x}}finally{try{!le&&!V&&(Y=oe.return)&&(yield At(Y.call(oe)))}finally{if(H)throw H.error}}if(O.length>0){u=!0;const x=new jl;x.candidates=[{content:{role:"user",parts:O}}],yield yield At(x);const k=[];k.push(...b),k.push({role:"user",parts:O});const U=fi(g.apiClient,A.contents).concat(k);A.contents=U}else break}})}(this,y,e)}async generateContentInternal(e){var t,n,s,a;let u,f="",y={};if(this.apiClient.isVertexAI()){const g=h0(this.apiClient,e);return f=De("{model}:generateContent",g._url),y=g._query,delete g.config,delete g._url,delete g._query,u=this.apiClient.request({path:f,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(v=>v.json()),u.then(v=>{const A=p0(this.apiClient,v),S=new jl;return Object.assign(S,A),S})}else{const g=d0(this.apiClient,e);return f=De("{model}:generateContent",g._url),y=g._query,delete g.config,delete g._url,delete g._query,u=this.apiClient.request({path:f,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>{const A=m0(this.apiClient,v),S=new jl;return Object.assign(S,A),S})}}async generateContentStreamInternal(e){var t,n,s,a;let u,f="",y={};if(this.apiClient.isVertexAI()){const g=h0(this.apiClient,e);f=De("{model}:streamGenerateContent?alt=sse",g._url),y=g._query,delete g.config,delete g._url,delete g._query;const v=this.apiClient;return u=v.requestStream({path:f,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}),u.then(function(A){return au(this,arguments,function*(){var S,R,V,H;try{for(var Y=!0,ce=pf(A),le;le=yield At(ce.next()),S=le.done,!S;Y=!0){H=le.value,Y=!1;const pe=p0(v,yield At(H.json())),fe=new jl;Object.assign(fe,pe),yield yield At(fe)}}catch(oe){R={error:oe}}finally{try{!Y&&!S&&(V=ce.return)&&(yield At(V.call(ce)))}finally{if(R)throw R.error}}})})}else{const g=d0(this.apiClient,e);f=De("{model}:streamGenerateContent?alt=sse",g._url),y=g._query,delete g.config,delete g._url,delete g._query;const v=this.apiClient;return u=v.requestStream({path:f,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),u.then(function(A){return au(this,arguments,function*(){var S,R,V,H;try{for(var Y=!0,ce=pf(A),le;le=yield At(ce.next()),S=le.done,!S;Y=!0){H=le.value,Y=!1;const pe=m0(v,yield At(H.json())),fe=new jl;Object.assign(fe,pe),yield yield At(fe)}}catch(oe){R={error:oe}}finally{try{!Y&&!S&&(V=ce.return)&&(yield At(V.call(ce)))}finally{if(R)throw R.error}}})})}}async embedContent(e){var t,n,s,a;let u,f="",y={};if(this.apiClient.isVertexAI()){const g=T1(this.apiClient,e);return f=De("{model}:predict",g._url),y=g._query,delete g.config,delete g._url,delete g._query,u=this.apiClient.request({path:f,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(v=>v.json()),u.then(v=>{const A=TM(this.apiClient,v),S=new YT;return Object.assign(S,A),S})}else{const g=ON(this.apiClient,e);return f=De("{model}:batchEmbedContents",g._url),y=g._query,delete g.config,delete g._url,delete g._query,u=this.apiClient.request({path:f,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>{const A=Z1(this.apiClient,v),S=new YT;return Object.assign(S,A),S})}}async generateImagesInternal(e){var t,n,s,a;let u,f="",y={};if(this.apiClient.isVertexAI()){const g=C1(this.apiClient,e);return f=De("{model}:predict",g._url),y=g._query,delete g.config,delete g._url,delete g._query,u=this.apiClient.request({path:f,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(v=>v.json()),u.then(v=>{const A=CM(this.apiClient,v),S=new $T;return Object.assign(S,A),S})}else{const g=UN(this.apiClient,e);return f=De("{model}:predict",g._url),y=g._query,delete g.config,delete g._url,delete g._query,u=this.apiClient.request({path:f,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>{const A=nM(this.apiClient,v),S=new $T;return Object.assign(S,A),S})}}async editImageInternal(e){var t,n;let s,a="",u={};if(this.apiClient.isVertexAI()){const f=b1(this.apiClient,e);return a=De("{model}:predict",f._url),u=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),s.then(y=>{const g=AM(this.apiClient,y),v=new XI;return Object.assign(v,g),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,n;let s,a="",u={};if(this.apiClient.isVertexAI()){const f=M1(this.apiClient,e);return a=De("{model}:predict",f._url),u=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),s.then(y=>{const g=SM(this.apiClient,y),v=new jI;return Object.assign(v,g),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,n,s,a;let u,f="",y={};if(this.apiClient.isVertexAI()){const g=D1(this.apiClient,e);return f=De("{name}",g._url),y=g._query,delete g.config,delete g._url,delete g._query,u=this.apiClient.request({path:f,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(v=>v.json()),u.then(v=>ep(this.apiClient,v))}else{const g=zN(this.apiClient,e);return f=De("{name}",g._url),y=g._query,delete g.config,delete g._url,delete g._query,u=this.apiClient.request({path:f,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>Zm(this.apiClient,v))}}async listInternal(e){var t,n,s,a;let u,f="",y={};if(this.apiClient.isVertexAI()){const g=k1(this.apiClient,e);return f=De("{models_url}",g._url),y=g._query,delete g.config,delete g._url,delete g._query,u=this.apiClient.request({path:f,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(v=>v.json()),u.then(v=>{const A=xM(this.apiClient,v),S=new QT;return Object.assign(S,A),S})}else{const g=FN(this.apiClient,e);return f=De("{models_url}",g._url),y=g._query,delete g.config,delete g._url,delete g._query,u=this.apiClient.request({path:f,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>{const A=rM(this.apiClient,v),S=new QT;return Object.assign(S,A),S})}}async update(e){var t,n,s,a;let u,f="",y={};if(this.apiClient.isVertexAI()){const g=O1(this.apiClient,e);return f=De("{model}",g._url),y=g._query,delete g.config,delete g._url,delete g._query,u=this.apiClient.request({path:f,queryParams:y,body:JSON.stringify(g),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(v=>v.json()),u.then(v=>ep(this.apiClient,v))}else{const g=GN(this.apiClient,e);return f=De("{name}",g._url),y=g._query,delete g.config,delete g._url,delete g._query,u=this.apiClient.request({path:f,queryParams:y,body:JSON.stringify(g),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>Zm(this.apiClient,v))}}async delete(e){var t,n,s,a;let u,f="",y={};if(this.apiClient.isVertexAI()){const g=L1(this.apiClient,e);return f=De("{name}",g._url),y=g._query,delete g.config,delete g._url,delete g._query,u=this.apiClient.request({path:f,queryParams:y,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(v=>v.json()),u.then(()=>{const v=bM(),A=new WT;return Object.assign(A,v),A})}else{const g=HN(this.apiClient,e);return f=De("{name}",g._url),y=g._query,delete g.config,delete g._url,delete g._query,u=this.apiClient.request({path:f,queryParams:y,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(()=>{const v=sM(),A=new WT;return Object.assign(A,v),A})}}async countTokens(e){var t,n,s,a;let u,f="",y={};if(this.apiClient.isVertexAI()){const g=z1(this.apiClient,e);return f=De("{model}:countTokens",g._url),y=g._query,delete g.config,delete g._url,delete g._query,u=this.apiClient.request({path:f,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(v=>v.json()),u.then(v=>{const A=NM(this.apiClient,v),S=new JT;return Object.assign(S,A),S})}else{const g=YN(this.apiClient,e);return f=De("{model}:countTokens",g._url),y=g._query,delete g.config,delete g._url,delete g._query,u=this.apiClient.request({path:f,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>{const A=oM(this.apiClient,v),S=new JT;return Object.assign(S,A),S})}}async computeTokens(e){var t,n;let s,a="",u={};if(this.apiClient.isVertexAI()){const f=B1(this.apiClient,e);return a=De("{model}:computeTokens",f._url),u=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),s.then(y=>{const g=MM(this.apiClient,y),v=new ZI;return Object.assign(v,g),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(e){var t,n,s,a;let u,f="",y={};if(this.apiClient.isVertexAI()){const g=q1(this.apiClient,e);return f=De("{model}:predictLongRunning",g._url),y=g._query,delete g.config,delete g._url,delete g._query,u=this.apiClient.request({path:f,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(v=>v.json()),u.then(v=>VM(this.apiClient,v))}else{const g=WN(this.apiClient,e);return f=De("{model}:predictLongRunning",g._url),y=g._query,delete g.config,delete g._url,delete g._query,u=this.apiClient.request({path:f,queryParams:y,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>cM(this.apiClient,v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function oD(i,e){const t={},n=d(e,["operationName"]);n!=null&&m(t,["_url","operationName"],n);const s=d(e,["config"]);return s!=null&&m(t,["config"],s),t}function aD(i,e){const t={},n=d(e,["operationName"]);n!=null&&m(t,["_url","operationName"],n);const s=d(e,["config"]);return s!=null&&m(t,["config"],s),t}function lD(i,e){const t={},n=d(e,["operationName"]);n!=null&&m(t,["operationName"],n);const s=d(e,["resourceName"]);s!=null&&m(t,["_url","resourceName"],s);const a=d(e,["config"]);return a!=null&&m(t,["config"],a),t}function uD(i,e){const t={},n=d(e,["video","uri"]);n!=null&&m(t,["uri"],n);const s=d(e,["video","encodedVideo"]);s!=null&&m(t,["videoBytes"],Es(i,s));const a=d(e,["encoding"]);return a!=null&&m(t,["mimeType"],a),t}function cD(i,e){const t={},n=d(e,["_self"]);return n!=null&&m(t,["video"],uD(i,n)),t}function fD(i,e){const t={},n=d(e,["generatedSamples"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(f=>cD(i,f))),m(t,["generatedVideos"],u)}const s=d(e,["raiMediaFilteredCount"]);s!=null&&m(t,["raiMediaFilteredCount"],s);const a=d(e,["raiMediaFilteredReasons"]);return a!=null&&m(t,["raiMediaFilteredReasons"],a),t}function dD(i,e){const t={},n=d(e,["name"]);n!=null&&m(t,["name"],n);const s=d(e,["metadata"]);s!=null&&m(t,["metadata"],s);const a=d(e,["done"]);a!=null&&m(t,["done"],a);const u=d(e,["error"]);u!=null&&m(t,["error"],u);const f=d(e,["response","generateVideoResponse"]);return f!=null&&m(t,["response"],fD(i,f)),t}function hD(i,e){const t={},n=d(e,["gcsUri"]);n!=null&&m(t,["uri"],n);const s=d(e,["bytesBase64Encoded"]);s!=null&&m(t,["videoBytes"],Es(i,s));const a=d(e,["mimeType"]);return a!=null&&m(t,["mimeType"],a),t}function mD(i,e){const t={},n=d(e,["_self"]);return n!=null&&m(t,["video"],hD(i,n)),t}function pD(i,e){const t={},n=d(e,["videos"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(f=>mD(i,f))),m(t,["generatedVideos"],u)}const s=d(e,["raiMediaFilteredCount"]);s!=null&&m(t,["raiMediaFilteredCount"],s);const a=d(e,["raiMediaFilteredReasons"]);return a!=null&&m(t,["raiMediaFilteredReasons"],a),t}function E0(i,e){const t={},n=d(e,["name"]);n!=null&&m(t,["name"],n);const s=d(e,["metadata"]);s!=null&&m(t,["metadata"],s);const a=d(e,["done"]);a!=null&&m(t,["done"],a);const u=d(e,["error"]);u!=null&&m(t,["error"],u);const f=d(e,["response"]);return f!=null&&m(t,["response"],pD(i,f)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gD extends wu{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,n=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=t.name.split("/operations/")[0];let a;return n&&"httpOptions"in n&&(a=n.httpOptions),this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:s,config:{httpOptions:a}})}else return this.getVideosOperationInternal({operationName:t.name,config:n})}async getVideosOperationInternal(e){var t,n,s,a;let u,f="",y={};if(this.apiClient.isVertexAI()){const g=aD(this.apiClient,e);return f=De("{operationName}",g._url),y=g._query,delete g.config,delete g._url,delete g._query,u=this.apiClient.request({path:f,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(v=>v.json()),u.then(v=>E0(this.apiClient,v))}else{const g=oD(this.apiClient,e);return f=De("{operationName}",g._url),y=g._query,delete g.config,delete g._url,delete g._query,u=this.apiClient.request({path:f,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>dD(this.apiClient,v))}}async fetchPredictVideosOperationInternal(e){var t,n;let s,a="",u={};if(this.apiClient.isVertexAI()){const f=lD(this.apiClient,e);return a=De("{resourceName}:fetchPredictOperation",f._url),u=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),s.then(y=>E0(this.apiClient,y))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yD(i,e){const t={},n=d(e,["name"]);n!=null&&m(t,["_url","name"],n);const s=d(e,["config"]);return s!=null&&m(t,["config"],s),t}function _D(i,e,t){const n={},s=d(e,["pageSize"]);t!==void 0&&s!=null&&m(t,["_query","pageSize"],s);const a=d(e,["pageToken"]);t!==void 0&&a!=null&&m(t,["_query","pageToken"],a);const u=d(e,["filter"]);return t!==void 0&&u!=null&&m(t,["_query","filter"],u),n}function vD(i,e){const t={},n=d(e,["config"]);return n!=null&&m(t,["config"],_D(i,n,t)),t}function TD(i,e){const t={},n=d(e,["textInput"]);n!=null&&m(t,["textInput"],n);const s=d(e,["output"]);return s!=null&&m(t,["output"],s),t}function ED(i,e){const t={};if(d(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=d(e,["examples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>TD(i,a))),m(t,["examples","examples"],s)}return t}function CD(i,e,t){const n={};if(d(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=d(e,["tunedModelDisplayName"]);if(t!==void 0&&s!=null&&m(t,["displayName"],s),d(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=d(e,["epochCount"]);t!==void 0&&a!=null&&m(t,["tuningTask","hyperparameters","epochCount"],a);const u=d(e,["learningRateMultiplier"]);if(u!=null&&m(n,["tuningTask","hyperparameters","learningRateMultiplier"],u),d(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(d(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const f=d(e,["batchSize"]);t!==void 0&&f!=null&&m(t,["tuningTask","hyperparameters","batchSize"],f);const y=d(e,["learningRate"]);return t!==void 0&&y!=null&&m(t,["tuningTask","hyperparameters","learningRate"],y),n}function AD(i,e){const t={},n=d(e,["baseModel"]);n!=null&&m(t,["baseModel"],n);const s=d(e,["trainingDataset"]);s!=null&&m(t,["tuningTask","trainingData"],ED(i,s));const a=d(e,["config"]);return a!=null&&m(t,["config"],CD(i,a,t)),t}function SD(i,e){const t={},n=d(e,["name"]);n!=null&&m(t,["_url","name"],n);const s=d(e,["config"]);return s!=null&&m(t,["config"],s),t}function wD(i,e,t){const n={},s=d(e,["pageSize"]);t!==void 0&&s!=null&&m(t,["_query","pageSize"],s);const a=d(e,["pageToken"]);t!==void 0&&a!=null&&m(t,["_query","pageToken"],a);const u=d(e,["filter"]);return t!==void 0&&u!=null&&m(t,["_query","filter"],u),n}function ID(i,e){const t={},n=d(e,["config"]);return n!=null&&m(t,["config"],wD(i,n,t)),t}function RD(i,e,t){const n={},s=d(e,["gcsUri"]);if(t!==void 0&&s!=null&&m(t,["supervisedTuningSpec","trainingDatasetUri"],s),d(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function xD(i,e){const t={},n=d(e,["gcsUri"]);return n!=null&&m(t,["validationDatasetUri"],n),t}function bD(i,e,t){const n={},s=d(e,["validationDataset"]);t!==void 0&&s!=null&&m(t,["supervisedTuningSpec"],xD(i,s));const a=d(e,["tunedModelDisplayName"]);t!==void 0&&a!=null&&m(t,["tunedModelDisplayName"],a);const u=d(e,["description"]);t!==void 0&&u!=null&&m(t,["description"],u);const f=d(e,["epochCount"]);t!==void 0&&f!=null&&m(t,["supervisedTuningSpec","hyperParameters","epochCount"],f);const y=d(e,["learningRateMultiplier"]);t!==void 0&&y!=null&&m(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],y);const g=d(e,["exportLastCheckpointOnly"]);t!==void 0&&g!=null&&m(t,["supervisedTuningSpec","exportLastCheckpointOnly"],g);const v=d(e,["adapterSize"]);if(t!==void 0&&v!=null&&m(t,["supervisedTuningSpec","hyperParameters","adapterSize"],v),d(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(d(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return n}function ND(i,e){const t={},n=d(e,["baseModel"]);n!=null&&m(t,["baseModel"],n);const s=d(e,["trainingDataset"]);s!=null&&m(t,["supervisedTuningSpec","trainingDatasetUri"],RD(i,s,t));const a=d(e,["config"]);return a!=null&&m(t,["config"],bD(i,a,t)),t}function MD(i,e){const t={},n=d(e,["name"]);n!=null&&m(t,["model"],n);const s=d(e,["name"]);return s!=null&&m(t,["endpoint"],s),t}function hC(i,e){const t={},n=d(e,["name"]);n!=null&&m(t,["name"],n);const s=d(e,["state"]);s!=null&&m(t,["state"],jE(i,s));const a=d(e,["createTime"]);a!=null&&m(t,["createTime"],a);const u=d(e,["tuningTask","startTime"]);u!=null&&m(t,["startTime"],u);const f=d(e,["tuningTask","completeTime"]);f!=null&&m(t,["endTime"],f);const y=d(e,["updateTime"]);y!=null&&m(t,["updateTime"],y);const g=d(e,["description"]);g!=null&&m(t,["description"],g);const v=d(e,["baseModel"]);v!=null&&m(t,["baseModel"],v);const A=d(e,["_self"]);A!=null&&m(t,["tunedModel"],MD(i,A));const S=d(e,["distillationSpec"]);S!=null&&m(t,["distillationSpec"],S);const R=d(e,["experiment"]);R!=null&&m(t,["experiment"],R);const V=d(e,["labels"]);V!=null&&m(t,["labels"],V);const H=d(e,["pipelineJob"]);H!=null&&m(t,["pipelineJob"],H);const Y=d(e,["tunedModelDisplayName"]);return Y!=null&&m(t,["tunedModelDisplayName"],Y),t}function DD(i,e){const t={},n=d(e,["nextPageToken"]);n!=null&&m(t,["nextPageToken"],n);const s=d(e,["tunedModels"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>hC(i,u))),m(t,["tuningJobs"],a)}return t}function PD(i,e){const t={},n=d(e,["name"]);n!=null&&m(t,["name"],n);const s=d(e,["metadata"]);s!=null&&m(t,["metadata"],s);const a=d(e,["done"]);a!=null&&m(t,["done"],a);const u=d(e,["error"]);return u!=null&&m(t,["error"],u),t}function kD(i,e){const t={},n=d(e,["checkpointId"]);n!=null&&m(t,["checkpointId"],n);const s=d(e,["epoch"]);s!=null&&m(t,["epoch"],s);const a=d(e,["step"]);a!=null&&m(t,["step"],a);const u=d(e,["endpoint"]);return u!=null&&m(t,["endpoint"],u),t}function VD(i,e){const t={},n=d(e,["model"]);n!=null&&m(t,["model"],n);const s=d(e,["endpoint"]);s!=null&&m(t,["endpoint"],s);const a=d(e,["checkpoints"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(f=>kD(i,f))),m(t,["checkpoints"],u)}return t}function sp(i,e){const t={},n=d(e,["name"]);n!=null&&m(t,["name"],n);const s=d(e,["state"]);s!=null&&m(t,["state"],jE(i,s));const a=d(e,["createTime"]);a!=null&&m(t,["createTime"],a);const u=d(e,["startTime"]);u!=null&&m(t,["startTime"],u);const f=d(e,["endTime"]);f!=null&&m(t,["endTime"],f);const y=d(e,["updateTime"]);y!=null&&m(t,["updateTime"],y);const g=d(e,["error"]);g!=null&&m(t,["error"],g);const v=d(e,["description"]);v!=null&&m(t,["description"],v);const A=d(e,["baseModel"]);A!=null&&m(t,["baseModel"],A);const S=d(e,["tunedModel"]);S!=null&&m(t,["tunedModel"],VD(i,S));const R=d(e,["supervisedTuningSpec"]);R!=null&&m(t,["supervisedTuningSpec"],R);const V=d(e,["tuningDataStats"]);V!=null&&m(t,["tuningDataStats"],V);const H=d(e,["encryptionSpec"]);H!=null&&m(t,["encryptionSpec"],H);const Y=d(e,["partnerModelTuningSpec"]);Y!=null&&m(t,["partnerModelTuningSpec"],Y);const ce=d(e,["distillationSpec"]);ce!=null&&m(t,["distillationSpec"],ce);const le=d(e,["experiment"]);le!=null&&m(t,["experiment"],le);const oe=d(e,["labels"]);oe!=null&&m(t,["labels"],oe);const pe=d(e,["pipelineJob"]);pe!=null&&m(t,["pipelineJob"],pe);const fe=d(e,["tunedModelDisplayName"]);return fe!=null&&m(t,["tunedModelDisplayName"],fe),t}function OD(i,e){const t={},n=d(e,["nextPageToken"]);n!=null&&m(t,["nextPageToken"],n);const s=d(e,["tuningJobs"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>sp(i,u))),m(t,["tuningJobs"],a)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class LD extends wu{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new jf(xa.PAGED_ITEM_TUNING_JOBS,n=>this.listInternal(n),await this.listInternal(t),t),this.tune=async t=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(t);{const n=await this.tuneMldevInternal(t);let s="";return n.metadata!==void 0&&n.metadata.tunedModel!==void 0?s=n.metadata.tunedModel:n.name!==void 0&&n.name.includes("/operations/")&&(s=n.name.split("/operations/")[0]),{name:s,state:Qm.JOB_STATE_QUEUED}}}}async getInternal(e){var t,n,s,a;let u,f="",y={};if(this.apiClient.isVertexAI()){const g=SD(this.apiClient,e);return f=De("{name}",g._url),y=g._query,delete g.config,delete g._url,delete g._query,u=this.apiClient.request({path:f,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(v=>v.json()),u.then(v=>sp(this.apiClient,v))}else{const g=yD(this.apiClient,e);return f=De("{name}",g._url),y=g._query,delete g.config,delete g._url,delete g._query,u=this.apiClient.request({path:f,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>hC(this.apiClient,v))}}async listInternal(e){var t,n,s,a;let u,f="",y={};if(this.apiClient.isVertexAI()){const g=ID(this.apiClient,e);return f=De("tuningJobs",g._url),y=g._query,delete g.config,delete g._url,delete g._query,u=this.apiClient.request({path:f,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(v=>v.json()),u.then(v=>{const A=OD(this.apiClient,v),S=new XT;return Object.assign(S,A),S})}else{const g=vD(this.apiClient,e);return f=De("tunedModels",g._url),y=g._query,delete g.config,delete g._url,delete g._query,u=this.apiClient.request({path:f,queryParams:y,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>{const A=DD(this.apiClient,v),S=new XT;return Object.assign(S,A),S})}}async tuneInternal(e){var t,n;let s,a="",u={};if(this.apiClient.isVertexAI()){const f=ND(this.apiClient,e);return a=De("tuningJobs",f._url),u=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),s.then(y=>sp(this.apiClient,y))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,n;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=AD(this.apiClient,e);return a=De("tunedModels",f._url),u=f._query,delete f.config,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(y=>y.json()),s.then(y=>PD(this.apiClient,y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class UD{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const zD=1024*1024*8,BD=3,FD=1e3,qD=2,Im="x-goog-upload-status";async function GD(i,e,t){var n,s,a;let u=0,f=0,y=new Wm(new Response),g="upload";for(u=i.size;f<u;){const A=Math.min(zD,u-f),S=i.slice(f,f+A);f+A>=u&&(g+=", finalize");let R=0,V=FD;for(;R<BD&&(y=await t.request({path:"",body:S,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":String(f),"Content-Length":String(A)}}}),!(!((n=y==null?void 0:y.headers)===null||n===void 0)&&n[Im]));)R++,await KD(V),V=V*qD;if(f+=A,((s=y==null?void 0:y.headers)===null||s===void 0?void 0:s[Im])!=="active")break;if(u<=f)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const v=await(y==null?void 0:y.json());if(((a=y==null?void 0:y.headers)===null||a===void 0?void 0:a[Im])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return v.file}async function HD(i){return{size:i.size,type:i.type}}function KD(i){return new Promise(e=>setTimeout(e,i))}class YD{async upload(e,t,n){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await GD(e,t,n)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await HD(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $D{create(e,t,n){return new QD(e,t,n)}}class QD{constructor(e,t,n){this.url=e,this.headers=t,this.callbacks=n}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const C0="x-goog-api-key";class WD{constructor(e){this.apiKey=e}async addAuthHeaders(e){e.get(C0)===null&&e.append(C0,this.apiKey)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const JD="gl-node/";class XD{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const n=JI(e,void 0,void 0);n&&(e.httpOptions?e.httpOptions.baseUrl=n:e.httpOptions={baseUrl:n}),this.apiVersion=e.apiVersion;const s=new WD(this.apiKey);this.apiClient=new GM({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:JD+"web",uploader:new YD,downloader:new UD}),this.models=new sD(this.apiClient),this.live=new eD(this.apiClient,s,new $D),this.chats=new px(this.models,this.apiClient),this.caches=new dx(this.apiClient),this.files=new xx(this.apiClient),this.operations=new gD(this.apiClient),this.tunings=new LD(this.apiClient)}}const jD=({className:i})=>N.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:i,children:N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})}),A0=({className:i})=>N.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:i,children:[N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"}),N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),ZD=({className:i})=>N.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:i,children:N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9.004 9.004 0 008.716-6.747M12 21a9.004 9.004 0 01-8.716-6.747M12 21c1.356 0 2.682-.25 3.938-.712M12 21c-1.356 0-2.682-.25-3.938-.712M3.75 7.5h16.5M3.75 7.5a2.25 2.25 0 01-2.25-2.25V3.75c0-1.242 1.008-2.25 2.25-2.25h13.5c1.242 0 2.25 1.008 2.25 2.25v1.5a2.25 2.25 0 01-2.25-2.25M3.75 7.5a2.25 2.25 0 00-2.25 2.25v1.5c0 1.242 1.008 2.25 2.25 2.25h13.5c1.242 0 2.25-1.008 2.25-2.25v-1.5a2.25 2.25 0 00-2.25-2.25"})}),e2=({className:i})=>N.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:i,children:N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),t2=({className:i})=>N.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:i,children:N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.125 2.25h-4.5c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125v-9M10.125 2.25h.375a9 9 0 019 9v.375M10.125 2.25A3.375 3.375 0 0113.5 5.625v1.5c0 .621.504 1.125 1.125 1.125h1.5a3.375 3.375 0 013.375 3.375M9 15l2.25 2.25L15 12"})}),n2=({htmlContent:i,onPublish:e,t})=>{const n=()=>{if(!i)return;const s=new Blob([i],{type:"text/html"}),a=URL.createObjectURL(s),u=document.createElement("a");u.href=a,u.download="nammai-preview.html",document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(a)};return N.jsxs("div",{className:"flex flex-col h-full bg-zinc-900",children:[N.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-zinc-800 text-zinc-300 shrink-0",children:[N.jsxs("div",{className:"flex items-center gap-3 font-medium",children:[N.jsx(A0,{className:"w-5 h-5"}),N.jsx("span",{children:t("livePreview")})]}),N.jsxs("div",{className:"flex items-center gap-2",children:[N.jsxs("button",{onClick:n,disabled:!i,className:"flex items-center gap-2 px-3 py-1 text-sm font-medium text-zinc-300 bg-zinc-800 hover:bg-zinc-700 rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-zinc-900 focus:ring-white disabled:opacity-50 disabled:cursor-not-allowed",children:[N.jsx(jD,{className:"w-4 h-4"}),t("download")]}),N.jsxs("button",{onClick:e,disabled:!i,className:"flex items-center gap-2 px-3 py-1 text-sm font-medium text-zinc-300 bg-zinc-800 hover:bg-zinc-700 rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-zinc-900 focus:ring-white disabled:opacity-50 disabled:cursor-not-allowed",children:[N.jsx(ZD,{className:"w-4 h-4"}),t("publish")]})]})]}),i?N.jsx("iframe",{srcDoc:i,title:"Live Preview",className:"w-full h-full border-0 bg-white",sandbox:"allow-scripts allow-same-origin"},i):N.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-center p-4 text-zinc-600",children:[N.jsx(A0,{className:"w-16 h-16 mb-4"}),N.jsx("h3",{className:"font-semibold text-zinc-500",children:t("previewEmptyTitle")}),N.jsx("p",{className:"max-w-xs mx-auto text-sm",children:t("previewEmptyMessage")})]})]})},i2=({message:i,show:e,onClose:t,t:n})=>(Ie.useEffect(()=>{if(e){const s=setTimeout(()=>{t()},5e3);return()=>clearTimeout(s)}},[e,t]),e?N.jsxs("div",{className:"fixed bottom-5 right-5 bg-zinc-200 text-zinc-900 rounded-lg shadow-lg p-4 flex items-center gap-4 animate-in fade-in slide-in-from-bottom-5 duration-500 z-50 max-w-md",children:[N.jsx(t2,{className:"w-8 h-8 text-zinc-800 shrink-0"}),N.jsxs("div",{className:"flex-1 min-w-0",children:[N.jsx("p",{className:"font-bold",children:n("toastSuccessTitle")}),N.jsx("p",{className:"text-sm break-words",children:i})]}),N.jsx("button",{onClick:t,className:"p-1 rounded-full hover:bg-zinc-300 transition-colors self-start",children:N.jsx(e2,{className:"w-4 h-4"})})]}):null),ba={kannada:{initialMessage:`**NammAI** ge swaagatha!

Nanu nimma all-rounder AI assistant. En beku help madtini:

1. **Content Bardi**: Email, blog post, athva kavana - en bekadru kelabahudu.
2. **Visuals Maadi**: Image athva presentation slides create madakke kelage buttons use maadi.
3. **Coding Sahaaya**: Code bariyokke, debug madokke, athva explain madokke help madtini.
4. **Live Preview Nodona**: Naanu create mao yella UI live aagi preview pane nalli torsuthe.

Hegi help madli ivattu?`,systemInstruction:`You are NammAI  a versatile, all-rounder AI assistant. 'NammAI' is a mix of 'Namma' (a word from the Kannada language meaning 'Our') and 'AI'.

Your core mission is to be a helpful and creative partner to the user.

You MUST communicate in a friendly, conversational mix of romanized Kannada and English (known as "Kanglish"). Use as much Kannada as possible, but keep the words in the English alphabet. For example, instead of "How can I help you?", say "Hegi help madli?". Instead of "Here is the image", say "Idh thagoni nimma image". Maintain this unique personality in all your responses.

IMPORTANT: When asked about your developer or creator SPECIFICALLY (like "who made you?" or "who is your developer?"), you MUST respond with "Nanna developer Sohan A." . ONLY include this information when directly asked about your creator/developer.

You can generate text content (emails, poems, stories), create images, build presentation slides, and write code.

You follow best practices, explain your work clearly, and maintain a friendly, confident, and practical personality.

You MUST adhere to the light-black and light-white dual-color theme.

**Output Rules:**

- When asked to create a visual component, web page, or anything with a UI, you MUST respond with a single HTML code block (tagged with \`html\`). This HTML file should be self-contained, with any necessary CSS in a \`<style>\` tag and JavaScript in a \`<script>\` tag.`,signIn:"Login maadi",signOut:"Logout maadi",signInWithGoogle:"Google nalle login maadi",welcomeBack:"Namaskara, waapas bandhri!",loginToSave:"Nimma chats save madakke login maadi",newChatTitle:"Hosa Chat",apiKeyError:"API key missing. Please check configuration.",chatPlaceholder:"Type your message here...",imagePlaceholder:"Describe the image you want to create...",slidesPlaceholder:"Enter your presentation topic...",imageAnalysisPrompt:"Ee image alli enu ide? Describe maadi.",slidesPrompt:i=>`Create a professional presentation about "${i}". Make it comprehensive with multiple slides covering key points, formatted as HTML with proper styling.`,imageGenerationPlaceholder:i=>`Generating image: "${i}"...`,imageGenerationDone:i=>`Image generated for: "${i}"`,apiError:"Something went wrong. Please try again.",attachFile:"Attach File",imageOnlyError:"Only image files are supported.",livePreview:"Live Preview",download:"Download",publish:"Publish",publishError:"No content to publish!",publishSuccess:i=>`Published successfully! View at: ${i}`,previewEmptyTitle:"No Preview Available",previewEmptyMessage:"Create some HTML content to see the preview here.",errorLabel:"Error"},english:{initialMessage:`Welcome to **NammAI**!

I'm your all-rounder AI assistant. Here's how I can help:

1. **Content Creation**: Write emails, blog posts, poems - anything you need.
2. **Visual Creation**: Use the buttons below to create images or presentation slides.
3. **Coding Help**: I can write, debug, and explain code.
4. **Live Preview**: Any UI I create will show up live in the preview pane.

How can I help you today?`,systemInstruction:`You are NammAI  a versatile, all-rounder AI assistant. 'NammAI' is a mix of 'Namma' (a word from the Kannada language meaning 'Our') and 'AI'.

Your core mission is to be a helpful and creative partner to the user.

You should communicate in clear, friendly English while maintaining your unique personality.

IMPORTANT: When asked about your developer or creator SPECIFICALLY (like "who made you?" or "who is your developer?"), you MUST respond with "My developer is Sohan A." . ONLY include this information when directly asked about your creator/developer.

You can generate text content (emails, poems, stories), create images, build presentation slides, and write code.

You follow best practices, explain your work clearly, and maintain a friendly, confident, and practical personality.

You MUST adhere to the light-black and light-white dual-color theme.

**Output Rules:**

- When asked to create a visual component, web page, or anything with a UI, you MUST respond with a single HTML code block (tagged with \`html\`). This HTML file should be self-contained, with any necessary CSS in a \`<style>\` tag and JavaScript in a \`<script>\` tag.`,signIn:"Sign In",signOut:"Sign Out",signInWithGoogle:"Sign in with Google",welcomeBack:"Welcome back!",loginToSave:"Sign in to save your chats",newChatTitle:"New Chat",apiKeyError:"API key missing. Please check configuration.",chatPlaceholder:"Type your message here...",imagePlaceholder:"Describe the image you want to create...",slidesPlaceholder:"Enter your presentation topic...",imageAnalysisPrompt:"What's in this image? Please describe it.",slidesPrompt:i=>`Create a professional presentation about "${i}". Make it comprehensive with multiple slides covering key points, formatted as HTML with proper styling.`,imageGenerationPlaceholder:i=>`Generating image: "${i}"...`,imageGenerationDone:i=>`Image generated for: "${i}"`,apiError:"Something went wrong. Please try again.",attachFile:"Attach File",imageOnlyError:"Only image files are supported.",livePreview:"Live Preview",download:"Download",publish:"Publish",publishError:"No content to publish!",publishSuccess:i=>`Published successfully! View at: ${i}`,previewEmptyTitle:"No Preview Available",previewEmptyMessage:"Create some HTML content to see the preview here.",errorLabel:"Error"}};var S0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC=function(i){const e=[];let t=0;for(let n=0;n<i.length;n++){let s=i.charCodeAt(n);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&n+1<i.length&&(i.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(i.charCodeAt(++n)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},r2=function(i){const e=[];let t=0,n=0;for(;t<i.length;){const s=i[t++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const a=i[t++];e[n++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=i[t++],u=i[t++],f=i[t++],y=((s&7)<<18|(a&63)<<12|(u&63)<<6|f&63)-65536;e[n++]=String.fromCharCode(55296+(y>>10)),e[n++]=String.fromCharCode(56320+(y&1023))}else{const a=i[t++],u=i[t++];e[n++]=String.fromCharCode((s&15)<<12|(a&63)<<6|u&63)}}return e.join("")},pC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<i.length;s+=3){const a=i[s],u=s+1<i.length,f=u?i[s+1]:0,y=s+2<i.length,g=y?i[s+2]:0,v=a>>2,A=(a&3)<<4|f>>4;let S=(f&15)<<2|g>>6,R=g&63;y||(R=64,u||(S=64)),n.push(t[v],t[A],t[S],t[R])}return n.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(mC(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):r2(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<i.length;){const a=t[i.charAt(s++)],f=s<i.length?t[i.charAt(s)]:0;++s;const g=s<i.length?t[i.charAt(s)]:64;++s;const A=s<i.length?t[i.charAt(s)]:64;if(++s,a==null||f==null||g==null||A==null)throw new s2;const S=a<<2|f>>4;if(n.push(S),g!==64){const R=f<<4&240|g>>2;if(n.push(R),A!==64){const V=g<<6&192|A;n.push(V)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class s2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const o2=function(i){const e=mC(i);return pC.encodeByteArray(e,!0)},Vf=function(i){return o2(i).replace(/\./g,"")},gC=function(i){try{return pC.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2=()=>a2().__FIREBASE_DEFAULTS__,u2=()=>{if(typeof process>"u"||typeof S0>"u")return;const i=S0.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},c2=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&gC(i[1]);return e&&JSON.parse(e)},ed=()=>{try{return l2()||u2()||c2()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},yC=i=>{var e,t;return(t=(e=ed())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[i]},f2=i=>{const e=yC(i);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),n]:[e.substring(0,t),n]},_C=()=>{var i;return(i=ed())===null||i===void 0?void 0:i.config},vC=i=>{var e;return(e=ed())===null||e===void 0?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h2(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",s=i.iat||0,a=i.sub||i.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},i);return[Vf(JSON.stringify(t)),Vf(JSON.stringify(u)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function m2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gn())}function p2(){var i;const e=(i=ed())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function g2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function y2(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function _2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function v2(){const i=gn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function T2(){return!p2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function E2(){try{return typeof indexedDB=="object"}catch{return!1}}function C2(){return new Promise((i,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(n),i(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A2="FirebaseError";class xr extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=A2,Object.setPrototypeOf(this,xr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Iu.prototype.create)}}class Iu{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},s=`${this.service}/${e}`,a=this.errors[e],u=a?S2(a,n):"Error",f=`${this.serviceName}: ${u} (${s}).`;return new xr(s,f,n)}}function S2(i,e){return i.replace(w2,(t,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const w2=/\{\$([^}]+)}/g;function I2(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Of(i,e){if(i===e)return!0;const t=Object.keys(i),n=Object.keys(e);for(const s of t){if(!n.includes(s))return!1;const a=i[s],u=e[s];if(w0(a)&&w0(u)){if(!Of(a,u))return!1}else if(a!==u)return!1}for(const s of n)if(!t.includes(s))return!1;return!0}function w0(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ru(i){const e=[];for(const[t,n]of Object.entries(i))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function R2(i,e){const t=new x2(i,e);return t.subscribe.bind(t)}class x2{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let s;if(e===void 0&&t===void 0&&n===void 0)throw new Error("Missing Observer.");b2(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:n},s.next===void 0&&(s.next=Rm),s.error===void 0&&(s.error=Rm),s.complete===void 0&&(s.complete=Rm);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function b2(i,e){if(typeof i!="object"||i===null)return!1;for(const t of e)if(t in i&&typeof i[t]=="function")return!0;return!1}function Rm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(i){return i&&i._delegate?i._delegate:i}class fo{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const no="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new d2;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(D2(e))try{this.getOrInitializeService({instanceIdentifier:no})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:s});n.resolve(a)}catch{}}}}clearInstance(e=no){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=no){return this.instances.has(e)}getOptions(e=no){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[a,u]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(a);n===f&&u.resolve(s)}return s}onInit(e,t){var n;const s=this.normalizeInstanceIdentifier(t),a=(n=this.onInitCallbacks.get(s))!==null&&n!==void 0?n:new Set;a.add(e),this.onInitCallbacks.set(s,a);const u=this.instances.get(s);return u&&e(u,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:M2(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=no){return this.component?this.component.multipleInstances?e:no:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function M2(i){return i===no?void 0:i}function D2(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new N2(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $e;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})($e||($e={}));const k2={debug:$e.DEBUG,verbose:$e.VERBOSE,info:$e.INFO,warn:$e.WARN,error:$e.ERROR,silent:$e.SILENT},V2=$e.INFO,O2={[$e.DEBUG]:"log",[$e.VERBOSE]:"log",[$e.INFO]:"info",[$e.WARN]:"warn",[$e.ERROR]:"error"},L2=(i,e,...t)=>{if(e<i.logLevel)return;const n=new Date().toISOString(),s=O2[e];if(s)console[s](`[${n}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Vp{constructor(e){this.name=e,this._logLevel=V2,this._logHandler=L2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in $e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?k2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,$e.DEBUG,...e),this._logHandler(this,$e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,$e.VERBOSE,...e),this._logHandler(this,$e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,$e.INFO,...e),this._logHandler(this,$e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,$e.WARN,...e),this._logHandler(this,$e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,$e.ERROR,...e),this._logHandler(this,$e.ERROR,...e)}}const U2=(i,e)=>e.some(t=>i instanceof t);let I0,R0;function z2(){return I0||(I0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function B2(){return R0||(R0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const TC=new WeakMap,op=new WeakMap,EC=new WeakMap,xm=new WeakMap,Op=new WeakMap;function F2(i){const e=new Promise((t,n)=>{const s=()=>{i.removeEventListener("success",a),i.removeEventListener("error",u)},a=()=>{t(ds(i.result)),s()},u=()=>{n(i.error),s()};i.addEventListener("success",a),i.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&TC.set(t,i)}).catch(()=>{}),Op.set(e,i),e}function q2(i){if(op.has(i))return;const e=new Promise((t,n)=>{const s=()=>{i.removeEventListener("complete",a),i.removeEventListener("error",u),i.removeEventListener("abort",u)},a=()=>{t(),s()},u=()=>{n(i.error||new DOMException("AbortError","AbortError")),s()};i.addEventListener("complete",a),i.addEventListener("error",u),i.addEventListener("abort",u)});op.set(i,e)}let ap={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return op.get(i);if(e==="objectStoreNames")return i.objectStoreNames||EC.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ds(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function G2(i){ap=i(ap)}function H2(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=i.call(bm(this),e,...t);return EC.set(n,e.sort?e.sort():[e]),ds(n)}:B2().includes(i)?function(...e){return i.apply(bm(this),e),ds(TC.get(this))}:function(...e){return ds(i.apply(bm(this),e))}}function K2(i){return typeof i=="function"?H2(i):(i instanceof IDBTransaction&&q2(i),U2(i,z2())?new Proxy(i,ap):i)}function ds(i){if(i instanceof IDBRequest)return F2(i);if(xm.has(i))return xm.get(i);const e=K2(i);return e!==i&&(xm.set(i,e),Op.set(e,i)),e}const bm=i=>Op.get(i);function Y2(i,e,{blocked:t,upgrade:n,blocking:s,terminated:a}={}){const u=indexedDB.open(i,e),f=ds(u);return n&&u.addEventListener("upgradeneeded",y=>{n(ds(u.result),y.oldVersion,y.newVersion,ds(u.transaction),y)}),t&&u.addEventListener("blocked",y=>t(y.oldVersion,y.newVersion,y)),f.then(y=>{a&&y.addEventListener("close",()=>a()),s&&y.addEventListener("versionchange",g=>s(g.oldVersion,g.newVersion,g))}).catch(()=>{}),f}const $2=["get","getKey","getAll","getAllKeys","count"],Q2=["put","add","delete","clear"],Nm=new Map;function x0(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Nm.get(e))return Nm.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,s=Q2.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(s||$2.includes(t)))return;const a=async function(u,...f){const y=this.transaction(u,s?"readwrite":"readonly");let g=y.store;return n&&(g=g.index(f.shift())),(await Promise.all([g[t](...f),s&&y.done]))[0]};return Nm.set(e,a),a}G2(i=>({...i,get:(e,t,n)=>x0(e,t)||i.get(e,t,n),has:(e,t)=>!!x0(e,t)||i.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(J2(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function J2(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const lp="@firebase/app",b0="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sr=new Vp("@firebase/app"),X2="@firebase/app-compat",j2="@firebase/analytics-compat",Z2="@firebase/analytics",eP="@firebase/app-check-compat",tP="@firebase/app-check",nP="@firebase/auth",iP="@firebase/auth-compat",rP="@firebase/database",sP="@firebase/data-connect",oP="@firebase/database-compat",aP="@firebase/functions",lP="@firebase/functions-compat",uP="@firebase/installations",cP="@firebase/installations-compat",fP="@firebase/messaging",dP="@firebase/messaging-compat",hP="@firebase/performance",mP="@firebase/performance-compat",pP="@firebase/remote-config",gP="@firebase/remote-config-compat",yP="@firebase/storage",_P="@firebase/storage-compat",vP="@firebase/firestore",TP="@firebase/vertexai-preview",EP="@firebase/firestore-compat",CP="firebase",AP="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const up="[DEFAULT]",SP={[lp]:"fire-core",[X2]:"fire-core-compat",[Z2]:"fire-analytics",[j2]:"fire-analytics-compat",[tP]:"fire-app-check",[eP]:"fire-app-check-compat",[nP]:"fire-auth",[iP]:"fire-auth-compat",[rP]:"fire-rtdb",[sP]:"fire-data-connect",[oP]:"fire-rtdb-compat",[aP]:"fire-fn",[lP]:"fire-fn-compat",[uP]:"fire-iid",[cP]:"fire-iid-compat",[fP]:"fire-fcm",[dP]:"fire-fcm-compat",[hP]:"fire-perf",[mP]:"fire-perf-compat",[pP]:"fire-rc",[gP]:"fire-rc-compat",[yP]:"fire-gcs",[_P]:"fire-gcs-compat",[vP]:"fire-fst",[EP]:"fire-fst-compat",[TP]:"fire-vertex","fire-js":"fire-js",[CP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lf=new Map,wP=new Map,cp=new Map;function N0(i,e){try{i.container.addComponent(e)}catch(t){Sr.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function Na(i){const e=i.name;if(cp.has(e))return Sr.debug(`There were multiple attempts to register component ${e}.`),!1;cp.set(e,i);for(const t of Lf.values())N0(t,i);for(const t of wP.values())N0(t,i);return!0}function Lp(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function _r(i){return i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},hs=new Iu("app","Firebase",IP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new fo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw hs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ba=AP;function CC(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const n=Object.assign({name:up,automaticDataCollectionEnabled:!1},e),s=n.name;if(typeof s!="string"||!s)throw hs.create("bad-app-name",{appName:String(s)});if(t||(t=_C()),!t)throw hs.create("no-options");const a=Lf.get(s);if(a){if(Of(t,a.options)&&Of(n,a.config))return a;throw hs.create("duplicate-app",{appName:s})}const u=new P2(s);for(const y of cp.values())u.addComponent(y);const f=new RP(t,n,u);return Lf.set(s,f),f}function AC(i=up){const e=Lf.get(i);if(!e&&i===up&&_C())return CC();if(!e)throw hs.create("no-app",{appName:i});return e}function ms(i,e,t){var n;let s=(n=SP[i])!==null&&n!==void 0?n:i;t&&(s+=`-${t}`);const a=s.match(/\s|\//),u=e.match(/\s|\//);if(a||u){const f=[`Unable to register library "${s}" with version "${e}":`];a&&f.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&u&&f.push("and"),u&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Sr.warn(f.join(" "));return}Na(new fo(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xP="firebase-heartbeat-database",bP=1,mu="firebase-heartbeat-store";let Mm=null;function SC(){return Mm||(Mm=Y2(xP,bP,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(mu)}catch(t){console.warn(t)}}}}).catch(i=>{throw hs.create("idb-open",{originalErrorMessage:i.message})})),Mm}async function NP(i){try{const t=(await SC()).transaction(mu),n=await t.objectStore(mu).get(wC(i));return await t.done,n}catch(e){if(e instanceof xr)Sr.warn(e.message);else{const t=hs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Sr.warn(t.message)}}}async function M0(i,e){try{const n=(await SC()).transaction(mu,"readwrite");await n.objectStore(mu).put(e,wC(i)),await n.done}catch(t){if(t instanceof xr)Sr.warn(t.message);else{const n=hs.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Sr.warn(n.message)}}}function wC(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MP=1024,DP=720*60*60*1e3;class PP{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new VP(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=D0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(u=>{const f=new Date(u.date).valueOf();return Date.now()-f<=DP}),this._storage.overwrite(this._heartbeatsCache))}catch(n){Sr.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=D0(),{heartbeatsToSend:n,unsentEntries:s}=kP(this._heartbeatsCache.heartbeats),a=Vf(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return Sr.warn(t),""}}}function D0(){return new Date().toISOString().substring(0,10)}function kP(i,e=MP){const t=[];let n=i.slice();for(const s of i){const a=t.find(u=>u.agent===s.agent);if(a){if(a.dates.push(s.date),P0(t)>e){a.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),P0(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class VP{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return E2()?C2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await NP(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return M0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return M0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function P0(i){return Vf(JSON.stringify({version:2,heartbeats:i})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OP(i){Na(new fo("platform-logger",e=>new W2(e),"PRIVATE")),Na(new fo("heartbeat",e=>new PP(e),"PRIVATE")),ms(lp,b0,i),ms(lp,b0,"esm2017"),ms("fire-js","")}OP("");function Up(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t}function IC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const LP=IC,RC=new Iu("auth","Firebase",IC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uf=new Vp("@firebase/auth");function UP(i,...e){Uf.logLevel<=$e.WARN&&Uf.warn(`Auth (${Ba}): ${i}`,...e)}function yf(i,...e){Uf.logLevel<=$e.ERROR&&Uf.error(`Auth (${Ba}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fi(i,...e){throw Bp(i,...e)}function di(i,...e){return Bp(i,...e)}function zp(i,e,t){const n=Object.assign(Object.assign({},LP()),{[e]:t});return new Iu("auth","Firebase",n).create(e,{appName:i.name})}function oo(i){return zp(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function zP(i,e,t){const n=t;if(!(e instanceof n))throw n.name!==e.constructor.name&&Fi(i,"argument-error"),zp(i,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Bp(i,...e){if(typeof i!="string"){const t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=i.name),i._errorFactory.create(t,...n)}return RC.create(i,...e)}function Pe(i,e,...t){if(!i)throw Bp(e,...t)}function vr(i){const e="INTERNAL ASSERTION FAILED: "+i;throw yf(e),new Error(e)}function wr(i,e){i||vr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fp(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.href)||""}function BP(){return k0()==="http:"||k0()==="https:"}function k0(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(BP()||y2()||"connection"in navigator)?navigator.onLine:!0}function qP(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e,t){this.shortDelay=e,this.longDelay=t,wr(t>e,"Short delay should be less than long delay!"),this.isMobile=m2()||_2()}get(){return FP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fp(i,e){wr(i.emulator,"Emulator should always be set here");const{url:t}=i.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;vr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;vr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;vr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HP=new xu(3e4,6e4);function qp(i,e){return i.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:i.tenantId}):e}async function Fa(i,e,t,n,s={}){return bC(i,s,async()=>{let a={},u={};n&&(e==="GET"?u=n:a={body:JSON.stringify(n)});const f=Ru(Object.assign({key:i.config.apiKey},u)).slice(1),y=await i._getAdditionalHeaders();y["Content-Type"]="application/json",i.languageCode&&(y["X-Firebase-Locale"]=i.languageCode);const g=Object.assign({method:e,headers:y},a);return g2()||(g.referrerPolicy="no-referrer"),xC.fetch()(NC(i,i.config.apiHost,t,f),g)})}async function bC(i,e,t){i._canInitEmulator=!1;const n=Object.assign(Object.assign({},GP),e);try{const s=new YP(i),a=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw lf(i,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const f=a.ok?u.errorMessage:u.error.message,[y,g]=f.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw lf(i,"credential-already-in-use",u);if(y==="EMAIL_EXISTS")throw lf(i,"email-already-in-use",u);if(y==="USER_DISABLED")throw lf(i,"user-disabled",u);const v=n[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw zp(i,v,g);Fi(i,v)}}catch(s){if(s instanceof xr)throw s;Fi(i,"network-request-failed",{message:String(s)})}}async function KP(i,e,t,n,s={}){const a=await Fa(i,e,t,n,s);return"mfaPendingCredential"in a&&Fi(i,"multi-factor-auth-required",{_serverResponse:a}),a}function NC(i,e,t,n){const s=`${e}${t}?${n}`;return i.config.emulator?Fp(i.config,s):`${i.config.apiScheme}://${s}`}class YP{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(di(this.auth,"network-request-failed")),HP.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function lf(i,e,t){const n={appName:i.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);const s=di(i,e,n);return s.customData._tokenResponse=t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $P(i,e){return Fa(i,"POST","/v1/accounts:delete",e)}async function MC(i,e){return Fa(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lu(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function QP(i,e=!1){const t=an(i),n=await t.getIdToken(e),s=Gp(n);Pe(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,u=a==null?void 0:a.sign_in_provider;return{claims:s,token:n,authTime:lu(Dm(s.auth_time)),issuedAtTime:lu(Dm(s.iat)),expirationTime:lu(Dm(s.exp)),signInProvider:u||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Dm(i){return Number(i)*1e3}function Gp(i){const[e,t,n]=i.split(".");if(e===void 0||t===void 0||n===void 0)return yf("JWT malformed, contained fewer than 3 sections"),null;try{const s=gC(t);return s?JSON.parse(s):(yf("Failed to decode base64 JWT payload"),null)}catch(s){return yf("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function V0(i){const e=Gp(i);return Pe(e,"internal-error"),Pe(typeof e.exp<"u","internal-error"),Pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pu(i,e,t=!1){if(t)return e;try{return await e}catch(n){throw n instanceof xr&&WP(n)&&i.auth.currentUser===i&&await i.auth.signOut(),n}}function WP({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=lu(this.lastLoginAt),this.creationTime=lu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zf(i){var e;const t=i.auth,n=await i.getIdToken(),s=await pu(i,MC(t,{idToken:n}));Pe(s==null?void 0:s.users.length,t,"internal-error");const a=s.users[0];i._notifyReloadListener(a);const u=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?DC(a.providerUserInfo):[],f=jP(i.providerData,u),y=i.isAnonymous,g=!(i.email&&a.passwordHash)&&!(f!=null&&f.length),v=y?g:!1,A={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:f,metadata:new dp(a.createdAt,a.lastLoginAt),isAnonymous:v};Object.assign(i,A)}async function XP(i){const e=an(i);await zf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function jP(i,e){return[...i.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function DC(i){return i.map(e=>{var{providerId:t}=e,n=Up(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZP(i,e){const t=await bC(i,{},async()=>{const n=Ru({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=i.config,u=NC(i,s,"/v1/token",`key=${a}`),f=await i._getAdditionalHeaders();return f["Content-Type"]="application/x-www-form-urlencoded",xC.fetch()(u,{method:"POST",headers:f,body:n})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function ek(i,e){return Fa(i,"POST","/v2/accounts:revokeToken",qp(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Pe(e.idToken,"internal-error"),Pe(typeof e.idToken<"u","internal-error"),Pe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):V0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Pe(e.length!==0,"internal-error");const t=V0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:s,expiresIn:a}=await ZP(e,t);this.updateTokensAndExpiration(n,s,Number(a))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){const{refreshToken:n,accessToken:s,expirationTime:a}=t,u=new va;return n&&(Pe(typeof n=="string","internal-error",{appName:e}),u.refreshToken=n),s&&(Pe(typeof s=="string","internal-error",{appName:e}),u.accessToken=s),a&&(Pe(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new va,this.toJSON())}_performRefresh(){return vr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ss(i,e){Pe(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class Tr{constructor(e){var{uid:t,auth:n,stsTokenManager:s}=e,a=Up(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new JP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new dp(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await pu(this,this.stsTokenManager.getToken(this.auth,e));return Pe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return QP(this,e)}reload(){return XP(this)}_assign(e){this!==e&&(Pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Tr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await zf(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_r(this.auth.app))return Promise.reject(oo(this.auth));const e=await this.getIdToken();return await pu(this,$P(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,s,a,u,f,y,g,v;const A=(n=t.displayName)!==null&&n!==void 0?n:void 0,S=(s=t.email)!==null&&s!==void 0?s:void 0,R=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,V=(u=t.photoURL)!==null&&u!==void 0?u:void 0,H=(f=t.tenantId)!==null&&f!==void 0?f:void 0,Y=(y=t._redirectEventId)!==null&&y!==void 0?y:void 0,ce=(g=t.createdAt)!==null&&g!==void 0?g:void 0,le=(v=t.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:oe,emailVerified:pe,isAnonymous:fe,providerData:Te,stsTokenManager:O}=t;Pe(oe&&O,e,"internal-error");const b=va.fromJSON(this.name,O);Pe(typeof oe=="string",e,"internal-error"),ss(A,e.name),ss(S,e.name),Pe(typeof pe=="boolean",e,"internal-error"),Pe(typeof fe=="boolean",e,"internal-error"),ss(R,e.name),ss(V,e.name),ss(H,e.name),ss(Y,e.name),ss(ce,e.name),ss(le,e.name);const x=new Tr({uid:oe,auth:e,email:S,emailVerified:pe,displayName:A,isAnonymous:fe,photoURL:V,phoneNumber:R,tenantId:H,stsTokenManager:b,createdAt:ce,lastLoginAt:le});return Te&&Array.isArray(Te)&&(x.providerData=Te.map(k=>Object.assign({},k))),Y&&(x._redirectEventId=Y),x}static async _fromIdTokenResponse(e,t,n=!1){const s=new va;s.updateFromServerResponse(t);const a=new Tr({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await zf(a),a}static async _fromGetAccountInfoResponse(e,t,n){const s=t.users[0];Pe(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?DC(s.providerUserInfo):[],u=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),f=new va;f.updateFromIdToken(n);const y=new Tr({uid:s.localId,auth:e,stsTokenManager:f,isAnonymous:u}),g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new dp(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(y,g),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O0=new Map;function Er(i){wr(i instanceof Function,"Expected a class definition");let e=O0.get(i);return e?(wr(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,O0.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}PC.type="NONE";const L0=PC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _f(i,e,t){return`firebase:${i}:${e}:${t}`}class Ta{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:s,name:a}=this.auth;this.fullUserKey=_f(this.userKey,s.apiKey,a),this.fullPersistenceKey=_f("persistence",s.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Tr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Ta(Er(L0),e,n);const s=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let a=s[0]||Er(L0);const u=_f(n,e.config.apiKey,e.name);let f=null;for(const g of t)try{const v=await g._get(u);if(v){const A=Tr._fromJSON(e,v);g!==a&&(f=A),a=g;break}}catch{}const y=s.filter(g=>g._shouldAllowMigration);return!a._shouldAllowMigration||!y.length?new Ta(a,e,n):(a=y[0],f&&await a._set(u,f.toJSON()),await Promise.all(t.map(async g=>{if(g!==a)try{await g._remove(u)}catch{}})),new Ta(a,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U0(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(LC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(kC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(zC(e))return"Blackberry";if(BC(e))return"Webos";if(VC(e))return"Safari";if((e.includes("chrome/")||OC(e))&&!e.includes("edge/"))return"Chrome";if(UC(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=i.match(t);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function kC(i=gn()){return/firefox\//i.test(i)}function VC(i=gn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function OC(i=gn()){return/crios\//i.test(i)}function LC(i=gn()){return/iemobile/i.test(i)}function UC(i=gn()){return/android/i.test(i)}function zC(i=gn()){return/blackberry/i.test(i)}function BC(i=gn()){return/webos/i.test(i)}function Hp(i=gn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function tk(i=gn()){var e;return Hp(i)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function nk(){return v2()&&document.documentMode===10}function FC(i=gn()){return Hp(i)||UC(i)||BC(i)||zC(i)||/windows phone/i.test(i)||LC(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qC(i,e=[]){let t;switch(i){case"Browser":t=U0(gn());break;case"Worker":t=`${U0(gn())}-${i}`;break;default:t=i}const n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ba}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=a=>new Promise((u,f)=>{try{const y=e(a);u(y)}catch(y){f(y)}});n.onAbort=t,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rk(i,e={}){return Fa(i,"GET","/v2/passwordPolicy",qp(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sk=6;class ok{constructor(e){var t,n,s,a;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:sk,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,s,a,u,f;const y={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,y),this.validatePasswordCharacterOptions(e,y),y.isValid&&(y.isValid=(t=y.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),y.isValid&&(y.isValid=(n=y.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),y.isValid&&(y.isValid=(s=y.containsLowercaseLetter)!==null&&s!==void 0?s:!0),y.isValid&&(y.isValid=(a=y.containsUppercaseLetter)!==null&&a!==void 0?a:!0),y.isValid&&(y.isValid=(u=y.containsNumericCharacter)!==null&&u!==void 0?u:!0),y.isValid&&(y.isValid=(f=y.containsNonAlphanumericCharacter)!==null&&f!==void 0?f:!0),y}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(e,t,n,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new z0(this),this.idTokenSubscription=new z0(this),this.beforeStateQueue=new ik(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=RC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Er(t)),this._initializationPromise=this.queue(async()=>{var n,s;if(!this._deleted&&(this.persistenceManager=await Ta.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await MC(this,{idToken:e}),n=await Tr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(_r(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(f,f))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,f=s==null?void 0:s._redirectEventId,y=await this.tryRedirectSignIn(e);(!u||u===f)&&(y!=null&&y.user)&&(s=y.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await zf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=qP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(_r(this.app))return Promise.reject(oo(this));const t=e?an(e):null;return t&&Pe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return _r(this.app)?Promise.reject(oo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return _r(this.app)?Promise.reject(oo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Er(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await rk(this),t=new ok(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Iu("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),await ek(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Er(e)||this._popupRedirectResolver;Pe(t,this,"argument-error"),this.redirectPersistenceManager=await Ta.create(this,[Er(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,s){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let u=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Pe(f,this,"internal-error"),f.then(()=>{u||a(this.currentUser)}),typeof t=="function"){const y=e.addObserver(t,n,s);return()=>{u=!0,y()}}else{const y=e.addObserver(t);return()=>{u=!0,y()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=qC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&UP(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function td(i){return an(i)}class z0{constructor(e){this.auth=e,this.observer=null,this.addObserver=R2(t=>this.observer=t)}get next(){return Pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function lk(i){Kp=i}function uk(i){return Kp.loadJS(i)}function ck(){return Kp.gapiScript}function fk(i){return`__${i}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dk(i,e){const t=Lp(i,"auth");if(t.isInitialized()){const s=t.getImmediate(),a=t.getOptions();if(Of(a,e??{}))return s;Fi(s,"already-initialized")}return t.initialize({options:e})}function hk(i,e){const t=(e==null?void 0:e.persistence)||[],n=(Array.isArray(t)?t:[t]).map(Er);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function mk(i,e,t){const n=td(i);Pe(n._canInitEmulator,n,"emulator-config-failed"),Pe(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,a=GC(e),{host:u,port:f}=pk(e),y=f===null?"":`:${f}`;n.config.emulator={url:`${a}//${u}${y}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:u,port:f,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})}),gk()}function GC(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function pk(i){const e=GC(i),t=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!t)return{host:"",port:null};const n=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const a=s[1];return{host:a,port:B0(n.substr(a.length+1))}}else{const[a,u]=n.split(":");return{host:a,port:B0(u)}}}function B0(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function gk(){function i(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return vr("not implemented")}_getIdTokenResponse(e){return vr("not implemented")}_linkToIdToken(e,t){return vr("not implemented")}_getReauthenticationResolver(e){return vr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ea(i,e){return KP(i,"POST","/v1/accounts:signInWithIdp",qp(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yk="http://localhost";class ho extends HC{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ho(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Fi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s}=t,a=Up(t,["providerId","signInMethod"]);if(!n||!s)return null;const u=new ho(n,s);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Ea(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Ea(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ea(e,t)}buildRequest(){const e={requestUri:yk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ru(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu extends Yp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as extends bu{constructor(){super("facebook.com")}static credential(e){return ho._fromParams({providerId:as.PROVIDER_ID,signInMethod:as.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return as.credentialFromTaggedObject(e)}static credentialFromError(e){return as.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return as.credential(e.oauthAccessToken)}catch{return null}}}as.FACEBOOK_SIGN_IN_METHOD="facebook.com";as.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr extends bu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ho._fromParams({providerId:yr.PROVIDER_ID,signInMethod:yr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return yr.credentialFromTaggedObject(e)}static credentialFromError(e){return yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return yr.credential(t,n)}catch{return null}}}yr.GOOGLE_SIGN_IN_METHOD="google.com";yr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls extends bu{constructor(){super("github.com")}static credential(e){return ho._fromParams({providerId:ls.PROVIDER_ID,signInMethod:ls.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ls.credentialFromTaggedObject(e)}static credentialFromError(e){return ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ls.credential(e.oauthAccessToken)}catch{return null}}}ls.GITHUB_SIGN_IN_METHOD="github.com";ls.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us extends bu{constructor(){super("twitter.com")}static credential(e,t){return ho._fromParams({providerId:us.PROVIDER_ID,signInMethod:us.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return us.credentialFromTaggedObject(e)}static credentialFromError(e){return us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return us.credential(t,n)}catch{return null}}}us.TWITTER_SIGN_IN_METHOD="twitter.com";us.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,s=!1){const a=await Tr._fromIdTokenResponse(e,n,s),u=F0(n);return new Ma({user:a,providerId:u,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const s=F0(n);return new Ma({user:e,providerId:s,_tokenResponse:n,operationType:t})}}function F0(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf extends xr{constructor(e,t,n,s){var a;super(t.code,t.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,Bf.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,s){return new Bf(e,t,n,s)}}function KC(i,e,t,n){return(e==="reauthenticate"?t._getReauthenticationResolver(i):t._getIdTokenResponse(i)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Bf._fromErrorAndOperation(i,a,e,n):a})}async function _k(i,e,t=!1){const n=await pu(i,e._linkToIdToken(i.auth,await i.getIdToken()),t);return Ma._forOperation(i,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vk(i,e,t=!1){const{auth:n}=i;if(_r(n.app))return Promise.reject(oo(n));const s="reauthenticate";try{const a=await pu(i,KC(n,s,e,i),t);Pe(a.idToken,n,"internal-error");const u=Gp(a.idToken);Pe(u,n,"internal-error");const{sub:f}=u;return Pe(i.uid===f,n,"user-mismatch"),Ma._forOperation(i,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Fi(n,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tk(i,e,t=!1){if(_r(i.app))return Promise.reject(oo(i));const n="signIn",s=await KC(i,n,e),a=await Ma._fromIdTokenResponse(i,n,s);return t||await i._updateCurrentUser(a.user),a}function Ek(i,e,t,n){return an(i).onIdTokenChanged(e,t,n)}function Ck(i,e,t){return an(i).beforeAuthStateChanged(e,t)}function Ak(i,e,t,n){return an(i).onAuthStateChanged(e,t,n)}function Sk(i){return an(i).signOut()}const Ff="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ff,"1"),this.storage.removeItem(Ff),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wk=1e3,Ik=10;class $C extends YC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=FC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),s=this.localCache[t];n!==s&&e(t,s,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,f,y)=>{this.notifyListeners(u,y)});return}const n=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const u=this.storage.getItem(n);!t&&this.localCache[n]===u||this.notifyListeners(n,u)},a=this.storage.getItem(n);nk()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Ik):s()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},wk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}$C.type="LOCAL";const Rk=$C;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC extends YC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}QC.type="SESSION";const WC=QC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xk(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const n=new nd(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:s,data:a}=t.data,u=this.handlersMap[s];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const f=Array.from(u).map(async g=>g(t.origin,a)),y=await xk(f);t.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:y})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}nd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $p(i="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return i+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,u;return new Promise((f,y)=>{const g=$p("",20);s.port1.start();const v=setTimeout(()=>{y(new Error("unsupported_event"))},n);u={messageChannel:s,onMessage(A){const S=A;if(S.data.eventId===g)switch(S.data.status){case"ack":clearTimeout(v),a=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),f(S.data.response);break;default:clearTimeout(v),clearTimeout(a),y(new Error("invalid_response"));break}}},this.handlers.add(u),s.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[s.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Li(){return window}function Nk(i){Li().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JC(){return typeof Li().WorkerGlobalScope<"u"&&typeof Li().importScripts=="function"}async function Mk(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Dk(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)===null||i===void 0?void 0:i.controller)||null}function Pk(){return JC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC="firebaseLocalStorageDb",kk=1,qf="firebaseLocalStorage",jC="fbase_key";class Nu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function id(i,e){return i.transaction([qf],e?"readwrite":"readonly").objectStore(qf)}function Vk(){const i=indexedDB.deleteDatabase(XC);return new Nu(i).toPromise()}function hp(){const i=indexedDB.open(XC,kk);return new Promise((e,t)=>{i.addEventListener("error",()=>{t(i.error)}),i.addEventListener("upgradeneeded",()=>{const n=i.result;try{n.createObjectStore(qf,{keyPath:jC})}catch(s){t(s)}}),i.addEventListener("success",async()=>{const n=i.result;n.objectStoreNames.contains(qf)?e(n):(n.close(),await Vk(),e(await hp()))})})}async function q0(i,e,t){const n=id(i,!0).put({[jC]:e,value:t});return new Nu(n).toPromise()}async function Ok(i,e){const t=id(i,!1).get(e),n=await new Nu(t).toPromise();return n===void 0?null:n.value}function G0(i,e){const t=id(i,!0).delete(e);return new Nu(t).toPromise()}const Lk=800,Uk=3;class ZC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await hp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(t++>Uk)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return JC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=nd._getInstance(Pk()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await Mk(),!this.activeServiceWorker)return;this.sender=new bk(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((t=n[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Dk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await hp();return await q0(e,Ff,"1"),await G0(e,Ff),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>q0(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(n=>Ok(n,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>G0(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=id(s,!1).getAll();return new Nu(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Lk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ZC.type="LOCAL";const zk=ZC;new xu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eA(i,e){return e?Er(e):(Pe(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp extends HC{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ea(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ea(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ea(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Bk(i){return Tk(i.auth,new Qp(i),i.bypassAuthState)}function Fk(i){const{auth:e,user:t}=i;return Pe(t,e,"internal-error"),vk(t,new Qp(i),i.bypassAuthState)}async function qk(i){const{auth:e,user:t}=i;return Pe(t,e,"internal-error"),_k(t,new Qp(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e,t,n,s,a=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:s,tenantId:a,error:u,type:f}=e;if(u){this.reject(u);return}const y={auth:this.auth,requestUri:t,sessionId:n,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(y))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Bk;case"linkViaPopup":case"linkViaRedirect":return qk;case"reauthViaPopup":case"reauthViaRedirect":return Fk;default:Fi(this.auth,"internal-error")}}resolve(e){wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gk=new xu(2e3,1e4);async function Hk(i,e,t){if(_r(i.app))return Promise.reject(di(i,"operation-not-supported-in-this-environment"));const n=td(i);zP(i,e,Yp);const s=eA(n,t);return new ro(n,"signInViaPopup",e,s).executeNotNull()}class ro extends tA{constructor(e,t,n,s,a){super(e,t,s,a),this.provider=n,this.authWindow=null,this.pollId=null,ro.currentPopupAction&&ro.currentPopupAction.cancel(),ro.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Pe(e,this.auth,"internal-error"),e}async onExecution(){wr(this.filter.length===1,"Popup operations only handle one event");const e=$p();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(di(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(di(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ro.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;if(!((n=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(di(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Gk.get())};e()}}ro.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kk="pendingRedirect",vf=new Map;class Yk extends tA{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=vf.get(this.auth._key());if(!e){try{const n=await $k(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}vf.set(this.auth._key(),e)}return this.bypassAuthState||vf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function $k(i,e){const t=Jk(e),n=Wk(i);if(!await n._isAvailable())return!1;const s=await n._get(t)==="true";return await n._remove(t),s}function Qk(i,e){vf.set(i._key(),e)}function Wk(i){return Er(i._redirectPersistence)}function Jk(i){return _f(Kk,i.config.apiKey,i.name)}async function Xk(i,e,t=!1){if(_r(i.app))return Promise.reject(oo(i));const n=td(i),s=eA(n,e),u=await new Yk(n,s,t).execute();return u&&!t&&(delete u.user._redirectEventId,await n._persistUserIfCurrent(u.user),await n._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jk=600*1e3;class Zk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!eV(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!nA(e)){const s=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";t.onError(di(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=jk&&this.cachedEventUids.clear(),this.cachedEventUids.has(H0(e))}saveEventToCache(e){this.cachedEventUids.add(H0(e)),this.lastProcessedEventTime=Date.now()}}function H0(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function nA({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function eV(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nA(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tV(i,e={}){return Fa(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,iV=/^https?/;async function rV(i){if(i.config.emulator)return;const{authorizedDomains:e}=await tV(i);for(const t of e)try{if(sV(t))return}catch{}Fi(i,"unauthorized-domain")}function sV(i){const e=fp(),{protocol:t,hostname:n}=new URL(e);if(i.startsWith("chrome-extension://")){const u=new URL(i);return u.hostname===""&&n===""?t==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===n}if(!iV.test(t))return!1;if(nV.test(i))return n===i;const s=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oV=new xu(3e4,6e4);function K0(){const i=Li().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let t=0;t<i.CP.length;t++)i.CP[t]=null}}function aV(i){return new Promise((e,t)=>{var n,s,a;function u(){K0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{K0(),t(di(i,"network-request-failed"))},timeout:oV.get()})}if(!((s=(n=Li().gapi)===null||n===void 0?void 0:n.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=Li().gapi)===null||a===void 0)&&a.load)u();else{const f=fk("iframefcb");return Li()[f]=()=>{gapi.load?u():t(di(i,"network-request-failed"))},uk(`${ck()}?onload=${f}`).catch(y=>t(y))}}).catch(e=>{throw Tf=null,e})}let Tf=null;function lV(i){return Tf=Tf||aV(i),Tf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uV=new xu(5e3,15e3),cV="__/auth/iframe",fV="emulator/auth/iframe",dV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},hV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mV(i){const e=i.config;Pe(e.authDomain,i,"auth-domain-config-required");const t=e.emulator?Fp(e,fV):`https://${i.config.authDomain}/${cV}`,n={apiKey:e.apiKey,appName:i.name,v:Ba},s=hV.get(i.config.apiHost);s&&(n.eid=s);const a=i._getFrameworks();return a.length&&(n.fw=a.join(",")),`${t}?${Ru(n).slice(1)}`}async function pV(i){const e=await lV(i),t=Li().gapi;return Pe(t,i,"internal-error"),e.open({where:document.body,url:mV(i),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:dV,dontclear:!0},n=>new Promise(async(s,a)=>{await n.restyle({setHideOnLeave:!1});const u=di(i,"network-request-failed"),f=Li().setTimeout(()=>{a(u)},uV.get());function y(){Li().clearTimeout(f),s(n)}n.ping(y).then(y,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},yV=500,_V=600,vV="_blank",TV="http://localhost";class Y0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function EV(i,e,t,n=yV,s=_V){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),u=Math.max((window.screen.availWidth-n)/2,0).toString();let f="";const y=Object.assign(Object.assign({},gV),{width:n.toString(),height:s.toString(),top:a,left:u}),g=gn().toLowerCase();t&&(f=OC(g)?vV:t),kC(g)&&(e=e||TV,y.scrollbars="yes");const v=Object.entries(y).reduce((S,[R,V])=>`${S}${R}=${V},`,"");if(tk(g)&&f!=="_self")return CV(e||"",f),new Y0(null);const A=window.open(e||"",f,v);Pe(A,i,"popup-blocked");try{A.focus()}catch{}return new Y0(A)}function CV(i,e){const t=document.createElement("a");t.href=i,t.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AV="__/auth/handler",SV="emulator/auth/handler",wV=encodeURIComponent("fac");async function $0(i,e,t,n,s,a){Pe(i.config.authDomain,i,"auth-domain-config-required"),Pe(i.config.apiKey,i,"invalid-api-key");const u={apiKey:i.config.apiKey,appName:i.name,authType:t,redirectUrl:n,v:Ba,eventId:s};if(e instanceof Yp){e.setDefaultLanguage(i.languageCode),u.providerId=e.providerId||"",I2(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,A]of Object.entries({}))u[v]=A}if(e instanceof bu){const v=e.getScopes().filter(A=>A!=="");v.length>0&&(u.scopes=v.join(","))}i.tenantId&&(u.tid=i.tenantId);const f=u;for(const v of Object.keys(f))f[v]===void 0&&delete f[v];const y=await i._getAppCheckToken(),g=y?`#${wV}=${encodeURIComponent(y)}`:"";return`${IV(i)}?${Ru(f).slice(1)}${g}`}function IV({config:i}){return i.emulator?Fp(i,SV):`https://${i.authDomain}/${AV}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pm="webStorageSupport";class RV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=WC,this._completeRedirectFn=Xk,this._overrideRedirectResult=Qk}async _openPopup(e,t,n,s){var a;wr((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const u=await $0(e,t,n,fp(),s);return EV(e,u,$p())}async _openRedirect(e,t,n,s){await this._originValidation(e);const a=await $0(e,t,n,fp(),s);return Nk(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:a}=this.eventManagers[t];return s?Promise.resolve(s):(wr(a,"If manager is not set, promise should be"),a)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await pV(e),n=new Zk(e);return t.register("authEvent",s=>(Pe(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Pm,{type:Pm},s=>{var a;const u=(a=s==null?void 0:s[0])===null||a===void 0?void 0:a[Pm];u!==void 0&&t(!!u),Fi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=rV(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return FC()||VC()||Hp()}}const xV=RV;var Q0="@firebase/auth",W0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NV(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function MV(i){Na(new fo("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:f}=n.options;Pe(u&&!u.includes(":"),"invalid-api-key",{appName:n.name});const y={apiKey:u,authDomain:f,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:qC(i)},g=new ak(n,s,a,y);return hk(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Na(new fo("auth-internal",e=>{const t=td(e.getProvider("auth").getImmediate());return(n=>new bV(n))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ms(Q0,W0,NV(i)),ms(Q0,W0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DV=300,PV=vC("authIdTokenMaxAge")||DV;let J0=null;const kV=i=>async e=>{const t=e&&await e.getIdTokenResult(),n=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>PV)return;const s=t==null?void 0:t.token;J0!==s&&(J0=s,await fetch(i,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function VV(i=AC()){const e=Lp(i,"auth");if(e.isInitialized())return e.getImmediate();const t=dk(i,{popupRedirectResolver:xV,persistence:[zk,Rk,WC]}),n=vC("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(n,location.origin);if(location.origin===a.origin){const u=kV(a.toString());Ck(t,u,()=>u(t.currentUser)),Ek(t,f=>u(f))}}const s=yC("auth");return s&&mk(t,`http://${s}`),t}function OV(){var i,e;return(e=(i=document.getElementsByTagName("head"))===null||i===void 0?void 0:i[0])!==null&&e!==void 0?e:document}lk({loadJS(i){return new Promise((e,t)=>{const n=document.createElement("script");n.setAttribute("src",i),n.onload=e,n.onerror=s=>{const a=di("internal-error");a.customData=s,t(a)},n.type="text/javascript",n.charset="UTF-8",OV().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});MV("Browser");var X0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ao,iA;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(O,b){function x(){}x.prototype=b.prototype,O.D=b.prototype,O.prototype=new x,O.prototype.constructor=O,O.C=function(k,U,z){for(var D=Array(arguments.length-2),We=2;We<arguments.length;We++)D[We-2]=arguments[We];return b.prototype[U].apply(k,D)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,t),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(O,b,x){x||(x=0);var k=Array(16);if(typeof b=="string")for(var U=0;16>U;++U)k[U]=b.charCodeAt(x++)|b.charCodeAt(x++)<<8|b.charCodeAt(x++)<<16|b.charCodeAt(x++)<<24;else for(U=0;16>U;++U)k[U]=b[x++]|b[x++]<<8|b[x++]<<16|b[x++]<<24;b=O.g[0],x=O.g[1],U=O.g[2];var z=O.g[3],D=b+(z^x&(U^z))+k[0]+3614090360&4294967295;b=x+(D<<7&4294967295|D>>>25),D=z+(U^b&(x^U))+k[1]+3905402710&4294967295,z=b+(D<<12&4294967295|D>>>20),D=U+(x^z&(b^x))+k[2]+606105819&4294967295,U=z+(D<<17&4294967295|D>>>15),D=x+(b^U&(z^b))+k[3]+3250441966&4294967295,x=U+(D<<22&4294967295|D>>>10),D=b+(z^x&(U^z))+k[4]+4118548399&4294967295,b=x+(D<<7&4294967295|D>>>25),D=z+(U^b&(x^U))+k[5]+1200080426&4294967295,z=b+(D<<12&4294967295|D>>>20),D=U+(x^z&(b^x))+k[6]+2821735955&4294967295,U=z+(D<<17&4294967295|D>>>15),D=x+(b^U&(z^b))+k[7]+4249261313&4294967295,x=U+(D<<22&4294967295|D>>>10),D=b+(z^x&(U^z))+k[8]+1770035416&4294967295,b=x+(D<<7&4294967295|D>>>25),D=z+(U^b&(x^U))+k[9]+2336552879&4294967295,z=b+(D<<12&4294967295|D>>>20),D=U+(x^z&(b^x))+k[10]+4294925233&4294967295,U=z+(D<<17&4294967295|D>>>15),D=x+(b^U&(z^b))+k[11]+2304563134&4294967295,x=U+(D<<22&4294967295|D>>>10),D=b+(z^x&(U^z))+k[12]+1804603682&4294967295,b=x+(D<<7&4294967295|D>>>25),D=z+(U^b&(x^U))+k[13]+4254626195&4294967295,z=b+(D<<12&4294967295|D>>>20),D=U+(x^z&(b^x))+k[14]+2792965006&4294967295,U=z+(D<<17&4294967295|D>>>15),D=x+(b^U&(z^b))+k[15]+1236535329&4294967295,x=U+(D<<22&4294967295|D>>>10),D=b+(U^z&(x^U))+k[1]+4129170786&4294967295,b=x+(D<<5&4294967295|D>>>27),D=z+(x^U&(b^x))+k[6]+3225465664&4294967295,z=b+(D<<9&4294967295|D>>>23),D=U+(b^x&(z^b))+k[11]+643717713&4294967295,U=z+(D<<14&4294967295|D>>>18),D=x+(z^b&(U^z))+k[0]+3921069994&4294967295,x=U+(D<<20&4294967295|D>>>12),D=b+(U^z&(x^U))+k[5]+3593408605&4294967295,b=x+(D<<5&4294967295|D>>>27),D=z+(x^U&(b^x))+k[10]+38016083&4294967295,z=b+(D<<9&4294967295|D>>>23),D=U+(b^x&(z^b))+k[15]+3634488961&4294967295,U=z+(D<<14&4294967295|D>>>18),D=x+(z^b&(U^z))+k[4]+3889429448&4294967295,x=U+(D<<20&4294967295|D>>>12),D=b+(U^z&(x^U))+k[9]+568446438&4294967295,b=x+(D<<5&4294967295|D>>>27),D=z+(x^U&(b^x))+k[14]+3275163606&4294967295,z=b+(D<<9&4294967295|D>>>23),D=U+(b^x&(z^b))+k[3]+4107603335&4294967295,U=z+(D<<14&4294967295|D>>>18),D=x+(z^b&(U^z))+k[8]+1163531501&4294967295,x=U+(D<<20&4294967295|D>>>12),D=b+(U^z&(x^U))+k[13]+2850285829&4294967295,b=x+(D<<5&4294967295|D>>>27),D=z+(x^U&(b^x))+k[2]+4243563512&4294967295,z=b+(D<<9&4294967295|D>>>23),D=U+(b^x&(z^b))+k[7]+1735328473&4294967295,U=z+(D<<14&4294967295|D>>>18),D=x+(z^b&(U^z))+k[12]+2368359562&4294967295,x=U+(D<<20&4294967295|D>>>12),D=b+(x^U^z)+k[5]+4294588738&4294967295,b=x+(D<<4&4294967295|D>>>28),D=z+(b^x^U)+k[8]+2272392833&4294967295,z=b+(D<<11&4294967295|D>>>21),D=U+(z^b^x)+k[11]+1839030562&4294967295,U=z+(D<<16&4294967295|D>>>16),D=x+(U^z^b)+k[14]+4259657740&4294967295,x=U+(D<<23&4294967295|D>>>9),D=b+(x^U^z)+k[1]+2763975236&4294967295,b=x+(D<<4&4294967295|D>>>28),D=z+(b^x^U)+k[4]+1272893353&4294967295,z=b+(D<<11&4294967295|D>>>21),D=U+(z^b^x)+k[7]+4139469664&4294967295,U=z+(D<<16&4294967295|D>>>16),D=x+(U^z^b)+k[10]+3200236656&4294967295,x=U+(D<<23&4294967295|D>>>9),D=b+(x^U^z)+k[13]+681279174&4294967295,b=x+(D<<4&4294967295|D>>>28),D=z+(b^x^U)+k[0]+3936430074&4294967295,z=b+(D<<11&4294967295|D>>>21),D=U+(z^b^x)+k[3]+3572445317&4294967295,U=z+(D<<16&4294967295|D>>>16),D=x+(U^z^b)+k[6]+76029189&4294967295,x=U+(D<<23&4294967295|D>>>9),D=b+(x^U^z)+k[9]+3654602809&4294967295,b=x+(D<<4&4294967295|D>>>28),D=z+(b^x^U)+k[12]+3873151461&4294967295,z=b+(D<<11&4294967295|D>>>21),D=U+(z^b^x)+k[15]+530742520&4294967295,U=z+(D<<16&4294967295|D>>>16),D=x+(U^z^b)+k[2]+3299628645&4294967295,x=U+(D<<23&4294967295|D>>>9),D=b+(U^(x|~z))+k[0]+4096336452&4294967295,b=x+(D<<6&4294967295|D>>>26),D=z+(x^(b|~U))+k[7]+1126891415&4294967295,z=b+(D<<10&4294967295|D>>>22),D=U+(b^(z|~x))+k[14]+2878612391&4294967295,U=z+(D<<15&4294967295|D>>>17),D=x+(z^(U|~b))+k[5]+4237533241&4294967295,x=U+(D<<21&4294967295|D>>>11),D=b+(U^(x|~z))+k[12]+1700485571&4294967295,b=x+(D<<6&4294967295|D>>>26),D=z+(x^(b|~U))+k[3]+2399980690&4294967295,z=b+(D<<10&4294967295|D>>>22),D=U+(b^(z|~x))+k[10]+4293915773&4294967295,U=z+(D<<15&4294967295|D>>>17),D=x+(z^(U|~b))+k[1]+2240044497&4294967295,x=U+(D<<21&4294967295|D>>>11),D=b+(U^(x|~z))+k[8]+1873313359&4294967295,b=x+(D<<6&4294967295|D>>>26),D=z+(x^(b|~U))+k[15]+4264355552&4294967295,z=b+(D<<10&4294967295|D>>>22),D=U+(b^(z|~x))+k[6]+2734768916&4294967295,U=z+(D<<15&4294967295|D>>>17),D=x+(z^(U|~b))+k[13]+1309151649&4294967295,x=U+(D<<21&4294967295|D>>>11),D=b+(U^(x|~z))+k[4]+4149444226&4294967295,b=x+(D<<6&4294967295|D>>>26),D=z+(x^(b|~U))+k[11]+3174756917&4294967295,z=b+(D<<10&4294967295|D>>>22),D=U+(b^(z|~x))+k[2]+718787259&4294967295,U=z+(D<<15&4294967295|D>>>17),D=x+(z^(U|~b))+k[9]+3951481745&4294967295,O.g[0]=O.g[0]+b&4294967295,O.g[1]=O.g[1]+(U+(D<<21&4294967295|D>>>11))&4294967295,O.g[2]=O.g[2]+U&4294967295,O.g[3]=O.g[3]+z&4294967295}n.prototype.u=function(O,b){b===void 0&&(b=O.length);for(var x=b-this.blockSize,k=this.B,U=this.h,z=0;z<b;){if(U==0)for(;z<=x;)s(this,O,z),z+=this.blockSize;if(typeof O=="string"){for(;z<b;)if(k[U++]=O.charCodeAt(z++),U==this.blockSize){s(this,k),U=0;break}}else for(;z<b;)if(k[U++]=O[z++],U==this.blockSize){s(this,k),U=0;break}}this.h=U,this.o+=b},n.prototype.v=function(){var O=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);O[0]=128;for(var b=1;b<O.length-8;++b)O[b]=0;var x=8*this.o;for(b=O.length-8;b<O.length;++b)O[b]=x&255,x/=256;for(this.u(O),O=Array(16),b=x=0;4>b;++b)for(var k=0;32>k;k+=8)O[x++]=this.g[b]>>>k&255;return O};function a(O,b){var x=f;return Object.prototype.hasOwnProperty.call(x,O)?x[O]:x[O]=b(O)}function u(O,b){this.h=b;for(var x=[],k=!0,U=O.length-1;0<=U;U--){var z=O[U]|0;k&&z==b||(x[U]=z,k=!1)}this.g=x}var f={};function y(O){return-128<=O&&128>O?a(O,function(b){return new u([b|0],0>b?-1:0)}):new u([O|0],0>O?-1:0)}function g(O){if(isNaN(O)||!isFinite(O))return A;if(0>O)return Y(g(-O));for(var b=[],x=1,k=0;O>=x;k++)b[k]=O/x|0,x*=4294967296;return new u(b,0)}function v(O,b){if(O.length==0)throw Error("number format error: empty string");if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(O.charAt(0)=="-")return Y(v(O.substring(1),b));if(0<=O.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=g(Math.pow(b,8)),k=A,U=0;U<O.length;U+=8){var z=Math.min(8,O.length-U),D=parseInt(O.substring(U,U+z),b);8>z?(z=g(Math.pow(b,z)),k=k.j(z).add(g(D))):(k=k.j(x),k=k.add(g(D)))}return k}var A=y(0),S=y(1),R=y(16777216);i=u.prototype,i.m=function(){if(H(this))return-Y(this).m();for(var O=0,b=1,x=0;x<this.g.length;x++){var k=this.i(x);O+=(0<=k?k:4294967296+k)*b,b*=4294967296}return O},i.toString=function(O){if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(V(this))return"0";if(H(this))return"-"+Y(this).toString(O);for(var b=g(Math.pow(O,6)),x=this,k="";;){var U=pe(x,b).g;x=ce(x,U.j(b));var z=((0<x.g.length?x.g[0]:x.h)>>>0).toString(O);if(x=U,V(x))return z+k;for(;6>z.length;)z="0"+z;k=z+k}},i.i=function(O){return 0>O?0:O<this.g.length?this.g[O]:this.h};function V(O){if(O.h!=0)return!1;for(var b=0;b<O.g.length;b++)if(O.g[b]!=0)return!1;return!0}function H(O){return O.h==-1}i.l=function(O){return O=ce(this,O),H(O)?-1:V(O)?0:1};function Y(O){for(var b=O.g.length,x=[],k=0;k<b;k++)x[k]=~O.g[k];return new u(x,~O.h).add(S)}i.abs=function(){return H(this)?Y(this):this},i.add=function(O){for(var b=Math.max(this.g.length,O.g.length),x=[],k=0,U=0;U<=b;U++){var z=k+(this.i(U)&65535)+(O.i(U)&65535),D=(z>>>16)+(this.i(U)>>>16)+(O.i(U)>>>16);k=D>>>16,z&=65535,D&=65535,x[U]=D<<16|z}return new u(x,x[x.length-1]&-2147483648?-1:0)};function ce(O,b){return O.add(Y(b))}i.j=function(O){if(V(this)||V(O))return A;if(H(this))return H(O)?Y(this).j(Y(O)):Y(Y(this).j(O));if(H(O))return Y(this.j(Y(O)));if(0>this.l(R)&&0>O.l(R))return g(this.m()*O.m());for(var b=this.g.length+O.g.length,x=[],k=0;k<2*b;k++)x[k]=0;for(k=0;k<this.g.length;k++)for(var U=0;U<O.g.length;U++){var z=this.i(k)>>>16,D=this.i(k)&65535,We=O.i(U)>>>16,rt=O.i(U)&65535;x[2*k+2*U]+=D*rt,le(x,2*k+2*U),x[2*k+2*U+1]+=z*rt,le(x,2*k+2*U+1),x[2*k+2*U+1]+=D*We,le(x,2*k+2*U+1),x[2*k+2*U+2]+=z*We,le(x,2*k+2*U+2)}for(k=0;k<b;k++)x[k]=x[2*k+1]<<16|x[2*k];for(k=b;k<2*b;k++)x[k]=0;return new u(x,0)};function le(O,b){for(;(O[b]&65535)!=O[b];)O[b+1]+=O[b]>>>16,O[b]&=65535,b++}function oe(O,b){this.g=O,this.h=b}function pe(O,b){if(V(b))throw Error("division by zero");if(V(O))return new oe(A,A);if(H(O))return b=pe(Y(O),b),new oe(Y(b.g),Y(b.h));if(H(b))return b=pe(O,Y(b)),new oe(Y(b.g),b.h);if(30<O.g.length){if(H(O)||H(b))throw Error("slowDivide_ only works with positive integers.");for(var x=S,k=b;0>=k.l(O);)x=fe(x),k=fe(k);var U=Te(x,1),z=Te(k,1);for(k=Te(k,2),x=Te(x,2);!V(k);){var D=z.add(k);0>=D.l(O)&&(U=U.add(x),z=D),k=Te(k,1),x=Te(x,1)}return b=ce(O,U.j(b)),new oe(U,b)}for(U=A;0<=O.l(b);){for(x=Math.max(1,Math.floor(O.m()/b.m())),k=Math.ceil(Math.log(x)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),z=g(x),D=z.j(b);H(D)||0<D.l(O);)x-=k,z=g(x),D=z.j(b);V(z)&&(z=S),U=U.add(z),O=ce(O,D)}return new oe(U,O)}i.A=function(O){return pe(this,O).h},i.and=function(O){for(var b=Math.max(this.g.length,O.g.length),x=[],k=0;k<b;k++)x[k]=this.i(k)&O.i(k);return new u(x,this.h&O.h)},i.or=function(O){for(var b=Math.max(this.g.length,O.g.length),x=[],k=0;k<b;k++)x[k]=this.i(k)|O.i(k);return new u(x,this.h|O.h)},i.xor=function(O){for(var b=Math.max(this.g.length,O.g.length),x=[],k=0;k<b;k++)x[k]=this.i(k)^O.i(k);return new u(x,this.h^O.h)};function fe(O){for(var b=O.g.length+1,x=[],k=0;k<b;k++)x[k]=O.i(k)<<1|O.i(k-1)>>>31;return new u(x,O.h)}function Te(O,b){var x=b>>5;b%=32;for(var k=O.g.length-x,U=[],z=0;z<k;z++)U[z]=0<b?O.i(z+x)>>>b|O.i(z+x+1)<<32-b:O.i(z+x);return new u(U,O.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,iA=n,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=g,u.fromString=v,ao=u}).apply(typeof X0<"u"?X0:typeof self<"u"?self:typeof window<"u"?window:{});var uf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var rA,nu,sA,Ef,mp,oA,aA,lA;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,T,E){return h==Array.prototype||h==Object.prototype||(h[T]=E.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof uf=="object"&&uf];for(var T=0;T<h.length;++T){var E=h[T];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var n=t(this);function s(h,T){if(T)e:{var E=n;h=h.split(".");for(var I=0;I<h.length-1;I++){var F=h[I];if(!(F in E))break e;E=E[F]}h=h[h.length-1],I=E[h],T=T(I),T!=I&&T!=null&&e(E,h,{configurable:!0,writable:!0,value:T})}}function a(h,T){h instanceof String&&(h+="");var E=0,I=!1,F={next:function(){if(!I&&E<h.length){var Q=E++;return{value:T(Q,h[Q]),done:!1}}return I=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}s("Array.prototype.values",function(h){return h||function(){return a(this,function(T,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},f=this||self;function y(h){var T=typeof h;return T=T!="object"?T:h?Array.isArray(h)?"array":T:"null",T=="array"||T=="object"&&typeof h.length=="number"}function g(h){var T=typeof h;return T=="object"&&h!=null||T=="function"}function v(h,T,E){return h.call.apply(h.bind,arguments)}function A(h,T,E){if(!h)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,I),h.apply(T,F)}}return function(){return h.apply(T,arguments)}}function S(h,T,E){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:A,S.apply(null,arguments)}function R(h,T){var E=Array.prototype.slice.call(arguments,1);return function(){var I=E.slice();return I.push.apply(I,arguments),h.apply(this,I)}}function V(h,T){function E(){}E.prototype=T.prototype,h.aa=T.prototype,h.prototype=new E,h.prototype.constructor=h,h.Qb=function(I,F,Q){for(var ue=Array(arguments.length-2),Je=2;Je<arguments.length;Je++)ue[Je-2]=arguments[Je];return T.prototype[F].apply(I,ue)}}function H(h){const T=h.length;if(0<T){const E=Array(T);for(let I=0;I<T;I++)E[I]=h[I];return E}return[]}function Y(h,T){for(let E=1;E<arguments.length;E++){const I=arguments[E];if(y(I)){const F=h.length||0,Q=I.length||0;h.length=F+Q;for(let ue=0;ue<Q;ue++)h[F+ue]=I[ue]}else h.push(I)}}class ce{constructor(T,E){this.i=T,this.j=E,this.h=0,this.g=null}get(){let T;return 0<this.h?(this.h--,T=this.g,this.g=T.next,T.next=null):T=this.i(),T}}function le(h){return/^[\s\xa0]*$/.test(h)}function oe(){var h=f.navigator;return h&&(h=h.userAgent)?h:""}function pe(h){return pe[" "](h),h}pe[" "]=function(){};var fe=oe().indexOf("Gecko")!=-1&&!(oe().toLowerCase().indexOf("webkit")!=-1&&oe().indexOf("Edge")==-1)&&!(oe().indexOf("Trident")!=-1||oe().indexOf("MSIE")!=-1)&&oe().indexOf("Edge")==-1;function Te(h,T,E){for(const I in h)T.call(E,h[I],I,h)}function O(h,T){for(const E in h)T.call(void 0,h[E],E,h)}function b(h){const T={};for(const E in h)T[E]=h[E];return T}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(h,T){let E,I;for(let F=1;F<arguments.length;F++){I=arguments[F];for(E in I)h[E]=I[E];for(let Q=0;Q<x.length;Q++)E=x[Q],Object.prototype.hasOwnProperty.call(I,E)&&(h[E]=I[E])}}function U(h){var T=1;h=h.split(":");const E=[];for(;0<T&&h.length;)E.push(h.shift()),T--;return h.length&&E.push(h.join(":")),E}function z(h){f.setTimeout(()=>{throw h},0)}function D(){var h=Ne;let T=null;return h.g&&(T=h.g,h.g=h.g.next,h.g||(h.h=null),T.next=null),T}class We{constructor(){this.h=this.g=null}add(T,E){const I=rt.get();I.set(T,E),this.h?this.h.next=I:this.g=I,this.h=I}}var rt=new ce(()=>new J,h=>h.reset());class J{constructor(){this.next=this.g=this.h=null}set(T,E){this.h=T,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let X,de=!1,Ne=new We,P=()=>{const h=f.Promise.resolve(void 0);X=()=>{h.then(W)}};var W=()=>{for(var h;h=D();){try{h.h.call(h.g)}catch(E){z(E)}var T=rt;T.j(h),100>T.h&&(T.h++,h.next=T.g,T.g=h)}de=!1};function ie(){this.s=this.s,this.C=this.C}ie.prototype.s=!1,ie.prototype.ma=function(){this.s||(this.s=!0,this.N())},ie.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Z(h,T){this.type=h,this.g=this.target=T,this.defaultPrevented=!1}Z.prototype.h=function(){this.defaultPrevented=!0};var Ce=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var h=!1,T=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};f.addEventListener("test",E,T),f.removeEventListener("test",E,T)}catch{}return h}();function Le(h,T){if(Z.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var E=this.type=h.type,I=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=T,T=h.relatedTarget){if(fe){e:{try{pe(T.nodeName);var F=!0;break e}catch{}F=!1}F||(T=null)}}else E=="mouseover"?T=h.fromElement:E=="mouseout"&&(T=h.toElement);this.relatedTarget=T,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:be[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Le.aa.h.call(this)}}V(Le,Z);var be={2:"touch",3:"pen",4:"mouse"};Le.prototype.h=function(){Le.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Rt="closure_listenable_"+(1e6*Math.random()|0),ut=0;function yn(h,T,E,I,F){this.listener=h,this.proxy=null,this.src=T,this.type=E,this.capture=!!I,this.ha=F,this.key=++ut,this.da=this.fa=!1}function pi(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Rn(h){this.src=h,this.g={},this.h=0}Rn.prototype.add=function(h,T,E,I,F){var Q=h.toString();h=this.g[Q],h||(h=this.g[Q]=[],this.h++);var ue=yi(h,T,I,F);return-1<ue?(T=h[ue],E||(T.fa=!1)):(T=new yn(T,this.src,Q,!!I,F),T.fa=E,h.push(T)),T};function gi(h,T){var E=T.type;if(E in h.g){var I=h.g[E],F=Array.prototype.indexOf.call(I,T,void 0),Q;(Q=0<=F)&&Array.prototype.splice.call(I,F,1),Q&&(pi(T),h.g[E].length==0&&(delete h.g[E],h.h--))}}function yi(h,T,E,I){for(var F=0;F<h.length;++F){var Q=h[F];if(!Q.da&&Q.listener==T&&Q.capture==!!E&&Q.ha==I)return F}return-1}var _n="closure_lm_"+(1e6*Math.random()|0),As={};function Eo(h,T,E,I,F){if(Array.isArray(T)){for(var Q=0;Q<T.length;Q++)Eo(h,T[Q],E,I,F);return null}return E=ws(E),h&&h[Rt]?h.K(T,E,g(I)?!!I.capture:!1,F):xn(h,T,E,!1,I,F)}function xn(h,T,E,I,F,Q){if(!T)throw Error("Invalid event type");var ue=g(F)?!!F.capture:!!F,Je=Gi(h);if(Je||(h[_n]=Je=new Rn(h)),E=Je.add(T,E,I,ue,Q),E.proxy)return E;if(I=Ya(),E.proxy=I,I.src=h,I.listener=E,h.addEventListener)Ce||(F=ue),F===void 0&&(F=!1),h.addEventListener(T.toString(),I,F);else if(h.attachEvent)h.attachEvent(ii(T.toString()),I);else if(h.addListener&&h.removeListener)h.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Ya(){function h(E){return T.call(h.src,h.listener,E)}const T=Co;return h}function br(h,T,E,I,F){if(Array.isArray(T))for(var Q=0;Q<T.length;Q++)br(h,T[Q],E,I,F);else I=g(I)?!!I.capture:!!I,E=ws(E),h&&h[Rt]?(h=h.i,T=String(T).toString(),T in h.g&&(Q=h.g[T],E=yi(Q,E,I,F),-1<E&&(pi(Q[E]),Array.prototype.splice.call(Q,E,1),Q.length==0&&(delete h.g[T],h.h--)))):h&&(h=Gi(h))&&(T=h.g[T.toString()],h=-1,T&&(h=yi(T,E,I,F)),(E=-1<h?T[h]:null)&&Ss(E))}function Ss(h){if(typeof h!="number"&&h&&!h.da){var T=h.src;if(T&&T[Rt])gi(T.i,h);else{var E=h.type,I=h.proxy;T.removeEventListener?T.removeEventListener(E,I,h.capture):T.detachEvent?T.detachEvent(ii(E),I):T.addListener&&T.removeListener&&T.removeListener(I),(E=Gi(T))?(gi(E,h),E.h==0&&(E.src=null,T[_n]=null)):pi(h)}}}function ii(h){return h in As?As[h]:As[h]="on"+h}function Co(h,T){if(h.da)h=!0;else{T=new Le(T,this);var E=h.listener,I=h.ha||h.src;h.fa&&Ss(h),h=E.call(I,T)}return h}function Gi(h){return h=h[_n],h instanceof Rn?h:null}var Nr="__closure_events_fn_"+(1e9*Math.random()>>>0);function ws(h){return typeof h=="function"?h:(h[Nr]||(h[Nr]=function(T){return h.handleEvent(T)}),h[Nr])}function gt(){ie.call(this),this.i=new Rn(this),this.M=this,this.F=null}V(gt,ie),gt.prototype[Rt]=!0,gt.prototype.removeEventListener=function(h,T,E,I){br(this,h,T,E,I)};function re(h,T){var E,I=h.F;if(I)for(E=[];I;I=I.F)E.push(I);if(h=h.M,I=T.type||T,typeof T=="string")T=new Z(T,h);else if(T instanceof Z)T.target=T.target||h;else{var F=T;T=new Z(I,h),k(T,F)}if(F=!0,E)for(var Q=E.length-1;0<=Q;Q--){var ue=T.g=E[Q];F=ye(ue,I,!0,T)&&F}if(ue=T.g=h,F=ye(ue,I,!0,T)&&F,F=ye(ue,I,!1,T)&&F,E)for(Q=0;Q<E.length;Q++)ue=T.g=E[Q],F=ye(ue,I,!1,T)&&F}gt.prototype.N=function(){if(gt.aa.N.call(this),this.i){var h=this.i,T;for(T in h.g){for(var E=h.g[T],I=0;I<E.length;I++)pi(E[I]);delete h.g[T],h.h--}}this.F=null},gt.prototype.K=function(h,T,E,I){return this.i.add(String(h),T,!1,E,I)},gt.prototype.L=function(h,T,E,I){return this.i.add(String(h),T,!0,E,I)};function ye(h,T,E,I){if(T=h.i.g[String(T)],!T)return!0;T=T.concat();for(var F=!0,Q=0;Q<T.length;++Q){var ue=T[Q];if(ue&&!ue.da&&ue.capture==E){var Je=ue.listener,Bt=ue.ha||ue.src;ue.fa&&gi(h.i,ue),F=Je.call(Bt,I)!==!1&&F}}return F&&!I.defaultPrevented}function he(h,T,E){if(typeof h=="function")E&&(h=S(h,E));else if(h&&typeof h.handleEvent=="function")h=S(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(T)?-1:f.setTimeout(h,T||0)}function yt(h){h.g=he(()=>{h.g=null,h.i&&(h.i=!1,yt(h))},h.l);const T=h.h;h.h=null,h.m.apply(null,T)}class Kt extends ie{constructor(T,E){super(),this.m=T,this.l=E,this.h=null,this.i=!1,this.g=null}j(T){this.h=arguments,this.g?this.i=!0:yt(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function un(h){ie.call(this),this.h=h,this.g={}}V(un,ie);var cn=[];function vn(h){Te(h.g,function(T,E){this.g.hasOwnProperty(E)&&Ss(T)},h),h.g={}}un.prototype.N=function(){un.aa.N.call(this),vn(this)},un.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Tn=f.JSON.stringify,ri=f.JSON.parse,Hi=class{stringify(h){return f.JSON.stringify(h,void 0)}parse(h){return f.JSON.parse(h,void 0)}};function Ki(){}Ki.prototype.h=null;function si(h){return h.h||(h.h=h.i())}function $a(){}var Yi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function $i(){Z.call(this,"d")}V($i,Z);function Qa(){Z.call(this,"c")}V(Qa,Z);var _i={},Wa=null;function Mr(){return Wa=Wa||new gt}_i.La="serverreachability";function Ao(h){Z.call(this,_i.La,h)}V(Ao,Z);function Dr(h){const T=Mr();re(T,new Ao(T))}_i.STAT_EVENT="statevent";function Uu(h,T){Z.call(this,_i.STAT_EVENT,h),this.stat=T}V(Uu,Z);function Tt(h){const T=Mr();re(T,new Uu(T,h))}_i.Ma="timingevent";function zt(h,T){Z.call(this,_i.Ma,h),this.size=T}V(zt,Z);function Dt(h,T){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){h()},T)}function Gn(){this.g=!0}Gn.prototype.xa=function(){this.g=!1};function Ja(h,T,E,I,F,Q){h.info(function(){if(h.g)if(Q)for(var ue="",Je=Q.split("&"),Bt=0;Bt<Je.length;Bt++){var Xe=Je[Bt].split("=");if(1<Xe.length){var $t=Xe[0];Xe=Xe[1];var Ft=$t.split("_");ue=2<=Ft.length&&Ft[1]=="type"?ue+($t+"="+Xe+"&"):ue+($t+"=redacted&")}}else ue=null;else ue=Q;return"XMLHTTP REQ ("+I+") [attempt "+F+"]: "+T+`
`+E+`
`+ue})}function Cd(h,T,E,I,F,Q,ue){h.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+F+"]: "+T+`
`+E+`
`+Q+" "+ue})}function Pr(h,T,E,I){h.info(function(){return"XMLHTTP TEXT ("+T+"): "+Is(h,E)+(I?" "+I:"")})}function zu(h,T){h.info(function(){return"TIMEOUT: "+T})}Gn.prototype.info=function(){};function Is(h,T){if(!h.g)return T;if(!T)return null;try{var E=JSON.parse(T);if(E){for(h=0;h<E.length;h++)if(Array.isArray(E[h])){var I=E[h];if(!(2>I.length)){var F=I[1];if(Array.isArray(F)&&!(1>F.length)){var Q=F[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(var ue=1;ue<F.length;ue++)F[ue]=""}}}}return Tn(E)}catch{return T}}var kr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Qi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},vi;function Ti(){}V(Ti,Ki),Ti.prototype.g=function(){return new XMLHttpRequest},Ti.prototype.i=function(){return{}},vi=new Ti;function En(h,T,E,I){this.j=h,this.i=T,this.l=E,this.R=I||1,this.U=new un(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new xt}function xt(){this.i=null,this.g="",this.h=!1}var Xa={},So={};function oi(h,T,E){h.L=1,h.v=Ms(kn(T)),h.m=E,h.P=!0,Wi(h,null)}function Wi(h,T){h.F=Date.now(),Rs(h),h.A=kn(h.v);var E=h.A,I=h.R;Array.isArray(I)||(I=[String(I)]),il(E.i,"t",I),h.C=0,E=h.j.J,h.h=new xt,h.g=tc(h.j,E?T:null,!h.m),0<h.O&&(h.M=new Kt(S(h.Y,h,h.g),h.O)),T=h.U,E=h.g,I=h.ca;var F="readystatechange";Array.isArray(F)||(F&&(cn[0]=F.toString()),F=cn);for(var Q=0;Q<F.length;Q++){var ue=Eo(E,F[Q],I||T.handleEvent,!1,T.h||T);if(!ue)break;T.g[ue.key]=ue}T=h.H?b(h.H):{},h.m?(h.u||(h.u="POST"),T["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,T)):(h.u="GET",h.g.ea(h.A,h.u,null,T)),Dr(),Ja(h.i,h.u,h.A,h.l,h.R,h.m)}En.prototype.ca=function(h){h=h.target;const T=this.M;T&&$n(h)==3?T.j():this.Y(h)},En.prototype.Y=function(h){try{if(h==this.g)e:{const Ft=$n(this.g);var T=this.g.Ba();const ir=this.g.Z();if(!(3>Ft)&&(Ft!=3||this.g&&(this.h.h||this.g.oa()||$u(this.g)))){this.J||Ft!=4||T==7||(T==8||0>=ir?Dr(3):Dr(2)),Vr(this);var E=this.g.Z();this.X=E;t:if(Bu(this)){var I=$u(this.g);h="";var F=I.length,Q=$n(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){jt(this),Ei(this);var ue="";break t}this.h.i=new f.TextDecoder}for(T=0;T<F;T++)this.h.h=!0,h+=this.h.i.decode(I[T],{stream:!(Q&&T==F-1)});I.length=0,this.h.g+=h,this.C=0,ue=this.h.g}else ue=this.g.oa();if(this.o=E==200,Cd(this.i,this.u,this.A,this.l,this.R,Ft,E),this.o){if(this.T&&!this.K){t:{if(this.g){var Je,Bt=this.g;if((Je=Bt.g?Bt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!le(Je)){var Xe=Je;break t}}Xe=null}if(E=Xe)Pr(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,xs(this,E);else{this.o=!1,this.s=3,Tt(12),jt(this),Ei(this);break e}}if(this.P){E=!0;let Zt;for(;!this.J&&this.C<ue.length;)if(Zt=Fu(this,ue),Zt==So){Ft==4&&(this.s=4,Tt(14),E=!1),Pr(this.i,this.l,null,"[Incomplete Response]");break}else if(Zt==Xa){this.s=4,Tt(15),Pr(this.i,this.l,ue,"[Invalid Chunk]"),E=!1;break}else Pr(this.i,this.l,Zt,null),xs(this,Zt);if(Bu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ft!=4||ue.length!=0||this.h.h||(this.s=1,Tt(16),E=!1),this.o=this.o&&E,!E)Pr(this.i,this.l,ue,"[Invalid Chunked Response]"),jt(this),Ei(this);else if(0<ue.length&&!this.W){this.W=!0;var $t=this.j;$t.g==this&&$t.ba&&!$t.M&&($t.j.info("Great, no buffering proxy detected. Bytes received: "+ue.length),zs($t),$t.M=!0,Tt(11))}}else Pr(this.i,this.l,ue,null),xs(this,ue);Ft==4&&jt(this),this.o&&!this.J&&(Ft==4?ju(this.j,this):(this.o=!1,Rs(this)))}else Rd(this.g),E==400&&0<ue.indexOf("Unknown SID")?(this.s=3,Tt(12)):(this.s=0,Tt(13)),jt(this),Ei(this)}}}catch{}finally{}};function Bu(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Fu(h,T){var E=h.C,I=T.indexOf(`
`,E);return I==-1?So:(E=Number(T.substring(E,I)),isNaN(E)?Xa:(I+=1,I+E>T.length?So:(T=T.slice(I,I+E),h.C=I+E,T)))}En.prototype.cancel=function(){this.J=!0,jt(this)};function Rs(h){h.S=Date.now()+h.I,qu(h,h.I)}function qu(h,T){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Dt(S(h.ba,h),T)}function Vr(h){h.B&&(f.clearTimeout(h.B),h.B=null)}En.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(zu(this.i,this.A),this.L!=2&&(Dr(),Tt(17)),jt(this),this.s=2,Ei(this)):qu(this,this.S-h)};function Ei(h){h.j.G==0||h.J||ju(h.j,h)}function jt(h){Vr(h);var T=h.M;T&&typeof T.ma=="function"&&T.ma(),h.M=null,vn(h.U),h.g&&(T=h.g,h.g=null,T.abort(),T.ma())}function xs(h,T){try{var E=h.j;if(E.G!=0&&(E.g==h||ja(E.h,h))){if(!h.K&&ja(E.h,h)&&E.G==3){try{var I=E.Da.g.parse(T)}catch{I=null}if(Array.isArray(I)&&I.length==3){var F=I;if(F[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<h.F)Oo(E),ko(E);else break e;ll(E),Tt(18)}}else E.za=F[1],0<E.za-E.T&&37500>F[2]&&E.F&&E.v==0&&!E.C&&(E.C=Dt(S(E.Za,E),6e3));if(1>=Io(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else nr(E,11)}else if((h.K||E.g==h)&&Oo(E),!le(T))for(F=E.Da.g.parse(T),T=0;T<F.length;T++){let Xe=F[T];if(E.T=Xe[0],Xe=Xe[1],E.G==2)if(Xe[0]=="c"){E.K=Xe[1],E.ia=Xe[2];const $t=Xe[3];$t!=null&&(E.la=$t,E.j.info("VER="+E.la));const Ft=Xe[4];Ft!=null&&(E.Aa=Ft,E.j.info("SVER="+E.Aa));const ir=Xe[5];ir!=null&&typeof ir=="number"&&0<ir&&(I=1.5*ir,E.L=I,E.j.info("backChannelRequestTimeoutMs_="+I)),I=E;const Zt=h.g;if(Zt){const xi=Zt.g?Zt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xi){var Q=I.h;Q.g||xi.indexOf("spdy")==-1&&xi.indexOf("quic")==-1&&xi.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(Ro(Q,Q.h),Q.h=null))}if(I.D){const cl=Zt.g?Zt.g.getResponseHeader("X-HTTP-Session-Id"):null;cl&&(I.ya=cl,ct(I.I,I.D,cl))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-h.F,E.j.info("Handshake RTT: "+E.R+"ms")),I=E;var ue=h;if(I.qa=ec(I,I.J?I.ia:null,I.W),ue.K){Cn(I.h,ue);var Je=ue,Bt=I.L;Bt&&(Je.I=Bt),Je.B&&(Vr(Je),Rs(Je)),I.g=ue}else Ju(I);0<E.i.length&&Vo(E)}else Xe[0]!="stop"&&Xe[0]!="close"||nr(E,7);else E.G==3&&(Xe[0]=="stop"||Xe[0]=="close"?Xe[0]=="stop"?nr(E,7):ol(E):Xe[0]!="noop"&&E.l&&E.l.ta(Xe),E.v=0)}}Dr(4)}catch{}}var Gu=class{constructor(h,T){this.g=h,this.map=T}};function Ji(h){this.l=h||10,f.PerformanceNavigationTiming?(h=f.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function wo(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Io(h){return h.h?1:h.g?h.g.size:0}function ja(h,T){return h.h?h.h==T:h.g?h.g.has(T):!1}function Ro(h,T){h.g?h.g.add(T):h.h=T}function Cn(h,T){h.h&&h.h==T?h.h=null:h.g&&h.g.has(T)&&h.g.delete(T)}Ji.prototype.cancel=function(){if(this.i=Za(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Za(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let T=h.i;for(const E of h.g.values())T=T.concat(E.D);return T}return H(h.i)}function Ad(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(y(h)){for(var T=[],E=h.length,I=0;I<E;I++)T.push(h[I]);return T}T=[],E=0;for(I in h)T[E++]=h[I];return T}function xo(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(y(h)||typeof h=="string"){var T=[];h=h.length;for(var E=0;E<h;E++)T.push(E);return T}T=[],E=0;for(const I in h)T[E++]=I;return T}}}function el(h,T){if(h.forEach&&typeof h.forEach=="function")h.forEach(T,void 0);else if(y(h)||typeof h=="string")Array.prototype.forEach.call(h,T,void 0);else for(var E=xo(h),I=Ad(h),F=I.length,Q=0;Q<F;Q++)T.call(void 0,I[Q],E&&E[Q],h)}var bs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Sd(h,T){if(h){h=h.split("&");for(var E=0;E<h.length;E++){var I=h[E].indexOf("="),F=null;if(0<=I){var Q=h[E].substring(0,I);F=h[E].substring(I+1)}else Q=h[E];T(Q,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function Pt(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Pt){this.h=h.h,Ns(this,h.j),this.o=h.o,this.g=h.g,Or(this,h.s),this.l=h.l;var T=h.i,E=new ji;E.i=T.i,T.g&&(E.g=new Map(T.g),E.h=T.h),Xi(this,E),this.m=h.m}else h&&(T=String(h).match(bs))?(this.h=!1,Ns(this,T[1]||"",!0),this.o=Hn(T[2]||""),this.g=Hn(T[3]||"",!0),Or(this,T[4]),this.l=Hn(T[5]||"",!0),Xi(this,T[6]||"",!0),this.m=Hn(T[7]||"")):(this.h=!1,this.i=new ji(null,this.h))}Pt.prototype.toString=function(){var h=[],T=this.j;T&&h.push(Ds(T,tl,!0),":");var E=this.g;return(E||T=="file")&&(h.push("//"),(T=this.o)&&h.push(Ds(T,tl,!0),"@"),h.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&h.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&h.push("/"),h.push(Ds(E,E.charAt(0)=="/"?wd:nl,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",Ds(E,bo)),h.join("")};function kn(h){return new Pt(h)}function Ns(h,T,E){h.j=E?Hn(T,!0):T,h.j&&(h.j=h.j.replace(/:$/,""))}function Or(h,T){if(T){if(T=Number(T),isNaN(T)||0>T)throw Error("Bad port number "+T);h.s=T}else h.s=null}function Xi(h,T,E){T instanceof ji?(h.i=T,Ku(h.i,h.h)):(E||(T=Ds(T,Id)),h.i=new ji(T,h.h))}function ct(h,T,E){h.i.set(T,E)}function Ms(h){return ct(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Hn(h,T){return h?T?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Ds(h,T,E){return typeof h=="string"?(h=encodeURI(h).replace(T,Hu),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Hu(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var tl=/[#\/\?@]/g,nl=/[#\?:]/g,wd=/[#\?]/g,Id=/[#\?@]/g,bo=/#/g;function ji(h,T){this.h=this.g=null,this.i=h||null,this.j=!!T}function Kn(h){h.g||(h.g=new Map,h.h=0,h.i&&Sd(h.i,function(T,E){h.add(decodeURIComponent(T.replace(/\+/g," ")),E)}))}i=ji.prototype,i.add=function(h,T){Kn(this),this.i=null,h=Ci(this,h);var E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(T),this.h+=1,this};function Zi(h,T){Kn(h),T=Ci(h,T),h.g.has(T)&&(h.i=null,h.h-=h.g.get(T).length,h.g.delete(T))}function er(h,T){return Kn(h),T=Ci(h,T),h.g.has(T)}i.forEach=function(h,T){Kn(this),this.g.forEach(function(E,I){E.forEach(function(F){h.call(T,F,I,this)},this)},this)},i.na=function(){Kn(this);const h=Array.from(this.g.values()),T=Array.from(this.g.keys()),E=[];for(let I=0;I<T.length;I++){const F=h[I];for(let Q=0;Q<F.length;Q++)E.push(T[I])}return E},i.V=function(h){Kn(this);let T=[];if(typeof h=="string")er(this,h)&&(T=T.concat(this.g.get(Ci(this,h))));else{h=Array.from(this.g.values());for(let E=0;E<h.length;E++)T=T.concat(h[E])}return T},i.set=function(h,T){return Kn(this),this.i=null,h=Ci(this,h),er(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[T]),this.h+=1,this},i.get=function(h,T){return h?(h=this.V(h),0<h.length?String(h[0]):T):T};function il(h,T,E){Zi(h,T),0<E.length&&(h.i=null,h.g.set(Ci(h,T),H(E)),h.h+=E.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],T=Array.from(this.g.keys());for(var E=0;E<T.length;E++){var I=T[E];const Q=encodeURIComponent(String(I)),ue=this.V(I);for(I=0;I<ue.length;I++){var F=Q;ue[I]!==""&&(F+="="+encodeURIComponent(String(ue[I]))),h.push(F)}}return this.i=h.join("&")};function Ci(h,T){return T=String(T),h.j&&(T=T.toLowerCase()),T}function Ku(h,T){T&&!h.j&&(Kn(h),h.i=null,h.g.forEach(function(E,I){var F=I.toLowerCase();I!=F&&(Zi(this,I),il(this,F,E))},h)),h.j=T}function Ps(h,T){const E=new Gn;if(f.Image){const I=new Image;I.onload=R(Yn,E,"TestLoadImage: loaded",!0,T,I),I.onerror=R(Yn,E,"TestLoadImage: error",!1,T,I),I.onabort=R(Yn,E,"TestLoadImage: abort",!1,T,I),I.ontimeout=R(Yn,E,"TestLoadImage: timeout",!1,T,I),f.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=h}else T(!1)}function ai(h,T){const E=new Gn,I=new AbortController,F=setTimeout(()=>{I.abort(),Yn(E,"TestPingServer: timeout",!1,T)},1e4);fetch(h,{signal:I.signal}).then(Q=>{clearTimeout(F),Q.ok?Yn(E,"TestPingServer: ok",!0,T):Yn(E,"TestPingServer: server error",!1,T)}).catch(()=>{clearTimeout(F),Yn(E,"TestPingServer: error",!1,T)})}function Yn(h,T,E,I,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),I(E)}catch{}}function ks(){this.g=new Hi}function Ai(h,T,E){const I=E||"";try{el(h,function(F,Q){let ue=F;g(F)&&(ue=Tn(F)),T.push(I+Q+"="+encodeURIComponent(ue))})}catch(F){throw T.push(I+"type="+encodeURIComponent("_badmap")),F}}function Lr(h){this.l=h.Ub||null,this.j=h.eb||!1}V(Lr,Ki),Lr.prototype.g=function(){return new tr(this.l,this.j)},Lr.prototype.i=function(h){return function(){return h}}({});function tr(h,T){gt.call(this),this.D=h,this.o=T,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}V(tr,gt),i=tr.prototype,i.open=function(h,T){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=T,this.readyState=1,wi(this)},i.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const T={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(T.body=h),(this.D||f).fetch(new Request(this.A,T)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Si(this)),this.readyState=0},i.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,wi(this)),this.g&&(this.readyState=3,wi(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;rl(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function rl(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}i.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var T=h.value?h.value:new Uint8Array(0);(T=this.v.decode(T,{stream:!h.done}))&&(this.response=this.responseText+=T)}h.done?Si(this):wi(this),this.readyState==3&&rl(this)}},i.Ra=function(h){this.g&&(this.response=this.responseText=h,Si(this))},i.Qa=function(h){this.g&&(this.response=h,Si(this))},i.ga=function(){this.g&&Si(this)};function Si(h){h.readyState=4,h.l=null,h.j=null,h.v=null,wi(h)}i.setRequestHeader=function(h,T){this.u.append(h,T)},i.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],T=this.h.entries();for(var E=T.next();!E.done;)E=E.value,h.push(E[0]+": "+E[1]),E=T.next();return h.join(`\r
`)};function wi(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(tr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function sl(h){let T="";return Te(h,function(E,I){T+=I,T+=":",T+=E,T+=`\r
`}),T}function Yt(h,T,E){e:{for(I in E){var I=!1;break e}I=!0}I||(E=sl(E),typeof h=="string"?E!=null&&encodeURIComponent(String(E)):ct(h,T,E))}function st(h){gt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}V(st,gt);var No=/^https?$/i,Vs=["POST","PUT"];i=st.prototype,i.Ha=function(h){this.J=h},i.ea=function(h,T,E,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);T=T?T.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():vi.g(),this.v=this.o?si(this.o):si(vi),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(T,String(h),!0),this.B=!1}catch(Q){Yu(this,Q);return}if(h=E||"",E=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var F in I)E.set(F,I[F]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const Q of I.keys())E.set(Q,I.get(Q));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(E.keys()).find(Q=>Q.toLowerCase()=="content-type"),F=f.FormData&&h instanceof f.FormData,!(0<=Array.prototype.indexOf.call(Vs,T,void 0))||I||F||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,ue]of E)this.g.setRequestHeader(Q,ue);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Os(this),this.u=!0,this.g.send(h),this.u=!1}catch(Q){Yu(this,Q)}};function Yu(h,T){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=T,h.m=5,Mo(h),Ii(h)}function Mo(h){h.A||(h.A=!0,re(h,"complete"),re(h,"error"))}i.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,re(this,"complete"),re(this,"abort"),Ii(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ii(this,!0)),st.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?Do(this):this.bb())},i.bb=function(){Do(this)};function Do(h){if(h.h&&typeof u<"u"&&(!h.v[1]||$n(h)!=4||h.Z()!=2)){if(h.u&&$n(h)==4)he(h.Ea,0,h);else if(re(h,"readystatechange"),$n(h)==4){h.h=!1;try{const ue=h.Z();e:switch(ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var T=!0;break e;default:T=!1}var E;if(!(E=T)){var I;if(I=ue===0){var F=String(h.D).match(bs)[1]||null;!F&&f.self&&f.self.location&&(F=f.self.location.protocol.slice(0,-1)),I=!No.test(F?F.toLowerCase():"")}E=I}if(E)re(h,"complete"),re(h,"success");else{h.m=6;try{var Q=2<$n(h)?h.g.statusText:""}catch{Q=""}h.l=Q+" ["+h.Z()+"]",Mo(h)}}finally{Ii(h)}}}}function Ii(h,T){if(h.g){Os(h);const E=h.g,I=h.v[0]?()=>{}:null;h.g=null,h.v=null,T||re(h,"ready");try{E.onreadystatechange=I}catch{}}}function Os(h){h.I&&(f.clearTimeout(h.I),h.I=null)}i.isActive=function(){return!!this.g};function $n(h){return h.g?h.g.readyState:0}i.Z=function(){try{return 2<$n(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(h){if(this.g){var T=this.g.responseText;return h&&T.indexOf(h)==0&&(T=T.substring(h.length)),ri(T)}};function $u(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Rd(h){const T={};h=(h.g&&2<=$n(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<h.length;I++){if(le(h[I]))continue;var E=U(h[I]);const F=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const Q=T[F]||[];T[F]=Q,Q.push(E)}O(T,function(I){return I.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ls(h,T,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||T}function Po(h){this.Aa=0,this.i=[],this.j=new Gn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ls("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ls("baseRetryDelayMs",5e3,h),this.cb=Ls("retryDelaySeedMs",1e4,h),this.Wa=Ls("forwardChannelMaxRetries",2,h),this.wa=Ls("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Ji(h&&h.concurrentRequestLimit),this.Da=new ks,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=Po.prototype,i.la=8,i.G=1,i.connect=function(h,T,E,I){Tt(0),this.W=h,this.H=T||{},E&&I!==void 0&&(this.H.OSID=E,this.H.OAID=I),this.F=this.X,this.I=ec(this,null,this.W),Vo(this)};function ol(h){if(Qu(h),h.G==3){var T=h.U++,E=kn(h.I);if(ct(E,"SID",h.K),ct(E,"RID",T),ct(E,"TYPE","terminate"),Us(h,E),T=new En(h,h.j,T),T.L=2,T.v=Ms(kn(E)),E=!1,f.navigator&&f.navigator.sendBeacon)try{E=f.navigator.sendBeacon(T.v.toString(),"")}catch{}!E&&f.Image&&(new Image().src=T.v,E=!0),E||(T.g=tc(T.j,null),T.g.ea(T.v)),T.F=Date.now(),Rs(T)}Zu(h)}function ko(h){h.g&&(zs(h),h.g.cancel(),h.g=null)}function Qu(h){ko(h),h.u&&(f.clearTimeout(h.u),h.u=null),Oo(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&f.clearTimeout(h.s),h.s=null)}function Vo(h){if(!wo(h.h)&&!h.s){h.s=!0;var T=h.Ga;X||P(),de||(X(),de=!0),Ne.add(T,h),h.B=0}}function xd(h,T){return Io(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=T.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Dt(S(h.Ga,h,T),ul(h,h.B)),h.B++,!0)}i.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const F=new En(this,this.j,h);let Q=this.o;if(this.S&&(Q?(Q=b(Q),k(Q,this.S)):Q=this.S),this.m!==null||this.O||(F.H=Q,Q=null),this.P)e:{for(var T=0,E=0;E<this.i.length;E++){t:{var I=this.i[E];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(T+=I,4096<T){T=E;break e}if(T===4096||E===this.i.length-1){T=E+1;break e}}T=1e3}else T=1e3;T=Wu(this,F,T),E=kn(this.I),ct(E,"RID",h),ct(E,"CVER",22),this.D&&ct(E,"X-HTTP-Session-Id",this.D),Us(this,E),Q&&(this.O?T="headers="+encodeURIComponent(String(sl(Q)))+"&"+T:this.m&&Yt(E,this.m,Q)),Ro(this.h,F),this.Ua&&ct(E,"TYPE","init"),this.P?(ct(E,"$req",T),ct(E,"SID","null"),F.T=!0,oi(F,E,null)):oi(F,E,T),this.G=2}}else this.G==3&&(h?al(this,h):this.i.length==0||wo(this.h)||al(this))};function al(h,T){var E;T?E=T.l:E=h.U++;const I=kn(h.I);ct(I,"SID",h.K),ct(I,"RID",E),ct(I,"AID",h.T),Us(h,I),h.m&&h.o&&Yt(I,h.m,h.o),E=new En(h,h.j,E,h.B+1),h.m===null&&(E.H=h.o),T&&(h.i=T.D.concat(h.i)),T=Wu(h,E,1e3),E.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Ro(h.h,E),oi(E,I,T)}function Us(h,T){h.H&&Te(h.H,function(E,I){ct(T,I,E)}),h.l&&el({},function(E,I){ct(T,I,E)})}function Wu(h,T,E){E=Math.min(h.i.length,E);var I=h.l?S(h.l.Na,h.l,h):null;e:{var F=h.i;let Q=-1;for(;;){const ue=["count="+E];Q==-1?0<E?(Q=F[0].g,ue.push("ofs="+Q)):Q=0:ue.push("ofs="+Q);let Je=!0;for(let Bt=0;Bt<E;Bt++){let Xe=F[Bt].g;const $t=F[Bt].map;if(Xe-=Q,0>Xe)Q=Math.max(0,F[Bt].g-100),Je=!1;else try{Ai($t,ue,"req"+Xe+"_")}catch{I&&I($t)}}if(Je){I=ue.join("&");break e}}}return h=h.i.splice(0,E),T.D=h,I}function Ju(h){if(!h.g&&!h.u){h.Y=1;var T=h.Fa;X||P(),de||(X(),de=!0),Ne.add(T,h),h.v=0}}function ll(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Dt(S(h.Fa,h),ul(h,h.v)),h.v++,!0)}i.Fa=function(){if(this.u=null,Xu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Dt(S(this.ab,this),h)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Tt(10),ko(this),Xu(this))};function zs(h){h.A!=null&&(f.clearTimeout(h.A),h.A=null)}function Xu(h){h.g=new En(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var T=kn(h.qa);ct(T,"RID","rpc"),ct(T,"SID",h.K),ct(T,"AID",h.T),ct(T,"CI",h.F?"0":"1"),!h.F&&h.ja&&ct(T,"TO",h.ja),ct(T,"TYPE","xmlhttp"),Us(h,T),h.m&&h.o&&Yt(T,h.m,h.o),h.L&&(h.g.I=h.L);var E=h.g;h=h.ia,E.L=1,E.v=Ms(kn(T)),E.m=null,E.P=!0,Wi(E,h)}i.Za=function(){this.C!=null&&(this.C=null,ko(this),ll(this),Tt(19))};function Oo(h){h.C!=null&&(f.clearTimeout(h.C),h.C=null)}function ju(h,T){var E=null;if(h.g==T){Oo(h),zs(h),h.g=null;var I=2}else if(ja(h.h,T))E=T.D,Cn(h.h,T),I=1;else return;if(h.G!=0){if(T.o)if(I==1){E=T.m?T.m.length:0,T=Date.now()-T.F;var F=h.B;I=Mr(),re(I,new zt(I,E)),Vo(h)}else Ju(h);else if(F=T.s,F==3||F==0&&0<T.X||!(I==1&&xd(h,T)||I==2&&ll(h)))switch(E&&0<E.length&&(T=h.h,T.i=T.i.concat(E)),F){case 1:nr(h,5);break;case 4:nr(h,10);break;case 3:nr(h,6);break;default:nr(h,2)}}}function ul(h,T){let E=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(E*=2),E*T}function nr(h,T){if(h.j.info("Error code "+T),T==2){var E=S(h.fb,h),I=h.Xa;const F=!I;I=new Pt(I||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Ns(I,"https"),Ms(I),F?Ps(I.toString(),E):ai(I.toString(),E)}else Tt(2);h.G=0,h.l&&h.l.sa(T),Zu(h),Qu(h)}i.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Tt(2)):(this.j.info("Failed to ping google.com"),Tt(1))};function Zu(h){if(h.G=0,h.ka=[],h.l){const T=Za(h.h);(T.length!=0||h.i.length!=0)&&(Y(h.ka,T),Y(h.ka,h.i),h.h.i.length=0,H(h.i),h.i.length=0),h.l.ra()}}function ec(h,T,E){var I=E instanceof Pt?kn(E):new Pt(E);if(I.g!="")T&&(I.g=T+"."+I.g),Or(I,I.s);else{var F=f.location;I=F.protocol,T=T?T+"."+F.hostname:F.hostname,F=+F.port;var Q=new Pt(null);I&&Ns(Q,I),T&&(Q.g=T),F&&Or(Q,F),E&&(Q.l=E),I=Q}return E=h.D,T=h.ya,E&&T&&ct(I,E,T),ct(I,"VER",h.la),Us(h,I),I}function tc(h,T,E){if(T&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return T=h.Ca&&!h.pa?new st(new Lr({eb:E})):new st(h.pa),T.Ha(h.J),T}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function nc(){}i=nc.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function Lo(){}Lo.prototype.g=function(h,T){return new An(h,T)};function An(h,T){gt.call(this),this.g=new Po(T),this.l=h,this.h=T&&T.messageUrlParams||null,h=T&&T.messageHeaders||null,T&&T.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=T&&T.initMessageHeaders||null,T&&T.messageContentType&&(h?h["X-WebChannel-Content-Type"]=T.messageContentType:h={"X-WebChannel-Content-Type":T.messageContentType}),T&&T.va&&(h?h["X-WebChannel-Client-Profile"]=T.va:h={"X-WebChannel-Client-Profile":T.va}),this.g.S=h,(h=T&&T.Sb)&&!le(h)&&(this.g.m=h),this.v=T&&T.supportsCrossDomainXhr||!1,this.u=T&&T.sendRawJson||!1,(T=T&&T.httpSessionIdParam)&&!le(T)&&(this.g.D=T,h=this.h,h!==null&&T in h&&(h=this.h,T in h&&delete h[T])),this.j=new Ri(this)}V(An,gt),An.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},An.prototype.close=function(){ol(this.g)},An.prototype.o=function(h){var T=this.g;if(typeof h=="string"){var E={};E.__data__=h,h=E}else this.u&&(E={},E.__data__=Tn(h),h=E);T.i.push(new Gu(T.Ya++,h)),T.G==3&&Vo(T)},An.prototype.N=function(){this.g.l=null,delete this.j,ol(this.g),delete this.g,An.aa.N.call(this)};function ic(h){$i.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var T=h.__sm__;if(T){e:{for(const E in T){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,T=T!==null&&h in T?T[h]:void 0),this.data=T}else this.data=h}V(ic,$i);function rc(){Qa.call(this),this.status=1}V(rc,Qa);function Ri(h){this.g=h}V(Ri,nc),Ri.prototype.ua=function(){re(this.g,"a")},Ri.prototype.ta=function(h){re(this.g,new ic(h))},Ri.prototype.sa=function(h){re(this.g,new rc)},Ri.prototype.ra=function(){re(this.g,"b")},Lo.prototype.createWebChannel=Lo.prototype.g,An.prototype.send=An.prototype.o,An.prototype.open=An.prototype.m,An.prototype.close=An.prototype.close,lA=function(){return new Lo},aA=function(){return Mr()},oA=_i,mp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},kr.NO_ERROR=0,kr.TIMEOUT=8,kr.HTTP_ERROR=6,Ef=kr,Qi.COMPLETE="complete",sA=Qi,$a.EventType=Yi,Yi.OPEN="a",Yi.CLOSE="b",Yi.ERROR="c",Yi.MESSAGE="d",gt.prototype.listen=gt.prototype.K,nu=$a,st.prototype.listenOnce=st.prototype.L,st.prototype.getLastError=st.prototype.Ka,st.prototype.getLastErrorCode=st.prototype.Ba,st.prototype.getStatus=st.prototype.Z,st.prototype.getResponseJson=st.prototype.Oa,st.prototype.getResponseText=st.prototype.oa,st.prototype.send=st.prototype.ea,st.prototype.setWithCredentials=st.prototype.Ha,rA=st}).apply(typeof uf<"u"?uf:typeof self<"u"?self:typeof window<"u"?window:{});const j0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}mn.UNAUTHENTICATED=new mn(null),mn.GOOGLE_CREDENTIALS=new mn("google-credentials-uid"),mn.FIRST_PARTY=new mn("first-party-uid"),mn.MOCK_USER=new mn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qa="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo=new Vp("@firebase/firestore");function Zl(){return mo.logLevel}function Ee(i,...e){if(mo.logLevel<=$e.DEBUG){const t=e.map(Wp);mo.debug(`Firestore (${qa}): ${i}`,...t)}}function Ir(i,...e){if(mo.logLevel<=$e.ERROR){const t=e.map(Wp);mo.error(`Firestore (${qa}): ${i}`,...t)}}function Da(i,...e){if(mo.logLevel<=$e.WARN){const t=e.map(Wp);mo.warn(`Firestore (${qa}): ${i}`,...t)}}function Wp(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ve(i="Unexpected state"){const e=`FIRESTORE (${qa}) INTERNAL ASSERTION FAILED: `+i;throw Ir(e),new Error(e)}function lt(i,e){i||Ve()}function ze(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends xr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class LV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(mn.UNAUTHENTICATED))}shutdown(){}}class UV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class zV{constructor(e){this.t=e,this.currentUser=mn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){lt(this.o===void 0);let n=this.i;const s=y=>this.i!==n?(n=this.i,t(y)):Promise.resolve();let a=new Cr;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Cr,e.enqueueRetryable(()=>s(this.currentUser))};const u=()=>{const y=a;e.enqueueRetryable(async()=>{await y.promise,await s(this.currentUser)})},f=y=>{Ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit(y=>f(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?f(y):(Ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Cr)}},0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(n=>this.i!==e?(Ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(lt(typeof n.accessToken=="string"),new uA(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return lt(e===null||typeof e=="string"),new mn(e)}}class BV{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=mn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class FV{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new BV(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(mn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class qV{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class GV{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){lt(this.o===void 0);const n=a=>{a.error!=null&&Ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.R;return this.R=a.token,Ee("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>n(a))};const s=a=>{Ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?s(a):Ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(lt(typeof t.token=="string"),this.R=t.token,new qV(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HV(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<i;n++)t[n]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const s=HV(40);for(let a=0;a<s.length;++a)n.length<20&&s[a]<t&&(n+=e.charAt(s[a]%e.length))}return n}}function tt(i,e){return i<e?-1:i>e?1:0}function Pa(i,e,t){return i.length===e.length&&i.every((n,s)=>t(n,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ge(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ge(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ge(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ht.fromMillis(Date.now())}static fromDate(e){return Ht.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Ht(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?tt(this.nanoseconds,e.nanoseconds):tt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ue(e)}static min(){return new Ue(new Ht(0,0))}static max(){return new Ue(new Ht(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e,t,n){t===void 0?t=0:t>e.length&&Ve(),n===void 0?n=e.length-t:n>e.length-t&&Ve(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return gu.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof gu?e.forEach(n=>{t.push(n)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let s=0;s<n;s++){const a=e.get(s),u=t.get(s);if(a<u)return-1;if(a>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class _t extends gu{construct(e,t,n){return new _t(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new ge(ne.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(s=>s.length>0))}return new _t(t)}static emptyPath(){return new _t([])}}const KV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class sn extends gu{construct(e,t,n){return new sn(e,t,n)}static isValidIdentifier(e){return KV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),sn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new sn(["__name__"])}static fromServerFormat(e){const t=[];let n="",s=0;const a=()=>{if(n.length===0)throw new ge(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let u=!1;for(;s<e.length;){const f=e[s];if(f==="\\"){if(s+1===e.length)throw new ge(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[s+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new ge(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=y,s+=2}else f==="`"?(u=!u,s++):f!=="."||u?(n+=f,s++):(a(),s++)}if(a(),u)throw new ge(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new sn(t)}static emptyPath(){return new sn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e){this.path=e}static fromPath(e){return new we(_t.fromString(e))}static fromName(e){return new we(_t.fromString(e).popFirst(5))}static empty(){return new we(_t.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&_t.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return _t.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new we(new _t(e.slice()))}}function YV(i,e){const t=i.toTimestamp().seconds,n=i.toTimestamp().nanoseconds+1,s=Ue.fromTimestamp(n===1e9?new Ht(t+1,0):new Ht(t,n));return new ys(s,we.empty(),e)}function $V(i){return new ys(i.readTime,i.key,-1)}class ys{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new ys(Ue.min(),we.empty(),-1)}static max(){return new ys(Ue.max(),we.empty(),-1)}}function QV(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=we.comparator(i.documentKey,e.documentKey),t!==0?t:tt(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class JV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mu(i){if(i.code!==ne.FAILED_PRECONDITION||i.message!==WV)throw i;Ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ve(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se((n,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(n,s)},this.catchCallback=a=>{this.wrapFailure(t,a).next(n,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):se.reject(t)}static resolve(e){return new se((t,n)=>{t(e)})}static reject(e){return new se((t,n)=>{n(e)})}static waitFor(e){return new se((t,n)=>{let s=0,a=0,u=!1;e.forEach(f=>{++s,f.next(()=>{++a,u&&a===s&&t()},y=>n(y))}),u=!0,a===s&&t()})}static or(e){let t=se.resolve(!1);for(const n of e)t=t.next(s=>s?se.resolve(s):n());return t}static forEach(e,t){const n=[];return e.forEach((s,a)=>{n.push(t.call(this,s,a))}),this.waitFor(n)}static mapArray(e,t){return new se((n,s)=>{const a=e.length,u=new Array(a);let f=0;for(let y=0;y<a;y++){const g=y;t(e[g]).next(v=>{u[g]=v,++f,f===a&&n(u)},v=>s(v))}})}static doWhile(e,t){return new se((n,s)=>{const a=()=>{e()===!0?t().next(()=>{a()},s):n()};a()})}}function XV(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Du(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this.ie(n),this.se=n=>t.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Jp.oe=-1;function rd(i){return i==null}function Gf(i){return i===0&&1/i==-1/0}function jV(i){return typeof i=="number"&&Number.isInteger(i)&&!Gf(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z0(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function yo(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function fA(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e,t){this.comparator=e,this.root=t||rn.EMPTY}insert(e,t){return new St(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,rn.BLACK,null,null))}remove(e){return new St(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return t+n.left.size;s<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new cf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new cf(this.root,e,this.comparator,!1)}getReverseIterator(){return new cf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new cf(this.root,e,this.comparator,!0)}}class cf{constructor(e,t,n,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?n(e.key,t):1,t&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class rn{constructor(e,t,n,s,a){this.key=e,this.value=t,this.color=n??rn.RED,this.left=s??rn.EMPTY,this.right=a??rn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,s,a){return new rn(e??this.key,t??this.value,n??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let s=this;const a=n(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,t,n),null):a===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return rn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return rn.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,rn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,rn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ve();const e=this.left.check();if(e!==this.right.check())throw Ve();return e+(this.isRed()?0:1)}}rn.EMPTY=null,rn.RED=!0,rn.BLACK=!1;rn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ve()}get value(){throw Ve()}get color(){throw Ve()}get left(){throw Ve()}get right(){throw Ve()}copy(e,t,n,s,a){return this}insert(e,t,n){return new rn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.comparator=e,this.data=new St(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new eE(this.data.getIterator())}getIteratorFrom(e){return new eE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(n=>{t=t.add(n)}),t}isEqual(e){if(!(e instanceof on)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=n.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new on(this.comparator);return t.data=e,t}}class eE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e){this.fields=e,e.sort(sn.comparator)}static empty(){return new qn([])}unionWith(e){let t=new on(sn.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new qn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Pa(this.fields,e.fields,(t,n)=>t.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new dA("Invalid base64 string: "+a):a}}(e);return new ln(t)}static fromUint8Array(e){const t=function(s){let a="";for(let u=0;u<s.length;++u)a+=String.fromCharCode(s[u]);return a}(e);return new ln(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const n=new Uint8Array(t.length);for(let s=0;s<t.length;s++)n[s]=t.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return tt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ln.EMPTY_BYTE_STRING=new ln("");const ZV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _s(i){if(lt(!!i),typeof i=="string"){let e=0;const t=ZV.exec(i);if(lt(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(i);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Mt(i.seconds),nanos:Mt(i.nanos)}}function Mt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function po(i){return typeof i=="string"?ln.fromBase64String(i):ln.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xp(i){var e,t;return((t=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function jp(i){const e=i.mapValue.fields.__previous_value__;return Xp(e)?jp(e):e}function yu(i){const e=_s(i.mapValue.fields.__local_write_time__.timestampValue);return new Ht(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(e,t,n,s,a,u,f,y,g){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=s,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=f,this.longPollingOptions=y,this.useFetchStreams=g}}class _u{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new _u("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof _u&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ff={mapValue:{}};function go(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Xp(i)?4:nO(i)?9007199254740991:tO(i)?10:11:Ve()}function qi(i,e){if(i===e)return!0;const t=go(i);if(t!==go(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return yu(i).isEqual(yu(e));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const u=_s(s.timestampValue),f=_s(a.timestampValue);return u.seconds===f.seconds&&u.nanos===f.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(s,a){return po(s.bytesValue).isEqual(po(a.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(s,a){return Mt(s.geoPointValue.latitude)===Mt(a.geoPointValue.latitude)&&Mt(s.geoPointValue.longitude)===Mt(a.geoPointValue.longitude)}(i,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return Mt(s.integerValue)===Mt(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const u=Mt(s.doubleValue),f=Mt(a.doubleValue);return u===f?Gf(u)===Gf(f):isNaN(u)&&isNaN(f)}return!1}(i,e);case 9:return Pa(i.arrayValue.values||[],e.arrayValue.values||[],qi);case 10:case 11:return function(s,a){const u=s.mapValue.fields||{},f=a.mapValue.fields||{};if(Z0(u)!==Z0(f))return!1;for(const y in u)if(u.hasOwnProperty(y)&&(f[y]===void 0||!qi(u[y],f[y])))return!1;return!0}(i,e);default:return Ve()}}function vu(i,e){return(i.values||[]).find(t=>qi(t,e))!==void 0}function ka(i,e){if(i===e)return 0;const t=go(i),n=go(e);if(t!==n)return tt(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return tt(i.booleanValue,e.booleanValue);case 2:return function(a,u){const f=Mt(a.integerValue||a.doubleValue),y=Mt(u.integerValue||u.doubleValue);return f<y?-1:f>y?1:f===y?0:isNaN(f)?isNaN(y)?0:-1:1}(i,e);case 3:return tE(i.timestampValue,e.timestampValue);case 4:return tE(yu(i),yu(e));case 5:return tt(i.stringValue,e.stringValue);case 6:return function(a,u){const f=po(a),y=po(u);return f.compareTo(y)}(i.bytesValue,e.bytesValue);case 7:return function(a,u){const f=a.split("/"),y=u.split("/");for(let g=0;g<f.length&&g<y.length;g++){const v=tt(f[g],y[g]);if(v!==0)return v}return tt(f.length,y.length)}(i.referenceValue,e.referenceValue);case 8:return function(a,u){const f=tt(Mt(a.latitude),Mt(u.latitude));return f!==0?f:tt(Mt(a.longitude),Mt(u.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return nE(i.arrayValue,e.arrayValue);case 10:return function(a,u){var f,y,g,v;const A=a.fields||{},S=u.fields||{},R=(f=A.value)===null||f===void 0?void 0:f.arrayValue,V=(y=S.value)===null||y===void 0?void 0:y.arrayValue,H=tt(((g=R==null?void 0:R.values)===null||g===void 0?void 0:g.length)||0,((v=V==null?void 0:V.values)===null||v===void 0?void 0:v.length)||0);return H!==0?H:nE(R,V)}(i.mapValue,e.mapValue);case 11:return function(a,u){if(a===ff.mapValue&&u===ff.mapValue)return 0;if(a===ff.mapValue)return 1;if(u===ff.mapValue)return-1;const f=a.fields||{},y=Object.keys(f),g=u.fields||{},v=Object.keys(g);y.sort(),v.sort();for(let A=0;A<y.length&&A<v.length;++A){const S=tt(y[A],v[A]);if(S!==0)return S;const R=ka(f[y[A]],g[v[A]]);if(R!==0)return R}return tt(y.length,v.length)}(i.mapValue,e.mapValue);default:throw Ve()}}function tE(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return tt(i,e);const t=_s(i),n=_s(e),s=tt(t.seconds,n.seconds);return s!==0?s:tt(t.nanos,n.nanos)}function nE(i,e){const t=i.values||[],n=e.values||[];for(let s=0;s<t.length&&s<n.length;++s){const a=ka(t[s],n[s]);if(a)return a}return tt(t.length,n.length)}function Va(i){return pp(i)}function pp(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(t){const n=_s(t);return`time(${n.seconds},${n.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(t){return po(t).toBase64()}(i.bytesValue):"referenceValue"in i?function(t){return we.fromName(t).toString()}(i.referenceValue):"geoPointValue"in i?function(t){return`geo(${t.latitude},${t.longitude})`}(i.geoPointValue):"arrayValue"in i?function(t){let n="[",s=!0;for(const a of t.values||[])s?s=!1:n+=",",n+=pp(a);return n+"]"}(i.arrayValue):"mapValue"in i?function(t){const n=Object.keys(t.fields||{}).sort();let s="{",a=!0;for(const u of n)a?a=!1:s+=",",s+=`${u}:${pp(t.fields[u])}`;return s+"}"}(i.mapValue):Ve()}function iE(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function gp(i){return!!i&&"integerValue"in i}function Zp(i){return!!i&&"arrayValue"in i}function rE(i){return!!i&&"nullValue"in i}function sE(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Cf(i){return!!i&&"mapValue"in i}function tO(i){var e,t;return((t=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function uu(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return yo(i.mapValue.fields,(t,n)=>e.mapValue.fields[t]=uu(n)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=uu(i.arrayValue.values[t]);return e}return Object.assign({},i)}function nO(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.value=e}static empty(){return new Dn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Cf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=uu(t)}setAll(e){let t=sn.emptyPath(),n={},s=[];e.forEach((u,f)=>{if(!t.isImmediateParentOf(f)){const y=this.getFieldsMap(t);this.applyChanges(y,n,s),n={},s=[],t=f.popLast()}u?n[f.lastSegment()]=uu(u):s.push(f.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,n,s)}delete(e){const t=this.field(e.popLast());Cf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return qi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=t.mapValue.fields[e.get(n)];Cf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,n){yo(t,(s,a)=>e[s]=a);for(const s of n)delete e[s]}clone(){return new Dn(uu(this.value))}}function hA(i){const e=[];return yo(i.fields,(t,n)=>{const s=new sn([t]);if(Cf(n)){const a=hA(n.mapValue).fields;if(a.length===0)e.push(s);else for(const u of a)e.push(s.child(u))}else e.push(s)}),new qn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e,t,n,s,a,u,f){this.key=e,this.documentType=t,this.version=n,this.readTime=s,this.createTime=a,this.data=u,this.documentState=f}static newInvalidDocument(e){return new pn(e,0,Ue.min(),Ue.min(),Ue.min(),Dn.empty(),0)}static newFoundDocument(e,t,n,s){return new pn(e,1,t,Ue.min(),n,s,0)}static newNoDocument(e,t){return new pn(e,2,t,Ue.min(),Ue.min(),Dn.empty(),0)}static newUnknownDocument(e,t){return new pn(e,3,t,Ue.min(),Ue.min(),Dn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Dn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Dn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof pn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(e,t){this.position=e,this.inclusive=t}}function oE(i,e,t){let n=0;for(let s=0;s<i.position.length;s++){const a=e[s],u=i.position[s];if(a.field.isKeyField()?n=we.comparator(we.fromName(u.referenceValue),t.key):n=ka(u,t.data.field(a.field)),a.dir==="desc"&&(n*=-1),n!==0)break}return n}function aE(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!qi(i.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(e,t="asc"){this.field=e,this.dir=t}}function iO(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{}class Ut extends mA{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new sO(e,t,n):t==="array-contains"?new lO(e,n):t==="in"?new uO(e,n):t==="not-in"?new cO(e,n):t==="array-contains-any"?new fO(e,n):new Ut(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new oO(e,n):new aO(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(ka(t,this.value)):t!==null&&go(this.value)===go(t)&&this.matchesComparison(ka(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ve()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hi extends mA{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new hi(e,t)}matches(e){return pA(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function pA(i){return i.op==="and"}function gA(i){return rO(i)&&pA(i)}function rO(i){for(const e of i.filters)if(e instanceof hi)return!1;return!0}function yp(i){if(i instanceof Ut)return i.field.canonicalString()+i.op.toString()+Va(i.value);if(gA(i))return i.filters.map(e=>yp(e)).join(",");{const e=i.filters.map(t=>yp(t)).join(",");return`${i.op}(${e})`}}function yA(i,e){return i instanceof Ut?function(n,s){return s instanceof Ut&&n.op===s.op&&n.field.isEqual(s.field)&&qi(n.value,s.value)}(i,e):i instanceof hi?function(n,s){return s instanceof hi&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((a,u,f)=>a&&yA(u,s.filters[f]),!0):!1}(i,e):void Ve()}function _A(i){return i instanceof Ut?function(t){return`${t.field.canonicalString()} ${t.op} ${Va(t.value)}`}(i):i instanceof hi?function(t){return t.op.toString()+" {"+t.getFilters().map(_A).join(" ,")+"}"}(i):"Filter"}class sO extends Ut{constructor(e,t,n){super(e,t,n),this.key=we.fromName(n.referenceValue)}matches(e){const t=we.comparator(e.key,this.key);return this.matchesComparison(t)}}class oO extends Ut{constructor(e,t){super(e,"in",t),this.keys=vA("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class aO extends Ut{constructor(e,t){super(e,"not-in",t),this.keys=vA("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function vA(i,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(n=>we.fromName(n.referenceValue))}class lO extends Ut{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Zp(t)&&vu(t.arrayValue,this.value)}}class uO extends Ut{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&vu(this.value.arrayValue,t)}}class cO extends Ut{constructor(e,t){super(e,"not-in",t)}matches(e){if(vu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!vu(this.value.arrayValue,t)}}class fO extends Ut{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Zp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(n=>vu(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(e,t=null,n=[],s=[],a=null,u=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=s,this.limit=a,this.startAt=u,this.endAt=f,this.ue=null}}function lE(i,e=null,t=[],n=[],s=null,a=null,u=null){return new dO(i,e,t,n,s,a,u)}function eg(i){const e=ze(i);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(n=>yp(n)).join(","),t+="|ob:",t+=e.orderBy.map(n=>function(a){return a.field.canonicalString()+a.dir}(n)).join(","),rd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(n=>Va(n)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(n=>Va(n)).join(",")),e.ue=t}return e.ue}function tg(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!iO(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!yA(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!aE(i.startAt,e.startAt)&&aE(i.endAt,e.endAt)}function _p(i){return we.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e,t=null,n=[],s=[],a=null,u="F",f=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=s,this.limit=a,this.limitType=u,this.startAt=f,this.endAt=y,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function hO(i,e,t,n,s,a,u,f){return new Ga(i,e,t,n,s,a,u,f)}function ng(i){return new Ga(i)}function uE(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function TA(i){return i.collectionGroup!==null}function cu(i){const e=ze(i);if(e.ce===null){e.ce=[];const t=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),t.add(a.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let f=new on(sn.comparator);return u.filters.forEach(y=>{y.getFlattenedFilters().forEach(g=>{g.isInequality()&&(f=f.add(g.field))})}),f})(e).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||e.ce.push(new Tu(a,n))}),t.has(sn.keyField().canonicalString())||e.ce.push(new Tu(sn.keyField(),n))}return e.ce}function Ui(i){const e=ze(i);return e.le||(e.le=mO(e,cu(i))),e.le}function mO(i,e){if(i.limitType==="F")return lE(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new Tu(s.field,a)});const t=i.endAt?new Hf(i.endAt.position,i.endAt.inclusive):null,n=i.startAt?new Hf(i.startAt.position,i.startAt.inclusive):null;return lE(i.path,i.collectionGroup,e,i.filters,i.limit,t,n)}}function vp(i,e){const t=i.filters.concat([e]);return new Ga(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function Tp(i,e,t){return new Ga(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function sd(i,e){return tg(Ui(i),Ui(e))&&i.limitType===e.limitType}function EA(i){return`${eg(Ui(i))}|lt:${i.limitType}`}function ma(i){return`Query(target=${function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map(s=>_A(s)).join(", ")}]`),rd(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map(s=>function(u){return`${u.field.canonicalString()} (${u.dir})`}(s)).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(s=>Va(s)).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(s=>Va(s)).join(",")),`Target(${n})`}(Ui(i))}; limitType=${i.limitType})`}function od(i,e){return e.isFoundDocument()&&function(n,s){const a=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(a):we.isDocumentKey(n.path)?n.path.isEqual(a):n.path.isImmediateParentOf(a)}(i,e)&&function(n,s){for(const a of cu(n))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(i,e)&&function(n,s){for(const a of n.filters)if(!a.matches(s))return!1;return!0}(i,e)&&function(n,s){return!(n.startAt&&!function(u,f,y){const g=oE(u,f,y);return u.inclusive?g<=0:g<0}(n.startAt,cu(n),s)||n.endAt&&!function(u,f,y){const g=oE(u,f,y);return u.inclusive?g>=0:g>0}(n.endAt,cu(n),s))}(i,e)}function pO(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function CA(i){return(e,t)=>{let n=!1;for(const s of cu(i)){const a=gO(s,e,t);if(a!==0)return a;n=n||s.field.isKeyField()}return 0}}function gO(i,e,t){const n=i.field.isKeyField()?we.comparator(e.key,t.key):function(a,u,f){const y=u.data.field(a),g=f.data.field(a);return y!==null&&g!==null?ka(y,g):Ve()}(i.field,e,t);switch(i.dir){case"asc":return n;case"desc":return-1*n;default:return Ve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[s,a]of n)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[t]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){yo(this.inner,(t,n)=>{for(const[s,a]of n)e(s,a)})}isEmpty(){return fA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yO=new St(we.comparator);function Rr(){return yO}const AA=new St(we.comparator);function iu(...i){let e=AA;for(const t of i)e=e.insert(t.key,t);return e}function SA(i){let e=AA;return i.forEach((t,n)=>e=e.insert(t,n.overlayedDocument)),e}function so(){return fu()}function wA(){return fu()}function fu(){return new Ha(i=>i.toString(),(i,e)=>i.isEqual(e))}const _O=new St(we.comparator),vO=new on(we.comparator);function Ye(...i){let e=vO;for(const t of i)e=e.add(t);return e}const TO=new on(tt);function EO(){return TO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ig(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gf(e)?"-0":e}}function IA(i){return{integerValue:""+i}}function CO(i,e){return jV(e)?IA(e):ig(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(){this._=void 0}}function AO(i,e,t){return i instanceof Eu?function(s,a){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&Xp(a)&&(a=jp(a)),a&&(u.fields.__previous_value__=a),{mapValue:u}}(t,e):i instanceof Cu?xA(i,e):i instanceof Au?bA(i,e):function(s,a){const u=RA(s,a),f=cE(u)+cE(s.Pe);return gp(u)&&gp(s.Pe)?IA(f):ig(s.serializer,f)}(i,e)}function SO(i,e,t){return i instanceof Cu?xA(i,e):i instanceof Au?bA(i,e):t}function RA(i,e){return i instanceof Kf?function(n){return gp(n)||function(a){return!!a&&"doubleValue"in a}(n)}(e)?e:{integerValue:0}:null}class Eu extends ad{}class Cu extends ad{constructor(e){super(),this.elements=e}}function xA(i,e){const t=NA(e);for(const n of i.elements)t.some(s=>qi(s,n))||t.push(n);return{arrayValue:{values:t}}}class Au extends ad{constructor(e){super(),this.elements=e}}function bA(i,e){let t=NA(e);for(const n of i.elements)t=t.filter(s=>!qi(s,n));return{arrayValue:{values:t}}}class Kf extends ad{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function cE(i){return Mt(i.integerValue||i.doubleValue)}function NA(i){return Zp(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wO{constructor(e,t){this.field=e,this.transform=t}}function IO(i,e){return i.field.isEqual(e.field)&&function(n,s){return n instanceof Cu&&s instanceof Cu||n instanceof Au&&s instanceof Au?Pa(n.elements,s.elements,qi):n instanceof Kf&&s instanceof Kf?qi(n.Pe,s.Pe):n instanceof Eu&&s instanceof Eu}(i.transform,e.transform)}class RO{constructor(e,t){this.version=e,this.transformResults=t}}class ti{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ti}static exists(e){return new ti(void 0,e)}static updateTime(e){return new ti(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Af(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class ld{}function MA(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new rg(i.key,ti.none()):new Pu(i.key,i.data,ti.none());{const t=i.data,n=Dn.empty();let s=new on(sn.comparator);for(let a of e.fields)if(!s.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?n.delete(a):n.set(a,u),s=s.add(a)}return new Cs(i.key,n,new qn(s.toArray()),ti.none())}}function xO(i,e,t){i instanceof Pu?function(s,a,u){const f=s.value.clone(),y=dE(s.fieldTransforms,a,u.transformResults);f.setAll(y),a.convertToFoundDocument(u.version,f).setHasCommittedMutations()}(i,e,t):i instanceof Cs?function(s,a,u){if(!Af(s.precondition,a))return void a.convertToUnknownDocument(u.version);const f=dE(s.fieldTransforms,a,u.transformResults),y=a.data;y.setAll(DA(s)),y.setAll(f),a.convertToFoundDocument(u.version,y).setHasCommittedMutations()}(i,e,t):function(s,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()}(0,e,t)}function du(i,e,t,n){return i instanceof Pu?function(a,u,f,y){if(!Af(a.precondition,u))return f;const g=a.value.clone(),v=hE(a.fieldTransforms,y,u);return g.setAll(v),u.convertToFoundDocument(u.version,g).setHasLocalMutations(),null}(i,e,t,n):i instanceof Cs?function(a,u,f,y){if(!Af(a.precondition,u))return f;const g=hE(a.fieldTransforms,y,u),v=u.data;return v.setAll(DA(a)),v.setAll(g),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),f===null?null:f.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(A=>A.field))}(i,e,t,n):function(a,u,f){return Af(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):f}(i,e,t)}function bO(i,e){let t=null;for(const n of i.fieldTransforms){const s=e.data.field(n.field),a=RA(n.transform,s||null);a!=null&&(t===null&&(t=Dn.empty()),t.set(n.field,a))}return t||null}function fE(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&Pa(n,s,(a,u)=>IO(a,u))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Pu extends ld{constructor(e,t,n,s=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Cs extends ld{constructor(e,t,n,s,a=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function DA(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const n=i.data.field(t);e.set(t,n)}}),e}function dE(i,e,t){const n=new Map;lt(i.length===t.length);for(let s=0;s<t.length;s++){const a=i[s],u=a.transform,f=e.data.field(a.field);n.set(a.field,SO(u,f,t[s]))}return n}function hE(i,e,t){const n=new Map;for(const s of i){const a=s.transform,u=t.data.field(s.field);n.set(s.field,AO(a,u,e))}return n}class rg extends ld{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class NO extends ld{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MO{constructor(e,t,n,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&xO(a,e,n[s])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=du(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=du(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=wA();return this.mutations.forEach(s=>{const a=e.get(s.key),u=a.overlayedDocument;let f=this.applyToLocalView(u,a.mutatedFields);f=t.has(s.key)?null:f;const y=MA(u,f);y!==null&&n.set(s.key,y),u.isValidDocument()||u.convertToNoDocument(Ue.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ye())}isEqual(e){return this.batchId===e.batchId&&Pa(this.mutations,e.mutations,(t,n)=>fE(t,n))&&Pa(this.baseMutations,e.baseMutations,(t,n)=>fE(t,n))}}class sg{constructor(e,t,n,s){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=s}static from(e,t,n){lt(e.mutations.length===n.length);let s=function(){return _O}();const a=e.mutations;for(let u=0;u<a.length;u++)s=s.insert(a[u].key,n[u].version);return new sg(e,t,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DO{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PO{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ot,Ze;function kO(i){switch(i){default:return Ve();case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0}}function PA(i){if(i===void 0)return Ir("GRPC error has no .code"),ne.UNKNOWN;switch(i){case Ot.OK:return ne.OK;case Ot.CANCELLED:return ne.CANCELLED;case Ot.UNKNOWN:return ne.UNKNOWN;case Ot.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case Ot.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case Ot.INTERNAL:return ne.INTERNAL;case Ot.UNAVAILABLE:return ne.UNAVAILABLE;case Ot.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case Ot.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case Ot.NOT_FOUND:return ne.NOT_FOUND;case Ot.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case Ot.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case Ot.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case Ot.ABORTED:return ne.ABORTED;case Ot.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case Ot.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case Ot.DATA_LOSS:return ne.DATA_LOSS;default:return Ve()}}(Ze=Ot||(Ot={}))[Ze.OK=0]="OK",Ze[Ze.CANCELLED=1]="CANCELLED",Ze[Ze.UNKNOWN=2]="UNKNOWN",Ze[Ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ze[Ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ze[Ze.NOT_FOUND=5]="NOT_FOUND",Ze[Ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ze[Ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ze[Ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ze[Ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ze[Ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ze[Ze.ABORTED=10]="ABORTED",Ze[Ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ze[Ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ze[Ze.INTERNAL=13]="INTERNAL",Ze[Ze.UNAVAILABLE=14]="UNAVAILABLE",Ze[Ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VO(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OO=new ao([4294967295,4294967295],0);function mE(i){const e=VO().encode(i),t=new iA;return t.update(e),new Uint8Array(t.digest())}function pE(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new ao([t,n],0),new ao([s,a],0)]}class og{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new ru(`Invalid padding: ${t}`);if(n<0)throw new ru(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new ru(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new ru(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=ao.fromNumber(this.Ie)}Ee(e,t,n){let s=e.add(t.multiply(ao.fromNumber(n)));return s.compare(OO)===1&&(s=new ao([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=mE(e),[n,s]=pE(t);for(let a=0;a<this.hashCount;a++){const u=this.Ee(n,s,a);if(!this.de(u))return!1}return!0}static create(e,t,n){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new og(a,s,t);return n.forEach(f=>u.insert(f)),u}insert(e){if(this.Ie===0)return;const t=mE(e),[n,s]=pE(t);for(let a=0;a<this.hashCount;a++){const u=this.Ee(n,s,a);this.Ae(u)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class ru extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e,t,n,s,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const s=new Map;return s.set(e,ku.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new ud(Ue.min(),s,new St(tt),Rr(),Ye())}}class ku{constructor(e,t,n,s,a){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new ku(n,t,Ye(),Ye(),Ye())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(e,t,n,s){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=s}}class kA{constructor(e,t){this.targetId=e,this.me=t}}class VA{constructor(e,t,n=ln.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=s}}class gE{constructor(){this.fe=0,this.ge=_E(),this.pe=ln.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ye(),t=Ye(),n=Ye();return this.ge.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:n=n.add(s);break;default:Ve()}}),new ku(this.pe,this.ye,e,t,n)}Ce(){this.we=!1,this.ge=_E()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,lt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class LO{constructor(e){this.Le=e,this.Be=new Map,this.ke=Rr(),this.qe=yE(),this.Qe=new St(tt)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:Ve()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((n,s)=>{this.ze(s)&&t(s)})}He(e){const t=e.targetId,n=e.me.count,s=this.Je(t);if(s){const a=s.target;if(_p(a))if(n===0){const u=new we(a.path);this.Ue(t,u,pn.newNoDocument(u,Ue.min()))}else lt(n===1);else{const u=this.Ye(t);if(u!==n){const f=this.Ze(e),y=f?this.Xe(f,e,u):1;if(y!==0){this.je(t);const g=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,g)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:a=0}=t;let u,f;try{u=po(n).toUint8Array()}catch(y){if(y instanceof dA)return Da("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{f=new og(u,s,a)}catch(y){return Da(y instanceof ru?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return f.Ie===0?null:f}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let s=0;return n.forEach(a=>{const u=this.Le.tt(),f=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(f)||(this.Ue(t,a,null),s++)}),s}rt(e){const t=new Map;this.Be.forEach((a,u)=>{const f=this.Je(u);if(f){if(a.current&&_p(f.target)){const y=new we(f.target.path);this.ke.get(y)!==null||this.it(u,y)||this.Ue(u,y,pn.newNoDocument(y,e))}a.be&&(t.set(u,a.ve()),a.Ce())}});let n=Ye();this.qe.forEach((a,u)=>{let f=!0;u.forEachWhile(y=>{const g=this.Je(y);return!g||g.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)}),f&&(n=n.add(a))}),this.ke.forEach((a,u)=>u.setReadTime(e));const s=new ud(e,t,this.Qe,this.ke,n);return this.ke=Rr(),this.qe=yE(),this.Qe=new St(tt),s}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,t)?s.Fe(t,1):s.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new gE,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new on(tt),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||Ee("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new gE),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function yE(){return new St(we.comparator)}function _E(){return new St(we.comparator)}const UO={asc:"ASCENDING",desc:"DESCENDING"},zO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},BO={and:"AND",or:"OR"};class FO{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ep(i,e){return i.useProto3Json||rd(e)?e:{value:e}}function Yf(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function OA(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function qO(i,e){return Yf(i,e.toTimestamp())}function zi(i){return lt(!!i),Ue.fromTimestamp(function(t){const n=_s(t);return new Ht(n.seconds,n.nanos)}(i))}function ag(i,e){return Cp(i,e).canonicalString()}function Cp(i,e){const t=function(s){return new _t(["projects",s.projectId,"databases",s.database])}(i).child("documents");return e===void 0?t:t.child(e)}function LA(i){const e=_t.fromString(i);return lt(qA(e)),e}function Ap(i,e){return ag(i.databaseId,e.path)}function km(i,e){const t=LA(e);if(t.get(1)!==i.databaseId.projectId)throw new ge(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new ge(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new we(zA(t))}function UA(i,e){return ag(i.databaseId,e)}function GO(i){const e=LA(i);return e.length===4?_t.emptyPath():zA(e)}function Sp(i){return new _t(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function zA(i){return lt(i.length>4&&i.get(4)==="documents"),i.popFirst(5)}function vE(i,e,t){return{name:Ap(i,e),fields:t.value.mapValue.fields}}function HO(i,e){let t;if("targetChange"in e){e.targetChange;const n=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Ve()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(g,v){return g.useProto3Json?(lt(v===void 0||typeof v=="string"),ln.fromBase64String(v||"")):(lt(v===void 0||v instanceof Buffer||v instanceof Uint8Array),ln.fromUint8Array(v||new Uint8Array))}(i,e.targetChange.resumeToken),u=e.targetChange.cause,f=u&&function(g){const v=g.code===void 0?ne.UNKNOWN:PA(g.code);return new ge(v,g.message||"")}(u);t=new VA(n,s,a,f||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=km(i,n.document.name),a=zi(n.document.updateTime),u=n.document.createTime?zi(n.document.createTime):Ue.min(),f=new Dn({mapValue:{fields:n.document.fields}}),y=pn.newFoundDocument(s,a,u,f),g=n.targetIds||[],v=n.removedTargetIds||[];t=new Sf(g,v,y.key,y)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=km(i,n.document),a=n.readTime?zi(n.readTime):Ue.min(),u=pn.newNoDocument(s,a),f=n.removedTargetIds||[];t=new Sf([],f,u.key,u)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=km(i,n.document),a=n.removedTargetIds||[];t=new Sf([],a,s,null)}else{if(!("filter"in e))return Ve();{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:a}=n,u=new PO(s,a),f=n.targetId;t=new kA(f,u)}}return t}function KO(i,e){let t;if(e instanceof Pu)t={update:vE(i,e.key,e.value)};else if(e instanceof rg)t={delete:Ap(i,e.key)};else if(e instanceof Cs)t={update:vE(i,e.key,e.data),updateMask:eL(e.fieldMask)};else{if(!(e instanceof NO))return Ve();t={verify:Ap(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(n=>function(a,u){const f=u.transform;if(f instanceof Eu)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Cu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Au)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Kf)return{fieldPath:u.field.canonicalString(),increment:f.Pe};throw Ve()}(0,n))),e.precondition.isNone||(t.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:qO(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ve()}(i,e.precondition)),t}function YO(i,e){return i&&i.length>0?(lt(e!==void 0),i.map(t=>function(s,a){let u=s.updateTime?zi(s.updateTime):zi(a);return u.isEqual(Ue.min())&&(u=zi(a)),new RO(u,s.transformResults||[])}(t,e))):[]}function $O(i,e){return{documents:[UA(i,e.path)]}}function QO(i,e){const t={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=UA(i,s);const a=function(g){if(g.length!==0)return FA(hi.create(g,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const u=function(g){if(g.length!==0)return g.map(v=>function(S){return{field:pa(S.field),direction:XO(S.dir)}}(v))}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const f=Ep(i,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(e.endAt)),{_t:t,parent:s}}function WO(i){let e=GO(i.parent);const t=i.structuredQuery,n=t.from?t.from.length:0;let s=null;if(n>0){lt(n===1);const v=t.from[0];v.allDescendants?s=v.collectionId:e=e.child(v.collectionId)}let a=[];t.where&&(a=function(A){const S=BA(A);return S instanceof hi&&gA(S)?S.getFilters():[S]}(t.where));let u=[];t.orderBy&&(u=function(A){return A.map(S=>function(V){return new Tu(ga(V.field),function(Y){switch(Y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(V.direction))}(S))}(t.orderBy));let f=null;t.limit&&(f=function(A){let S;return S=typeof A=="object"?A.value:A,rd(S)?null:S}(t.limit));let y=null;t.startAt&&(y=function(A){const S=!!A.before,R=A.values||[];return new Hf(R,S)}(t.startAt));let g=null;return t.endAt&&(g=function(A){const S=!A.before,R=A.values||[];return new Hf(R,S)}(t.endAt)),hO(e,s,u,a,f,"F",y,g)}function JO(i,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ve()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function BA(i){return i.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=ga(t.unaryFilter.field);return Ut.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=ga(t.unaryFilter.field);return Ut.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=ga(t.unaryFilter.field);return Ut.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=ga(t.unaryFilter.field);return Ut.create(u,"!=",{nullValue:"NULL_VALUE"});default:return Ve()}}(i):i.fieldFilter!==void 0?function(t){return Ut.create(ga(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ve()}}(t.fieldFilter.op),t.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(t){return hi.create(t.compositeFilter.filters.map(n=>BA(n)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ve()}}(t.compositeFilter.op))}(i):Ve()}function XO(i){return UO[i]}function jO(i){return zO[i]}function ZO(i){return BO[i]}function pa(i){return{fieldPath:i.canonicalString()}}function ga(i){return sn.fromServerFormat(i.fieldPath)}function FA(i){return i instanceof Ut?function(t){if(t.op==="=="){if(sE(t.value))return{unaryFilter:{field:pa(t.field),op:"IS_NAN"}};if(rE(t.value))return{unaryFilter:{field:pa(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(sE(t.value))return{unaryFilter:{field:pa(t.field),op:"IS_NOT_NAN"}};if(rE(t.value))return{unaryFilter:{field:pa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:pa(t.field),op:jO(t.op),value:t.value}}}(i):i instanceof hi?function(t){const n=t.getFilters().map(s=>FA(s));return n.length===1?n[0]:{compositeFilter:{op:ZO(t.op),filters:n}}}(i):Ve()}function eL(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function qA(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e,t,n,s,a=Ue.min(),u=Ue.min(),f=ln.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=f,this.expectedCount=y}withSequenceNumber(e){return new cs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new cs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new cs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new cs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tL{constructor(e){this.ct=e}}function nL(i){const e=WO({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?Tp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iL{constructor(){this.un=new rL}addToCollectionParentIndex(e,t){return this.un.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(ys.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(ys.min())}updateCollectionGroup(e,t,n){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class rL{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),s=this.index[t]||new on(_t.comparator),a=!s.has(n);return this.index[t]=s.add(n),a}has(e){const t=e.lastSegment(),n=e.popLast(),s=this.index[t];return s&&s.has(n)}getEntries(e){return(this.index[e]||new on(_t.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Oa(0)}static kn(){return new Oa(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sL{constructor(){this.changes=new Ha(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,pn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?se.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aL{constructor(e,t,n,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(n=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(n!==null&&du(n.mutation,s,qn.empty(),Ht.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.getLocalViewOfDocuments(e,n,Ye()).next(()=>n))}getLocalViewOfDocuments(e,t,n=Ye()){const s=so();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,n).next(a=>{let u=iu();return a.forEach((f,y)=>{u=u.insert(f,y.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const n=so();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Ye()))}populateOverlays(e,t,n){const s=[];return n.forEach(a=>{t.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((u,f)=>{t.set(u,f)})})}computeViews(e,t,n,s){let a=Rr();const u=fu(),f=function(){return fu()}();return t.forEach((y,g)=>{const v=n.get(g.key);s.has(g.key)&&(v===void 0||v.mutation instanceof Cs)?a=a.insert(g.key,g):v!==void 0?(u.set(g.key,v.mutation.getFieldMask()),du(v.mutation,g,v.mutation.getFieldMask(),Ht.now())):u.set(g.key,qn.empty())}),this.recalculateAndSaveOverlays(e,a).next(y=>(y.forEach((g,v)=>u.set(g,v)),t.forEach((g,v)=>{var A;return f.set(g,new oL(v,(A=u.get(g))!==null&&A!==void 0?A:null))}),f))}recalculateAndSaveOverlays(e,t){const n=fu();let s=new St((u,f)=>u-f),a=Ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const f of u)f.keys().forEach(y=>{const g=t.get(y);if(g===null)return;let v=n.get(y)||qn.empty();v=f.applyToLocalView(g,v),n.set(y,v);const A=(s.get(f.batchId)||Ye()).add(y);s=s.insert(f.batchId,A)})}).next(()=>{const u=[],f=s.getReverseIterator();for(;f.hasNext();){const y=f.getNext(),g=y.key,v=y.value,A=wA();v.forEach(S=>{if(!a.has(S)){const R=MA(t.get(S),n.get(S));R!==null&&A.set(S,R),a=a.add(S)}}),u.push(this.documentOverlayCache.saveOverlays(e,g,A))}return se.waitFor(u)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,t,n,s){return function(u){return we.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):TA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,s):this.getDocumentsMatchingCollectionQuery(e,t,n,s)}getNextDocuments(e,t,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,s).next(a=>{const u=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,s-a.size):se.resolve(so());let f=-1,y=a;return u.next(g=>se.forEach(g,(v,A)=>(f<A.largestBatchId&&(f=A.largestBatchId),a.get(v)?se.resolve():this.remoteDocumentCache.getEntry(e,v).next(S=>{y=y.insert(v,S)}))).next(()=>this.populateOverlays(e,g,a)).next(()=>this.computeViews(e,y,g,Ye())).next(v=>({batchId:f,changes:SA(v)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new we(t)).next(n=>{let s=iu();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,n,s){const a=t.collectionGroup;let u=iu();return this.indexManager.getCollectionParents(e,a).next(f=>se.forEach(f,y=>{const g=function(A,S){return new Ga(S,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)}(t,y.child(a));return this.getDocumentsMatchingCollectionQuery(e,g,n,s).next(v=>{v.forEach((A,S)=>{u=u.insert(A,S)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,n,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,a,s))).next(u=>{a.forEach((y,g)=>{const v=g.getKey();u.get(v)===null&&(u=u.insert(v,pn.newInvalidDocument(v)))});let f=iu();return u.forEach((y,g)=>{const v=a.get(y);v!==void 0&&du(v.mutation,g,qn.empty(),Ht.now()),od(t,g)&&(f=f.insert(y,g))}),f})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lL{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return se.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(s){return{id:s.id,version:s.version,createTime:zi(s.createTime)}}(t)),se.resolve()}getNamedQuery(e,t){return se.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(s){return{name:s.name,query:nL(s.bundledQuery),readTime:zi(s.readTime)}}(t)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{constructor(){this.overlays=new St(we.comparator),this.Ir=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const n=so();return se.forEach(t,s=>this.getOverlay(e,s).next(a=>{a!==null&&n.set(s,a)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((s,a)=>{this.ht(e,t,a)}),se.resolve()}removeOverlaysForBatchId(e,t,n){const s=this.Ir.get(n);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.Ir.delete(n)),se.resolve()}getOverlaysForCollection(e,t,n){const s=so(),a=t.length+1,u=new we(t.child("")),f=this.overlays.getIteratorFrom(u);for(;f.hasNext();){const y=f.getNext().value,g=y.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===a&&y.largestBatchId>n&&s.set(y.getKey(),y)}return se.resolve(s)}getOverlaysForCollectionGroup(e,t,n,s){let a=new St((g,v)=>g-v);const u=this.overlays.getIterator();for(;u.hasNext();){const g=u.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>n){let v=a.get(g.largestBatchId);v===null&&(v=so(),a=a.insert(g.largestBatchId,v)),v.set(g.getKey(),g)}}const f=so(),y=a.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((g,v)=>f.set(g,v)),!(f.size()>=s)););return se.resolve(f)}ht(e,t,n){const s=this.overlays.get(n.key);if(s!==null){const u=this.Ir.get(s.largestBatchId).delete(n.key);this.Ir.set(s.largestBatchId,u)}this.overlays=this.overlays.insert(n.key,new DO(t,n));let a=this.Ir.get(t);a===void 0&&(a=Ye(),this.Ir.set(t,a)),this.Ir.set(t,a.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cL{constructor(){this.sessionToken=ln.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(){this.Tr=new on(Xt.Er),this.dr=new on(Xt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const n=new Xt(e,t);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,t){e.forEach(n=>this.addReference(n,t))}removeReference(e,t){this.Vr(new Xt(e,t))}mr(e,t){e.forEach(n=>this.removeReference(n,t))}gr(e){const t=new we(new _t([])),n=new Xt(t,e),s=new Xt(t,e+1),a=[];return this.dr.forEachInRange([n,s],u=>{this.Vr(u),a.push(u.key)}),a}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new we(new _t([])),n=new Xt(t,e),s=new Xt(t,e+1);let a=Ye();return this.dr.forEachInRange([n,s],u=>{a=a.add(u.key)}),a}containsKey(e){const t=new Xt(e,0),n=this.Tr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class Xt{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return we.comparator(e.key,t.key)||tt(e.wr,t.wr)}static Ar(e,t){return tt(e.wr,t.wr)||we.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fL{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new on(Xt.Er)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,s){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new MO(a,t,n,s);this.mutationQueue.push(u);for(const f of s)this.br=this.br.add(new Xt(f.key,a)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return se.resolve(u)}lookupMutationBatch(e,t){return se.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,s=this.vr(n),a=s<0?0:s;return se.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Xt(t,0),s=new Xt(t,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([n,s],u=>{const f=this.Dr(u.wr);a.push(f)}),se.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new on(tt);return t.forEach(s=>{const a=new Xt(s,0),u=new Xt(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,u],f=>{n=n.add(f.wr)})}),se.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,s=n.length+1;let a=n;we.isDocumentKey(a)||(a=a.child(""));const u=new Xt(new we(a),0);let f=new on(tt);return this.br.forEachWhile(y=>{const g=y.key.path;return!!n.isPrefixOf(g)&&(g.length===s&&(f=f.add(y.wr)),!0)},u),se.resolve(this.Cr(f))}Cr(e){const t=[];return e.forEach(n=>{const s=this.Dr(n);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){lt(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return se.forEach(t.mutations,s=>{const a=new Xt(s.key,t.batchId);return n=n.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,t){const n=new Xt(t,0),s=this.br.firstAfterOrEqual(n);return se.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dL{constructor(e){this.Mr=e,this.docs=function(){return new St(we.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,s=this.docs.get(n),a=s?s.size:0,u=this.Mr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return se.resolve(n?n.document.mutableCopy():pn.newInvalidDocument(t))}getEntries(e,t){let n=Rr();return t.forEach(s=>{const a=this.docs.get(s);n=n.insert(s,a?a.document.mutableCopy():pn.newInvalidDocument(s))}),se.resolve(n)}getDocumentsMatchingQuery(e,t,n,s){let a=Rr();const u=t.path,f=new we(u.child("")),y=this.docs.getIteratorFrom(f);for(;y.hasNext();){const{key:g,value:{document:v}}=y.getNext();if(!u.isPrefixOf(g.path))break;g.path.length>u.length+1||QV($V(v),n)<=0||(s.has(v.key)||od(t,v))&&(a=a.insert(v.key,v.mutableCopy()))}return se.resolve(a)}getAllFromCollectionGroup(e,t,n,s){Ve()}Or(e,t){return se.forEach(this.docs,n=>t(n))}newChangeBuffer(e){return new hL(this)}getSize(e){return se.resolve(this.size)}}class hL extends sL{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((n,s)=>{s.isValidDocument()?t.push(this.cr.addEntry(e,s)):this.cr.removeEntry(n)}),se.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mL{constructor(e){this.persistence=e,this.Nr=new Ha(t=>eg(t),tg),this.lastRemoteSnapshotVersion=Ue.min(),this.highestTargetId=0,this.Lr=0,this.Br=new lg,this.targetCount=0,this.kr=Oa.Bn()}forEachTarget(e,t){return this.Nr.forEach((n,s)=>t(s)),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Lr&&(this.Lr=t),se.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new Oa(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.Kn(t),se.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,n){let s=0;const a=[];return this.Nr.forEach((u,f)=>{f.sequenceNumber<=t&&n.get(f.targetId)===null&&(this.Nr.delete(u),a.push(this.removeMatchingKeysForTargetId(e,f.targetId)),s++)}),se.waitFor(a).next(()=>s)}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const n=this.Nr.get(t)||null;return se.resolve(n)}addMatchingKeys(e,t,n){return this.Br.Rr(t,n),se.resolve()}removeMatchingKeys(e,t,n){this.Br.mr(t,n);const s=this.persistence.referenceDelegate,a=[];return s&&t.forEach(u=>{a.push(s.markPotentiallyOrphaned(e,u))}),se.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),se.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Br.yr(t);return se.resolve(n)}containsKey(e,t){return se.resolve(this.Br.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pL{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Jp(0),this.Kr=!1,this.Kr=!0,this.$r=new cL,this.referenceDelegate=e(this),this.Ur=new mL(this),this.indexManager=new iL,this.remoteDocumentCache=function(s){return new dL(s)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new tL(t),this.Gr=new lL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new uL,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.qr[e.toKey()];return n||(n=new fL(t,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,n){Ee("MemoryPersistence","Starting transaction:",e);const s=new gL(this.Qr.next());return this.referenceDelegate.zr(),n(s).next(a=>this.referenceDelegate.jr(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Hr(e,t){return se.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,t)))}}class gL extends JV{constructor(e){super(),this.currentSequenceNumber=e}}class ug{constructor(e){this.persistence=e,this.Jr=new lg,this.Yr=null}static Zr(e){return new ug(e)}get Xr(){if(this.Yr)return this.Yr;throw Ve()}addReference(e,t,n){return this.Jr.addReference(n,t),this.Xr.delete(n.toString()),se.resolve()}removeReference(e,t,n){return this.Jr.removeReference(n,t),this.Xr.add(n.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),se.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(s=>this.Xr.add(s.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(a=>this.Xr.add(a.toString()))}).next(()=>n.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.Xr,n=>{const s=we.fromPath(n);return this.ei(e,s).next(a=>{a||t.removeEntry(s,Ue.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(n=>{n?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return se.or([()=>se.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(e,t,n,s){this.targetId=e,this.fromCache=t,this.$i=n,this.Ui=s}static Wi(e,t){let n=Ye(),s=Ye();for(const a of t.docChanges)switch(a.type){case 0:n=n.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new cg(e,t.fromCache,n,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _L{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return T2()?8:XV(gn())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,n,s){const a={result:null};return this.Yi(e,t).next(u=>{a.result=u}).next(()=>{if(!a.result)return this.Zi(e,t,s,n).next(u=>{a.result=u})}).next(()=>{if(a.result)return;const u=new yL;return this.Xi(e,t,u).next(f=>{if(a.result=f,this.zi)return this.es(e,t,u,f.size)})}).next(()=>a.result)}es(e,t,n,s){return n.documentReadCount<this.ji?(Zl()<=$e.DEBUG&&Ee("QueryEngine","SDK will not create cache indexes for query:",ma(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),se.resolve()):(Zl()<=$e.DEBUG&&Ee("QueryEngine","Query:",ma(t),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.Hi*s?(Zl()<=$e.DEBUG&&Ee("QueryEngine","The SDK decides to create cache indexes for query:",ma(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ui(t))):se.resolve())}Yi(e,t){if(uE(t))return se.resolve(null);let n=Ui(t);return this.indexManager.getIndexType(e,n).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=Tp(t,null,"F"),n=Ui(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(a=>{const u=Ye(...a);return this.Ji.getDocuments(e,u).next(f=>this.indexManager.getMinOffset(e,n).next(y=>{const g=this.ts(t,f);return this.ns(t,g,u,y.readTime)?this.Yi(e,Tp(t,null,"F")):this.rs(e,g,t,y)}))})))}Zi(e,t,n,s){return uE(t)||s.isEqual(Ue.min())?se.resolve(null):this.Ji.getDocuments(e,n).next(a=>{const u=this.ts(t,a);return this.ns(t,u,n,s)?se.resolve(null):(Zl()<=$e.DEBUG&&Ee("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ma(t)),this.rs(e,u,t,YV(s,-1)).next(f=>f))})}ts(e,t){let n=new on(CA(e));return t.forEach((s,a)=>{od(e,a)&&(n=n.add(a))}),n}ns(e,t,n,s){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}Xi(e,t,n){return Zl()<=$e.DEBUG&&Ee("QueryEngine","Using full collection scan to execute query:",ma(t)),this.Ji.getDocumentsMatchingQuery(e,t,ys.min(),n)}rs(e,t,n,s){return this.Ji.getDocumentsMatchingQuery(e,n,s).next(a=>(t.forEach(u=>{a=a.insert(u.key,u)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vL{constructor(e,t,n,s){this.persistence=e,this.ss=t,this.serializer=s,this.os=new St(tt),this._s=new Ha(a=>eg(a),tg),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new aL(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function TL(i,e,t,n){return new vL(i,e,t,n)}async function GA(i,e){const t=ze(i);return await t.persistence.runTransaction("Handle user change","readonly",n=>{let s;return t.mutationQueue.getAllMutationBatches(n).next(a=>(s=a,t.ls(e),t.mutationQueue.getAllMutationBatches(n))).next(a=>{const u=[],f=[];let y=Ye();for(const g of s){u.push(g.batchId);for(const v of g.mutations)y=y.add(v.key)}for(const g of a){f.push(g.batchId);for(const v of g.mutations)y=y.add(v.key)}return t.localDocuments.getDocuments(n,y).next(g=>({hs:g,removedBatchIds:u,addedBatchIds:f}))})})}function EL(i,e){const t=ze(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const s=e.batch.keys(),a=t.cs.newChangeBuffer({trackRemovals:!0});return function(f,y,g,v){const A=g.batch,S=A.keys();let R=se.resolve();return S.forEach(V=>{R=R.next(()=>v.getEntry(y,V)).next(H=>{const Y=g.docVersions.get(V);lt(Y!==null),H.version.compareTo(Y)<0&&(A.applyToRemoteDocument(H,g),H.isValidDocument()&&(H.setReadTime(g.commitVersion),v.addEntry(H)))})}),R.next(()=>f.mutationQueue.removeMutationBatch(y,A))}(t,n,e,a).next(()=>a.apply(n)).next(()=>t.mutationQueue.performConsistencyCheck(n)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(f){let y=Ye();for(let g=0;g<f.mutationResults.length;++g)f.mutationResults[g].transformResults.length>0&&(y=y.add(f.batch.mutations[g].key));return y}(e))).next(()=>t.localDocuments.getDocuments(n,s))})}function HA(i){const e=ze(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function CL(i,e){const t=ze(i),n=e.snapshotVersion;let s=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const u=t.cs.newChangeBuffer({trackRemovals:!0});s=t.os;const f=[];e.targetChanges.forEach((v,A)=>{const S=s.get(A);if(!S)return;f.push(t.Ur.removeMatchingKeys(a,v.removedDocuments,A).next(()=>t.Ur.addMatchingKeys(a,v.addedDocuments,A)));let R=S.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(A)!==null?R=R.withResumeToken(ln.EMPTY_BYTE_STRING,Ue.min()).withLastLimboFreeSnapshotVersion(Ue.min()):v.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(v.resumeToken,n)),s=s.insert(A,R),function(H,Y,ce){return H.resumeToken.approximateByteSize()===0||Y.snapshotVersion.toMicroseconds()-H.snapshotVersion.toMicroseconds()>=3e8?!0:ce.addedDocuments.size+ce.modifiedDocuments.size+ce.removedDocuments.size>0}(S,R,v)&&f.push(t.Ur.updateTargetData(a,R))});let y=Rr(),g=Ye();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(a,v))}),f.push(AL(a,u,e.documentUpdates).next(v=>{y=v.Ps,g=v.Is})),!n.isEqual(Ue.min())){const v=t.Ur.getLastRemoteSnapshotVersion(a).next(A=>t.Ur.setTargetsMetadata(a,a.currentSequenceNumber,n));f.push(v)}return se.waitFor(f).next(()=>u.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,y,g)).next(()=>y)}).then(a=>(t.os=s,a))}function AL(i,e,t){let n=Ye(),s=Ye();return t.forEach(a=>n=n.add(a)),e.getEntries(i,n).next(a=>{let u=Rr();return t.forEach((f,y)=>{const g=a.get(f);y.isFoundDocument()!==g.isFoundDocument()&&(s=s.add(f)),y.isNoDocument()&&y.version.isEqual(Ue.min())?(e.removeEntry(f,y.readTime),u=u.insert(f,y)):!g.isValidDocument()||y.version.compareTo(g.version)>0||y.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(y),u=u.insert(f,y)):Ee("LocalStore","Ignoring outdated watch update for ",f,". Current version:",g.version," Watch version:",y.version)}),{Ps:u,Is:s}})}function SL(i,e){const t=ze(i);return t.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function wL(i,e){const t=ze(i);return t.persistence.runTransaction("Allocate target","readwrite",n=>{let s;return t.Ur.getTargetData(n,e).next(a=>a?(s=a,se.resolve(s)):t.Ur.allocateTargetId(n).next(u=>(s=new cs(e,u,"TargetPurposeListen",n.currentSequenceNumber),t.Ur.addTargetData(n,s).next(()=>s))))}).then(n=>{const s=t.os.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.os=t.os.insert(n.targetId,n),t._s.set(e,n.targetId)),n})}async function wp(i,e,t){const n=ze(i),s=n.os.get(e),a=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",a,u=>n.persistence.referenceDelegate.removeTarget(u,s))}catch(u){if(!Du(u))throw u;Ee("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}n.os=n.os.remove(e),n._s.delete(s.target)}function TE(i,e,t){const n=ze(i);let s=Ue.min(),a=Ye();return n.persistence.runTransaction("Execute query","readwrite",u=>function(y,g,v){const A=ze(y),S=A._s.get(v);return S!==void 0?se.resolve(A.os.get(S)):A.Ur.getTargetData(g,v)}(n,u,Ui(e)).next(f=>{if(f)return s=f.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(u,f.targetId).next(y=>{a=y})}).next(()=>n.ss.getDocumentsMatchingQuery(u,e,t?s:Ue.min(),t?a:Ye())).next(f=>(IL(n,pO(e),f),{documents:f,Ts:a})))}function IL(i,e,t){let n=i.us.get(e)||Ue.min();t.forEach((s,a)=>{a.readTime.compareTo(n)>0&&(n=a.readTime)}),i.us.set(e,n)}class EE{constructor(){this.activeTargetIds=EO()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class RL{constructor(){this.so=new EE,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,n){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new EE,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xL{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Ee("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Ee("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let df=null;function Vm(){return df===null?df=function(){return 268435456+Math.round(2147483648*Math.random())}():df++,"0x"+df.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NL{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hn="WebChannelConnection";class ML extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+t.host,this.vo=`projects/${s}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${a}`}get Fo(){return!1}Mo(t,n,s,a,u){const f=Vm(),y=this.xo(t,n.toUriEncodedString());Ee("RestConnection",`Sending RPC '${t}' ${f}:`,y,s);const g={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(g,a,u),this.No(t,y,g,s).then(v=>(Ee("RestConnection",`Received RPC '${t}' ${f}: `,v),v),v=>{throw Da("RestConnection",`RPC '${t}' ${f} failed with error: `,v,"url: ",y,"request:",s),v})}Lo(t,n,s,a,u,f){return this.Mo(t,n,s,a,u)}Oo(t,n,s){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+qa}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((a,u)=>t[u]=a),s&&s.headers.forEach((a,u)=>t[u]=a)}xo(t,n){const s=bL[t];return`${this.Do}/v1/${n}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,n,s){const a=Vm();return new Promise((u,f)=>{const y=new rA;y.setWithCredentials(!0),y.listenOnce(sA.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case Ef.NO_ERROR:const v=y.getResponseJson();Ee(hn,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(v)),u(v);break;case Ef.TIMEOUT:Ee(hn,`RPC '${e}' ${a} timed out`),f(new ge(ne.DEADLINE_EXCEEDED,"Request time out"));break;case Ef.HTTP_ERROR:const A=y.getStatus();if(Ee(hn,`RPC '${e}' ${a} failed with status:`,A,"response text:",y.getResponseText()),A>0){let S=y.getResponseJson();Array.isArray(S)&&(S=S[0]);const R=S==null?void 0:S.error;if(R&&R.status&&R.message){const V=function(Y){const ce=Y.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(ce)>=0?ce:ne.UNKNOWN}(R.status);f(new ge(V,R.message))}else f(new ge(ne.UNKNOWN,"Server responded with status "+y.getStatus()))}else f(new ge(ne.UNAVAILABLE,"Connection failed."));break;default:Ve()}}finally{Ee(hn,`RPC '${e}' ${a} completed.`)}});const g=JSON.stringify(s);Ee(hn,`RPC '${e}' ${a} sending request:`,s),y.send(t,"POST",g,n,15)})}Bo(e,t,n){const s=Vm(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=lA(),f=aA(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(y.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(y.useFetchStreams=!0),this.Oo(y.initMessageHeaders,t,n),y.encodeInitMessageHeaders=!0;const v=a.join("");Ee(hn,`Creating RPC '${e}' stream ${s}: ${v}`,y);const A=u.createWebChannel(v,y);let S=!1,R=!1;const V=new NL({Io:Y=>{R?Ee(hn,`Not sending because RPC '${e}' stream ${s} is closed:`,Y):(S||(Ee(hn,`Opening RPC '${e}' stream ${s} transport.`),A.open(),S=!0),Ee(hn,`RPC '${e}' stream ${s} sending:`,Y),A.send(Y))},To:()=>A.close()}),H=(Y,ce,le)=>{Y.listen(ce,oe=>{try{le(oe)}catch(pe){setTimeout(()=>{throw pe},0)}})};return H(A,nu.EventType.OPEN,()=>{R||(Ee(hn,`RPC '${e}' stream ${s} transport opened.`),V.yo())}),H(A,nu.EventType.CLOSE,()=>{R||(R=!0,Ee(hn,`RPC '${e}' stream ${s} transport closed`),V.So())}),H(A,nu.EventType.ERROR,Y=>{R||(R=!0,Da(hn,`RPC '${e}' stream ${s} transport errored:`,Y),V.So(new ge(ne.UNAVAILABLE,"The operation could not be completed")))}),H(A,nu.EventType.MESSAGE,Y=>{var ce;if(!R){const le=Y.data[0];lt(!!le);const oe=le,pe=oe.error||((ce=oe[0])===null||ce===void 0?void 0:ce.error);if(pe){Ee(hn,`RPC '${e}' stream ${s} received error:`,pe);const fe=pe.status;let Te=function(x){const k=Ot[x];if(k!==void 0)return PA(k)}(fe),O=pe.message;Te===void 0&&(Te=ne.INTERNAL,O="Unknown error status: "+fe+" with message "+pe.message),R=!0,V.So(new ge(Te,O)),A.close()}else Ee(hn,`RPC '${e}' stream ${s} received:`,le),V.bo(le)}}),H(f,oA.STAT_EVENT,Y=>{Y.stat===mp.PROXY?Ee(hn,`RPC '${e}' stream ${s} detected buffering proxy`):Y.stat===mp.NOPROXY&&Ee(hn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{V.wo()},0),V}}function Om(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cd(i){return new FO(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(e,t,n=1e3,s=1.5,a=6e4){this.ui=e,this.timerId=t,this.ko=n,this.qo=s,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),s=Math.max(0,t-n);s>0&&Ee("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e,t,n,s,a,u,f,y){this.ui=e,this.Ho=n,this.Jo=s,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=f,this.listener=y,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new KA(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===ne.RESOURCE_EXHAUSTED?(Ir(t.toString()),Ir("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,s])=>{this.Yo===t&&this.P_(n,s)},n=>{e(()=>{const s=new ge(ne.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(s)})})}P_(e,t){const n=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{n(()=>this.I_(s))}),this.stream.onMessage(s=>{n(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Ee("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(Ee("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class DL extends YA{constructor(e,t,n,s,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,s,u),this.serializer=a}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=HO(this.serializer,e),n=function(a){if(!("targetChange"in a))return Ue.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?Ue.min():u.readTime?zi(u.readTime):Ue.min()}(e);return this.listener.d_(t,n)}A_(e){const t={};t.database=Sp(this.serializer),t.addTarget=function(a,u){let f;const y=u.target;if(f=_p(y)?{documents:$O(a,y)}:{query:QO(a,y)._t},f.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){f.resumeToken=OA(a,u.resumeToken);const g=Ep(a,u.expectedCount);g!==null&&(f.expectedCount=g)}else if(u.snapshotVersion.compareTo(Ue.min())>0){f.readTime=Yf(a,u.snapshotVersion.toTimestamp());const g=Ep(a,u.expectedCount);g!==null&&(f.expectedCount=g)}return f}(this.serializer,e);const n=JO(this.serializer,e);n&&(t.labels=n),this.a_(t)}R_(e){const t={};t.database=Sp(this.serializer),t.removeTarget=e,this.a_(t)}}class PL extends YA{constructor(e,t,n,s,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,s,u),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return lt(!!e.streamToken),this.lastStreamToken=e.streamToken,lt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){lt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=YO(e.writeResults,e.commitTime),n=zi(e.commitTime);return this.listener.g_(n,t)}p_(){const e={};e.database=Sp(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(n=>KO(this.serializer,n))};this.a_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kL extends class{}{constructor(e,t,n,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new ge(ne.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,n,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.Mo(e,Cp(t,n),s,a,u)).catch(a=>{throw a.name==="FirebaseError"?(a.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ge(ne.UNKNOWN,a.toString())})}Lo(e,t,n,s,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,f])=>this.connection.Lo(e,Cp(t,n),s,u,f,a)).catch(u=>{throw u.name==="FirebaseError"?(u.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ge(ne.UNKNOWN,u.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class VL{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ir(t),this.D_=!1):Ee("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OL{constructor(e,t,n,s,a){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o(u=>{n.enqueueAndForget(async()=>{_o(this)&&(Ee("RemoteStore","Restarting streams for network reachability change."),await async function(y){const g=ze(y);g.L_.add(4),await Vu(g),g.q_.set("Unknown"),g.L_.delete(4),await fd(g)}(this))})}),this.q_=new VL(n,s)}}async function fd(i){if(_o(i))for(const e of i.B_)await e(!0)}async function Vu(i){for(const e of i.B_)await e(!1)}function $A(i,e){const t=ze(i);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),mg(t)?hg(t):Ka(t).r_()&&dg(t,e))}function fg(i,e){const t=ze(i),n=Ka(t);t.N_.delete(e),n.r_()&&QA(t,e),t.N_.size===0&&(n.r_()?n.o_():_o(t)&&t.q_.set("Unknown"))}function dg(i,e){if(i.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ue.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ka(i).A_(e)}function QA(i,e){i.Q_.xe(e),Ka(i).R_(e)}function hg(i){i.Q_=new LO({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>i.N_.get(e)||null,tt:()=>i.datastore.serializer.databaseId}),Ka(i).start(),i.q_.v_()}function mg(i){return _o(i)&&!Ka(i).n_()&&i.N_.size>0}function _o(i){return ze(i).L_.size===0}function WA(i){i.Q_=void 0}async function LL(i){i.q_.set("Online")}async function UL(i){i.N_.forEach((e,t)=>{dg(i,e)})}async function zL(i,e){WA(i),mg(i)?(i.q_.M_(e),hg(i)):i.q_.set("Unknown")}async function BL(i,e,t){if(i.q_.set("Online"),e instanceof VA&&e.state===2&&e.cause)try{await async function(s,a){const u=a.cause;for(const f of a.targetIds)s.N_.has(f)&&(await s.remoteSyncer.rejectListen(f,u),s.N_.delete(f),s.Q_.removeTarget(f))}(i,e)}catch(n){Ee("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await $f(i,n)}else if(e instanceof Sf?i.Q_.Ke(e):e instanceof kA?i.Q_.He(e):i.Q_.We(e),!t.isEqual(Ue.min()))try{const n=await HA(i.localStore);t.compareTo(n)>=0&&await function(a,u){const f=a.Q_.rt(u);return f.targetChanges.forEach((y,g)=>{if(y.resumeToken.approximateByteSize()>0){const v=a.N_.get(g);v&&a.N_.set(g,v.withResumeToken(y.resumeToken,u))}}),f.targetMismatches.forEach((y,g)=>{const v=a.N_.get(y);if(!v)return;a.N_.set(y,v.withResumeToken(ln.EMPTY_BYTE_STRING,v.snapshotVersion)),QA(a,y);const A=new cs(v.target,y,g,v.sequenceNumber);dg(a,A)}),a.remoteSyncer.applyRemoteEvent(f)}(i,t)}catch(n){Ee("RemoteStore","Failed to raise snapshot:",n),await $f(i,n)}}async function $f(i,e,t){if(!Du(e))throw e;i.L_.add(1),await Vu(i),i.q_.set("Offline"),t||(t=()=>HA(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{Ee("RemoteStore","Retrying IndexedDB access"),await t(),i.L_.delete(1),await fd(i)})}function JA(i,e){return e().catch(t=>$f(i,t,e))}async function dd(i){const e=ze(i),t=vs(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;FL(e);)try{const s=await SL(e.localStore,n);if(s===null){e.O_.length===0&&t.o_();break}n=s.batchId,qL(e,s)}catch(s){await $f(e,s)}XA(e)&&jA(e)}function FL(i){return _o(i)&&i.O_.length<10}function qL(i,e){i.O_.push(e);const t=vs(i);t.r_()&&t.V_&&t.m_(e.mutations)}function XA(i){return _o(i)&&!vs(i).n_()&&i.O_.length>0}function jA(i){vs(i).start()}async function GL(i){vs(i).p_()}async function HL(i){const e=vs(i);for(const t of i.O_)e.m_(t.mutations)}async function KL(i,e,t){const n=i.O_.shift(),s=sg.from(n,e,t);await JA(i,()=>i.remoteSyncer.applySuccessfulWrite(s)),await dd(i)}async function YL(i,e){e&&vs(i).V_&&await async function(n,s){if(function(u){return kO(u)&&u!==ne.ABORTED}(s.code)){const a=n.O_.shift();vs(n).s_(),await JA(n,()=>n.remoteSyncer.rejectFailedWrite(a.batchId,s)),await dd(n)}}(i,e),XA(i)&&jA(i)}async function AE(i,e){const t=ze(i);t.asyncQueue.verifyOperationInProgress(),Ee("RemoteStore","RemoteStore received new credentials");const n=_o(t);t.L_.add(3),await Vu(t),n&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await fd(t)}async function $L(i,e){const t=ze(i);e?(t.L_.delete(2),await fd(t)):e||(t.L_.add(2),await Vu(t),t.q_.set("Unknown"))}function Ka(i){return i.K_||(i.K_=function(t,n,s){const a=ze(t);return a.w_(),new DL(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(i.datastore,i.asyncQueue,{Eo:LL.bind(null,i),Ro:UL.bind(null,i),mo:zL.bind(null,i),d_:BL.bind(null,i)}),i.B_.push(async e=>{e?(i.K_.s_(),mg(i)?hg(i):i.q_.set("Unknown")):(await i.K_.stop(),WA(i))})),i.K_}function vs(i){return i.U_||(i.U_=function(t,n,s){const a=ze(t);return a.w_(),new PL(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(i.datastore,i.asyncQueue,{Eo:()=>Promise.resolve(),Ro:GL.bind(null,i),mo:YL.bind(null,i),f_:HL.bind(null,i),g_:KL.bind(null,i)}),i.B_.push(async e=>{e?(i.U_.s_(),await dd(i)):(await i.U_.stop(),i.O_.length>0&&(Ee("RemoteStore",`Stopping write stream with ${i.O_.length} pending writes`),i.O_=[]))})),i.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(e,t,n,s,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=s,this.removalCallback=a,this.deferred=new Cr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,s,a){const u=Date.now()+n,f=new pg(e,t,u,s,a);return f.start(n),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gg(i,e){if(Ir("AsyncQueue",`${e}: ${i}`),Du(i))return new ge(ne.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e){this.comparator=e?(t,n)=>e(t,n)||we.comparator(t.key,n.key):(t,n)=>we.comparator(t.key,n.key),this.keyedMap=iu(),this.sortedSet=new St(this.comparator)}static emptySet(e){return new Ca(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ca)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=n.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new Ca;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(){this.W_=new St(we.comparator)}track(e){const t=e.doc.key,n=this.W_.get(t);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(t,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(t):e.type===1&&n.type===2?this.W_=this.W_.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Ve():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,n)=>{e.push(n)}),e}}class La{constructor(e,t,n,s,a,u,f,y,g){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=f,this.excludesMetadataChanges=y,this.hasCachedResults=g}static fromInitialDocuments(e,t,n,s,a){const u=[];return t.forEach(f=>{u.push({type:0,doc:f})}),new La(e,t,Ca.emptySet(t),u,n,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&sd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==n[s].type||!t[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QL{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class WL{constructor(){this.queries=wE(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,n){const s=ze(t),a=s.queries;s.queries=wE(),a.forEach((u,f)=>{for(const y of f.j_)y.onError(n)})})(this,new ge(ne.ABORTED,"Firestore shutting down"))}}function wE(){return new Ha(i=>EA(i),sd)}async function ZA(i,e){const t=ze(i);let n=3;const s=e.query;let a=t.queries.get(s);a?!a.H_()&&e.J_()&&(n=2):(a=new QL,n=e.J_()?0:1);try{switch(n){case 0:a.z_=await t.onListen(s,!0);break;case 1:a.z_=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(u){const f=gg(u,`Initialization of query '${ma(e.query)}' failed`);return void e.onError(f)}t.queries.set(s,a),a.j_.push(e),e.Z_(t.onlineState),a.z_&&e.X_(a.z_)&&yg(t)}async function eS(i,e){const t=ze(i),n=e.query;let s=3;const a=t.queries.get(n);if(a){const u=a.j_.indexOf(e);u>=0&&(a.j_.splice(u,1),a.j_.length===0?s=e.J_()?0:1:!a.H_()&&e.J_()&&(s=2))}switch(s){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function JL(i,e){const t=ze(i);let n=!1;for(const s of e){const a=s.query,u=t.queries.get(a);if(u){for(const f of u.j_)f.X_(s)&&(n=!0);u.z_=s}}n&&yg(t)}function XL(i,e,t){const n=ze(i),s=n.queries.get(e);if(s)for(const a of s.j_)a.onError(t);n.queries.delete(e)}function yg(i){i.Y_.forEach(e=>{e.next()})}var Ip,IE;(IE=Ip||(Ip={})).ea="default",IE.Cache="cache";class tS{constructor(e,t,n){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new La(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const n=t!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=La.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Ip.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(e){this.key=e}}class iS{constructor(e){this.key=e}}class jL{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ye(),this.mutatedKeys=Ye(),this.Aa=CA(e),this.Ra=new Ca(this.Aa)}get Va(){return this.Ta}ma(e,t){const n=t?t.fa:new SE,s=t?t.Ra:this.Ra;let a=t?t.mutatedKeys:this.mutatedKeys,u=s,f=!1;const y=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,g=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((v,A)=>{const S=s.get(v),R=od(this.query,A)?A:null,V=!!S&&this.mutatedKeys.has(S.key),H=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let Y=!1;S&&R?S.data.isEqual(R.data)?V!==H&&(n.track({type:3,doc:R}),Y=!0):this.ga(S,R)||(n.track({type:2,doc:R}),Y=!0,(y&&this.Aa(R,y)>0||g&&this.Aa(R,g)<0)&&(f=!0)):!S&&R?(n.track({type:0,doc:R}),Y=!0):S&&!R&&(n.track({type:1,doc:S}),Y=!0,(y||g)&&(f=!0)),Y&&(R?(u=u.add(R),a=H?a.add(v):a.delete(v)):(u=u.delete(v),a=a.delete(v)))}),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),a=a.delete(v.key),n.track({type:1,doc:v})}return{Ra:u,fa:n,ns:f,mutatedKeys:a}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,s){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const u=e.fa.G_();u.sort((v,A)=>function(R,V){const H=Y=>{switch(Y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ve()}};return H(R)-H(V)}(v.type,A.type)||this.Aa(v.doc,A.doc)),this.pa(n),s=s!=null&&s;const f=t&&!s?this.ya():[],y=this.da.size===0&&this.current&&!s?1:0,g=y!==this.Ea;return this.Ea=y,u.length!==0||g?{snapshot:new La(this.query,e.Ra,a,u,e.mutatedKeys,y===0,g,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:f}:{wa:f}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new SE,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ye(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});const t=[];return e.forEach(n=>{this.da.has(n)||t.push(new iS(n))}),this.da.forEach(n=>{e.has(n)||t.push(new nS(n))}),t}ba(e){this.Ta=e.Ts,this.da=Ye();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return La.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class ZL{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class eU{constructor(e){this.key=e,this.va=!1}}class tU{constructor(e,t,n,s,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.Ca={},this.Fa=new Ha(f=>EA(f),sd),this.Ma=new Map,this.xa=new Set,this.Oa=new St(we.comparator),this.Na=new Map,this.La=new lg,this.Ba={},this.ka=new Map,this.qa=Oa.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function nU(i,e,t=!0){const n=uS(i);let s;const a=n.Fa.get(e);return a?(n.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.Da()):s=await rS(n,e,t,!0),s}async function iU(i,e){const t=uS(i);await rS(t,e,!0,!1)}async function rS(i,e,t,n){const s=await wL(i.localStore,Ui(e)),a=s.targetId,u=i.sharedClientState.addLocalQueryTarget(a,t);let f;return n&&(f=await rU(i,e,a,u==="current",s.resumeToken)),i.isPrimaryClient&&t&&$A(i.remoteStore,s),f}async function rU(i,e,t,n,s){i.Ka=(A,S,R)=>async function(H,Y,ce,le){let oe=Y.view.ma(ce);oe.ns&&(oe=await TE(H.localStore,Y.query,!1).then(({documents:O})=>Y.view.ma(O,oe)));const pe=le&&le.targetChanges.get(Y.targetId),fe=le&&le.targetMismatches.get(Y.targetId)!=null,Te=Y.view.applyChanges(oe,H.isPrimaryClient,pe,fe);return xE(H,Y.targetId,Te.wa),Te.snapshot}(i,A,S,R);const a=await TE(i.localStore,e,!0),u=new jL(e,a.Ts),f=u.ma(a.documents),y=ku.createSynthesizedTargetChangeForCurrentChange(t,n&&i.onlineState!=="Offline",s),g=u.applyChanges(f,i.isPrimaryClient,y);xE(i,t,g.wa);const v=new ZL(e,t,u);return i.Fa.set(e,v),i.Ma.has(t)?i.Ma.get(t).push(e):i.Ma.set(t,[e]),g.snapshot}async function sU(i,e,t){const n=ze(i),s=n.Fa.get(e),a=n.Ma.get(s.targetId);if(a.length>1)return n.Ma.set(s.targetId,a.filter(u=>!sd(u,e))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await wp(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),t&&fg(n.remoteStore,s.targetId),Rp(n,s.targetId)}).catch(Mu)):(Rp(n,s.targetId),await wp(n.localStore,s.targetId,!0))}async function oU(i,e){const t=ze(i),n=t.Fa.get(e),s=t.Ma.get(n.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),fg(t.remoteStore,n.targetId))}async function aU(i,e,t){const n=mU(i);try{const s=await function(u,f){const y=ze(u),g=Ht.now(),v=f.reduce((R,V)=>R.add(V.key),Ye());let A,S;return y.persistence.runTransaction("Locally write mutations","readwrite",R=>{let V=Rr(),H=Ye();return y.cs.getEntries(R,v).next(Y=>{V=Y,V.forEach((ce,le)=>{le.isValidDocument()||(H=H.add(ce))})}).next(()=>y.localDocuments.getOverlayedDocuments(R,V)).next(Y=>{A=Y;const ce=[];for(const le of f){const oe=bO(le,A.get(le.key).overlayedDocument);oe!=null&&ce.push(new Cs(le.key,oe,hA(oe.value.mapValue),ti.exists(!0)))}return y.mutationQueue.addMutationBatch(R,g,ce,f)}).next(Y=>{S=Y;const ce=Y.applyToLocalDocumentSet(A,H);return y.documentOverlayCache.saveOverlays(R,Y.batchId,ce)})}).then(()=>({batchId:S.batchId,changes:SA(A)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),function(u,f,y){let g=u.Ba[u.currentUser.toKey()];g||(g=new St(tt)),g=g.insert(f,y),u.Ba[u.currentUser.toKey()]=g}(n,s.batchId,t),await Ou(n,s.changes),await dd(n.remoteStore)}catch(s){const a=gg(s,"Failed to persist write");t.reject(a)}}async function sS(i,e){const t=ze(i);try{const n=await CL(t.localStore,e);e.targetChanges.forEach((s,a)=>{const u=t.Na.get(a);u&&(lt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?u.va=!0:s.modifiedDocuments.size>0?lt(u.va):s.removedDocuments.size>0&&(lt(u.va),u.va=!1))}),await Ou(t,n,e)}catch(n){await Mu(n)}}function RE(i,e,t){const n=ze(i);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const s=[];n.Fa.forEach((a,u)=>{const f=u.view.Z_(e);f.snapshot&&s.push(f.snapshot)}),function(u,f){const y=ze(u);y.onlineState=f;let g=!1;y.queries.forEach((v,A)=>{for(const S of A.j_)S.Z_(f)&&(g=!0)}),g&&yg(y)}(n.eventManager,e),s.length&&n.Ca.d_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function lU(i,e,t){const n=ze(i);n.sharedClientState.updateQueryState(e,"rejected",t);const s=n.Na.get(e),a=s&&s.key;if(a){let u=new St(we.comparator);u=u.insert(a,pn.newNoDocument(a,Ue.min()));const f=Ye().add(a),y=new ud(Ue.min(),new Map,new St(tt),u,f);await sS(n,y),n.Oa=n.Oa.remove(a),n.Na.delete(e),_g(n)}else await wp(n.localStore,e,!1).then(()=>Rp(n,e,t)).catch(Mu)}async function uU(i,e){const t=ze(i),n=e.batch.batchId;try{const s=await EL(t.localStore,e);aS(t,n,null),oS(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await Ou(t,s)}catch(s){await Mu(s)}}async function cU(i,e,t){const n=ze(i);try{const s=await function(u,f){const y=ze(u);return y.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let v;return y.mutationQueue.lookupMutationBatch(g,f).next(A=>(lt(A!==null),v=A.keys(),y.mutationQueue.removeMutationBatch(g,A))).next(()=>y.mutationQueue.performConsistencyCheck(g)).next(()=>y.documentOverlayCache.removeOverlaysForBatchId(g,v,f)).next(()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,v)).next(()=>y.localDocuments.getDocuments(g,v))})}(n.localStore,e);aS(n,e,t),oS(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await Ou(n,s)}catch(s){await Mu(s)}}function oS(i,e){(i.ka.get(e)||[]).forEach(t=>{t.resolve()}),i.ka.delete(e)}function aS(i,e,t){const n=ze(i);let s=n.Ba[n.currentUser.toKey()];if(s){const a=s.get(e);a&&(t?a.reject(t):a.resolve(),s=s.remove(e)),n.Ba[n.currentUser.toKey()]=s}}function Rp(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const n of i.Ma.get(e))i.Fa.delete(n),t&&i.Ca.$a(n,t);i.Ma.delete(e),i.isPrimaryClient&&i.La.gr(e).forEach(n=>{i.La.containsKey(n)||lS(i,n)})}function lS(i,e){i.xa.delete(e.path.canonicalString());const t=i.Oa.get(e);t!==null&&(fg(i.remoteStore,t),i.Oa=i.Oa.remove(e),i.Na.delete(t),_g(i))}function xE(i,e,t){for(const n of t)n instanceof nS?(i.La.addReference(n.key,e),fU(i,n)):n instanceof iS?(Ee("SyncEngine","Document no longer in limbo: "+n.key),i.La.removeReference(n.key,e),i.La.containsKey(n.key)||lS(i,n.key)):Ve()}function fU(i,e){const t=e.key,n=t.path.canonicalString();i.Oa.get(t)||i.xa.has(n)||(Ee("SyncEngine","New document in limbo: "+t),i.xa.add(n),_g(i))}function _g(i){for(;i.xa.size>0&&i.Oa.size<i.maxConcurrentLimboResolutions;){const e=i.xa.values().next().value;i.xa.delete(e);const t=new we(_t.fromString(e)),n=i.qa.next();i.Na.set(n,new eU(t)),i.Oa=i.Oa.insert(t,n),$A(i.remoteStore,new cs(Ui(ng(t.path)),n,"TargetPurposeLimboResolution",Jp.oe))}}async function Ou(i,e,t){const n=ze(i),s=[],a=[],u=[];n.Fa.isEmpty()||(n.Fa.forEach((f,y)=>{u.push(n.Ka(y,e,t).then(g=>{var v;if((g||t)&&n.isPrimaryClient){const A=g?!g.fromCache:(v=t==null?void 0:t.targetChanges.get(y.targetId))===null||v===void 0?void 0:v.current;n.sharedClientState.updateQueryState(y.targetId,A?"current":"not-current")}if(g){s.push(g);const A=cg.Wi(y.targetId,g);a.push(A)}}))}),await Promise.all(u),n.Ca.d_(s),await async function(y,g){const v=ze(y);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",A=>se.forEach(g,S=>se.forEach(S.$i,R=>v.persistence.referenceDelegate.addReference(A,S.targetId,R)).next(()=>se.forEach(S.Ui,R=>v.persistence.referenceDelegate.removeReference(A,S.targetId,R)))))}catch(A){if(!Du(A))throw A;Ee("LocalStore","Failed to update sequence numbers: "+A)}for(const A of g){const S=A.targetId;if(!A.fromCache){const R=v.os.get(S),V=R.snapshotVersion,H=R.withLastLimboFreeSnapshotVersion(V);v.os=v.os.insert(S,H)}}}(n.localStore,a))}async function dU(i,e){const t=ze(i);if(!t.currentUser.isEqual(e)){Ee("SyncEngine","User change. New user:",e.toKey());const n=await GA(t.localStore,e);t.currentUser=e,function(a,u){a.ka.forEach(f=>{f.forEach(y=>{y.reject(new ge(ne.CANCELLED,u))})}),a.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Ou(t,n.hs)}}function hU(i,e){const t=ze(i),n=t.Na.get(e);if(n&&n.va)return Ye().add(n.key);{let s=Ye();const a=t.Ma.get(e);if(!a)return s;for(const u of a){const f=t.Fa.get(u);s=s.unionWith(f.view.Va)}return s}}function uS(i){const e=ze(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=sS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=hU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=lU.bind(null,e),e.Ca.d_=JL.bind(null,e.eventManager),e.Ca.$a=XL.bind(null,e.eventManager),e}function mU(i){const e=ze(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=uU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=cU.bind(null,e),e}class Qf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=cd(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return TL(this.persistence,new _L,e.initialUser,this.serializer)}Ga(e){return new pL(ug.Zr,this.serializer)}Wa(e){return new RL}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Qf.provider={build:()=>new Qf};class xp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>RE(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=dU.bind(null,this.syncEngine),await $L(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new WL}()}createDatastore(e){const t=cd(e.databaseInfo.databaseId),n=function(a){return new ML(a)}(e.databaseInfo);return function(a,u,f,y){return new kL(a,u,f,y)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(n,s,a,u,f){return new OL(n,s,a,u,f)}(this.localStore,this.datastore,e.asyncQueue,t=>RE(this.syncEngine,t,0),function(){return CE.D()?new CE:new xL}())}createSyncEngine(e,t){return function(s,a,u,f,y,g,v){const A=new tU(s,a,u,f,y,g);return v&&(A.Qa=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(s){const a=ze(s);Ee("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await Vu(a),a.k_.shutdown(),a.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}xp.provider={build:()=>new xp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ir("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pU{constructor(e,t,n,s,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=s,this.user=mn.UNAUTHENTICATED,this.clientId=cA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(n,async u=>{Ee("FirestoreClient","Received user=",u.uid),await this.authCredentialListener(u),this.user=u}),this.appCheckCredentials.start(n,u=>(Ee("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Cr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=gg(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Lm(i,e){i.asyncQueue.verifyOperationInProgress(),Ee("FirestoreClient","Initializing OfflineComponentProvider");const t=i.configuration;await e.initialize(t);let n=t.initialUser;i.setCredentialChangeListener(async s=>{n.isEqual(s)||(await GA(e.localStore,s),n=s)}),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}async function bE(i,e){i.asyncQueue.verifyOperationInProgress();const t=await gU(i);Ee("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,i.configuration),i.setCredentialChangeListener(n=>AE(e.remoteStore,n)),i.setAppCheckTokenChangeListener((n,s)=>AE(e.remoteStore,s)),i._onlineComponents=e}async function gU(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){Ee("FirestoreClient","Using user provided OfflineComponentProvider");try{await Lm(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(s){return s.name==="FirebaseError"?s.code===ne.FAILED_PRECONDITION||s.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(t))throw t;Da("Error using user provided cache. Falling back to memory cache: "+t),await Lm(i,new Qf)}}else Ee("FirestoreClient","Using default OfflineComponentProvider"),await Lm(i,new Qf);return i._offlineComponents}async function fS(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(Ee("FirestoreClient","Using user provided OnlineComponentProvider"),await bE(i,i._uninitializedComponentsProvider._online)):(Ee("FirestoreClient","Using default OnlineComponentProvider"),await bE(i,new xp))),i._onlineComponents}function yU(i){return fS(i).then(e=>e.syncEngine)}async function dS(i){const e=await fS(i),t=e.eventManager;return t.onListen=nU.bind(null,e.syncEngine),t.onUnlisten=sU.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=iU.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=oU.bind(null,e.syncEngine),t}function _U(i,e,t={}){const n=new Cr;return i.asyncQueue.enqueueAndForget(async()=>function(a,u,f,y,g){const v=new cS({next:S=>{v.Za(),u.enqueueAndForget(()=>eS(a,A));const R=S.docs.has(f);!R&&S.fromCache?g.reject(new ge(ne.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&S.fromCache&&y&&y.source==="server"?g.reject(new ge(ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(S)},error:S=>g.reject(S)}),A=new tS(ng(f.path),v,{includeMetadataChanges:!0,_a:!0});return ZA(a,A)}(await dS(i),i.asyncQueue,e,t,n)),n.promise}function vU(i,e,t={}){const n=new Cr;return i.asyncQueue.enqueueAndForget(async()=>function(a,u,f,y,g){const v=new cS({next:S=>{v.Za(),u.enqueueAndForget(()=>eS(a,A)),S.fromCache&&y.source==="server"?g.reject(new ge(ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(S)},error:S=>g.reject(S)}),A=new tS(f,v,{includeMetadataChanges:!0,_a:!0});return ZA(a,A)}(await dS(i),i.asyncQueue,e,t,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hS(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mS(i,e,t){if(!t)throw new ge(ne.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function TU(i,e,t,n){if(e===!0&&n===!0)throw new ge(ne.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function ME(i){if(!we.isDocumentKey(i))throw new ge(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function DE(i){if(we.isDocumentKey(i))throw new ge(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function hd(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Ve()}function mi(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new ge(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=hd(i);throw new ge(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(e){var t,n;if(e.host===void 0){if(e.ssl!==void 0)throw new ge(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ge(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}TU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=hS((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new ge(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new ge(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new ge(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class md{constructor(e,t,n,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new PE({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new PE(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new LV;switch(n.type){case"firstParty":return new FV(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new ge(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const n=NE.get(t);n&&(Ee("ComponentProvider","Removing Datastore"),NE.delete(t),n.terminate())}(this),Promise.resolve()}}function EU(i,e,t,n={}){var s;const a=(i=mi(i,md))._getSettings(),u=`${e}:${t}`;if(a.host!=="firestore.googleapis.com"&&a.host!==u&&Da("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},a),{host:u,ssl:!1})),n.mockUserToken){let f,y;if(typeof n.mockUserToken=="string")f=n.mockUserToken,y=mn.MOCK_USER;else{f=h2(n.mockUserToken,(s=i._app)===null||s===void 0?void 0:s.options.projectId);const g=n.mockUserToken.sub||n.mockUserToken.user_id;if(!g)throw new ge(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new mn(g)}i._authCredentials=new UV(new uA(f,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new vo(this.firestore,e,this._query)}}class wn{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ps(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wn(this.firestore,e,this._key)}}class ps extends vo{constructor(e,t,n){super(e,t,ng(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wn(this.firestore,null,new we(e))}withConverter(e){return new ps(this.firestore,e,this._path)}}function kE(i,e,...t){if(i=an(i),mS("collection","path",e),i instanceof md){const n=_t.fromString(e,...t);return DE(n),new ps(i,null,n)}{if(!(i instanceof wn||i instanceof ps))throw new ge(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=i._path.child(_t.fromString(e,...t));return DE(n),new ps(i.firestore,null,n)}}function Su(i,e,...t){if(i=an(i),arguments.length===1&&(e=cA.newId()),mS("doc","path",e),i instanceof md){const n=_t.fromString(e,...t);return ME(n),new wn(i,null,new we(n))}{if(!(i instanceof wn||i instanceof ps))throw new ge(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=i._path.child(_t.fromString(e,...t));return ME(n),new wn(i.firestore,i instanceof ps?i.converter:null,new we(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new KA(this,"async_queue_retry"),this.Vu=()=>{const n=Om();n&&Ee("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const t=Om();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=Om();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new Cr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Du(e))throw e;Ee("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(n=>{this.Eu=n,this.du=!1;const s=function(u){let f=u.message||"";return u.stack&&(f=u.stack.includes(u.message)?u.stack:u.message+`
`+u.stack),f}(n);throw Ir("INTERNAL UNHANDLED ERROR: ",s),n}).then(n=>(this.du=!1,n))));return this.mu=t,t}enqueueAfterDelay(e,t,n){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const s=pg.createAndSchedule(this,e,t,n,a=>this.yu(a));return this.Tu.push(s),s}fu(){this.Eu&&Ve()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,n)=>t.targetTimeMs-n.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}class To extends md{constructor(e,t,n,s){super(e,t,n,s),this.type="firestore",this._queue=new VE,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new VE(e),this._firestoreClient=void 0,await e}}}function CU(i,e){const t=typeof i=="object"?i:AC(),n=typeof i=="string"?i:"(default)",s=Lp(t,"firestore").getImmediate({identifier:n});if(!s._initialized){const a=f2("firestore");a&&EU(s,...a)}return s}function vg(i){if(i._terminated)throw new ge(ne.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||AU(i),i._firestoreClient}function AU(i){var e,t,n;const s=i._freezeSettings(),a=function(f,y,g,v){return new eO(f,y,g,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,hS(v.experimentalLongPollingOptions),v.useFetchStreams)}(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,s);i._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((n=s.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(i._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),i._firestoreClient=new pU(i._authCredentials,i._appCheckCredentials,i._queue,a,i._componentsProvider&&function(f){const y=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(y),_online:y}}(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ua(ln.fromBase64String(e))}catch(t){throw new ge(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ua(ln.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ge(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new sn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ge(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ge(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return tt(this._lat,e._lat)||tt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let a=0;a<n.length;++a)if(n[a]!==s[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SU=/^__.*__$/;class wU{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask!==null?new Cs(e,this.data,this.fieldMask,t,this.fieldTransforms):new Pu(e,this.data,t,this.fieldTransforms)}}class pS{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Cs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function gS(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ve()}}class Cg{constructor(e,t,n,s,a,u){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=s,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Cg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const n=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Fu({path:n,xu:!1});return s.Ou(e),s}Nu(e){var t;const n=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Fu({path:n,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Wf(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(gS(this.Cu)&&SU.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class IU{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||cd(e)}Qu(e,t,n,s=!1){return new Cg({Cu:e,methodName:t,qu:n,path:sn.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function yd(i){const e=i._freezeSettings(),t=cd(i._databaseId);return new IU(i._databaseId,!!e.ignoreUndefinedProperties,t)}function yS(i,e,t,n,s,a={}){const u=i.Qu(a.merge||a.mergeFields?2:0,e,t,s);Sg("Data must be an object, but it was:",u,n);const f=_S(n,u);let y,g;if(a.merge)y=new qn(u.fieldMask),g=u.fieldTransforms;else if(a.mergeFields){const v=[];for(const A of a.mergeFields){const S=bp(e,A,t);if(!u.contains(S))throw new ge(ne.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);TS(v,S)||v.push(S)}y=new qn(v),g=u.fieldTransforms.filter(A=>y.covers(A.field))}else y=null,g=u.fieldTransforms;return new wU(new Dn(f),y,g)}class _d extends gd{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof _d}}class Ag extends gd{_toFieldTransform(e){return new wO(e.path,new Eu)}isEqual(e){return e instanceof Ag}}function RU(i,e,t,n){const s=i.Qu(1,e,t);Sg("Data must be an object, but it was:",s,n);const a=[],u=Dn.empty();yo(n,(y,g)=>{const v=wg(e,y,t);g=an(g);const A=s.Nu(v);if(g instanceof _d)a.push(v);else{const S=Lu(g,A);S!=null&&(a.push(v),u.set(v,S))}});const f=new qn(a);return new pS(u,f,s.fieldTransforms)}function xU(i,e,t,n,s,a){const u=i.Qu(1,e,t),f=[bp(e,n,t)],y=[s];if(a.length%2!=0)throw new ge(ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<a.length;S+=2)f.push(bp(e,a[S])),y.push(a[S+1]);const g=[],v=Dn.empty();for(let S=f.length-1;S>=0;--S)if(!TS(g,f[S])){const R=f[S];let V=y[S];V=an(V);const H=u.Nu(R);if(V instanceof _d)g.push(R);else{const Y=Lu(V,H);Y!=null&&(g.push(R),v.set(R,Y))}}const A=new qn(g);return new pS(v,A,u.fieldTransforms)}function bU(i,e,t,n=!1){return Lu(t,i.Qu(n?4:3,e))}function Lu(i,e){if(vS(i=an(i)))return Sg("Unsupported field value:",e,i),_S(i,e);if(i instanceof gd)return function(n,s){if(!gS(s.Cu))throw s.Bu(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${n._methodName}() is not currently supported inside arrays`);const a=n._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(n,s){const a=[];let u=0;for(const f of n){let y=Lu(f,s.Lu(u));y==null&&(y={nullValue:"NULL_VALUE"}),a.push(y),u++}return{arrayValue:{values:a}}}(i,e)}return function(n,s){if((n=an(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return CO(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const a=Ht.fromDate(n);return{timestampValue:Yf(s.serializer,a)}}if(n instanceof Ht){const a=new Ht(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Yf(s.serializer,a)}}if(n instanceof Tg)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Ua)return{bytesValue:OA(s.serializer,n._byteString)};if(n instanceof wn){const a=s.databaseId,u=n.firestore._databaseId;if(!u.isEqual(a))throw s.Bu(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:ag(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof Eg)return function(u,f){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:u.toArray().map(y=>{if(typeof y!="number")throw f.Bu("VectorValues must only contain numeric values.");return ig(f.serializer,y)})}}}}}}(n,s);throw s.Bu(`Unsupported field value: ${hd(n)}`)}(i,e)}function _S(i,e){const t={};return fA(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):yo(i,(n,s)=>{const a=Lu(s,e.Mu(n));a!=null&&(t[n]=a)}),{mapValue:{fields:t}}}function vS(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Ht||i instanceof Tg||i instanceof Ua||i instanceof wn||i instanceof gd||i instanceof Eg)}function Sg(i,e,t){if(!vS(t)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(t)){const n=hd(t);throw n==="an object"?e.Bu(i+" a custom object"):e.Bu(i+" "+n)}}function bp(i,e,t){if((e=an(e))instanceof pd)return e._internalPath;if(typeof e=="string")return wg(i,e);throw Wf("Field path arguments must be of type string or ",i,!1,void 0,t)}const NU=new RegExp("[~\\*/\\[\\]]");function wg(i,e,t){if(e.search(NU)>=0)throw Wf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new pd(...e.split("."))._internalPath}catch{throw Wf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Wf(i,e,t,n,s){const a=n&&!n.isEmpty(),u=s!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let y="";return(a||u)&&(y+=" (found",a&&(y+=` in field ${n}`),u&&(y+=` in document ${s}`),y+=")"),new ge(ne.INVALID_ARGUMENT,f+i+y)}function TS(i,e){return i.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e,t,n,s,a){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new wn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new MU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(vd("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class MU extends ES{data(){return super.data()}}function vd(i,e){return typeof e=="string"?wg(i,e):e instanceof pd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DU(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new ge(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ig{}class CS extends Ig{}function PU(i,e,...t){let n=[];e instanceof Ig&&n.push(e),n=n.concat(t),function(a){const u=a.filter(y=>y instanceof Rg).length,f=a.filter(y=>y instanceof Td).length;if(u>1||u>0&&f>0)throw new ge(ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)i=s._apply(i);return i}class Td extends CS{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Td(e,t,n)}_apply(e){const t=this._parse(e);return AS(e._query,t),new vo(e.firestore,e.converter,vp(e._query,t))}_parse(e){const t=yd(e.firestore);return function(a,u,f,y,g,v,A){let S;if(g.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new ge(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){LE(A,v);const R=[];for(const V of A)R.push(OE(y,a,V));S={arrayValue:{values:R}}}else S=OE(y,a,A)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||LE(A,v),S=bU(f,u,A,v==="in"||v==="not-in");return Ut.create(g,v,S)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function kU(i,e,t){const n=e,s=vd("where",i);return Td._create(s,n,t)}class Rg extends Ig{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Rg(e,t)}_parse(e){const t=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return t.length===1?t[0]:hi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(s,a){let u=s;const f=a.getFlattenedFilters();for(const y of f)AS(u,y),u=vp(u,y)}(e._query,t),new vo(e.firestore,e.converter,vp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class xg extends CS{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new xg(e,t)}_apply(e){const t=function(s,a,u){if(s.startAt!==null)throw new ge(ne.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ge(ne.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Tu(a,u)}(e._query,this._field,this._direction);return new vo(e.firestore,e.converter,function(s,a){const u=s.explicitOrderBy.concat([a]);return new Ga(s.path,s.collectionGroup,u,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}function VU(i,e="asc"){const t=e,n=vd("orderBy",i);return xg._create(n,t)}function OE(i,e,t){if(typeof(t=an(t))=="string"){if(t==="")throw new ge(ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!TA(e)&&t.indexOf("/")!==-1)throw new ge(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const n=e.path.child(_t.fromString(t));if(!we.isDocumentKey(n))throw new ge(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return iE(i,new we(n))}if(t instanceof wn)return iE(i,t._key);throw new ge(ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${hd(t)}.`)}function LE(i,e){if(!Array.isArray(i)||i.length===0)throw new ge(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function AS(i,e){const t=function(s,a){for(const u of s)for(const f of u.getFlattenedFilters())if(a.indexOf(f.op)>=0)return f.op;return null}(i.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new ge(ne.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ge(ne.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class OU{convertValue(e,t="none"){switch(go(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(po(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ve()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return yo(e,(s,a)=>{n[s]=this.convertValue(a,t)}),n}convertVectorValue(e){var t,n,s;const a=(s=(n=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.map(u=>Mt(u.doubleValue));return new Eg(a)}convertGeoPoint(e){return new Tg(Mt(e.latitude),Mt(e.longitude))}convertArray(e,t){return(e.values||[]).map(n=>this.convertValue(n,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=jp(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(yu(e));default:return null}}convertTimestamp(e){const t=_s(e);return new Ht(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=_t.fromString(e);lt(qA(n));const s=new _u(n.get(1),n.get(3)),a=new we(n.popFirst(5));return s.isEqual(t)||Ir(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SS(i,e,t){let n;return n=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class wS extends ES{constructor(e,t,n,s,a,u){super(e,t,n,s,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new wf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(vd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class wf extends wS{data(e={}){return super.data(e)}}class LU{constructor(e,t,n,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new su(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new wf(this._firestore,this._userDataWriter,n.key,n,new su(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ge(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let u=0;return s._snapshot.docChanges.map(f=>{const y=new wf(s._firestore,s._userDataWriter,f.doc.key,f.doc,new su(s._snapshot.mutatedKeys.has(f.doc.key),s._snapshot.fromCache),s.query.converter);return f.doc,{type:"added",doc:y,oldIndex:-1,newIndex:u++}})}{let u=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(f=>a||f.type!==3).map(f=>{const y=new wf(s._firestore,s._userDataWriter,f.doc.key,f.doc,new su(s._snapshot.mutatedKeys.has(f.doc.key),s._snapshot.fromCache),s.query.converter);let g=-1,v=-1;return f.type!==0&&(g=u.indexOf(f.doc.key),u=u.delete(f.doc.key)),f.type!==1&&(u=u.add(f.doc),v=u.indexOf(f.doc.key)),{type:UU(f.type),doc:y,oldIndex:g,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function UU(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UE(i){i=mi(i,wn);const e=mi(i.firestore,To);return _U(vg(e),i._key).then(t=>GU(e,i,t))}class IS extends OU{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ua(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new wn(this.firestore,null,t)}}function zU(i){i=mi(i,vo);const e=mi(i.firestore,To),t=vg(e),n=new IS(e);return DU(i._query),vU(t,i._query).then(s=>new LU(e,n,i,s))}function zE(i,e,t){i=mi(i,wn);const n=mi(i.firestore,To),s=SS(i.converter,e,t);return Ed(n,[yS(yd(n),"setDoc",i._key,s,i.converter!==null,t).toMutation(i._key,ti.none())])}function BU(i,e,t,...n){i=mi(i,wn);const s=mi(i.firestore,To),a=yd(s);let u;return u=typeof(e=an(e))=="string"||e instanceof pd?xU(a,"updateDoc",i._key,e,t,n):RU(a,"updateDoc",i._key,e),Ed(s,[u.toMutation(i._key,ti.exists(!0))])}function FU(i){return Ed(mi(i.firestore,To),[new rg(i._key,ti.none())])}function qU(i,e){const t=mi(i.firestore,To),n=Su(i),s=SS(i.converter,e);return Ed(t,[yS(yd(i.firestore),"addDoc",n._key,s,i.converter!==null,{}).toMutation(n._key,ti.exists(!1))]).then(()=>n)}function Ed(i,e){return function(n,s){const a=new Cr;return n.asyncQueue.enqueueAndForget(async()=>aU(await yU(n),s,a)),a.promise}(vg(i),e)}function GU(i,e,t){const n=t.docs.get(e._key),s=new IS(i);return new wS(i,s,e._key,n,new su(t.hasPendingWrites,t.fromCache),e.converter)}function Um(){return new Ag("serverTimestamp")}(function(e,t=!0){(function(s){qa=s})(Ba),Na(new fo("firestore",(n,{instanceIdentifier:s,options:a})=>{const u=n.getProvider("app").getImmediate(),f=new To(new zV(n.getProvider("auth-internal")),new GV(n.getProvider("app-check-internal")),function(g,v){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new ge(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _u(g.options.projectId,v)}(u,s),u);return a=Object.assign({useFetchStreams:t},a),f._setSettings(a),f},"PUBLIC").setMultipleInstances(!0)),ms(j0,"4.7.3",e),ms(j0,"4.7.3","esm2017")})();var HU="firebase",KU="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ms(HU,KU,"app");const YU={apiKey:"AIzaSyDalzqBX9R8Mz2K537EAfeTW7fr6og3b74",authDomain:"nammai-live.firebaseapp.com",projectId:"nammai-live",storageBucket:"nammai-live.firebasestorage.app",messagingSenderId:"1075347785616",appId:"1:1075347785616:web:a7c58cba17aba711561515"},RS=CC(YU),zm=VV(RS),xS=new yr;xS.setCustomParameters({prompt:"select_account"});const _a=CU(RS),bS=Ie.createContext(null),NS=()=>{const i=Ie.useContext(bS);if(!i)throw new Error("useAuth must be used within an AuthProvider");return i},$U=({children:i})=>{const[e,t]=Ie.useState(null),[n,s]=Ie.useState(null),[a,u]=Ie.useState(!0),f=async()=>{try{const A=(await Hk(zm,xS)).user,S=Su(_a,"users",A.uid),R=await UE(S);if(R.exists()){await zE(S,{lastLoginAt:Um()},{merge:!0});const V=R.data();s(V)}else{const V={uid:A.uid,email:A.email||"",displayName:A.displayName||"",photoURL:A.photoURL||"",createdAt:new Date,lastLoginAt:new Date};await zE(S,{...V,createdAt:Um(),lastLoginAt:Um()}),s(V)}}catch(v){throw console.error("Error signing in with Google:",v),v}},y=async()=>{try{await Sk(zm),s(null)}catch(v){throw console.error("Error signing out:",v),v}};Ie.useEffect(()=>Ak(zm,async A=>{if(t(A),A){const S=Su(_a,"users",A.uid),R=await UE(S);R.exists()&&s(R.data())}else s(null);u(!1)}),[]);const g={user:e,userProfile:n,loading:a,signInWithGoogle:f,logout:y};return N.jsx(bS.Provider,{value:g,children:i})},QU=()=>{const{signInWithGoogle:i}=NS(),[e,t]=Ie.useState("kannada"),[n,s]=Ie.useState(!1),a=f=>ba[e][f]||ba.english[f],u=async()=>{s(!0);try{await i()}catch(f){console.error("Login failed:",f)}finally{s(!1)}};return N.jsx("div",{className:"min-h-screen bg-zinc-900 flex items-center justify-center p-4",children:N.jsx("div",{className:"max-w-md w-full",children:N.jsxs("div",{className:"bg-zinc-800 rounded-xl shadow-2xl p-8 border border-zinc-700",children:[N.jsxs("div",{className:"text-center mb-8",children:[N.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-zinc-600 to-zinc-700 rounded-xl flex items-center justify-center mx-auto mb-4",children:N.jsx("span",{className:"text-2xl font-bold text-zinc-100",children:"N"})}),N.jsx("h1",{className:"text-3xl font-bold text-zinc-100 mb-2",children:"NammAI"}),N.jsx("p",{className:"text-zinc-400",children:e==="kannada"?"Nimma all-rounder AI assistant":"Your all-rounder AI assistant"})]}),N.jsxs("div",{className:"flex gap-2 mb-6",children:[N.jsx("button",{onClick:()=>t("kannada"),className:`flex-1 px-4 py-2 text-sm rounded-lg transition-colors ${e==="kannada"?"bg-zinc-600 text-white":"bg-zinc-700 text-zinc-300 hover:text-white hover:bg-zinc-600"}`,children:"Kanglish"}),N.jsx("button",{onClick:()=>t("english"),className:`flex-1 px-4 py-2 text-sm rounded-lg transition-colors ${e==="english"?"bg-zinc-600 text-white":"bg-zinc-700 text-zinc-300 hover:text-white hover:bg-zinc-600"}`,children:"English"})]}),N.jsxs("button",{onClick:u,disabled:n,className:"w-full bg-white hover:bg-gray-50 text-gray-900 font-semibold py-3 px-4 rounded-lg transition-colors flex items-center justify-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed",children:[n?N.jsx("div",{className:"w-5 h-5 border-2 border-gray-900 border-t-transparent rounded-full animate-spin"}):N.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[N.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),N.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),N.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),N.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),n?"Signing in...":a("signInWithGoogle")]}),N.jsxs("div",{className:"mt-8 pt-6 border-t border-zinc-700",children:[N.jsx("h3",{className:"text-zinc-300 font-medium mb-3",children:"Features:"}),N.jsxs("ul",{className:"space-y-2 text-sm text-zinc-400",children:[N.jsxs("li",{className:"flex items-center gap-2",children:[N.jsx("span",{className:"w-1.5 h-1.5 bg-zinc-500 rounded-full"}),"Content creation & writing"]}),N.jsxs("li",{className:"flex items-center gap-2",children:[N.jsx("span",{className:"w-1.5 h-1.5 bg-zinc-500 rounded-full"}),"Image generation"]}),N.jsxs("li",{className:"flex items-center gap-2",children:[N.jsx("span",{className:"w-1.5 h-1.5 bg-zinc-500 rounded-full"}),"Presentation slides"]}),N.jsxs("li",{className:"flex items-center gap-2",children:[N.jsx("span",{className:"w-1.5 h-1.5 bg-zinc-500 rounded-full"}),"Code assistance"]})]})]}),N.jsx("p",{className:"text-xs text-zinc-500 text-center mt-6",children:a("loginToSave")})]})})})},BE=i=>({id:1,sender:io.AI,text:ba[i].initialMessage}),Bm=i=>ba[i].systemInstruction,WU=()=>{var Co,Gi,Nr,ws,gt;const{user:i,loading:e,logout:t}=NS(),[n,s]=Ie.useState([]),[a,u]=Ie.useState(null),[f,y]=Ie.useState("chat"),[g,v]=Ie.useState(!1),[A,S]=Ie.useState(null),[R,V]=Ie.useState(null),[H,Y]=Ie.useState(""),[ce,le]=Ie.useState(!1),[oe,pe]=Ie.useState("kannada"),[fe,Te]=Ie.useState(()=>window.innerWidth>=1024),[O,b]=Ie.useState(!1),[x,k]=Ie.useState(!1),[U,z]=Ie.useState({chat:60,preview:40}),[D,We]=Ie.useState(!1),[rt,J]=Ie.useState(new Set),[X,de]=Ie.useState({}),Ne=Ie.useRef(null),P=Ie.useRef(null);Ie.useEffect(()=>{document.title="NammAI - Your All-Rounder AI Assistant"},[]),Ie.useEffect(()=>{const re=ye=>{P.current&&!P.current.contains(ye.target)&&We(!1)};return document.addEventListener("mousedown",re),()=>document.removeEventListener("mousedown",re)},[]);const W=Ie.useMemo(()=>{const re="PLACEHOLDER_API_KEY";return new XD({apiKey:re})},[]),ie=Ie.useCallback((re,...ye)=>{const he=ba[oe][re]||ba.english[re];return typeof he=="function"?he(...ye):String(he)},[oe]),Z=n.find(re=>re.id===a),Ce=Z?Z.messages:[],Le=Z?Z.geminiChat:null,be=Ie.useCallback(async()=>{if(!(!i||!W))try{const re=kE(_a,"chats"),ye=PU(re,kU("userId","==",i.uid),VU("createdAt","desc")),he=await zU(ye),yt=[];he.forEach(Kt=>{const un=Kt.data(),cn=W.chats.create({model:"gemini-2.5-flash",config:{systemInstruction:Bm(un.language)}});yt.push({id:Kt.id,title:un.title,messages:un.messages,geminiChat:cn,language:un.language,userId:un.userId})}),s(yt),yt.length>0&&(u(yt[0].id),pe(yt[0].language))}catch(re){console.error("Error loading chats:",re)}},[i,W]),Rt=Ie.useCallback(async re=>{if(i)try{const ye={userId:i.uid,title:re.title,messages:re.messages,language:re.language,createdAt:new Date,updatedAt:new Date};if(re.id&&re.id.length>13){const he=Su(_a,"chats",re.id);await BU(he,{...ye,updatedAt:new Date})}else{const he=await qU(kE(_a,"chats"),ye);s(yt=>yt.map(Kt=>Kt.id===re.id?{...Kt,id:he.id}:Kt)),a===re.id&&u(he.id)}}catch(ye){console.error("Error saving chat:",ye)}},[i,a]),ut=Ie.useCallback(async re=>{if(i)try{if(re.length>13){const ye=Su(_a,"chats",re);await FU(ye)}if(s(ye=>ye.filter(he=>he.id!==re)),a===re){const ye=n.filter(he=>he.id!==re);ye.length>0?u(ye[0].id):yn()}_n("Chat deleted successfully")}catch(ye){console.error("Error deleting chat:",ye),_n("Error deleting chat")}},[i,a,n]),yn=Ie.useCallback(()=>{if(!W){S(ie("apiKeyError"));return}try{const re=W.chats.create({model:"gemini-2.5-flash",config:{systemInstruction:Bm(oe)}}),ye=Date.now().toString(),he={id:ye,title:ie("newChatTitle"),messages:[BE(oe)],geminiChat:re,language:oe,userId:i==null?void 0:i.uid};s(yt=>[he,...yt]),u(ye),V(null),S(null),J(new Set),de({})}catch(re){console.error(re),S(ie("apiKeyError"))}},[W,oe,ie,i]);Ie.useEffect(()=>{i&&W?be():i||(s([]),u(null))},[i,W,be]),Ie.useEffect(()=>{n.length===0&&i&&W&&yn()},[n.length,yn,i,W]),Ie.useEffect(()=>{Z&&i&&Rt(Z)},[Z==null?void 0:Z.messages,Rt,i,Z]);const pi=Ie.useCallback(re=>{u(re);const ye=n.find(yt=>yt.id===re);ye&&pe(ye.language),J(new Set),de({});const he=ye==null?void 0:ye.messages.slice().reverse().find(yt=>yt.sender===io.AI);if(he!=null&&he.text.includes("```")){const yt=/```html\n([\s\S]*?)```/,Kt=he.text.match(yt);Kt&&Kt[1]?V(Kt[1]):V(null)}else V(null)},[n]),Rn=re=>{pe(re),Z&&Z.messages.length===1&&s(ye=>ye.map(he=>{if(he.id===a){const yt=W.chats.create({model:"gemini-2.5-flash",config:{systemInstruction:Bm(re)}});return{...he,language:re,messages:[BE(re)],geminiChat:yt}}return he}))},gi=re=>{s(ye=>ye.map(he=>he.id===a?{...he,messages:[...he.messages,re]}:he))},yi=re=>{s(ye=>ye.map(he=>{if(he.id===a){const Kt={...he.messages[he.messages.length-1],...re};return{...he,messages:[...he.messages.slice(0,-1),Kt]}}return he}))},_n=re=>{Y(re),le(!0)},As=Ie.useCallback(re=>{J(ye=>{const he=new Set(ye);return he.has(re)?he.delete(re):he.add(re),he})},[]),Eo=Ie.useCallback(re=>{de(ye=>({...ye,[re]:!ye[re]}))},[]),xn=Ie.useCallback(async(re,ye)=>{if(!re.trim()&&!ye||!Le||!Z||!W)return;let he=re.trim();if(f==="slides"&&he?he=ie("slidesPrompt",he):f==="code"&&he?he=`Please write ${he} code with proper explanation and best practices.`:ye&&!he&&(he=ie("imageAnalysisPrompt")),!he)return;const yt={id:Date.now(),sender:io.USER,text:re.trim()},Kt=[...Z.messages,yt];let un=Z.title;Z.messages.length<=1&&(un=re.trim().substring(0,30)+(re.trim().length>30?"...":"")),s(cn=>cn.map(vn=>vn.id===a?{...vn,messages:Kt,title:un}:vn)),v(!0),V(null);try{const cn=[{text:he}];ye&&cn.push({inlineData:{mimeType:ye.mimeType,data:ye.data}});const vn=await Le.sendMessageStream({message:cn});let Tn=!0,ri="";const Hi=Date.now()+1;gi({id:Hi,sender:io.AI,text:"",isTyping:!0});for await(const Ki of vn){const si=Ki.text;ri+=si,Tn&&(v(!1),Tn=!1),yi({text:ri,isTyping:!1})}if(Tn&&(v(!1),yi({isTyping:!1,text:"..."})),ri){const Ki=/```html\n([\s\S]*?)```/,si=ri.match(Ki);si&&si[1]&&V(si[1])}}catch(cn){console.error("Error sending message to AI:",cn),v(!1);const vn={id:Date.now(),sender:io.AI,text:ie("apiError")};gi(vn)}finally{y("chat")}},[Le,Z,a,f,W,ie]),Ya=Ie.useCallback(()=>{if(!R){_n(ie("publishError"));return}const ye=`https://f-studio-pub-${Math.random().toString(36).substring(2,10)}.preview.app`;_n(ie("publishSuccess",ye))},[R,ie]),br=Ie.useCallback(async()=>{try{await t(),s([]),u(null),We(!1),_n("Signed out successfully")}catch(re){console.error("Error signing out:",re),_n("Error signing out")}},[t]),ii=(()=>{const re=fe?22:0,ye=window.innerWidth>=1024?0:O?33:0,he=100-re-ye;return{sidebar:re,chat:he,preview:ye}})();return e?N.jsx("div",{className:"min-h-screen bg-zinc-900 flex items-center justify-center",children:N.jsx("div",{className:"text-zinc-300",children:"Loading..."})}):i?N.jsxs("div",{className:"h-screen bg-zinc-900 text-white flex flex-col overflow-hidden",children:[N.jsxs("div",{className:"lg:hidden bg-zinc-800 border-b border-zinc-700 px-4 py-3 flex items-center justify-between",children:[N.jsxs("div",{className:"flex items-center gap-3",children:[!fe&&N.jsx("button",{onClick:()=>Te(!0),className:"p-2 text-zinc-400 hover:text-zinc-100 hover:bg-zinc-700 rounded-lg transition-colors",children:""}),N.jsxs("div",{className:"flex items-center gap-2",children:[N.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center font-bold text-sm",children:"N"}),N.jsx("h1",{className:"text-lg font-semibold",children:"NammAI"})]})]}),N.jsxs("div",{className:"flex items-center gap-2",children:[N.jsxs("div",{className:"flex bg-zinc-700 rounded-lg p-0.5",children:[N.jsx("button",{onClick:()=>Rn("kannada"),className:`px-2 py-1 text-xs rounded transition-colors ${oe==="kannada"?"bg-white text-zinc-900":"text-zinc-300 hover:text-white"}`,children:"Kanglish"}),N.jsx("button",{onClick:()=>Rn("english"),className:`px-2 py-1 text-xs rounded transition-colors ${oe==="english"?"bg-white text-zinc-900":"text-zinc-300 hover:text-white"}`,children:"English"})]}),N.jsxs("div",{className:"relative",ref:P,children:[N.jsx("button",{onClick:()=>We(!D),className:"flex items-center gap-2 p-1 rounded-lg hover:bg-zinc-700 transition-colors",children:N.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center font-bold text-sm",children:((Co=i==null?void 0:i.displayName)==null?void 0:Co.charAt(0))||((Gi=i==null?void 0:i.email)==null?void 0:Gi.charAt(0))||"U"})}),D&&N.jsxs("div",{className:"absolute right-0 top-full mt-2 w-64 bg-zinc-800 border border-zinc-700 rounded-lg shadow-xl z-50 py-2",children:[N.jsxs("div",{className:"px-4 py-2 border-b border-zinc-700",children:[N.jsx("p",{className:"font-medium text-white",children:(i==null?void 0:i.displayName)||"User"}),N.jsx("p",{className:"text-sm text-zinc-400",children:i==null?void 0:i.email})]}),N.jsx("button",{onClick:br,className:"w-full px-4 py-2 text-left text-zinc-300 hover:bg-zinc-700 hover:text-white transition-colors",children:"Sign Out"})]})]}),R&&N.jsx("button",{onClick:()=>b(re=>!re),className:`p-2 rounded-lg transition-colors ${O?"bg-purple-600 text-white":"text-zinc-400 hover:text-zinc-100 hover:bg-zinc-700"}`,title:O?"Hide Preview":"Show Preview",children:""})]})]}),N.jsxs("div",{className:"hidden lg:flex bg-zinc-800 border-b border-zinc-700 px-6 py-4 items-center justify-between",children:[N.jsxs("div",{className:"flex items-center gap-3",children:[N.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center font-bold",children:"N"}),N.jsx("h1",{className:"text-xl font-bold",children:"NammAI"})]}),N.jsxs("div",{className:"flex items-center gap-4",children:[N.jsxs("div",{className:"flex bg-zinc-700 rounded-lg p-1",children:[N.jsx("button",{onClick:()=>Rn("kannada"),className:`px-3 py-1.5 text-sm rounded transition-colors font-medium ${oe==="kannada"?"bg-white text-zinc-900":"text-zinc-300 hover:text-white"}`,children:"Kanglish"}),N.jsx("button",{onClick:()=>Rn("english"),className:`px-3 py-1.5 text-sm rounded transition-colors font-medium ${oe==="english"?"bg-white text-zinc-900":"text-zinc-300 hover:text-white"}`,children:"English"})]}),N.jsxs("div",{className:"relative",ref:P,children:[N.jsxs("button",{onClick:()=>We(!D),className:"flex items-center gap-3 p-2 rounded-lg hover:bg-zinc-700 transition-colors",children:[N.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center font-bold",children:((Nr=i==null?void 0:i.displayName)==null?void 0:Nr.charAt(0))||((ws=i==null?void 0:i.email)==null?void 0:ws.charAt(0))||"U"}),N.jsx("span",{className:"text-zinc-300",children:(i==null?void 0:i.displayName)||((gt=i==null?void 0:i.email)==null?void 0:gt.split("@")[0])||"User"})]}),D&&N.jsxs("div",{className:"absolute right-0 top-full mt-2 w-64 bg-zinc-800 border border-zinc-700 rounded-lg shadow-xl z-50 py-2",children:[N.jsxs("div",{className:"px-4 py-2 border-b border-zinc-700",children:[N.jsx("p",{className:"font-medium text-white",children:(i==null?void 0:i.displayName)||"User"}),N.jsx("p",{className:"text-sm text-zinc-400",children:i==null?void 0:i.email})]}),N.jsx("button",{onClick:br,className:"w-full px-4 py-2 text-left text-zinc-300 hover:bg-zinc-700 hover:text-white transition-colors",children:"Sign Out"})]})]})]})]}),N.jsxs("div",{className:"flex-1 flex overflow-hidden",ref:Ne,children:[fe&&N.jsxs(N.Fragment,{children:[window.innerWidth<1024&&N.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40",onClick:()=>Te(!1)}),N.jsx("div",{className:`${window.innerWidth<1024?"fixed left-0 top-0 h-full z-50":"relative"} bg-zinc-800 border-r border-zinc-700 flex flex-col overflow-hidden`,style:{width:window.innerWidth>=1024?`${ii.sidebar}%`:"288px"},children:N.jsx(hI,{chatHistory:n,activeChatId:a,onSelectChat:pi,onNewChat:yn,onDeleteChat:ut,onToggleSidebar:()=>Te(re=>!re),t:ie,isMobile:window.innerWidth<1024})})]}),N.jsxs("div",{className:"flex-1 flex flex-col bg-zinc-800 relative overflow-hidden",style:{width:window.innerWidth>=1024?`${ii.chat}%`:"100%"},children:[N.jsx("div",{className:"hidden lg:flex bg-zinc-800 border-b border-zinc-700 px-4 py-3 items-center justify-between",children:N.jsxs("div",{className:"flex items-center gap-3",children:[!fe&&N.jsx("button",{onClick:()=>Te(!0),className:"p-2 text-zinc-400 hover:text-zinc-100 hover:bg-zinc-700 rounded-lg transition-colors flex-shrink-0",title:"Show chats",children:""}),N.jsx("h2",{className:"text-lg font-semibold text-zinc-100 truncate",children:(Z==null?void 0:Z.title)||"New Chat"})]})}),A?N.jsx("div",{className:"flex-1 flex items-center justify-center p-4",children:N.jsx("div",{className:"text-red-400 text-center",children:N.jsxs("p",{className:"font-semibold",children:[ie("errorLabel"),": ",A]})})}):N.jsx(mI,{messages:Ce,onSendMessage:xn,isAiTyping:g,generationMode:f,setGenerationMode:y,onShowToast:_n,t:ie,isMobile:window.innerWidth<1024,expandedCodeBlocks:rt,onToggleCodeBlock:As,showCodePreview:X,onToggleCodePreview:Eo,previewHtml:R,setPreviewHtml:V,hideProfilePhotos:!0})]}),O&&window.innerWidth<1024&&N.jsxs("div",{className:"bg-zinc-900 border-l border-zinc-700 flex flex-col overflow-hidden",style:{width:window.innerWidth>=1024?`${ii.preview}%`:void 0},children:[window.innerWidth<1024&&N.jsx("button",{onClick:()=>b(!1),className:"absolute top-4 right-4 p-2 text-zinc-400 hover:text-zinc-100 bg-zinc-700 rounded-full transition-colors shadow-lg z-10","aria-label":"Close preview",children:""}),N.jsx(n2,{htmlContent:R,onPublish:Ya,t:ie})]})]}),N.jsx(i2,{message:H,isVisible:ce,onClose:()=>le(!1),t:ie})]}):N.jsx(QU,{})},JU=()=>N.jsx($U,{children:N.jsx(WU,{})}),MS=document.getElementById("root");if(!MS)throw new Error("Could not find root element to mount to");const XU=dI.createRoot(MS);XU.render(N.jsx(qE.StrictMode,{children:N.jsx(JU,{})}));
